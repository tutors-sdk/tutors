<script lang="ts">
  import { popup } from "@skeletonlabs/skeleton";
  import { Avatar } from "@skeletonlabs/skeleton";
  import Icon from "@iconify/svelte";
  import { PUBLIC_ANON_MODE } from "$env/static/public";

  interface Props {
    redirect?: string;
  }
  let { redirect = "" }: Props = $props();
</script>

<button use:popup={{ event: "click", target: "avatar" }}>
  <div class="relative inline-block">
    <Avatar width="w-10" src="/tutors-profile.png" alt="Anonymous Tutors Profile" />
  </div>
</button>

<nav class="card-body card list-nav w-56 space-y-4 p-4 shadow-lg" data-popup="avatar">
  <ul>
    {#if PUBLIC_ANON_MODE !== "TRUE"}
      <li>
        <a href="/auth{redirect}">
          <Icon icon="mdi:github" height="25" />
          <span class="ml-2 text-base">Connect</span>
        </a>
      </li>
      <hr />
    {/if}
    <li>
      <a href="/">
        <Icon icon="fluent:home-24-filled" color="rgba(var(--color-primary-500))" height="20" />
        <div class="ml-2">Home</div>
      </a>
    </li>
  </ul>
</nav>
