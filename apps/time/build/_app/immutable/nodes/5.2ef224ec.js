var dI=Object.defineProperty;var hI=(r,e,t)=>e in r?dI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Me=(r,e,t)=>(hI(r,typeof e!="symbol"?e+"":e,t),t);import{c as ow,b as uI,w as pI,d as $m,e as iC}from"../chunks/stores.a3126324.js";import{l as fI,m as nx,e as jT,d as zT,h as $T,j as KT,i as gI,g as mI,I as YT,n as ox,s as mc,u as vc,p as vI,q as Op,t as J0,v as rx,w as Q0,x as CI,y as yI,N as SI}from"../chunks/NavBar.74c12207.js";import{Z as wI,S as fd,i as gd,s as md,C as sC,k as tt,a as gi,l as it,m as at,h as de,c as mi,n as Ce,b as ze,D as bt,E as $s,F as nC,G as oC,H as rC,g as Ye,v as Yf,d as lt,f as Xf,_ as XT,I as qT,$ as lh,J as of,K as av,L as ta,a0 as bI,a1 as ax,a2 as EI,a3 as lx,a4 as ch,w as Ps,R as cr,o as qf,q as Ra,y as vi,r as Ta,z as Ci,A as yi,B as Si,p as lv,N as xI,V as RI,P as cx,a5 as Fc,e as dx,a6 as Nc,a7 as TI}from"../chunks/index.cffe94cb.js";import{w as DI}from"../chunks/index.385026c9.js";import"../chunks/paths.29834d61.js";function OI(r,{delay:e=0,duration:t=400,easing:i=wI}={}){const s=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:i,css:n=>`opacity: ${n*s}`}}const AI=r=>({}),hx=r=>({});function ux(r){let e,t,i;const s=r[17].panel,n=sC(s,r,r[16],hx);return{c(){e=tt("div"),n&&n.c(),this.h()},l(o){e=it(o,"DIV",{class:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var a=at(e);n&&n.l(a),a.forEach(de),this.h()},h(){Ce(e,"class",t="tab-panel "+r[2]),Ce(e,"role","tabpanel"),Ce(e,"aria-labelledby",r[1]),Ce(e,"tabindex","0")},m(o,a){ze(o,e,a),n&&n.m(e,null),i=!0},p(o,a){n&&n.p&&(!i||a&65536)&&nC(n,s,o,o[16],i?rC(s,o[16],a,AI):oC(o[16]),hx),(!i||a&4&&t!==(t="tab-panel "+o[2]))&&Ce(e,"class",t),(!i||a&2)&&Ce(e,"aria-labelledby",o[1])},i(o){i||(Ye(n,o),i=!0)},o(o){lt(n,o),i=!1},d(o){o&&de(e),n&&n.d(o)}}}function PI(r){let e,t,i,s,n,o,a,l;const c=r[17].default,d=sC(c,r,r[16],null);let h=r[5].panel&&ux(r);return{c(){e=tt("div"),t=tt("div"),d&&d.c(),s=gi(),h&&h.c(),this.h()},l(u){e=it(u,"DIV",{class:!0,"data-testid":!0});var p=at(e);t=it(p,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var f=at(t);d&&d.l(f),f.forEach(de),s=mi(p),h&&h.l(p),p.forEach(de),this.h()},h(){Ce(t,"class",i="tab-list "+r[3]),Ce(t,"role","tablist"),Ce(t,"aria-labelledby",r[0]),Ce(e,"class",n="tab-group "+r[4]),Ce(e,"data-testid","tab-group")},m(u,p){ze(u,e,p),bt(e,t),d&&d.m(t,null),bt(e,s),h&&h.m(e,null),o=!0,a||(l=[$s(e,"click",r[18]),$s(e,"keypress",r[19]),$s(e,"keydown",r[20]),$s(e,"keyup",r[21])],a=!0)},p(u,[p]){d&&d.p&&(!o||p&65536)&&nC(d,c,u,u[16],o?rC(c,u[16],p,null):oC(u[16]),null),(!o||p&8&&i!==(i="tab-list "+u[3]))&&Ce(t,"class",i),(!o||p&1)&&Ce(t,"aria-labelledby",u[0]),u[5].panel?h?(h.p(u,p),p&32&&Ye(h,1)):(h=ux(u),h.c(),Ye(h,1),h.m(e,null)):h&&(Yf(),lt(h,1,1,()=>{h=null}),Xf()),(!o||p&16&&n!==(n="tab-group "+u[4]))&&Ce(e,"class",n)},i(u){o||(Ye(d,u),Ye(h),o=!0)},o(u){lt(d,u),lt(h),o=!1},d(u){u&&de(e),d&&d.d(u),h&&h.d(),a=!1,XT(l)}}}const MI="space-y-4",_I="flex overflow-x-auto hide-scrollbar",II="";function LI(r,e,t){let i,s,n,{$$slots:o={},$$scope:a}=e;const l=qT(o);let{justify:c="justify-start"}=e,{border:d="border-b border-surface-400-500-token"}=e,{active:h="border-b-2 border-surface-900-50-token"}=e,{hover:u="hover:variant-soft"}=e,{flex:p="flex-none"}=e,{padding:f="px-4 py-2"}=e,{rounded:g="rounded-tl-container-token rounded-tr-container-token"}=e,{spacing:m="space-y-1"}=e,{regionList:v=""}=e,{regionPanel:C=""}=e,{labelledby:y=""}=e,{panel:R=""}=e;lh("active",h),lh("hover",u),lh("flex",p),lh("padding",f),lh("rounded",g),lh("spacing",m);function b(M){ta.call(this,r,M)}function w(M){ta.call(this,r,M)}function x(M){ta.call(this,r,M)}function O(M){ta.call(this,r,M)}return r.$$set=M=>{t(22,e=of(of({},e),av(M))),"justify"in M&&t(6,c=M.justify),"border"in M&&t(7,d=M.border),"active"in M&&t(8,h=M.active),"hover"in M&&t(9,u=M.hover),"flex"in M&&t(10,p=M.flex),"padding"in M&&t(11,f=M.padding),"rounded"in M&&t(12,g=M.rounded),"spacing"in M&&t(13,m=M.spacing),"regionList"in M&&t(14,v=M.regionList),"regionPanel"in M&&t(15,C=M.regionPanel),"labelledby"in M&&t(0,y=M.labelledby),"panel"in M&&t(1,R=M.panel),"$$scope"in M&&t(16,a=M.$$scope)},r.$$.update=()=>{t(4,i=`${MI} ${e.class??""}`),r.$$.dirty&16576&&t(3,s=`${_I} ${c} ${d} ${v}`),r.$$.dirty&32768&&t(2,n=`${II} ${C}`)},e=av(e),[y,R,n,s,i,l,c,d,h,u,p,f,g,m,v,C,a,o,b,w,x,O]}class FI extends fd{constructor(e){super(),gd(this,e,LI,PI,md,{justify:6,border:7,active:8,hover:9,flex:10,padding:11,rounded:12,spacing:13,regionList:14,regionPanel:15,labelledby:0,panel:1})}}const NI=r=>({}),px=r=>({});function fx(r){let e,t;const i=r[22].lead,s=sC(i,r,r[21],px);return{c(){e=tt("div"),s&&s.c(),this.h()},l(n){e=it(n,"DIV",{class:!0});var o=at(e);s&&s.l(o),o.forEach(de),this.h()},h(){Ce(e,"class","tab-lead")},m(n,o){ze(n,e,o),s&&s.m(e,null),t=!0},p(n,o){s&&s.p&&(!t||o[0]&2097152)&&nC(s,i,n,n[21],t?rC(i,n[21],o,NI):oC(n[21]),px)},i(n){t||(Ye(s,n),t=!0)},o(n){lt(s,n),t=!1},d(n){n&&de(e),s&&s.d(n)}}}function GI(r){let e,t,i,s,n,o,a,l,c,d,h,u,p,f,g,m=[{type:"radio"},{name:r[1]},{__value:r[2]},r[11](),{tabindex:"-1"}],v={};for(let b=0;b<m.length;b+=1)v=of(v,m[b]);let C=r[12].lead&&fx(r);const y=r[22].default,R=sC(y,r,r[21],null);return p=bI(r[30][0]),{c(){e=tt("label"),t=tt("div"),i=tt("div"),s=tt("input"),n=gi(),o=tt("div"),C&&C.c(),a=gi(),l=tt("div"),R&&R.c(),this.h()},l(b){e=it(b,"LABEL",{class:!0,title:!0});var w=at(e);t=it(w,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0});var x=at(t);i=it(x,"DIV",{class:!0});var O=at(i);s=it(O,"INPUT",{type:!0,name:!0,tabindex:!0}),O.forEach(de),n=mi(x),o=it(x,"DIV",{class:!0});var M=at(o);C&&C.l(M),a=mi(M),l=it(M,"DIV",{class:!0});var N=at(l);R&&R.l(N),N.forEach(de),M.forEach(de),x.forEach(de),w.forEach(de),this.h()},h(){ax(s,v),Ce(i,"class","h-0 w-0 overflow-hidden"),Ce(l,"class","tab-label"),Ce(o,"class",c="tab-interface "+r[8]),Ce(t,"class",d="tab "+r[7]),Ce(t,"data-testid","tab"),Ce(t,"role","tab"),Ce(t,"aria-controls",r[4]),Ce(t,"aria-selected",r[5]),Ce(t,"tabindex",h=r[5]?0:-1),Ce(e,"class",r[9]),Ce(e,"title",r[3]),p.p(s)},m(b,w){ze(b,e,w),bt(e,t),bt(t,i),bt(i,s),s.autofocus&&s.focus(),r[28](s),s.checked=s.__value===r[0],bt(t,n),bt(t,o),C&&C.m(o,null),bt(o,a),bt(o,l),R&&R.m(l,null),u=!0,f||(g=[$s(s,"change",r[29]),$s(s,"click",r[26]),$s(s,"change",r[27]),$s(t,"keydown",r[10]),$s(t,"keydown",r[23]),$s(t,"keyup",r[24]),$s(t,"keypress",r[25])],f=!0)},p(b,w){ax(s,v=EI(m,[{type:"radio"},(!u||w[0]&2)&&{name:b[1]},(!u||w[0]&4)&&{__value:b[2]},b[11](),{tabindex:"-1"}])),w[0]&1&&(s.checked=s.__value===b[0]),b[12].lead?C?(C.p(b,w),w[0]&4096&&Ye(C,1)):(C=fx(b),C.c(),Ye(C,1),C.m(o,a)):C&&(Yf(),lt(C,1,1,()=>{C=null}),Xf()),R&&R.p&&(!u||w[0]&2097152)&&nC(R,y,b,b[21],u?rC(y,b[21],w,null):oC(b[21]),null),(!u||w[0]&256&&c!==(c="tab-interface "+b[8]))&&Ce(o,"class",c),(!u||w[0]&128&&d!==(d="tab "+b[7]))&&Ce(t,"class",d),(!u||w[0]&16)&&Ce(t,"aria-controls",b[4]),(!u||w[0]&32)&&Ce(t,"aria-selected",b[5]),(!u||w[0]&32&&h!==(h=b[5]?0:-1))&&Ce(t,"tabindex",h),(!u||w[0]&512)&&Ce(e,"class",b[9]),(!u||w[0]&8)&&Ce(e,"title",b[3])},i(b){u||(Ye(C),Ye(R,b),u=!0)},o(b){lt(C),lt(R,b),u=!1},d(b){b&&de(e),r[28](null),C&&C.d(),R&&R.d(b),p.r(),f=!1,XT(g)}}}const kI="text-center cursor-pointer transition-colors duration-100",VI="";function HI(r,e,t){let i,s,n,o,a;const l=["group","name","value","title","controls","regionTab","active","hover","flex","padding","rounded","spacing"];let c=lx(e,l),{$$slots:d={},$$scope:h}=e;const u=qT(d);let{group:p}=e,{name:f}=e,{value:g}=e,{title:m=""}=e,{controls:v=""}=e,{regionTab:C=""}=e,{active:y=ch("active")}=e,{hover:R=ch("hover")}=e,{flex:b=ch("flex")}=e,{padding:w=ch("padding")}=e,{rounded:x=ch("rounded")}=e,{spacing:O=ch("spacing")}=e,M;function N(K){if(["Enter","Space"].includes(K.code))K.preventDefault(),M.click();else if(K.code==="ArrowRight"){const D=M.closest(".tab-list");if(!D)return;const T=Array.from(D.querySelectorAll(".tab")),P=M.closest(".tab");if(!P)return;const F=T.indexOf(P),L=F+1>=T.length?0:F+1,k=T[L],z=k==null?void 0:k.querySelector("input");k&&z&&(z.click(),k.focus())}else if(K.code==="ArrowLeft"){const D=M.closest(".tab-list");if(!D)return;const T=Array.from(D.querySelectorAll(".tab")),P=M.closest(".tab");if(!P)return;const F=T.indexOf(P),L=F-1<0?T.length-1:F-1,k=T[L],z=k==null?void 0:k.querySelector("input");k&&z&&(z.click(),k.focus())}}function V(){return delete c.class,c}const I=[[]];function H(K){ta.call(this,r,K)}function B(K){ta.call(this,r,K)}function X(K){ta.call(this,r,K)}function J(K){ta.call(this,r,K)}function Y(K){ta.call(this,r,K)}function ae(K){Ps[K?"unshift":"push"](()=>{M=K,t(6,M)})}function re(){p=this.__value,t(0,p)}return r.$$set=K=>{t(32,e=of(of({},e),av(K))),t(31,c=lx(e,l)),"group"in K&&t(0,p=K.group),"name"in K&&t(1,f=K.name),"value"in K&&t(2,g=K.value),"title"in K&&t(3,m=K.title),"controls"in K&&t(4,v=K.controls),"regionTab"in K&&t(13,C=K.regionTab),"active"in K&&t(14,y=K.active),"hover"in K&&t(15,R=K.hover),"flex"in K&&t(16,b=K.flex),"padding"in K&&t(17,w=K.padding),"rounded"in K&&t(18,x=K.rounded),"spacing"in K&&t(19,O=K.spacing),"$$scope"in K&&t(21,h=K.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&5&&t(5,i=g===p),r.$$.dirty[0]&49184&&t(20,s=i?y:R),t(9,n=`${kI} ${b} ${w} ${x} ${s} ${e.class??""}`),r.$$.dirty[0]&524288&&t(8,o=`${VI} ${O}`),r.$$.dirty[0]&8192&&t(7,a=`${C}`)},e=av(e),[p,f,g,m,v,i,M,a,o,n,N,V,u,C,y,R,b,w,x,O,s,h,d,H,B,X,J,Y,ae,re,I]}class Gc extends fd{constructor(e){super(),gd(this,e,HI,GI,md,{group:0,name:1,value:2,title:3,controls:4,regionTab:13,active:14,hover:15,flex:16,padding:17,rounded:18,spacing:19},null,[-1,-1])}}function ZT(r,e,t){var i,s,n,o,a;r.type==="archive"||r.type==="otherType"?r.route=(i=r.route)==null?void 0:i.replace("{{COURSEURL}}",t):r.route=(s=r.route)==null?void 0:s.replace("{{COURSEURL}}",e),r.img=(n=r.img)==null?void 0:n.replace("{{COURSEURL}}",t),r.video=(o=r.video)==null?void 0:o.replace("{{COURSEURL}}",e),r.pdf=(a=r.pdf)==null?void 0:a.replace("{{COURSEURL}}",t),r.los&&r.los.forEach(l=>{ZT(l,e,t)})}function JT(r){let e=[];return r.forEach(t=>{e.push(t),t.los&&(e=e.concat(JT(t.los)))}),e}function BI(r){const e=r.lastIndexOf("#");return e>=0?r.substring(e+1):r}function QT(r){for(const e of r.los)e.parentLo=r,e.los&&QT(e)}function eD(r,e){const t=[];for(const i of r)i.type===e&&t.push(i),(i.type==="unit"||i.type==="side")&&t.push(...eD(i.los,e));return t}function tD(r){const e=[];for(const t of r)t.video&&e.push(t),t.type==="unit"&&e.push(...tD(t.los));return e}function WI(r,e){const t=[];for(const i of e)t.push(...eD(i.los,r));return t}function UI(r){const e=[];for(const t of r)e.push(...tD(t.los));return e}function iD(r){const e=r.filter(t=>t.type==="unit");for(const t of e){const[i,s,n]=[t.los.filter(o=>o.type==="panelvideo"),t.los.filter(o=>o.type==="paneltalk"),t.los.filter(o=>o.type!=="unit"&&o.type!=="panelvideo"&&o.type!=="paneltalk")];t.los=[...i,...s,...n]}return e}function sD(r){var e;r.route&&r.route[0]==="#"&&(r.route="/"+r.route.slice(1)),r.video&&r.video[0]==="#"&&(r.video="/"+r.video.slice(1)),r.route.endsWith("md")&&r.video&&(r.route=r.video),(e=r.los)==null||e.forEach(sD)}class jI{constructor(e,t,i){Me(this,"course");Me(this,"lo");Me(this,"toc",[]);this.lo=e,this.course=i;const s=iD(this.lo.los),n=this.lo.los.filter(d=>d.type==="side"),o=this.lo.los.filter(d=>d.type==="panelvideo"),a=this.lo.los.filter(d=>d.type==="paneltalk"),l=this.lo.los.filter(d=>d.type==="panelnote"),c=this.lo.los.filter(d=>d.type!=="unit"&&d.type!=="panelvideo"&&d.type!=="paneltalk"&&d.type!=="panelnote"&&d.type!=="side");this.toc.push(...o,...a,...l,...s,...c,...n),sD(e),this.toc.forEach(d=>{d.parent=this,(d.type==="unit"||d.type==="side")&&d.los.forEach(h=>{h.parent=this})})}}class gx{constructor(e,t,i){Me(this,"url","");Me(this,"id","");Me(this,"lo");Me(this,"topics",[]);Me(this,"units");Me(this,"sideBar");Me(this,"standardLos");Me(this,"allLos");Me(this,"authLevel",0);Me(this,"topicIndex",new Map);Me(this,"hydratedLabs",new Map);Me(this,"walls",new Map);Me(this,"calendar");Me(this,"currentWeek",null);Me(this,"loIndex",new Map);Me(this,"companions",{show:!0,bar:[]});Me(this,"wallBar",{show:!0,bar:[]});var s,n;this.id=t,this.url=i,ZT(e,t,i),((s=e.properties)==null?void 0:s.auth)!==void 0&&(this.authLevel=e.properties.auth),QT(e),e.route=`/course/${t}`,this.lo=e,this.initCalendar(),(n=e.properties)!=null&&n.icon&&(e.icon=e.properties.icon),this.allLos=this.lo.los,this.lo.los=this.lo.los.filter(o=>o.hide!==!0),this.populate(),this.createCompanions(),this.createWallBar()}populate(){if(this.topics=this.lo.los.map(t=>{const i=new jI(t,this.url,this);return this.topicIndex.set(t.id,i),i}),JT(this.lo.los).forEach(t=>this.loIndex.set(t.route,t)),!this.areVideosHidden()){const t=UI(this.lo.los);t.forEach(i=>this.loIndex.set(i.video,i)),t.length>0&&this.walls.set("video",t)}["talk","note","lab","web","archive","github"].forEach(t=>this.addWall(t)),this.units=iD(this.lo.los),this.sideBar=this.lo.los.filter(t=>t.type==="side"),this.standardLos=this.lo.los.filter(t=>t.type!=="unit"&&t.type!=="panelvideo"&&t.type!=="paneltalk")}addWall(e){const t=WI(e,this.lo.los);t.length>0&&this.walls.set(e,t)}showAllLos(){this.lo.los=this.allLos,this.populate()}isPortfolio(){var e,t;return!!((t=(e=this==null?void 0:this.lo)==null?void 0:e.properties)!=null&&t.portfolio)}areVideosHidden(){var e,t;return!!((t=(e=this.lo)==null?void 0:e.properties)!=null&&t.hideVideos)&&this.lo.properties.hideVideos!=="false"}areLabStepsAutoNumbered(){let e=!1;return this.lo.properties.labStepsAutoNumber!==void 0&&(e=this.lo.properties.labStepsAutoNumber==!0),e}hasEnrollment(){var e;return((e=this==null?void 0:this.lo)==null?void 0:e.enrollment)!==void 0}hasWhiteList(){var t,i;const e=(i=(t=this.lo)==null?void 0:t.properties)==null?void 0:i.whitelist;return this.hasEnrollment()&&Number(e)===1}getEnrolledStudentIds(){return this.lo.enrollment}createCompanions(){const{properties:e}=this.lo;if([{key:"slack",icon:"slack",target:"_blank",tip:"Go to module Slack channel"},{key:"zoom",icon:"zoom",target:"_blank",tip:"Go to module Zoom meeting"},{key:"moodle",icon:"moodle",target:"_blank",tip:"Go to module Moodle page"},{key:"youtube",icon:"youtube",target:"_blank",tip:"Go to module YouTube channel"},{key:"teams",icon:"teams",target:"_blank",tip:"Go to module Teams meeting"}].forEach(i=>{const{key:s,icon:n,target:o,tip:a}=i;e[s]&&this.companions.bar.push({link:e[s],icon:n,target:o,tip:a})}),e.companions)for(const[i,s]of Object.entries(e.companions)){const n=s;fI(i,n.icon),this.companions.bar.push({link:n.link,icon:i,target:"_blank",tip:n.title})}this.companions.show=this.companions.bar.length>0}createWallBar(){this.isPortfolio()||(this.wallBar.bar=Array.from(this.walls.keys()).map(e=>this.createWallLink(e)),this.wallBar.show=this.wallBar.bar.length>0)}createWallLink(e){return{link:`/wall/${e}/${this.url}`,icon:e,tip:`${e}s`,target:""}}initCalendar(){const e={title:"unknown",weeks:[]};this.calendar=e;try{if(this.lo.calendar){const t=this.lo.calendar;e.title=t.title,e.weeks=t.weeks.map(s=>({date:Object.keys(s)[0],title:s[Object.keys(s)[0]].title,type:s[Object.keys(s)[0]].type,dateObj:new Date(Object.keys(s)[0])}));const i=Date.now();this.currentWeek=e.weeks.find((s,n)=>{var o;return i>Date.parse(s.date)&&i<=Date.parse((o=e.weeks[n+1])==null?void 0:o.date)})}}catch{console.log("Error loading calendar")}}}function mx(r){return(r==null?void 0:r.length)>16?r.substring(0,15)+"...":r}class zI{constructor(e,t,i){Me(this,"course");Me(this,"lo",null);Me(this,"url","");Me(this,"objectivesHtml","");Me(this,"currentChapterShortTitle","");Me(this,"currentChapterTitle","");Me(this,"navbarHtml","");Me(this,"horizontalNavbarHtml","");Me(this,"content","");Me(this,"chaptersHtml",new Map);Me(this,"chaptersTitles",new Map);Me(this,"steps",[]);Me(this,"autoNumber",!1);Me(this,"vertical",!0);this.course=e,this.autoNumber=e.areLabStepsAutoNumbered(),this.url=i,this.lo=t,this.convertMdToHtml()}convertMdToHtml(){const e=this.url.replace(`/lab/${this.course.id}`,this.course.url);this.objectivesHtml=nx(this.lo.los[0].contentMd,e),this.chaptersHtml=new Map(this.lo.los.map(t=>[encodeURI(t.shortTitle),nx(t.contentMd,e)])),this.chaptersTitles=new Map(this.lo.los.map(t=>[t.shortTitle,BI(t.title)])),this.steps=Array.from(this.chaptersHtml.keys())}refreshNav(){const e=this.autoNumber?this.lo.shortTitle+": ":"";this.navbarHtml=this.lo.los.map(i=>{const s=encodeURI(i.shortTitle)===this.currentChapterShortTitle?"font-bold bg-surface-200 dark:bg-surface-600 pl-4":"",n=this.chaptersTitles.get(i.shortTitle);return`<a href="${this.url}/${encodeURI(i.shortTitle)}"><li class="py-2 px-4 ${s} !text-black dark:!text-white">${e}${n}</li></a>`}).join("");const t=this.lo.los.findIndex(i=>encodeURI(i.shortTitle)===this.currentChapterShortTitle);if(t!==-1){const i=this.lo.los[t-1],s=i?mx(this.chaptersTitles.get(i.shortTitle)):"";this.horizontalNavbarHtml=i?`<a class="btn btn-sm capitalize" href="${this.url}/${encodeURI(i.shortTitle)}"> <span aria-hidden="true">&larr;</span>&nbsp; ${e}${s} </a>`:"";const n=this.lo.los[t+1],o=n?mx(this.chaptersTitles.get(n.shortTitle)):"";this.horizontalNavbarHtml+=n?`<a class="ml-auto btn btn-sm capitalize" style="margin-left: auto" href="${this.url}/${encodeURI(n.shortTitle)}"> ${e}${o} &nbsp;<span aria-hidden="true">&rarr;</span></a>`:""}else this.horizontalNavbarHtml=""}setCurrentChapter(e){this.steps.includes(e)&&(this.currentChapterShortTitle=e,this.currentChapterTitle=this.chaptersTitles.get(e),this.content=this.chaptersHtml.get(e),this.refreshNav())}setFirstPageActive(){const e=encodeURI(this.lo.los[0].shortTitle);this.setCurrentChapter(e)}setActivePage(e){this.setCurrentChapter(e)}nextStep(){const e=this.steps.indexOf(this.currentChapterShortTitle);return e<this.steps.length-1?this.steps[e+1]:""}prevStep(){const e=this.steps.indexOf(this.currentChapterShortTitle);return e>0?this.steps[e-1]:""}}const $I={course:gx,courses:new Map,courseUrl:"",async getOrLoadCourse(r){let e=this.courses.get(r),t=r;if(!e){!r.includes(".netlify.app")&&!r.includes(".tutors.dev")?t=`${r}.netlify.app`:r=r.split(".")[0];try{const s=await(await fetch(`https://${t}/tutors.json`)).json();e=new gx(s,r,t),this.courses.set(r,e)}catch(i){throw console.log(i),i}}return e},async readCourse(r){const e=await this.getOrLoadCourse(r);return ow.set(e),uI.set(e.url),pI.set(e==null?void 0:e.currentWeek),this.course=e,e},async readTopic(r,e){const i=(await this.readCourse(r)).topicIndex.get(e);return $m.set(i.lo),i},async readLab(r,e){const t=await this.readCourse(r);e.substring(e.lastIndexOf("/")+1).startsWith("book")||(e=e.slice(0,e.lastIndexOf("/")));const s=t.loIndex.get(e),n=t.hydratedLabs.get(e)||new zI(t,s,e);return t.hydratedLabs.set(e,n),$m.set(n.lo),n},async readWall(r,e){return(await this.readCourse(r)).walls.get(e)},async readLo(r,e){const i=(await this.readCourse(r)).loIndex.get(e);return $m.set(i),i}};class Yt{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class $e extends Yt{constructor(e=[],t=e.length*4){super();let i=e;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){const s=i.byteLength,n=[];for(let o=0;o<s;o+=1)n[o>>>2]|=i[o]<<24-o%4*8;this.words=n,this.sigBytes=s}else this.words=e,this.sigBytes=t}static random(e){const t=[],i=s=>{let n=s,o=987654321;const a=4294967295;return()=>{o=36969*(o&65535)+(o>>16)&a,n=18e3*(n&65535)+(n>>16)&a;let l=(o<<16)+n&a;return l/=4294967296,l+=.5,l*(Math.random()>.5?1:-1)}};for(let s=0,n;s<e;s+=4){const o=i((n||Math.random())*4294967296);n=o()*987654071,t.push(o()*4294967296|0)}return new $e(t,e)}toString(e=cv){return e.stringify(this)}concat(e){const t=this.words,i=e.words,s=this.sigBytes,n=e.sigBytes;if(this.clamp(),s%4)for(let o=0;o<n;o+=1){const a=i[o>>>2]>>>24-o%4*8&255;t[s+o>>>2]|=a<<24-(s+o)%4*8}else for(let o=0;o<n;o+=4)t[s+o>>>2]=i[o>>>2];return this.sigBytes+=n,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const cv={stringify(r){const{words:e,sigBytes:t}=r,i=[];for(let s=0;s<t;s+=1){const n=e[s>>>2]>>>24-s%4*8&255;i.push((n>>>4).toString(16)),i.push((n&15).toString(16))}return i.join("")},parse(r){const e=r.length,t=[];for(let i=0;i<e;i+=2)t[i>>>3]|=parseInt(r.substr(i,2),16)<<24-i%8*4;return new $e(t,e/2)}},Qy={stringify(r){const{words:e,sigBytes:t}=r,i=[];for(let s=0;s<t;s+=1){const n=e[s>>>2]>>>24-s%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse(r){const e=r.length,t=[];for(let i=0;i<e;i+=1)t[i>>>2]|=(r.charCodeAt(i)&255)<<24-i%4*8;return new $e(t,e)}},rw={stringify(r){try{return decodeURIComponent(escape(Qy.stringify(r)))}catch{throw new Error("Malformed UTF-8 data")}},parse(r){return Qy.parse(unescape(encodeURIComponent(r)))}};class aw extends Yt{constructor(){super(),this._minBufferSize=0}reset(){this._data=new $e,this._nDataBytes=0}_append(e){let t=e;typeof t=="string"&&(t=rw.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:i,blockSize:s}=this,n=i.words,o=i.sigBytes,a=s*4;let l=o/a;e?l=Math.ceil(l):l=Math.max((l|0)-this._minBufferSize,0);const c=l*s,d=Math.min(c*4,o);if(c){for(let h=0;h<c;h+=s)this._doProcessBlock(n,h);t=n.splice(0,c),i.sigBytes-=d}return new $e(t,d)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class li extends aw{constructor(e){super(),this.blockSize=512/32,this.cfg=Object.assign(new Yt,e),this.reset()}static _createHelper(e){return(t,i)=>new e(i).finalize(t)}static _createHmacHelper(e){return(t,i)=>new lw(e,i).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){return e&&this._append(e),this._doFinalize()}}class lw extends Yt{constructor(e,t){super();const i=new e;this._hasher=i;let s=t;typeof s=="string"&&(s=rw.parse(s));const n=i.blockSize,o=n*4;s.sigBytes>o&&(s=i.finalize(t)),s.clamp();const a=s.clone();this._oKey=a;const l=s.clone();this._iKey=l;const c=a.words,d=l.words;for(let h=0;h<n;h+=1)c[h]^=1549556828,d[h]^=909522486;a.sigBytes=o,l.sigBytes=o,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}}const KI=$e;class se extends Yt{constructor(e,t){super(),this.high=e,this.low=t}}class cw extends Yt{constructor(e=[],t=e.length*8){super(),this.words=e,this.sigBytes=t}toX32(){const e=this.words,t=e.length,i=[];for(let s=0;s<t;s+=1){const n=e[s];i.push(n.high),i.push(n.low)}return KI.create(i,this.sigBytes)}clone(){const e=super.clone.call(this);e.words=this.words.slice(0);const{words:t}=e,i=t.length;for(let s=0;s<i;s+=1)t[s]=t[s].clone();return e}}const YI=(r,e,t)=>{const i=[];let s=0;for(let n=0;n<e;n+=1)if(n%4){const o=t[r.charCodeAt(n-1)]<<n%4*2,a=t[r.charCodeAt(n)]>>>6-n%4*2,l=o|a;i[s>>>2]|=l<<24-s%4*8,s+=1}return $e.create(i,s)},eS={stringify(r){const{words:e,sigBytes:t}=r,i=this._map;r.clamp();const s=[];for(let o=0;o<t;o+=3){const a=e[o>>>2]>>>24-o%4*8&255,l=e[o+1>>>2]>>>24-(o+1)%4*8&255,c=e[o+2>>>2]>>>24-(o+2)%4*8&255,d=a<<16|l<<8|c;for(let h=0;h<4&&o+h*.75<t;h+=1)s.push(i.charAt(d>>>6*(3-h)&63))}const n=i.charAt(64);if(n)for(;s.length%4;)s.push(n);return s.join("")},parse(r){let e=r.length;const t=this._map;let i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let n=0;n<t.length;n+=1)i[t.charCodeAt(n)]=n}const s=t.charAt(64);if(s){const n=r.indexOf(s);n!==-1&&(e=n)}return YI(r,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},ue=[];for(let r=0;r<64;r+=1)ue[r]=Math.abs(Math.sin(r+1))*4294967296|0;const Zi=(r,e,t,i,s,n,o)=>{const a=r+(e&t|~e&i)+s+o;return(a<<n|a>>>32-n)+e},Ji=(r,e,t,i,s,n,o)=>{const a=r+(e&i|t&~i)+s+o;return(a<<n|a>>>32-n)+e},Qi=(r,e,t,i,s,n,o)=>{const a=r+(e^t^i)+s+o;return(a<<n|a>>>32-n)+e},es=(r,e,t,i,s,n,o)=>{const a=r+(t^(e|~i))+s+o;return(a<<n|a>>>32-n)+e};class aC extends li{_doReset(){this._hash=new $e([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(e,t){const i=e;for(let M=0;M<16;M+=1){const N=t+M,V=e[N];i[N]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}const s=this._hash.words,n=i[t+0],o=i[t+1],a=i[t+2],l=i[t+3],c=i[t+4],d=i[t+5],h=i[t+6],u=i[t+7],p=i[t+8],f=i[t+9],g=i[t+10],m=i[t+11],v=i[t+12],C=i[t+13],y=i[t+14],R=i[t+15];let b=s[0],w=s[1],x=s[2],O=s[3];b=Zi(b,w,x,O,n,7,ue[0]),O=Zi(O,b,w,x,o,12,ue[1]),x=Zi(x,O,b,w,a,17,ue[2]),w=Zi(w,x,O,b,l,22,ue[3]),b=Zi(b,w,x,O,c,7,ue[4]),O=Zi(O,b,w,x,d,12,ue[5]),x=Zi(x,O,b,w,h,17,ue[6]),w=Zi(w,x,O,b,u,22,ue[7]),b=Zi(b,w,x,O,p,7,ue[8]),O=Zi(O,b,w,x,f,12,ue[9]),x=Zi(x,O,b,w,g,17,ue[10]),w=Zi(w,x,O,b,m,22,ue[11]),b=Zi(b,w,x,O,v,7,ue[12]),O=Zi(O,b,w,x,C,12,ue[13]),x=Zi(x,O,b,w,y,17,ue[14]),w=Zi(w,x,O,b,R,22,ue[15]),b=Ji(b,w,x,O,o,5,ue[16]),O=Ji(O,b,w,x,h,9,ue[17]),x=Ji(x,O,b,w,m,14,ue[18]),w=Ji(w,x,O,b,n,20,ue[19]),b=Ji(b,w,x,O,d,5,ue[20]),O=Ji(O,b,w,x,g,9,ue[21]),x=Ji(x,O,b,w,R,14,ue[22]),w=Ji(w,x,O,b,c,20,ue[23]),b=Ji(b,w,x,O,f,5,ue[24]),O=Ji(O,b,w,x,y,9,ue[25]),x=Ji(x,O,b,w,l,14,ue[26]),w=Ji(w,x,O,b,p,20,ue[27]),b=Ji(b,w,x,O,C,5,ue[28]),O=Ji(O,b,w,x,a,9,ue[29]),x=Ji(x,O,b,w,u,14,ue[30]),w=Ji(w,x,O,b,v,20,ue[31]),b=Qi(b,w,x,O,d,4,ue[32]),O=Qi(O,b,w,x,p,11,ue[33]),x=Qi(x,O,b,w,m,16,ue[34]),w=Qi(w,x,O,b,y,23,ue[35]),b=Qi(b,w,x,O,o,4,ue[36]),O=Qi(O,b,w,x,c,11,ue[37]),x=Qi(x,O,b,w,u,16,ue[38]),w=Qi(w,x,O,b,g,23,ue[39]),b=Qi(b,w,x,O,C,4,ue[40]),O=Qi(O,b,w,x,n,11,ue[41]),x=Qi(x,O,b,w,l,16,ue[42]),w=Qi(w,x,O,b,h,23,ue[43]),b=Qi(b,w,x,O,f,4,ue[44]),O=Qi(O,b,w,x,v,11,ue[45]),x=Qi(x,O,b,w,R,16,ue[46]),w=Qi(w,x,O,b,a,23,ue[47]),b=es(b,w,x,O,n,6,ue[48]),O=es(O,b,w,x,u,10,ue[49]),x=es(x,O,b,w,y,15,ue[50]),w=es(w,x,O,b,d,21,ue[51]),b=es(b,w,x,O,v,6,ue[52]),O=es(O,b,w,x,l,10,ue[53]),x=es(x,O,b,w,g,15,ue[54]),w=es(w,x,O,b,o,21,ue[55]),b=es(b,w,x,O,p,6,ue[56]),O=es(O,b,w,x,R,10,ue[57]),x=es(x,O,b,w,h,15,ue[58]),w=es(w,x,O,b,C,21,ue[59]),b=es(b,w,x,O,c,6,ue[60]),O=es(O,b,w,x,m,10,ue[61]),x=es(x,O,b,w,a,15,ue[62]),w=es(w,x,O,b,f,21,ue[63]),s[0]=s[0]+b|0,s[1]=s[1]+w|0,s[2]=s[2]+x|0,s[3]=s[3]+O|0}_doFinalize(){const e=this._data,t=e.words,i=this._nDataBytes*8,s=e.sigBytes*8;t[s>>>5]|=128<<24-s%32;const n=Math.floor(i/4294967296),o=i;t[(s+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,t[(s+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();const a=this._hash,l=a.words;for(let c=0;c<4;c+=1){const d=l[c];l[c]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}return a}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const XI=li._createHelper(aC),qI=li._createHmacHelper(aC);class dw extends Yt{constructor(e){super(),this.cfg=Object.assign(new Yt,{keySize:128/32,hasher:aC,iterations:1},e)}compute(e,t){let i;const{cfg:s}=this,n=s.hasher.create(),o=$e.create(),a=o.words,{keySize:l,iterations:c}=s;for(;a.length<l;){i&&n.update(i),i=n.update(e).finalize(t),n.reset();for(let d=1;d<c;d+=1)i=n.finalize(i),n.reset();o.concat(i)}return o.sigBytes=l*4,o}}const ZI=(r,e,t)=>dw.create(t).compute(r,e);class vd extends aw{constructor(e,t,i){super(),this.cfg=Object.assign(new Yt,i),this._xformMode=e,this._key=t,this.reset()}static createEncryptor(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}static createDecryptor(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}static _createHelper(e){const t=i=>typeof i=="string"?hw:kc;return{encrypt(i,s,n){return t(s).encrypt(e,i,s,n)},decrypt(i,s,n){return t(s).decrypt(e,i,s,n)}}}reset(){super.reset.call(this),this._doReset()}process(e){return this._append(e),this._process()}finalize(e){return e&&this._append(e),this._doFinalize()}}vd._ENC_XFORM_MODE=1;vd._DEC_XFORM_MODE=2;vd.keySize=128/32;vd.ivSize=128/32;class Gl extends vd{constructor(...e){super(...e),this.blockSize=1}_doFinalize(){return this._process(!0)}}class Cd extends Yt{constructor(e,t){super(),this._cipher=e,this._iv=t}static createEncryptor(e,t){return this.Encryptor.create(e,t)}static createDecryptor(e,t){return this.Decryptor.create(e,t)}}function nD(r,e,t){const i=r;let s;const n=this._iv;n?(s=n,this._iv=void 0):s=this._prevBlock;for(let o=0;o<t;o+=1)i[e+o]^=s[o]}class Zh extends Cd{}Zh.Encryptor=class extends Zh{processBlock(r,e){const t=this._cipher,{blockSize:i}=t;nD.call(this,r,e,i),t.encryptBlock(r,e),this._prevBlock=r.slice(e,e+i)}};Zh.Decryptor=class extends Zh{processBlock(r,e){const t=this._cipher,{blockSize:i}=t,s=r.slice(e,e+i);t.decryptBlock(r,e),nD.call(this,r,e,i),this._prevBlock=s}};const oD={pad(r,e){const t=e*4,i=t-r.sigBytes%t,s=i<<24|i<<16|i<<8|i,n=[];for(let a=0;a<i;a+=4)n.push(s);const o=$e.create(n,i);r.concat(o)},unpad(r){const e=r,t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}};class yd extends vd{constructor(e,t,i){super(e,t,Object.assign({mode:Zh,padding:oD},i)),this.blockSize=128/32}reset(){let e;super.reset.call(this);const{cfg:t}=this,{iv:i,mode:s}=t;this._xformMode===this.constructor._ENC_XFORM_MODE?e=s.createEncryptor:(e=s.createDecryptor,this._minBufferSize=1),this._mode=e.call(s,this,i&&i.words),this._mode.__creator=e}_doProcessBlock(e,t){this._mode.processBlock(e,t)}_doFinalize(){let e;const{padding:t}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}class Zf extends Yt{constructor(e){super(),this.mixIn(e)}toString(e){return(e||this.formatter).stringify(this)}}const rD={stringify(r){let e;const{ciphertext:t,salt:i}=r;return i?e=$e.create([1398893684,1701076831]).concat(i).concat(t):e=t,e.toString(eS)},parse(r){let e;const t=eS.parse(r),i=t.words;return i[0]===1398893684&&i[1]===1701076831&&(e=$e.create(i.slice(2,4)),i.splice(0,4),t.sigBytes-=16),Zf.create({ciphertext:t,salt:e})}};class kc extends Yt{static encrypt(e,t,i,s){const n=Object.assign(new Yt,this.cfg,s),o=e.createEncryptor(i,n),a=o.finalize(t),l=o.cfg;return Zf.create({ciphertext:a,key:i,iv:l.iv,algorithm:e,mode:l.mode,padding:l.padding,blockSize:o.blockSize,formatter:n.format})}static decrypt(e,t,i,s){let n=t;const o=Object.assign(new Yt,this.cfg,s);return n=this._parse(n,o.format),e.createDecryptor(i,o).finalize(n.ciphertext)}static _parse(e,t){return typeof e=="string"?t.parse(e,this):e}}kc.cfg=Object.assign(new Yt,{format:rD});const aD={execute(r,e,t,i){let s=i;s||(s=$e.random(64/8));const n=dw.create({keySize:e+t}).compute(r,s),o=$e.create(n.words.slice(e),t*4);return n.sigBytes=e*4,Zf.create({key:n,iv:o,salt:s})}};class hw extends kc{static encrypt(e,t,i,s){const n=Object.assign(new Yt,this.cfg,s),o=n.kdf.execute(i,e.keySize,e.ivSize);n.iv=o.iv;const a=kc.encrypt.call(this,e,t,o.key,n);return a.mixIn(o),a}static decrypt(e,t,i,s){let n=t;const o=Object.assign(new Yt,this.cfg,s);n=this._parse(n,o.format);const a=o.kdf.execute(i,e.keySize,e.ivSize,n.salt);return o.iv=a.iv,kc.decrypt.call(this,e,n,a.key,o)}}hw.cfg=Object.assign(kc.cfg,{kdf:aD});const vx=r=>r<<8&4278255360|r>>>8&16711935,lD={stringify(r){const{words:e,sigBytes:t}=r,i=[];for(let s=0;s<t;s+=2){const n=e[s>>>2]>>>16-s%4*8&65535;i.push(String.fromCharCode(n))}return i.join("")},parse(r){const e=r.length,t=[];for(let i=0;i<e;i+=1)t[i>>>1]|=r.charCodeAt(i)<<16-i%2*16;return $e.create(t,e*2)}},JI=lD,QI={stringify(r){const{words:e,sigBytes:t}=r,i=[];for(let s=0;s<t;s+=2){const n=vx(e[s>>>2]>>>16-s%4*8&65535);i.push(String.fromCharCode(n))}return i.join("")},parse(r){const e=r.length,t=[];for(let i=0;i<e;i+=1)t[i>>>1]|=vx(r.charCodeAt(i)<<16-i%2*16);return $e.create(t,e*2)}},Cc=[];class lC extends li{_doReset(){this._hash=new $e([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const i=this._hash.words;let s=i[0],n=i[1],o=i[2],a=i[3],l=i[4];for(let c=0;c<80;c+=1){if(c<16)Cc[c]=e[t+c]|0;else{const h=Cc[c-3]^Cc[c-8]^Cc[c-14]^Cc[c-16];Cc[c]=h<<1|h>>>31}let d=(s<<5|s>>>27)+l+Cc[c];c<20?d+=(n&o|~n&a)+1518500249:c<40?d+=(n^o^a)+1859775393:c<60?d+=(n&o|n&a|o&a)-1894007588:d+=(n^o^a)-899497514,l=a,a=o,o=n<<30|n>>>2,n=s,s=d}i[0]=i[0]+s|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0}_doFinalize(){const e=this._data,t=e.words,i=this._nDataBytes*8,s=e.sigBytes*8;return t[s>>>5]|=128<<24-s%32,t[(s+64>>>9<<4)+14]=Math.floor(i/4294967296),t[(s+64>>>9<<4)+15]=i,e.sigBytes=t.length*4,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const eL=li._createHelper(lC),tL=li._createHmacHelper(lC),cD=[],dD=[],iL=r=>{const e=Math.sqrt(r);for(let t=2;t<=e;t+=1)if(!(r%t))return!1;return!0},Cx=r=>(r-(r|0))*4294967296|0;let bm=2,Ap=0;for(;Ap<64;)iL(bm)&&(Ap<8&&(cD[Ap]=Cx(bm**(1/2))),dD[Ap]=Cx(bm**(1/3)),Ap+=1),bm+=1;const yc=[];class Tu extends li{_doReset(){this._hash=new $e(cD.slice(0))}_doProcessBlock(e,t){const i=this._hash.words;let s=i[0],n=i[1],o=i[2],a=i[3],l=i[4],c=i[5],d=i[6],h=i[7];for(let u=0;u<64;u+=1){if(u<16)yc[u]=e[t+u]|0;else{const y=yc[u-15],R=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,b=yc[u-2],w=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;yc[u]=R+yc[u-7]+w+yc[u-16]}const p=l&c^~l&d,f=s&n^s&o^n&o,g=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),m=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),v=h+m+p+dD[u]+yc[u],C=g+f;h=d,d=c,c=l,l=a+v|0,a=o,o=n,n=s,s=v+C|0}i[0]=i[0]+s|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+c|0,i[6]=i[6]+d|0,i[7]=i[7]+h|0}_doFinalize(){const e=this._data,t=e.words,i=this._nDataBytes*8,s=e.sigBytes*8;return t[s>>>5]|=128<<24-s%32,t[(s+64>>>9<<4)+14]=Math.floor(i/4294967296),t[(s+64>>>9<<4)+15]=i,e.sigBytes=t.length*4,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const sL=li._createHelper(Tu),nL=li._createHmacHelper(Tu);class uw extends Tu{_doReset(){this._hash=new $e([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])}_doFinalize(){const e=super._doFinalize.call(this);return e.sigBytes-=4,e}}const oL=Tu._createHelper(uw),rL=Tu._createHmacHelper(uw),aL=[new se(1116352408,3609767458),new se(1899447441,602891725),new se(3049323471,3964484399),new se(3921009573,2173295548),new se(961987163,4081628472),new se(1508970993,3053834265),new se(2453635748,2937671579),new se(2870763221,3664609560),new se(3624381080,2734883394),new se(310598401,1164996542),new se(607225278,1323610764),new se(1426881987,3590304994),new se(1925078388,4068182383),new se(2162078206,991336113),new se(2614888103,633803317),new se(3248222580,3479774868),new se(3835390401,2666613458),new se(4022224774,944711139),new se(264347078,2341262773),new se(604807628,2007800933),new se(770255983,1495990901),new se(1249150122,1856431235),new se(1555081692,3175218132),new se(1996064986,2198950837),new se(2554220882,3999719339),new se(2821834349,766784016),new se(2952996808,2566594879),new se(3210313671,3203337956),new se(3336571891,1034457026),new se(3584528711,2466948901),new se(113926993,3758326383),new se(338241895,168717936),new se(666307205,1188179964),new se(773529912,1546045734),new se(1294757372,1522805485),new se(1396182291,2643833823),new se(1695183700,2343527390),new se(1986661051,1014477480),new se(2177026350,1206759142),new se(2456956037,344077627),new se(2730485921,1290863460),new se(2820302411,3158454273),new se(3259730800,3505952657),new se(3345764771,106217008),new se(3516065817,3606008344),new se(3600352804,1432725776),new se(4094571909,1467031594),new se(275423344,851169720),new se(430227734,3100823752),new se(506948616,1363258195),new se(659060556,3750685593),new se(883997877,3785050280),new se(958139571,3318307427),new se(1322822218,3812723403),new se(1537002063,2003034995),new se(1747873779,3602036899),new se(1955562222,1575990012),new se(2024104815,1125592928),new se(2227730452,2716904306),new se(2361852424,442776044),new se(2428436474,593698344),new se(2756734187,3733110249),new se(3204031479,2999351573),new se(3329325298,3815920427),new se(3391569614,3928383900),new se(3515267271,566280711),new se(3940187606,3454069534),new se(4118630271,4000239992),new se(116418474,1914138554),new se(174292421,2731055270),new se(289380356,3203993006),new se(460393269,320620315),new se(685471733,587496836),new se(852142971,1086792851),new se(1017036298,365543100),new se(1126000580,2618297676),new se(1288033470,3409855158),new se(1501505948,4234509866),new se(1607167915,987167468),new se(1816402316,1246189591)],Dh=[];for(let r=0;r<80;r+=1)Dh[r]=new se;class Du extends li{constructor(){super(),this.blockSize=1024/32}_doReset(){this._hash=new cw([new se(1779033703,4089235720),new se(3144134277,2227873595),new se(1013904242,4271175723),new se(2773480762,1595750129),new se(1359893119,2917565137),new se(2600822924,725511199),new se(528734635,4215389547),new se(1541459225,327033209)])}_doProcessBlock(e,t){const i=this._hash.words,s=i[0],n=i[1],o=i[2],a=i[3],l=i[4],c=i[5],d=i[6],h=i[7],u=s.high;let p=s.low;const f=n.high;let g=n.low;const m=o.high;let v=o.low;const C=a.high;let y=a.low;const R=l.high;let b=l.low;const w=c.high;let x=c.low;const O=d.high;let M=d.low;const N=h.high;let V=h.low,I=u,H=p,B=f,X=g,J=m,Y=v,ae=C,re=y,K=R,D=b,T=w,P=x,F=O,L=M,k=N,z=V;for(let Z=0;Z<80;Z+=1){let he,xe;const we=Dh[Z];if(Z<16)we.high=e[t+Z*2]|0,xe=we.high,we.low=e[t+Z*2+1]|0,he=we.low;else{const ZE=Dh[Z-15],rh=ZE.high,Tp=ZE.low,oI=(rh>>>1|Tp<<31)^(rh>>>8|Tp<<24)^rh>>>7,JE=(Tp>>>1|rh<<31)^(Tp>>>8|rh<<24)^(Tp>>>7|rh<<25),QE=Dh[Z-2],ah=QE.high,Dp=QE.low,rI=(ah>>>19|Dp<<13)^(ah<<3|Dp>>>29)^ah>>>6,ex=(Dp>>>19|ah<<13)^(Dp<<3|ah>>>29)^(Dp>>>6|ah<<26),tx=Dh[Z-7],aI=tx.high,lI=tx.low,ix=Dh[Z-16],cI=ix.high,sx=ix.low;he=JE+lI,xe=oI+aI+(he>>>0<JE>>>0?1:0),he+=ex,xe=xe+rI+(he>>>0<ex>>>0?1:0),he+=sx,xe=xe+cI+(he>>>0<sx>>>0?1:0),we.high=xe,we.low=he}const Qt=K&T^~K&F,ei=D&P^~D&L,ti=I&B^I&J^B&J,di=H&X^H&Y^X&Y,Mt=(I>>>28|H<<4)^(I<<30|H>>>2)^(I<<25|H>>>7),bn=(H>>>28|I<<4)^(H<<30|I>>>2)^(H<<25|I>>>7),Ti=(K>>>14|D<<18)^(K>>>18|D<<14)^(K<<23|D>>>9),En=(D>>>14|K<<18)^(D>>>18|K<<14)^(D<<23|K>>>9),zr=aL[Z],$r=zr.high,Ya=zr.low;let qi=z+En,xs=k+Ti+(qi>>>0<z>>>0?1:0);qi+=ei,xs=xs+Qt+(qi>>>0<ei>>>0?1:0),qi+=Ya,xs=xs+$r+(qi>>>0<Ya>>>0?1:0),qi+=he,xs=xs+xe+(qi>>>0<he>>>0?1:0);const oh=bn+di,wm=Mt+ti+(oh>>>0<bn>>>0?1:0);k=F,z=L,F=T,L=P,T=K,P=D,D=re+qi|0,K=ae+xs+(D>>>0<re>>>0?1:0)|0,ae=J,re=Y,J=B,Y=X,B=I,X=H,H=qi+oh|0,I=xs+wm+(H>>>0<qi>>>0?1:0)|0}s.low=p+H,p=s.low,s.high=u+I+(p>>>0<H>>>0?1:0),n.low=g+X,g=n.low,n.high=f+B+(g>>>0<X>>>0?1:0),o.low=v+Y,v=o.low,o.high=m+J+(v>>>0<Y>>>0?1:0),a.low=y+re,y=a.low,a.high=C+ae+(y>>>0<re>>>0?1:0),l.low=b+D,b=l.low,l.high=R+K+(b>>>0<D>>>0?1:0),c.low=x+P,x=c.low,c.high=w+T+(x>>>0<P>>>0?1:0),d.low=M+L,M=d.low,d.high=O+F+(M>>>0<L>>>0?1:0),h.low=V+z,V=h.low,h.high=N+k+(V>>>0<z>>>0?1:0)}_doFinalize(){const e=this._data,t=e.words,i=this._nDataBytes*8,s=e.sigBytes*8;return t[s>>>5]|=128<<24-s%32,t[(s+128>>>10<<5)+30]=Math.floor(i/4294967296),t[(s+128>>>10<<5)+31]=i,e.sigBytes=t.length*4,this._process(),this._hash.toX32()}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const lL=li._createHelper(Du),cL=li._createHmacHelper(Du);class pw extends Du{_doReset(){this._hash=new cw([new se(3418070365,3238371032),new se(1654270250,914150663),new se(2438529370,812702999),new se(355462360,4144912697),new se(1731405415,4290775857),new se(2394180231,1750603025),new se(3675008525,1694076839),new se(1203062813,3204075428)])}_doFinalize(){const e=super._doFinalize.call(this);return e.sigBytes-=16,e}}const dL=Du._createHelper(pw),hL=Du._createHmacHelper(pw),hD=[],uD=[],pD=[];let ey=1,Em=0;for(let r=0;r<24;r+=1){hD[ey+5*Em]=(r+1)*(r+2)/2%64;const e=Em%5,t=(2*ey+3*Em)%5;ey=e,Em=t}for(let r=0;r<5;r+=1)for(let e=0;e<5;e+=1)uD[r+5*e]=e+(2*r+3*e)%5*5;let Pp=1;for(let r=0;r<24;r+=1){let e=0,t=0;for(let i=0;i<7;i+=1){if(Pp&1){const s=(1<<i)-1;s<32?t^=1<<s:e^=1<<s-32}Pp&128?Pp=Pp<<1^113:Pp<<=1}pD[r]=se.create(e,t)}const Zr=[];for(let r=0;r<25;r+=1)Zr[r]=se.create();class fw extends li{constructor(e){super(Object.assign({outputLength:512},e))}_doReset(){this._state=[];const e=this._state;for(let t=0;t<25;t+=1)e[t]=new se;this.blockSize=(1600-2*this.cfg.outputLength)/32}_doProcessBlock(e,t){const i=this._state,s=this.blockSize/2;for(let n=0;n<s;n+=1){let o=e[t+2*n],a=e[t+2*n+1];o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,a=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;const l=i[n];l.high^=a,l.low^=o}for(let n=0;n<24;n+=1){for(let d=0;d<5;d+=1){let h=0,u=0;for(let f=0;f<5;f+=1){const g=i[d+5*f];h^=g.high,u^=g.low}const p=Zr[d];p.high=h,p.low=u}for(let d=0;d<5;d+=1){const h=Zr[(d+4)%5],u=Zr[(d+1)%5],p=u.high,f=u.low,g=h.high^(p<<1|f>>>31),m=h.low^(f<<1|p>>>31);for(let v=0;v<5;v+=1){const C=i[d+5*v];C.high^=g,C.low^=m}}for(let d=1;d<25;d+=1){let h,u;const p=i[d],f=p.high,g=p.low,m=hD[d];m<32?(h=f<<m|g>>>32-m,u=g<<m|f>>>32-m):(h=g<<m-32|f>>>64-m,u=f<<m-32|g>>>64-m);const v=Zr[uD[d]];v.high=h,v.low=u}const o=Zr[0],a=i[0];o.high=a.high,o.low=a.low;for(let d=0;d<5;d+=1)for(let h=0;h<5;h+=1){const u=d+5*h,p=i[u],f=Zr[u],g=Zr[(d+1)%5+5*h],m=Zr[(d+2)%5+5*h];p.high=f.high^~g.high&m.high,p.low=f.low^~g.low&m.low}const l=i[0],c=pD[n];l.high^=c.high,l.low^=c.low}}_doFinalize(){const e=this._data,t=e.words,i=e.sigBytes*8,s=this.blockSize*32;t[i>>>5]|=1<<24-i%32,t[(Math.ceil((i+1)/s)*s>>>5)-1]|=128,e.sigBytes=t.length*4,this._process();const n=this._state,o=this.cfg.outputLength/8,a=o/8,l=[];for(let c=0;c<a;c+=1){const d=n[c];let h=d.high,u=d.low;h=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,u=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,l.push(u),l.push(h)}return new $e(l,o)}clone(){const e=super.clone.call(this);e._state=this._state.slice(0);const t=e._state;for(let i=0;i<25;i+=1)t[i]=t[i].clone();return e}}const uL=li._createHelper(fw),pL=li._createHmacHelper(fw);/** @preserve
(c) 2012 by CÃ©dric Mesnil. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted
provided that the following conditions are met:

    - Redistributions of source code must retain the above copyright notice, this list of
    conditions and the following disclaimer.
    - Redistributions in binary form must reproduce the above copyright notice, this list
    of conditions and the following disclaimer in the documentation and/or other materials
    provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS
OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/const fL=$e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),gL=$e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),mL=$e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),vL=$e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),CL=$e.create([0,1518500249,1859775393,2400959708,2840853838]),yL=$e.create([1352829926,1548603684,1836072691,2053994217,0]),yx=(r,e,t)=>r^e^t,Sx=(r,e,t)=>r&e|~r&t,wx=(r,e,t)=>(r|~e)^t,bx=(r,e,t)=>r&t|e&~t,Ex=(r,e,t)=>r^(e|~t),xm=(r,e)=>r<<e|r>>>32-e;class gw extends li{_doReset(){this._hash=$e.create([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const i=e;for(let w=0;w<16;w+=1){const x=t+w,O=i[x];i[x]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}const s=this._hash.words,n=CL.words,o=yL.words,a=fL.words,l=gL.words,c=mL.words,d=vL.words;let h=s[0],u=s[1],p=s[2],f=s[3],g=s[4],m=s[0],v=s[1],C=s[2],y=s[3],R=s[4],b;for(let w=0;w<80;w+=1)b=h+i[t+a[w]]|0,w<16?b+=yx(u,p,f)+n[0]:w<32?b+=Sx(u,p,f)+n[1]:w<48?b+=wx(u,p,f)+n[2]:w<64?b+=bx(u,p,f)+n[3]:b+=Ex(u,p,f)+n[4],b|=0,b=xm(b,c[w]),b=b+g|0,h=g,g=f,f=xm(p,10),p=u,u=b,b=m+i[t+l[w]]|0,w<16?b+=Ex(v,C,y)+o[0]:w<32?b+=bx(v,C,y)+o[1]:w<48?b+=wx(v,C,y)+o[2]:w<64?b+=Sx(v,C,y)+o[3]:b+=yx(v,C,y)+o[4],b|=0,b=xm(b,d[w]),b=b+R|0,m=R,R=y,y=xm(C,10),C=v,v=b;b=s[1]+p+y|0,s[1]=s[2]+f+R|0,s[2]=s[3]+g+m|0,s[3]=s[4]+h+v|0,s[4]=s[0]+u+C|0,s[0]=b}_doFinalize(){const e=this._data,t=e.words,i=this._nDataBytes*8,s=e.sigBytes*8;t[s>>>5]|=128<<24-s%32,t[(s+64>>>9<<4)+14]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();const n=this._hash,o=n.words;for(let a=0;a<5;a+=1){const l=o[a];o[a]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return n}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const SL=li._createHelper(gw),wL=li._createHmacHelper(gw);class fD extends Yt{constructor(e){super(),this.cfg=Object.assign(new Yt,{keySize:128/32,hasher:lC,iterations:1},e)}compute(e,t){const{cfg:i}=this,s=lw.create(i.hasher,e),n=$e.create(),o=$e.create([1]),a=n.words,l=o.words,{keySize:c,iterations:d}=i;for(;a.length<c;){const h=s.update(t).finalize(o);s.reset();const u=h.words,p=u.length;let f=h;for(let g=1;g<d;g+=1){f=s.finalize(f),s.reset();const m=f.words;for(let v=0;v<p;v+=1)u[v]^=m[v]}n.concat(h),l[0]+=1}return n.sigBytes=c*4,n}}const bL=(r,e,t)=>fD.create(t).compute(r,e),Rs=[],gD=[],mD=[],vD=[],CD=[],yD=[],tS=[],iS=[],sS=[],nS=[],oo=[];for(let r=0;r<256;r+=1)r<128?oo[r]=r<<1:oo[r]=r<<1^283;let io=0,Kr=0;for(let r=0;r<256;r+=1){let e=Kr^Kr<<1^Kr<<2^Kr<<3^Kr<<4;e=e>>>8^e&255^99,Rs[io]=e,gD[e]=io;const t=oo[io],i=oo[t],s=oo[i];let n=oo[e]*257^e*16843008;mD[io]=n<<24|n>>>8,vD[io]=n<<16|n>>>16,CD[io]=n<<8|n>>>24,yD[io]=n,n=s*16843009^i*65537^t*257^io*16843008,tS[e]=n<<24|n>>>8,iS[e]=n<<16|n>>>16,sS[e]=n<<8|n>>>24,nS[e]=n,io?(io=t^oo[oo[oo[s^t]]],Kr^=oo[oo[Kr]]):(Kr=1,io=Kr)}const EL=[0,1,2,4,8,16,32,64,128,27,54];class mw extends yd{_doReset(){let e;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const t=this._keyPriorReset,i=t.words,s=t.sigBytes/4;this._nRounds=s+6;const o=(this._nRounds+1)*4;this._keySchedule=[];const a=this._keySchedule;for(let c=0;c<o;c+=1)c<s?a[c]=i[c]:(e=a[c-1],c%s?s>6&&c%s===4&&(e=Rs[e>>>24]<<24|Rs[e>>>16&255]<<16|Rs[e>>>8&255]<<8|Rs[e&255]):(e=e<<8|e>>>24,e=Rs[e>>>24]<<24|Rs[e>>>16&255]<<16|Rs[e>>>8&255]<<8|Rs[e&255],e^=EL[c/s|0]<<24),a[c]=a[c-s]^e);this._invKeySchedule=[];const l=this._invKeySchedule;for(let c=0;c<o;c+=1){const d=o-c;c%4?e=a[d]:e=a[d-4],c<4||d<=4?l[c]=e:l[c]=tS[Rs[e>>>24]]^iS[Rs[e>>>16&255]]^sS[Rs[e>>>8&255]]^nS[Rs[e&255]]}}encryptBlock(e,t){this._doCryptBlock(e,t,this._keySchedule,mD,vD,CD,yD,Rs)}decryptBlock(e,t){const i=e;let s=i[t+1];i[t+1]=i[t+3],i[t+3]=s,this._doCryptBlock(i,t,this._invKeySchedule,tS,iS,sS,nS,gD),s=i[t+1],i[t+1]=i[t+3],i[t+3]=s}_doCryptBlock(e,t,i,s,n,o,a,l){const c=e,d=this._nRounds;let h=c[t]^i[0],u=c[t+1]^i[1],p=c[t+2]^i[2],f=c[t+3]^i[3],g=4;for(let R=1;R<d;R+=1){const b=s[h>>>24]^n[u>>>16&255]^o[p>>>8&255]^a[f&255]^i[g];g+=1;const w=s[u>>>24]^n[p>>>16&255]^o[f>>>8&255]^a[h&255]^i[g];g+=1;const x=s[p>>>24]^n[f>>>16&255]^o[h>>>8&255]^a[u&255]^i[g];g+=1;const O=s[f>>>24]^n[h>>>16&255]^o[u>>>8&255]^a[p&255]^i[g];g+=1,h=b,u=w,p=x,f=O}const m=(l[h>>>24]<<24|l[u>>>16&255]<<16|l[p>>>8&255]<<8|l[f&255])^i[g];g+=1;const v=(l[u>>>24]<<24|l[p>>>16&255]<<16|l[f>>>8&255]<<8|l[h&255])^i[g];g+=1;const C=(l[p>>>24]<<24|l[f>>>16&255]<<16|l[h>>>8&255]<<8|l[u&255])^i[g];g+=1;const y=(l[f>>>24]<<24|l[h>>>16&255]<<16|l[u>>>8&255]<<8|l[p&255])^i[g];g+=1,c[t]=m,c[t+1]=v,c[t+2]=C,c[t+3]=y}}mw.keySize=256/32;const xL=yd._createHelper(mw),RL=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],xx=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],TL=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],DL=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],OL=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];function dh(r,e){const t=(this._lBlock>>>r^this._rBlock)&e;this._rBlock^=t,this._lBlock^=t<<r}function Rm(r,e){const t=(this._rBlock>>>r^this._lBlock)&e;this._lBlock^=t,this._rBlock^=t<<r}class hl extends yd{_doReset(){const t=this._key.words,i=[];for(let o=0;o<56;o+=1){const a=RL[o]-1;i[o]=t[a>>>5]>>>31-a%32&1}this._subKeys=[];const s=this._subKeys;for(let o=0;o<16;o+=1){s[o]=[];const a=s[o],l=TL[o];for(let c=0;c<24;c+=1)a[c/6|0]|=i[(xx[c]-1+l)%28]<<31-c%6,a[4+(c/6|0)]|=i[28+(xx[c+24]-1+l)%28]<<31-c%6;a[0]=a[0]<<1|a[0]>>>31;for(let c=1;c<7;c+=1)a[c]>>>=(c-1)*4+3;a[7]=a[7]<<5|a[7]>>>27}this._invSubKeys=[];const n=this._invSubKeys;for(let o=0;o<16;o+=1)n[o]=s[15-o]}encryptBlock(e,t){this._doCryptBlock(e,t,this._subKeys)}decryptBlock(e,t){this._doCryptBlock(e,t,this._invSubKeys)}_doCryptBlock(e,t,i){const s=e;this._lBlock=e[t],this._rBlock=e[t+1],dh.call(this,4,252645135),dh.call(this,16,65535),Rm.call(this,2,858993459),Rm.call(this,8,16711935),dh.call(this,1,1431655765);for(let o=0;o<16;o+=1){const a=i[o],l=this._lBlock,c=this._rBlock;let d=0;for(let h=0;h<8;h+=1)d|=DL[h][((c^a[h])&OL[h])>>>0];this._lBlock=c,this._rBlock=l^d}const n=this._lBlock;this._lBlock=this._rBlock,this._rBlock=n,dh.call(this,1,1431655765),Rm.call(this,8,16711935),Rm.call(this,2,858993459),dh.call(this,16,65535),dh.call(this,4,252645135),s[t]=this._lBlock,s[t+1]=this._rBlock}}hl.keySize=64/32;hl.ivSize=64/32;hl.blockSize=64/32;const AL=yd._createHelper(hl);class Jf extends yd{_doReset(){const t=this._key.words;if(t.length!==2&&t.length!==4&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");const i=t.slice(0,2),s=t.length<4?t.slice(0,2):t.slice(2,4),n=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=hl.createEncryptor($e.create(i)),this._des2=hl.createEncryptor($e.create(s)),this._des3=hl.createEncryptor($e.create(n))}encryptBlock(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)}decryptBlock(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)}}Jf.keySize=192/32;Jf.ivSize=64/32;Jf.blockSize=64/32;const PL=yd._createHelper(Jf),jo=[],Yr=[],Be=[];function ty(){const r=this._X,e=this._C;for(let t=0;t<8;t+=1)Yr[t]=e[t];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<Yr[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<Yr[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<Yr[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<Yr[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<Yr[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<Yr[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<Yr[6]>>>0?1:0)|0,this._b=e[7]>>>0<Yr[7]>>>0?1:0;for(let t=0;t<8;t+=1){const i=r[t]+e[t],s=i&65535,n=i>>>16,o=((s*s>>>17)+s*n>>>15)+n*n,a=((i&4294901760)*i|0)+((i&65535)*i|0);Be[t]=o^a}r[0]=Be[0]+(Be[7]<<16|Be[7]>>>16)+(Be[6]<<16|Be[6]>>>16)|0,r[1]=Be[1]+(Be[0]<<8|Be[0]>>>24)+Be[7]|0,r[2]=Be[2]+(Be[1]<<16|Be[1]>>>16)+(Be[0]<<16|Be[0]>>>16)|0,r[3]=Be[3]+(Be[2]<<8|Be[2]>>>24)+Be[1]|0,r[4]=Be[4]+(Be[3]<<16|Be[3]>>>16)+(Be[2]<<16|Be[2]>>>16)|0,r[5]=Be[5]+(Be[4]<<8|Be[4]>>>24)+Be[3]|0,r[6]=Be[6]+(Be[5]<<16|Be[5]>>>16)+(Be[4]<<16|Be[4]>>>16)|0,r[7]=Be[7]+(Be[6]<<8|Be[6]>>>24)+Be[5]|0}class SD extends Gl{constructor(...e){super(...e),this.blockSize=128/32,this.ivSize=64/32}_doReset(){const e=this._key.words,{iv:t}=this.cfg;for(let n=0;n<4;n+=1)e[n]=(e[n]<<8|e[n]>>>24)&16711935|(e[n]<<24|e[n]>>>8)&4278255360;this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];const i=this._X;this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];const s=this._C;this._b=0;for(let n=0;n<4;n+=1)ty.call(this);for(let n=0;n<8;n+=1)s[n]^=i[n+4&7];if(t){const n=t.words,o=n[0],a=n[1],l=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,c=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360,d=l>>>16|c&4294901760,h=c<<16|l&65535;s[0]^=l,s[1]^=d,s[2]^=c,s[3]^=h,s[4]^=l,s[5]^=d,s[6]^=c,s[7]^=h;for(let u=0;u<4;u+=1)ty.call(this)}}_doProcessBlock(e,t){const i=e,s=this._X;ty.call(this),jo[0]=s[0]^s[5]>>>16^s[3]<<16,jo[1]=s[2]^s[7]>>>16^s[5]<<16,jo[2]=s[4]^s[1]>>>16^s[7]<<16,jo[3]=s[6]^s[3]>>>16^s[1]<<16;for(let n=0;n<4;n+=1)jo[n]=(jo[n]<<8|jo[n]>>>24)&16711935|(jo[n]<<24|jo[n]>>>8)&4278255360,i[t+n]^=jo[n]}}const ML=Gl._createHelper(SD),zo=[],Xr=[],We=[];function iy(){const r=this._X,e=this._C;for(let t=0;t<8;t+=1)Xr[t]=e[t];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<Xr[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<Xr[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<Xr[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<Xr[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<Xr[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<Xr[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<Xr[6]>>>0?1:0)|0,this._b=e[7]>>>0<Xr[7]>>>0?1:0;for(let t=0;t<8;t+=1){const i=r[t]+e[t],s=i&65535,n=i>>>16,o=((s*s>>>17)+s*n>>>15)+n*n,a=((i&4294901760)*i|0)+((i&65535)*i|0);We[t]=o^a}r[0]=We[0]+(We[7]<<16|We[7]>>>16)+(We[6]<<16|We[6]>>>16)|0,r[1]=We[1]+(We[0]<<8|We[0]>>>24)+We[7]|0,r[2]=We[2]+(We[1]<<16|We[1]>>>16)+(We[0]<<16|We[0]>>>16)|0,r[3]=We[3]+(We[2]<<8|We[2]>>>24)+We[1]|0,r[4]=We[4]+(We[3]<<16|We[3]>>>16)+(We[2]<<16|We[2]>>>16)|0,r[5]=We[5]+(We[4]<<8|We[4]>>>24)+We[3]|0,r[6]=We[6]+(We[5]<<16|We[5]>>>16)+(We[4]<<16|We[4]>>>16)|0,r[7]=We[7]+(We[6]<<8|We[6]>>>24)+We[5]|0}class wD extends Gl{constructor(...e){super(...e),this.blockSize=128/32,this.ivSize=64/32}_doReset(){const e=this._key.words,{iv:t}=this.cfg;this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];const i=this._X;this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];const s=this._C;this._b=0;for(let n=0;n<4;n+=1)iy.call(this);for(let n=0;n<8;n+=1)s[n]^=i[n+4&7];if(t){const n=t.words,o=n[0],a=n[1],l=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,c=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360,d=l>>>16|c&4294901760,h=c<<16|l&65535;s[0]^=l,s[1]^=d,s[2]^=c,s[3]^=h,s[4]^=l,s[5]^=d,s[6]^=c,s[7]^=h;for(let u=0;u<4;u+=1)iy.call(this)}}_doProcessBlock(e,t){const i=e,s=this._X;iy.call(this),zo[0]=s[0]^s[5]>>>16^s[3]<<16,zo[1]=s[2]^s[7]>>>16^s[5]<<16,zo[2]=s[4]^s[1]>>>16^s[7]<<16,zo[3]=s[6]^s[3]>>>16^s[1]<<16;for(let n=0;n<4;n+=1)zo[n]=(zo[n]<<8|zo[n]>>>24)&16711935|(zo[n]<<24|zo[n]>>>8)&4278255360,i[t+n]^=zo[n]}}const _L=Gl._createHelper(wD);function bD(){const r=this._S;let e=this._i,t=this._j,i=0;for(let s=0;s<4;s+=1){e=(e+1)%256,t=(t+r[e])%256;const n=r[e];r[e]=r[t],r[t]=n,i|=r[(r[e]+r[t])%256]<<24-s*8}return this._i=e,this._j=t,i}class Qf extends Gl{_doReset(){const e=this._key,t=e.words,i=e.sigBytes;this._S=[];const s=this._S;for(let n=0;n<256;n+=1)s[n]=n;for(let n=0,o=0;n<256;n+=1){const a=n%i,l=t[a>>>2]>>>24-a%4*8&255;o=(o+s[n]+l)%256;const c=s[n];s[n]=s[o],s[o]=c}this._j=0,this._i=this._j}_doProcessBlock(e,t){const i=e;i[t]^=bD.call(this)}}Qf.keySize=256/32;Qf.ivSize=0;const IL=Gl._createHelper(Qf);class ED extends Qf{constructor(...e){super(...e),Object.assign(this.cfg,{drop:192})}_doReset(){super._doReset.call(this);for(let e=this.cfg.drop;e>0;e-=1)bD.call(this)}}const LL=Gl._createHelper(ED);function xD(r,e,t,i){const s=r;let n;const o=this._iv;o?(n=o.slice(0),this._iv=void 0):n=this._prevBlock,i.encryptBlock(n,0);for(let a=0;a<t;a+=1)s[e+a]^=n[a]}class rf extends Cd{}rf.Encryptor=class extends rf{processBlock(r,e){const t=this._cipher,{blockSize:i}=t;xD.call(this,r,e,i,t),this._prevBlock=r.slice(e,e+i)}};rf.Decryptor=class extends rf{processBlock(r,e){const t=this._cipher,{blockSize:i}=t,s=r.slice(e,e+i);xD.call(this,r,e,i,t),this._prevBlock=s}};class af extends Cd{}af.Encryptor=class extends af{processBlock(r,e){const t=r,i=this._cipher,{blockSize:s}=i,n=this._iv;let o=this._counter;n&&(this._counter=n.slice(0),o=this._counter,this._iv=void 0);const a=o.slice(0);i.encryptBlock(a,0),o[s-1]=o[s-1]+1|0;for(let l=0;l<s;l+=1)t[e+l]^=a[l]}};af.Decryptor=af.Encryptor;const Rx=r=>{let e=r;if((r>>24&255)===255){let t=r>>16&255,i=r>>8&255,s=r&255;t===255?(t=0,i===255?(i=0,s===255?s=0:s+=1):i+=1):t+=1,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e},FL=r=>{const e=r;return e[0]=Rx(e[0]),e[0]===0&&(e[1]=Rx(e[1])),e};/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */class lf extends Cd{}lf.Encryptor=class extends lf{processBlock(r,e){const t=r,i=this._cipher,{blockSize:s}=i,n=this._iv;let o=this._counter;n&&(this._counter=n.slice(0),o=this._counter,this._iv=void 0),FL(o);const a=o.slice(0);i.encryptBlock(a,0);for(let l=0;l<s;l+=1)t[e+l]^=a[l]}};lf.Decryptor=lf.Encryptor;class cf extends Cd{}cf.Encryptor=class extends cf{processBlock(r,e){this._cipher.encryptBlock(r,e)}};cf.Decryptor=class extends cf{processBlock(r,e){this._cipher.decryptBlock(r,e)}};class df extends Cd{}df.Encryptor=class extends df{processBlock(r,e){const t=r,i=this._cipher,{blockSize:s}=i,n=this._iv;let o=this._keystream;n&&(this._keystream=n.slice(0),o=this._keystream,this._iv=void 0),i.encryptBlock(o,0);for(let a=0;a<s;a+=1)t[e+a]^=o[a]}};df.Decryptor=df.Encryptor;const NL={pad(r,e){const t=r,i=t.sigBytes,s=e*4,n=s-i%s,o=i+n-1;t.clamp(),t.words[o>>>2]|=n<<24-o%4*8,t.sigBytes+=n},unpad(r){const e=r,t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},GL={pad(r,e){const t=e*4,i=t-r.sigBytes%t;r.concat($e.random(i-1)).concat($e.create([i<<24],1))},unpad(r){const e=r,t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},oS={pad(r,e){const t=r,i=e*4;t.clamp(),t.sigBytes+=i-(r.sigBytes%i||i)},unpad(r){const e=r,t=e.words;for(let i=e.sigBytes-1;i>=0;i-=1)if(t[i>>>2]>>>24-i%4*8&255){e.sigBytes=i+1;break}}},kL={pad(r,e){r.concat($e.create([2147483648],1)),oS.pad(r,e)},unpad(r){const e=r;oS.unpad(e),e.sigBytes-=1}},VL={pad(){},unpad(){}},HL={stringify(r){return r.ciphertext.toString(cv)},parse(r){const e=cv.parse(r);return Zf.create({ciphertext:e})}},hf={lib:{Base:Yt,WordArray:$e,BufferedBlockAlgorithm:aw,Hasher:li,Cipher:vd,StreamCipher:Gl,BlockCipherMode:Cd,BlockCipher:yd,CipherParams:Zf,SerializableCipher:kc,PasswordBasedCipher:hw},x64:{Word:se,WordArray:cw},enc:{Hex:cv,Latin1:Qy,Utf8:rw,Utf16:JI,Utf16BE:lD,Utf16LE:QI,Base64:eS},algo:{HMAC:lw,MD5:aC,SHA1:lC,SHA224:uw,SHA256:Tu,SHA384:pw,SHA512:Du,SHA3:fw,RIPEMD160:gw,PBKDF2:fD,EvpKDF:dw,AES:mw,DES:hl,TripleDES:Jf,Rabbit:SD,RabbitLegacy:wD,RC4:Qf,RC4Drop:ED},mode:{CBC:Zh,CFB:rf,CTR:af,CTRGladman:lf,ECB:cf,OFB:df},pad:{Pkcs7:oD,AnsiX923:NL,Iso10126:GL,Iso97971:kL,NoPadding:VL,ZeroPadding:oS},format:{OpenSSL:rD,Hex:HL},kdf:{OpenSSL:aD},MD5:XI,HmacMD5:qI,SHA1:eL,HmacSHA1:tL,SHA224:oL,HmacSHA224:rL,SHA256:sL,HmacSHA256:nL,SHA384:dL,HmacSHA384:hL,SHA512:lL,HmacSHA512:cL,SHA3:uL,HmacSHA3:pL,RIPEMD160:SL,HmacRIPEMD160:wL,PBKDF2:bL,EvpKDF:ZI,AES:xL,DES:AL,TripleDES:PL,Rabbit:ML,RabbitLegacy:_L,RC4:IL,RC4Drop:LL};function BL(){if(!WL())return!1;const r=JSON.parse(localStorage.getItem("expires_at"));return r?new Date().getTime()<r:!1}function WL(){return!!localStorage.getItem("id")}function UL(r){const e=Bp(r.email),t=Bp(r.name),i=Bp(r.picture),s=Bp(r.nickname);localStorage.setItem("id",e),localStorage.setItem("info",t),localStorage.setItem("infoextra",i),localStorage.setItem("infoextraplus",s)}function jL(){const r=localStorage.getItem("id");return{userId:localStorage.getItem("id"),email:Wp(r),picture:Wp(localStorage.getItem("infoextra")),name:Wp(localStorage.getItem("info")),nickname:Wp(localStorage.getItem("infoextraplus")),onlineStatus:"online"}}function zL(r){const t=6048e5+new Date().getTime(),i=JSON.stringify(t);localStorage.setItem("access_token",r.get("acces_token")),localStorage.setItem("id_token",r.get("id_token")),localStorage.setItem("expires_at",i)}const RD=hf.enc.Hex.parse("000102030405060708090a0b0c0d0e0f"),TD=hf.enc.Hex.parse("101112131415161718191a1b1c1d1e1f");function Bp(r){return hf.AES.encrypt(r,RD,{iv:TD}).toString()}function Wp(r){let e="";const t=hf.AES.decrypt(r,RD,{iv:TD});return t&&(e=t.toString(hf.enc.Utf8)),e}function DD(r){r.calendarActivity=[];const e=r.metrics.find(t=>t.id==="calendar");if(e){for(const[t,i]of Object.entries(e))if(t.startsWith("20")){const s={date:t,dateObj:Date.parse(t),metric:i};r.calendarActivity.push(s)}}}function OD(r,e){r.labActivity=[];for(const t of e){const i=$L(t.title,r);r.labActivity.push(i)}}function $L(r,e){return AD(r,e.metrics)}function AD(r,e){let t=null;for(const i of e)if(!(i.id==="ab"||i.id==="alk"||i.id==="ideo")){if(t=KL(r,i),t!=null)return t}return t}function KL(r,e){return r===e.title?e:e.metrics.length>0?AD(r,e.metrics):null}function vw(r,e){const t={id:"",metrics:[]};return t.id=r,e&&Object.entries(e).forEach(([i,s])=>{typeof s=="object"?t.metrics.push(vw(i,s)):t[i]=s}),t}async function YL(r,e,t){const i=r.substr(0,r.indexOf(".")),n=Wp(e).replace(/[`#$.\[\]\/]/gi,"*");let o=null;const a=jT(zT());try{const l=await $T(KT(a,`${i}/users/${n}`));l.exists()&&(o=vw("root",l.val()),DD(o),t&&OD(o,t))}catch{console.log("db error")}return o}async function XL(r,e){const t=r.substr(0,r.indexOf(".")),i=new Map,s=jT(zT()),n=await $T(KT(s,`${t}`));if(n.exists()){const o=vw("root",n.val());for(const a of o.metrics[1].metrics)if(a.nickname){const l={userId:a.id,email:a.email,name:a.name,picture:a.picture,nickname:a.nickname,onlineStatus:a.onlineStatus,id:"home",title:a.title,count:a.count,last:a.last,duration:a.duration,metrics:a.metrics,labActivity:[],calendarActivity:[]};l.onlineStatus==null&&(l.onlineStatus="online"),DD(l),e&&OD(l,e),i.set(l.nickname,l)}}return i}const qL=!1,ZL=r=>Array.isArray(r)&&!r.some(e=>typeof e!="string"),JL=async({params:r})=>{var o,a;gI(mI().firebase);const e=await $I.readCourse(r.courseid),t=e.walls.get("lab"),i=await YL(r.courseid,r.userid,t);iC.set(i);const s=await XL(r.courseid,t),n=new Map;if(e.hasEnrollment()){const l=e.getEnrolledStudentIds();if(ZL(l)){for(const c of s.keys())if(l.includes(c)){const d=s.get(c);d&&n.set(c,d)}}}return{user:i,course:e,allLabs:e.walls.get("lab"),calendar:e.calendar,ignorePin:(a=(o=e.lo.properties)==null?void 0:o.ignorepin)==null?void 0:a.toString(),users:s,enrolledUsers:n}},_8=Object.freeze(Object.defineProperty({__proto__:null,load:JL,ssr:qL},Symbol.toStringTag,{value:"Module"}));/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.2
          * @link https://www.ag-grid.com/
          * @license MIT
          *//**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function ul(r){return r==null||r===""?null:r}function q(r,e=!1){return r!=null&&(r!==""||e)}function Se(r){return!q(r)}function Ys(r){return r==null||r.length===0}function uf(r){return r!=null&&typeof r.toString=="function"?r.toString():null}function Ln(r){if(r===void 0)return;if(r===null||r==="")return null;if(typeof r=="number")return isNaN(r)?void 0:r;const e=parseInt(r,10);return isNaN(e)?void 0:e}function Jo(r){if(r!==void 0)return r===null||r===""?!1:typeof r=="boolean"?r:/true/i.test(r)}function QL(r){if(!(r==null||r===""))return r}function eF(r,e){return r==null&&e==null?!0:r==null&&e!=null||r!=null&&e==null?!1:r===e}function tF(r,e){const t=r?JSON.stringify(r):null,i=e?JSON.stringify(e):null;return t===i}function iF(r,e,t=!1){const i=r==null,s=e==null;if(r&&r.toNumber&&(r=r.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function n(o,a){return o>a?1:o<a?-1:0}if(typeof r!="string"||!t)return n(r,e);try{return r.localeCompare(e)}catch{return n(r,e)}}function Jh(r){if(r instanceof Set||r instanceof Map){const e=[];return r.forEach(t=>e.push(t)),e}return Object.values(r)}var sF=Object.freeze({__proto__:null,makeNull:ul,exists:q,missing:Se,missingOrEmpty:Ys,toStringOrNull:uf,attrToNumber:Ln,attrToBoolean:Jo,attrToString:QL,referenceCompare:eF,jsonEquals:tF,defaultComparator:iF,values:Jh});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class nF{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=uf(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=""+i,!this.existingKeys[s])return this.existingKeys[s]=!0,s;i++}}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Et(r,e){r!=null&&(Array.isArray(r)?r.forEach((t,i)=>e(`${i}`,t)):Object.keys(r).forEach(t=>e(t,r[t])))}function Cw(r){const e={},t=Object.keys(r);for(let i=0;i<t.length;i++){const s=t[i],n=r[s];e[s]=n}return e}function oF(r){return JSON.parse(JSON.stringify(r))}function dv(r,e){if(!r)return;const t=r,i={};return Object.keys(t).forEach(s=>{if(e&&e.indexOf(s)>=0)return;const n=t[s];hv(n)&&n.constructor===Object?i[s]=dv(n):i[s]=n}),i}function PD(r,e){return r[e]}function MD(r,e,t){r[e]=t}function rF(r,e,...t){t.forEach(i=>_D(r,e,i))}function _D(r,e,t,i){const s=PD(r,t);s!==void 0&&MD(e,t,i?i(s):s)}function ID(r){const e={};return r.filter(t=>t!=null).forEach(t=>{Object.keys(t).forEach(i=>e[i]=null)}),Object.keys(e)}function ur(r){if(!r)return[];const e=Object;if(typeof e.values=="function")return e.values(r);const t=[];for(const i in r)r.hasOwnProperty(i)&&r.propertyIsEnumerable(i)&&t.push(r[i]);return t}function qs(r,e,t=!0,i=!1){q(e)&&Et(e,(s,n)=>{let o=r[s];o!==n&&(i&&o==null&&n!=null&&typeof n=="object"&&n.constructor===Object&&(o={},r[s]=o),hv(n)&&hv(o)&&!Array.isArray(o)?qs(o,n,t,i):(t||n!==void 0)&&(r[s]=n))})}function aF(r){return Se(r)||Object.keys(r).length===0}function lF(r,e,t){if(r==null)return t;const i=e.split(".");let s=r;for(;i.length>1;)if(s=s[i.shift()],s==null)return t;const n=s[i[0]];return n??t}function cF(r,e,t){if(r==null)return;const i=e.split(".");let s=r;i.forEach((n,o)=>{s[n]||(s[n]={}),o<i.length-1&&(s=s[n])}),s[i[i.length-1]]=t}function Vc(r,e,t){if(!e||!r)return;if(!t)return r[e];const i=e.split(".");let s=r;for(let n=0;n<i.length;n++){if(s==null)return;s=s[i[n]]}return s}function LD(r,e){Object.keys(r).forEach(s=>{typeof r[s]=="object"&&(r[s]=void 0)});const t=Object.getPrototypeOf(r),i={};Object.keys(t).forEach(s=>{if(typeof t[s]=="function"){const o=()=>{console.warn(`AG Grid: ${e} function ${s}() cannot be called as the grid has been destroyed.
                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't
                     be keeping the API reference, your application has a memory leak! Remove the API reference
                     when the grid is destroyed.`)};i[s]={value:o,writable:!0}}}),Object.defineProperties(r,i)}function hv(r){return typeof r=="object"&&r!==null}var dF=Object.freeze({__proto__:null,iterateObject:Et,cloneObject:Cw,deepCloneObject:oF,deepCloneDefinition:dv,getProperty:PD,setProperty:MD,copyPropertiesIfPresent:rF,copyPropertyIfPresent:_D,getAllKeysInObjects:ID,getAllValuesInObject:ur,mergeDeep:qs,missingOrEmptyObject:aF,get:lF,set:cF,getValueUsingField:Vc,removeAllReferences:LD,isNonNullObject:hv});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const Tx={};function Qe(r,e){Tx[e]||(r(),Tx[e]=!0)}function cC(r){if(r.name)return r.name;const e=/function\s+([^\(]+)/.exec(r.toString());return e&&e.length===2?e[1].trim():null}function dC(r){return!!(r&&r.constructor&&r.call&&r.apply)}function FD(r){ND(r,400)}const sy=[];let ny=!1;function rS(r){sy.push(r),!ny&&(ny=!0,window.setTimeout(()=>{const e=sy.slice();sy.length=0,ny=!1,e.forEach(t=>t())},0))}function ND(r,e=0){r.length>0&&window.setTimeout(()=>r.forEach(t=>t()),e)}function or(r,e){let t;return function(...i){const s=this;window.clearTimeout(t),t=window.setTimeout(function(){r.apply(s,i)},e)}}function aS(r,e){let t=0;return function(...i){const s=this,n=new Date().getTime();n-t<e||(t=n,r.apply(s,i))}}function GD(r,e,t=100,i){const s=new Date().getTime();let n=null,o=!1;const a=()=>{const l=new Date().getTime()-s>t;(r()||l)&&(e(),o=!0,n!=null&&(window.clearInterval(n),n=null),l&&i&&console.warn(i))};a(),o||(n=window.setInterval(a,10))}function hF(...r){return e=>r.reduce((t,i)=>i(t),e)}function kD(r){r&&r()}const uF=()=>{};var pF=Object.freeze({__proto__:null,doOnce:Qe,getFunctionName:cC,isFunction:dC,executeInAWhile:FD,executeNextVMTurn:rS,executeAfter:ND,debounce:or,throttle:aS,waitUntil:GD,compose:hF,callIfPresent:kD,noop:uF});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var te;(function(r){r.CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue"})(te||(te={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class ie{static register(e,t=!0,i=void 0){ie.runVersionChecks(e),i!==void 0?(ie.areGridScopedModules=!0,ie.gridModulesMap[i]===void 0&&(ie.gridModulesMap[i]={}),ie.gridModulesMap[i][e.moduleName]=e):ie.globalModulesMap[e.moduleName]=e,ie.setModuleBased(t)}static unRegisterGridModules(e){delete ie.gridModulesMap[e]}static registerModules(e,t=!0,i=void 0){ie.setModuleBased(t),e&&e.forEach(s=>ie.register(s,t,i))}static isValidModuleVersion(e){const[t,i]=e.version.split(".")||[],[s,n]=ie.currentModuleVersion.split(".")||[];return t===s&&i===n}static runVersionChecks(e){if(ie.currentModuleVersion||(ie.currentModuleVersion=e.version),e.version?ie.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const t=e.validate();t.isValid||console.error(`AG Grid: ${t.message}`)}}static setModuleBased(e){ie.moduleBased===void 0?ie.moduleBased=e:ie.moduleBased!==e&&Qe(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static setIsBundled(){ie.isBundled=!0}static assertRegistered(e,t,i){var s;if(this.isRegistered(e,i))return!0;const n=t+e;let o;if(ie.isBundled)o=`AG Grid: unable to use ${t} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ie.moduleBased||ie.moduleBased===void 0){let a=(s=Object.entries(te).find(([l,c])=>c===e))===null||s===void 0?void 0:s[0];o=`AG Grid: unable to use ${t} as the ${a} is not registered${ie.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${t} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return Qe(()=>{console.warn(o)},n),!1}static isRegistered(e,t){var i;return!!ie.globalModulesMap[e]||!!(!((i=ie.gridModulesMap[t])===null||i===void 0)&&i[e])}static getRegisteredModules(e){return[...Jh(ie.globalModulesMap),...Jh(ie.gridModulesMap[e]||{})]}static isPackageBased(){return!ie.moduleBased}}ie.globalModulesMap={};ie.gridModulesMap={};ie.areGridScopedModules=!1;/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class fF{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return Jh(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),q(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Et(this.beanWrappers,(t,i)=>{let s;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const n=this.getBeansForParameters(s,i.bean.name),o=new(i.bean.bind.apply(i.bean,[null,...n]));i.beanInstance=o});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let s;e.prototype.constructor?s=cC(e.prototype.constructor):s=""+e,console.error(`Context item ${s} is not a bean`);return}const i={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=i}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{const n=i.agClassAttributes;n&&n.forEach(o=>{const a=this.lookupBeanInstance(s,o.beanName,o.optional);t[o.attributeName]=a})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{Et(i.autowireMethods,(n,o)=>{if(n==="agConstructor")return;const a=this.getBeansForParameters(o,s);t[n].apply(t,a)})})})}forEachMetaDataInHierarchy(e,t){let i=Object.getPrototypeOf(e);for(;i!=null;){const s=i.constructor;if(s.hasOwnProperty("__agBeanMetaData")){const n=s.__agBeanMetaData,o=this.getBeanName(s);t(n,o)}i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const i=[];return e&&Et(e,(s,n)=>{const o=this.lookupBeanInstance(t,n);i[Number(s)]=o}),i}lookupBeanInstance(e,t,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const s=this.beanWrappers[t];return s?s.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,t))}callLifeCycleMethodsOnBean(e,t,i){const s={};this.forEachMetaDataInHierarchy(e,o=>{const a=o[t];a&&a.forEach(l=>{l!=i&&(s[l]=!0)})}),Object.keys(s).forEach(o=>e[o]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,ie.unRegisterGridModules(this.contextParams.gridId),this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");const i=t;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}}function Ou(r,e,t){const i=Kc(r.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(e)}function U(r,e,t){const i=Kc(r.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(e)}function ft(r,e,t){const i=Kc(r.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(e)}function ee(r){return e=>{const t=Kc(e);t.beanName=r}}function S(r){return(e,t,i)=>{VD(e,r,!1,e,t,null)}}function Ne(r){return(e,t,i)=>{VD(e,r,!0,e,t,null)}}function VD(r,e,t,i,s,n){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof n=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const o=Kc(r.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:s,beanName:e,optional:t})}function Ss(r){return(e,t,i)=>{const s=typeof e=="function"?e:e.constructor;let n;if(typeof i=="number"){let o;t?(n=Kc(s),o=t):(n=Kc(s),o="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[o]||(n.autowireMethods[o]={}),n.autowireMethods[o][i]=r}}}function Kc(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var HD=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Tm=function(r,e){return function(t,i){e(t,i,r)}};let nn=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,i,s=null){if(this.frameworkOverrides=i,this.gridOptionsService=t,s){const n=t.useAsyncEvents();this.addGlobalListener(s,n)}}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;if(this.gridOptionsService){const{api:i,columnApi:s,context:n}=this.gridOptionsService;t.api=i,t.columnApi=s,t.context=n}this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const s=a=>a.forEach(l=>{t?this.dispatchAsync(()=>l(e)):l(e)}),n=new Set(this.getListeners(i,t,!1));n&&s(n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{t?this.dispatchAsync(()=>this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)):this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};HD([Tm(0,Ss("loggerFactory")),Tm(1,Ss("gridOptionsService")),Tm(2,Ss("frameworkOverrides")),Tm(3,Ss("globalEventListener"))],nn.prototype,"setBeans",null);nn=HD([ee("eventService")],nn);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let gF=0;function BD(){return gF++}class me{constructor(e,t,i,s){this.instanceId=BD(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new nn,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=Ln(e.sortIndex),i=Ln(e.initialSortIndex);t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const s=Jo(e.hide),n=Jo(e.initialHide);s!==void 0?this.visible=!s:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=Ln(e.flex),a=Ln(e.initialFlex);o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,t){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()}initDotNotation(){const e=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=q(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=q(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=q(this.colDef.tooltipField)||q(this.colDef.tooltipValueGetter)||q(this.colDef.tooltipComponent)}resetActualWidth(e="api"){const t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Se(this.colDef)||Se(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}validate(){const e=this.colDef;function t(s,n,o){Qe(()=>{o?console.warn(s,o):Qe(()=>console.warn(s),n)},n)}if(this.gridOptionsService.isRowModelType("clientSide")&&!ie.isRegistered(te.RowGroupingModule,this.gridOptionsService.getGridId())){const n=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(o=>q(e[o]));n.length>0&&ie.assertRegistered(te.RowGroupingModule,n.map(o=>"colDef."+o).join(", "),this.gridOptionsService.getGridId())}if((this.colDef.cellEditor==="agRichSelect"||this.colDef.cellEditor==="agRichSelectCellEditor")&&ie.assertRegistered(te.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.isTreeData()){const n=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(o=>q(e[o]));n.length>0&&t(`AG Grid: ${n.join()} is not possible when doing tree data, your column definition should not have ${n.join()}`,"TreeDataCannotRowGroup")}if(q(e.menuTabs))if(Array.isArray(e.menuTabs)){const s=["filterMenuTab"],n=["columnsMenuTab","generalMenuTab"],o=n.filter(a=>e.menuTabs.includes(a));o.length>0&&ie.assertRegistered(te.MenuModule,`menuTab(s): ${o.map(a=>`'${a}'`).join()}`,this.gridOptionsService.getGridId()),e.menuTabs.forEach(a=>{!n.includes(a)&&!s.includes(a)&&t(`AG Grid: '${a}' is not valid for 'colDef.menuTabs'. Valid values are: ${[...s,...n].map(l=>`'${l}'`).join()}.`,"wrongValue_menuTabs_"+a)})}else t("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof e.menuTabs,"wrongType_menuTabs");q(e.columnsMenuParams)&&ie.assertRegistered(te.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),q(e.columnsMenuParams)&&ie.assertRegistered(te.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),q(this.colDef.width)&&typeof this.colDef.width!="number"&&t("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),q(e.columnGroupShow)&&e.columnGroupShow!=="closed"&&e.columnGroupShow!=="open"&&t(`AG Grid: '${e.columnGroupShow}' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null`,"columnGroupShow_invalid")}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}createColumnFunctionCallbackParams(e){return{node:e,data:e.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){return e.group&&!this.gridOptionsService.is("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!Jo(this.colDef.suppressFillHandle)}isAutoHeight(){return!!Jo(this.colDef.autoHeight)}isAutoHeaderHeight(){return!!Jo(this.colDef.autoHeaderHeight)}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!Jo(this.colDef.resizable)}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setMoving(e,t="api"){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return{type:e,column:this,columns:[this],source:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t="api"){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t)))}setMenuVisible(e,t="api"){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Se(this.sort)}isSorting(){return q(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e}setAggFunc(e){this.aggFunc=e}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t="api"){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t="api",i){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&qs(s,i),this.eventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null}setFirstRightPinned(e,t="api"){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t="api"){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t="api"){const i=e===!0;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t)))}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return{node:e,data:e.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}getColSpan(e){if(Se(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Se(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t="api",i=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t))}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e)}setMinimum(e="api"){q(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t="api"){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t)))}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t="api"){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t)))}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t="api"){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){let t=this.getColDef().menuTabs;return t==null&&(t=e),t}}me.EVENT_MOVING_CHANGED="movingChanged";me.EVENT_LEFT_CHANGED="leftChanged";me.EVENT_WIDTH_CHANGED="widthChanged";me.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";me.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";me.EVENT_VISIBLE_CHANGED="visibleChanged";me.EVENT_FILTER_CHANGED="filterChanged";me.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";me.EVENT_SORT_CHANGED="sortChanged";me.EVENT_COL_DEF_CHANGED="colDefChanged";me.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";me.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";me.EVENT_PIVOT_CHANGED="columnPivotChanged";me.EVENT_VALUE_CHANGED="columnValueChanged";hC([S("gridOptionsService")],me.prototype,"gridOptionsService",void 0);hC([S("columnUtils")],me.prototype,"columnUtils",void 0);hC([S("columnHoverService")],me.prototype,"columnHoverService",void 0);hC([U],me.prototype,"initialise",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var mF=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ge{constructor(e,t,i,s){this.localEventService=new nn,this.expandable=!1,this.instanceId=BD(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const t={type:Ge.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(t)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{t instanceof me?e.push(t):t instanceof Ge&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,a=s.length;o<a;o++){const l=s[o];if(!l.isVisible())continue;const c=l.getColumnGroupShow();c==="open"?(e=!0,i=!0):c==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;if(this.expandable!==n){this.expandable=n;const o={type:Ge.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(s=>{s instanceof Ge&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}}Ge.EVENT_EXPANDED_CHANGED="expandedChanged";Ge.EVENT_EXPANDABLE_CHANGED="expandableChanged";mF([ft],Ge.prototype,"destroy",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const vF={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function WD(...r){for(let e=0;e<r.length;e++){const t=r[e];if(q(t))return t}return null}function CF(r){return r!=null&&r.length>0}function dt(r){if(!(!r||!r.length))return r[r.length-1]}function il(r,e,t){return r==null&&e==null?!0:r!=null&&e!=null&&r.length===e.length&&r.every((i,s)=>t?t(i,e[s]):e[s]===i)}function yF(r,e){return il(r,e)}function UD(r){return r.sort((e,t)=>e-t)}function SF(r,e){if(r)for(let t=r.length-2;t>=0;t--){const i=r[t]===e,s=r[t+1]===e;i&&s&&r.splice(t+1,1)}}function ns(r,e){const t=r.indexOf(e);t>=0&&r.splice(t,1)}function yw(r,e){e.forEach(t=>ns(r,t))}function pf(r,e,t){r.splice(t,0,e)}function wF(r,e,t){if(!(r==null||e==null))for(let i=e.length-1;i>=0;i--){const s=e[i];pf(r,s,t)}}function lS(r,e,t){yw(r,e),e.slice().reverse().forEach(i=>pf(r,i,t))}function Gn(r,e){return r.indexOf(e)>-1}function jD(r){return[].concat.apply([],r)}function cS(r,e){e==null||r==null||e.forEach(t=>r.push(t))}function bF(r){return r.map(uf)}function EF(r,e){if(r!=null)for(let t=r.length-1;t>=0;t--)e(r[t],t)}var xF=Object.freeze({__proto__:null,firstExistingValue:WD,existsAndNotEmpty:CF,last:dt,areEqual:il,shallowCompare:yF,sortNumerically:UD,removeRepeatsFromArray:SF,removeFromArray:ns,removeAllFromArray:yw,insertIntoArray:pf,insertArrayIntoArray:wF,moveInArray:lS,includes:Gn,flatten:jD,pushAll:cS,toStrings:bF,forEachReverse:EF});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const zD="__ag_Grid_Stop_Propagation",RF=["touchstart","touchend","touchmove","touchcancel","scroll"],oy={};function ga(r){r[zD]=!0}function dr(r){return r[zD]===!0}const Sw=(()=>{const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if(typeof oy[t]=="boolean")return oy[t];const i=document.createElement(r[t]||"div");return t="on"+t,oy[t]=t in i}})();function uv(r,e,t){let i=e;for(;i;){const s=r.getDomData(i,t);if(s)return s;i=i.parentElement}return null}function pv(r,e){return!e||!r?!1:KD(e).indexOf(r)>=0}function $D(r){const e=[];let t=r.target;for(;t;)e.push(t),t=t.parentElement;return e}function KD(r){const e=r;return e.path?e.path:e.composedPath?e.composedPath():$D(e)}function YD(r,e,t,i){const n=Gn(RF,t)?{passive:!0}:void 0;r&&r.addEventListener&&r.addEventListener(e,t,i,n)}var TF=Object.freeze({__proto__:null,stopPropagationForAgGrid:ga,isStopPropagationForAgGrid:dr,isEventSupported:Sw,getCtrlForEventTarget:uv,isElementInEventPath:pv,createEventPath:$D,getEventPath:KD,addSafePassiveEventListener:YD});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Sd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class j{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:j.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new nn),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEventAsync(e){window.setTimeout(()=>this.dispatchEvent(e),0)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,i){if(this.destroyed)return;e instanceof HTMLElement?YD(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null);return this.destroyFunctions.push(s),s}addManagedPropertyListener(e,t){if(this.destroyed)return;this.gridOptionsService.addEventListener(e,t);const i=()=>(this.gridOptionsService.removeEventListener(e,t),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null);return this.destroyFunctions.push(i),i}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.getContext()).createBean(e,i)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){return e&&e.forEach(i=>this.destroyBean(i,t)),[]}}j.EVENT_DESTROYED="destroyed";Sd([S("frameworkOverrides")],j.prototype,"frameworkOverrides",void 0);Sd([S("context")],j.prototype,"context",void 0);Sd([S("eventService")],j.prototype,"eventService",void 0);Sd([S("gridOptionsService")],j.prototype,"gridOptionsService",void 0);Sd([S("localeService")],j.prototype,"localeService",void 0);Sd([S("environment")],j.prototype,"environment",void 0);Sd([ft],j.prototype,"destroy",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},DF=function(r,e){return function(t,i){e(t,i,r)}};let Qh=class extends j{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,i){const s=new nF,{existingCols:n,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);s.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,n,s,o),c=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+c);const d=this.balanceColumnTree(l,0,c,s),h=(u,p)=>{u instanceof Ge&&u.setupExpandable(),u.setOriginalParent(p)};return this.columnUtils.depthFirstOriginalTreeSearch(null,d,h),{columnTree:d,treeDept:c}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,n=>{if(n instanceof Ge){const o=n;i.push(o)}else{const o=n;s.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}createForAutoGroups(e,t){return e.map(i=>this.createAutoGroupTreeItem(t,i))}createAutoGroupTreeItem(e,t){const i=this.findDepth(e);let s=t;for(let n=i-1;n>=0;n--){const o=new Ge(null,`FAKE_PATH_${t.getId()}}_${n}`,!0,n);this.createBean(o),o.setChildren([s]),s.setOriginalParent(o),s=o}return s}findDepth(e){let t=0,i=e;for(;i&&i[0]&&i[0]instanceof Ge;)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const a=e[o];if(a instanceof Ge){const l=a,c=this.balanceColumnTree(l.getChildren(),t+1,i,s);l.setChildren(c),n.push(l)}else{let l,c;for(let d=i-1;d>=t;d--){const h=s.getUniqueKey(null,null),u=this.createMergedColGroupDef(null),p=new Ge(u,h,!0,t);this.createBean(p),c&&c.setChildren([p]),c=p,l||(l=c)}if(l&&c)if(n.push(l),e.some(h=>h instanceof Ge)){c.setChildren([a]);continue}else{c.setChildren(e);break}n.push(a)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(n instanceof Ge){const o=n,a=this.findMaxDept(o.getChildren(),t+1);i<a&&(i=a)}}return i}recursivelyCreateColumns(e,t,i,s,n,o){return(e||[]).map(a=>this.isColumnGroup(a)?this.createColumnGroup(i,a,t,s,n,o):this.createColumn(i,a,s,n))}createColumnGroup(e,t,i,s,n,o){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),c=new Ge(a,l,!1,i);this.createBean(c);const d=this.findExistingGroup(t,o);d&&ns(o,d),d&&d.isExpanded()&&c.setExpanded(!0);const h=this.recursivelyCreateColumns(a.children,i+1,e,s,n,o);return c.setChildren(h),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s){let n=this.findExistingColumn(t,i);if(i&&n&&ns(i,n),n){const o=this.mergeColDefs(t,n.getColId());n.setColDef(o,t),this.applyColumnState(n,o)}else{const o=s.getUniqueKey(t.colId,t.field),a=this.mergeColDefs(t,o);n=new me(a,t,o,e),this.context.createBean(n)}return n}applyColumnState(e,t){const i=Ln(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){const a=Ln(t.width);if(a!=null)e.setActualWidth(a);else{const l=e.getActualWidth();e.setActualWidth(l)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort):e.setSort(void 0));const n=Ln(t.sortIndex);n!==void 0&&e.setSortIndex(n);const o=Jo(t.hide);o!==void 0&&e.setVisible(!o),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){return(t||[]).find(i=>{const s=i.getUserProvidedColDef();if(!s)return!1;const n=e.colId!=null,o=e.field!=null;return n?i.getId()===e.colId:o?s.field===e.field:s===e})}findExistingGroup(e,t){return t.find(i=>i.getColGroupDef()&&e.groupId!=null?i.getId()===e.groupId:!1)}mergeColDefs(e,t){const i={},s=this.gridOptionsService.get("defaultColDef");qs(i,s,!1,!0);const n=this.dataTypeService.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),qs(i,e,!1,!0);const o=this.gridOptionsService.get("autoGroupColumnDef"),a=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&o&&a&&qs(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},vF),s=this.gridOptionsService.get("columnTypes")||{};Et(s,(n,o)=>{n in i?console.warn(`AG Grid: the column type '${n}' is a default column type and cannot be overridden.`):i[n]=o}),e.forEach(n=>{const o=i[n.trim()];o?qs(t,o,!1,!0):console.warn("AG Grid: colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};uC([S("columnUtils")],Qh.prototype,"columnUtils",void 0);uC([S("dataTypeService")],Qh.prototype,"dataTypeService",void 0);uC([DF(0,Ss("loggerFactory"))],Qh.prototype,"setBeans",null);Qh=uC([ee("columnFactory")],Qh);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var OF=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class vt{constructor(e,t,i,s){this.displayedChildren=[],this.localEventService=new nn,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return vt.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof vt&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){const t=dt(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=e,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(vt.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let t=!1;return this.children.forEach(i=>{e===i&&(t=!0),i instanceof vt&&i.isChildInThisGroupDeepSearch(e)&&(t=!0)}),t}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{t instanceof me?e.push(t):t instanceof vt&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{t instanceof me?e.push(t):t instanceof vt&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(vt.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(i=>{if(i instanceof vt&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.localEventService.dispatchEvent(this.createAgEvent(vt.EVENT_DISPLAYED_CHILDREN_CHANGED))}}vt.EVENT_LEFT_CHANGED="leftChanged";vt.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";OF([S("gridOptionsService")],vt.prototype,"gridOptionsService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class E{}E.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";E.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";E.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";E.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";E.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";E.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";E.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";E.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";E.EVENT_COLUMN_MOVED="columnMoved";E.EVENT_COLUMN_VISIBLE="columnVisible";E.EVENT_COLUMN_PINNED="columnPinned";E.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";E.EVENT_COLUMN_RESIZED="columnResized";E.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";E.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";E.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";E.EVENT_ROW_GROUP_OPENED="rowGroupOpened";E.EVENT_ROW_DATA_CHANGED="rowDataChanged";E.EVENT_ROW_DATA_UPDATED="rowDataUpdated";E.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";E.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";E.EVENT_CHART_CREATED="chartCreated";E.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";E.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";E.EVENT_CHART_DESTROYED="chartDestroyed";E.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";E.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";E.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";E.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";E.EVENT_MODEL_UPDATED="modelUpdated";E.EVENT_CUT_START="cutStart";E.EVENT_CUT_END="cutEnd";E.EVENT_PASTE_START="pasteStart";E.EVENT_PASTE_END="pasteEnd";E.EVENT_FILL_START="fillStart";E.EVENT_FILL_END="fillEnd";E.EVENT_RANGE_DELETE_START="rangeDeleteStart";E.EVENT_RANGE_DELETE_END="rangeDeleteEnd";E.EVENT_UNDO_STARTED="undoStarted";E.EVENT_UNDO_ENDED="undoEnded";E.EVENT_REDO_STARTED="redoStarted";E.EVENT_REDO_ENDED="redoEnded";E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";E.EVENT_CELL_CLICKED="cellClicked";E.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";E.EVENT_CELL_MOUSE_DOWN="cellMouseDown";E.EVENT_CELL_CONTEXT_MENU="cellContextMenu";E.EVENT_CELL_VALUE_CHANGED="cellValueChanged";E.EVENT_CELL_EDIT_REQUEST="cellEditRequest";E.EVENT_ROW_VALUE_CHANGED="rowValueChanged";E.EVENT_CELL_FOCUSED="cellFocused";E.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";E.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";E.EVENT_ROW_SELECTED="rowSelected";E.EVENT_SELECTION_CHANGED="selectionChanged";E.EVENT_CELL_KEY_DOWN="cellKeyDown";E.EVENT_CELL_MOUSE_OVER="cellMouseOver";E.EVENT_CELL_MOUSE_OUT="cellMouseOut";E.EVENT_FILTER_CHANGED="filterChanged";E.EVENT_FILTER_MODIFIED="filterModified";E.EVENT_FILTER_OPENED="filterOpened";E.EVENT_SORT_CHANGED="sortChanged";E.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";E.EVENT_ROW_CLICKED="rowClicked";E.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";E.EVENT_GRID_READY="gridReady";E.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";E.EVENT_VIEWPORT_CHANGED="viewportChanged";E.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";E.EVENT_FIRST_DATA_RENDERED="firstDataRendered";E.EVENT_DRAG_STARTED="dragStarted";E.EVENT_DRAG_STOPPED="dragStopped";E.EVENT_CHECKBOX_CHANGED="checkboxChanged";E.EVENT_ROW_EDITING_STARTED="rowEditingStarted";E.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";E.EVENT_CELL_EDITING_STARTED="cellEditingStarted";E.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";E.EVENT_BODY_SCROLL="bodyScroll";E.EVENT_BODY_SCROLL_END="bodyScrollEnd";E.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";E.EVENT_PAGINATION_CHANGED="paginationChanged";E.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";E.EVENT_STORE_REFRESHED="storeRefreshed";E.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";E.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";E.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";E.EVENT_FLASH_CELLS="flashCells";E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";E.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";E.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";E.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";E.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";E.EVENT_ROW_DRAG_ENTER="rowDragEnter";E.EVENT_ROW_DRAG_MOVE="rowDragMove";E.EVENT_ROW_DRAG_LEAVE="rowDragLeave";E.EVENT_ROW_DRAG_END="rowDragEnd";E.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";E.EVENT_POPUP_TO_FRONT="popupToFront";E.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";E.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";E.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";E.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";E.EVENT_KEYBOARD_FOCUS="keyboardFocus";E.EVENT_MOUSE_FOCUS="mouseFocus";E.EVENT_STORE_UPDATED="storeUpdated";E.EVENT_FILTER_DESTROYED="filterDestroyed";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class XD{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ww=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const ma="ag-Grid-AutoColumn";let ff=class extends j{createAutoGroupColumns(e,t){const i=[],s=this.gridOptionsService.isTreeData();let n=this.gridOptionsService.isGroupMultiAutoColumn();return s&&n&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),n=!1),n?t.forEach((o,a)=>{i.push(this.createOneAutoGroupColumn(e,o,a))}):i.push(this.createOneAutoGroupColumn(e)),i}createOneAutoGroupColumn(e,t,i){let s=this.generateDefaultColDef(t),n;t?n=`${ma}-${t.getId()}`:n=ma;const o=this.gridOptionsService.get("autoGroupColumnDef");qs(s,o),s=this.columnFactory.mergeColDefs(s,n),s.colId=n,this.gridOptionsService.isTreeData()||Se(s.field)&&Se(s.valueGetter)&&Se(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),i&&i>0&&(s.headerCheckboxSelection=!1);const a=e.find(d=>d.getId()==n),l=this.gridOptionsService.isColumnsSortingCoupledToGroup();if(a)return l&&(s.sort=void 0,s.sortIndex=void 0),a.setColDef(s,null),this.columnFactory.applyColumnState(a,s),a;l&&(s.sort||s.initialSort||"sortIndex"in s)&&!s.field&&(s.sort=null,s.sortIndex=null,s.initialSort=null);const c=new me(s,null,n,!0);return this.context.createBean(c),c}generateDefaultColDef(e){const t=this.gridOptionsService.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),e){const o=e.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:o.headerValueGetter}),o.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:o.cellRenderer,innerRendererParams:o.cellRendererParams}}),s.showRowGroup=e.getColId()}else s.showRowGroup=!0;return s}};ww([S("columnModel")],ff.prototype,"columnModel",void 0);ww([S("columnFactory")],ff.prototype,"columnFactory",void 0);ff=ww([ee("autoGroupColService")],ff);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const AF=/[&<>"']/g,PF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function MF(r){const e=String.fromCharCode;function t(h){const u=[];if(!h)return[];const p=h.length;let f=0,g,m;for(;f<p;)g=h.charCodeAt(f++),g>=55296&&g<=56319&&f<p?(m=h.charCodeAt(f++),(m&64512)==56320?u.push(((g&1023)<<10)+(m&1023)+65536):(u.push(g),f--)):u.push(g);return u}function i(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function s(h,u){return e(h>>u&63|128)}function n(h){if(h>=0&&h<=31&&h!==10)return`_x${h.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(h&4294967168))return e(h);let u="";return h&4294965248?h&4294901760?h&4292870144||(u=e(h>>18&7|240),u+=s(h,12),u+=s(h,6)):(i(h),u=e(h>>12&15|224),u+=s(h,6)):u=e(h>>6&31|192),u+=e(h&63|128),u}const o=t(r),a=o.length;let l=-1,c,d="";for(;++l<a;)c=o[l],d+=n(c);return d}function qD(r){return r[0].toUpperCase()+r.substr(1).toLowerCase()}function pr(r,e){if(r==null)return null;const t=r.toString().toString();return e?t:t.replace(AF,i=>PF[i])}function ZD(r){if(!r||r==null)return null;const e=/([a-z])([A-Z])/g,t=/([A-Z]+)([A-Z])([a-z])/g;return r.replace(e,"$1 $2").replace(t,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}function JD(r){return r.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var _F=Object.freeze({__proto__:null,utf8_encode:MF,capitalise:qD,escapeString:pr,camelCaseToHumanText:ZD,camelCaseToHyphenated:JD});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function ia(r){const e=new Map;return r.forEach(t=>e.set(t[0],t[1])),e}function IF(r,e){const t=new Map;return r.forEach(i=>t.set(e(i),i)),t}function LF(r){const e=[];return r.forEach((t,i)=>e.push(i)),e}var FF=Object.freeze({__proto__:null,convertToMap:ia,mapById:IF,keys:LF});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class fv{}fv.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0};fv.ALL_PROPERTIES=Object.keys(fv.ColDefPropertyMap);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class yt{}yt.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault"];yt.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions"];yt.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"];yt.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"];yt.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard"];yt.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer"];yt.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"];yt.FUNCTION_PROPERTIES=[...yt.FUNCTIONAL_PROPERTIES,...yt.CALLBACK_PROPERTIES];yt.ALL_PROPERTIES=[...yt.ARRAY_PROPERTIES,...yt.OBJECT_PROPERTIES,...yt.STRING_PROPERTIES,...yt.NUMBER_PROPERTIES,...yt.FUNCTION_PROPERTIES,...yt.BOOLEAN_PROPERTIES];/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class He{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substr(1)}static getCoercionLookup(){let e={};return[...He.ARRAY_PROPERTIES,...He.OBJECT_PROPERTIES,...He.STRING_PROPERTIES,...He.FUNCTION_PROPERTIES,...He.EVENT_CALLBACKS].forEach(t=>e[t]="none"),He.BOOLEAN_PROPERTIES.forEach(t=>e[t]="boolean"),He.NUMBER_PROPERTIES.forEach(t=>e[t]="number"),e}static getValue(e,t){const i=He.coercionLookup[e];if(i){let s=t;switch(i){case"number":{s=He.toNumber(t);break}case"boolean":{s=He.toBoolean(t);break}case"none":{e==="groupAggFiltering"&&typeof t!="function"&&(s=He.toBoolean(t));break}}return s}}static getGridOptionKeys(e,t){return Object.keys(t?He.coercionLookup:e)}static copyAttributesToGridOptions(e,t,i=!1){typeof e!="object"&&(e={});const s=e;return He.getGridOptionKeys(t,i).forEach(o=>{const a=t[o];if(typeof a<"u"){const l=He.getValue(o,a);l!==void 0&&(s[o]=l)}}),e}static processOnChange(e,t){if(!e||Object.keys(e).length===0)return;const i=Object.assign({},e);i.columnTypes&&(t.setColumnTypes(i.columnTypes.currentValue,"gridOptionsChanged"),delete i.columnTypes),i.autoGroupColumnDef&&(t.setAutoGroupColumnDef(i.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete i.autoGroupColumnDef),i.defaultColDef&&(t.setDefaultColDef(i.defaultColDef.currentValue,"gridOptionsChanged"),delete i.defaultColDef),i.columnDefs&&(t.setColumnDefs(i.columnDefs.currentValue,"gridOptionsChanged"),delete i.columnDefs),Object.keys(i).forEach(n=>{const o=n,a=He.getValue(o,i[o].currentValue);t.__setProperty(o,a)});const s={type:E.EVENT_COMPONENT_STATE_CHANGED};Et(e,(n,o)=>{s[n]=o}),t.dispatchEvent(s)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string")return Number(e)}}He.EVENTS=Jh(E);He.EXCLUDED_INTERNAL_EVENTS=[E.EVENT_SCROLLBAR_WIDTH_CHANGED,E.EVENT_CHECKBOX_CHANGED,E.EVENT_HEIGHT_SCALE_CHANGED,E.EVENT_BODY_HEIGHT_CHANGED,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,E.EVENT_SCROLL_VISIBILITY_CHANGED,E.EVENT_COLUMN_HOVER_CHANGED,E.EVENT_FLASH_CELLS,E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,E.EVENT_DISPLAYED_ROWS_CHANGED,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,E.EVENT_POPUP_TO_FRONT,E.EVENT_KEYBOARD_FOCUS,E.EVENT_MOUSE_FOCUS,E.EVENT_STORE_UPDATED,E.EVENT_COLUMN_PANEL_ITEM_DRAG_START,E.EVENT_COLUMN_PANEL_ITEM_DRAG_END,E.EVENT_FILL_START,E.EVENT_FILL_END,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,E.EVENT_FULL_WIDTH_ROW_FOCUSED,E.EVENT_HEADER_HEIGHT_CHANGED,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,E.EVENT_CELL_FOCUS_CLEARED,E.EVENT_GRID_STYLES_CHANGED,E.EVENT_FILTER_DESTROYED];He.PUBLIC_EVENTS=He.EVENTS.filter(r=>!Gn(He.EXCLUDED_INTERNAL_EVENTS,r));He.EVENT_CALLBACKS=He.EVENTS.map(r=>He.getCallbackForEvent(r));He.STRING_PROPERTIES=yt.STRING_PROPERTIES;He.OBJECT_PROPERTIES=yt.OBJECT_PROPERTIES;He.ARRAY_PROPERTIES=yt.ARRAY_PROPERTIES;He.NUMBER_PROPERTIES=yt.NUMBER_PROPERTIES;He.BOOLEAN_PROPERTIES=yt.BOOLEAN_PROPERTIES;He.FUNCTION_PROPERTIES=yt.FUNCTION_PROPERTIES;He.ALL_PROPERTIES=yt.ALL_PROPERTIES;He.ALL_PROPERTIES_SET=new Set(yt.ALL_PROPERTIES);He.coercionLookup=He.getCoercionLookup();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function QD(r,e,t){const i={},s=r.filter(n=>!e.some(o=>o===n));return s.length>0&&s.forEach(n=>i[n]=bw(n,t)),i}function bw(r,e,t,i){let s=e.map(n=>({value:n,relevance:NF(r.toLowerCase(),n.toLocaleLowerCase())}));if(s.sort((n,o)=>o.relevance-n.relevance),t&&(s=s.filter(n=>n.relevance!==0)),i&&i>0){const o=s[0].relevance*i;s=s.filter(a=>o-a.relevance<0)}return s.map(n=>n.value)}function NF(r,e){const t=r.replace(/\s/g,""),i=e.replace(/\s/g,"");let s=0,n=-1;for(let o=0;o<t.length;o++){const a=i.indexOf(t[o],n+1);a!==-1&&(n=a,s+=100-n*100/1e4*100)}return s}var GF=Object.freeze({__proto__:null,fuzzyCheckStrings:QD,fuzzySuggestions:bw});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function _n(r,e,t,i){const s=t?`Please use '${t}' instead. `:"";Qe(()=>console.warn(`AG Grid: since v${r}, '${e}' is deprecated. ${s}${i??""}`),`Deprecated_${e}`)}const Dx=["__ob__","__v_skip","__metadata__"];let eu=class{constructor(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0}}}pickOneWarning(e,t){console.warn(`AG Grid: ${e} and ${t} do not work with each other, you need to pick one.`)}init(){if(this.checkForDeprecated(),this.checkForViolations(),this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.get("rowSelection")!=="multiple"&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.get("domLayout")==="autoHeight"&&!this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.is("pagination")||(console.warn("AG Grid: domLayout='autoHeight' was ignored as it is only supported by the Client-Side row model, unless using pagination."),this.gridOptions.domLayout="normal")),this.gridOptionsService.isRowModelType("serverSide")){const t=(i,s)=>`AG Grid: '${i}' is not supported on the Server-Side Row Model.`+(s?` Please use ${s} instead.`:"");this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(t("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(t("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(t("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?ie.assertRegistered(te.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");const e=(t,i)=>this.gridOptionsService.exists(t)&&ie.assertRegistered(i,t,this.gridOptionsService.getGridId());e("sideBar",te.SideBarModule),e("statusBar",te.StatusBarModule),e("enableCharts",te.GridChartsModule),e("getMainMenuItems",te.MenuModule),e("getContextMenuItems",te.MenuModule),e("allowContextMenuWithControlKey",te.MenuModule)}checkColumnDefProperties(){if(this.gridOptions.columnDefs==null)return;const e=fv.ALL_PROPERTIES,t=(i,s)=>{const n=Object.getOwnPropertyNames(i);this.checkProperties(n,[...e,...Dx],e,s,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),i.children&&i.children.forEach(o=>t(o,"columnDefs.children"))};this.gridOptions.columnDefs.forEach(i=>t(i,"columnDefs")),this.gridOptions.defaultColDef&&t(this.gridOptions.defaultColDef,"defaultColDef")}checkColumnDefViolations(){var e;const t=(e=this.gridOptionsService.get("rowModelType"))!==null&&e!==void 0?e:"clientSide",s={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[t];if(!(s!=null&&s.length))return;const n=o=>{s.forEach(a=>{a in o&&o[a]&&console.warn(`AG Grid: Column property ${a} is not supported with the row model type ${t}.`)})};this.gridOptions.columnDefs!=null&&this.gridOptions.columnDefs.forEach(o=>n(o)),this.gridOptions.autoGroupColumnDef!=null&&n(this.gridOptions.autoGroupColumnDef),this.gridOptions.defaultColDef!=null&&n(this.gridOptions.defaultColDef)}checkGridOptionsProperties(){const e=Object.getOwnPropertyNames(this.gridOptions),t=[...yt.ALL_PROPERTIES,...He.EVENT_CALLBACKS],i=[...t,"api","columnApi",...Dx,...Object.keys(this.deprecatedProperties)];this.checkProperties(e,i,t,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")}checkProperties(e,t,i,s,n){const o=QD(e,t,i);Et(o,(a,l)=>{Qe(()=>console.warn(`AG Grid: invalid ${s} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`),"invalidProperty"+s+a)}),Object.keys(o).length>0&&Qe(()=>console.warn(`AG Grid: to see all the valid ${s} properties please check: ${n}`),"invalidProperties"+s+n)}checkForDeprecated(){const e=this.gridOptions;Object.entries(this.deprecatedProperties).forEach(([t,i])=>{var s;const n=e[t];n&&(_n(i.version,t,i.newProp,i.message),i.copyToNewProp&&i.newProp&&e[i.newProp]==null&&(e[i.newProp]=(s=i.newPropValue)!==null&&s!==void 0?s:n))}),e.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),e.suppressServerSideInfiniteScroll=e.serverSideStoreType!=="partial")}checkForViolations(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()}treeDataViolations(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))}};pC([S("gridOptions")],eu.prototype,"gridOptions",void 0);pC([S("gridOptionsService")],eu.prototype,"gridOptionsService",void 0);pC([U],eu.prototype,"init",null);eu=pC([ee("gridOptionsValidator")],eu);function dS(r,e){const t=["groupRows","multipleColumns","custom","singleColumn"];return t.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid groupDisplayType value - possible values are: '${t.join("', '")}'`),!1):e===r}function kF(r,e){const t=["auto","custom"];return t.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid treeDataDisplayType value - possible values are: '${t.join("', '")}'`),!1):e===r}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Hi=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},VF=function(r,e){return function(t,i){e(t,i,r)}},HF=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};let ri=class extends j{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}init(){this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");const e=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.usingTreeData=this.gridOptionsService.isTreeData(),this.addManagedPropertyListener("groupDisplayType",()=>this.onAutoGroupColumnDefChanged()),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.onAutoGroupColumnDefChanged()),this.addManagedPropertyListener("defaultColDef",t=>this.onSharedColDefChanged(t.source)),this.addManagedPropertyListener("columnTypes",t=>this.onSharedColDefChanged(t.source))}onAutoGroupColumnDefChanged(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")}onSharedColDefChanged(e="api"){this.forceRecreateAutoGroups=!0,this.createColumnsFromColumnDefs(!0,e)}setColumnDefs(e,t="api"){const i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,t)}recreateColumnDefs(e="api"){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const i={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,n=>{i[n.getInstanceId()]=n}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,n=>{i[n.getInstanceId()]=null});const s=Object.values(i).filter(n=>n!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t="api"){const i=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const s=this.primaryColumns,n=this.primaryColumnTree,o=this.columnFactory.createColumnTree(this.columnDefs,!0,n);this.destroyOldColumns(this.primaryColumnTree,o.columnTree),this.primaryColumnTree=o.columnTree,this.primaryHeaderRowCount=o.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(c=>this.primaryColumnsMap[c.getId()]=c),this.extractRowGroupColumns(t,s),this.extractPivotColumns(t,s),this.extractValueColumns(t,s),this.ready=!0;const a=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||a)&&(this.updateGridColumns(),e&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),i&&i(),this.dispatchNewColumnsLoaded()}dispatchNewColumnsLoaded(){const e={type:E.EVENT_NEW_COLUMNS_LOADED};this.eventService.dispatchEvent(e)}dispatchEverythingChanged(e="api"){const t={type:E.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;e&&(this.gridColumns.sort((t,i)=>{const s=e.indexOf(t),n=e.indexOf(i),o=s>=0,a=n>=0;if(o&&a)return s-n;if(o)return 1;if(a)return-1;const l=this.gridColumns.indexOf(t),c=this.gridColumns.indexOf(i);return l-c}),this.gridColumns=this.placeLockedColumns(this.gridColumns))}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let t=e;const i=[];for(;t!=null;)i.push(t),t=this.getDisplayedColAfter(t);return i}checkViewportColumns(){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const t={type:E.EVENT_VIRTUAL_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}setViewportPosition(e,t){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gridOptionsService.isTreeData()?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(e,t="api"){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))return;this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const i={type:E.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(e,t){if(Se(this.secondaryColumns))return null;const i=this.getPrimaryColumn(t);let s=null;return this.secondaryColumns.forEach(n=>{const o=n.getColDef().pivotKeys,a=n.getColDef().pivotValueColumn;il(o,e)&&a===i&&(s=n)}),s}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,i;this.gridOptionsService.is("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?dt(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?dt(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}autoSizeColumns(e){const{columns:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:o="api"}=e;this.animationFrameService.flushAllFrames();const a=[];let l=-1;const c=i??this.gridOptionsService.is("skipHeaderOnAutoSize"),d=s??c;for(;l!==0;)l=0,this.actionOnGridColumns(t,h=>{if(a.indexOf(h)>=0)return!1;const u=this.autoWidthCalculator.getPreferredWidthForColumn(h,c);if(u>0){const p=this.normaliseColumnWidth(h,u);h.setActualWidth(p,o),a.push(h),l++}return!0},o);d||this.autoSizeColumnGroupsByColumns(t,o,n),this.dispatchColumnResizedEvent(a,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,i,s=null){if(e&&e.length){const n={type:E.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i};this.eventService.dispatchEvent(n)}}dispatchColumnChangedEvent(e,t,i){const s={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e,o={type:E.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i};this.eventService.dispatchEvent(o)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,o=>o.getPinned()),n={type:E.EVENT_COLUMN_PINNED,pinned:s??null,columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,o=>o.isVisible()),n={type:E.EVENT_COLUMN_VISIBLE,visible:s,columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}autoSizeColumn(e,t,i="api"){e&&this.autoSizeColumns({columns:[e],skipHeader:t,skipHeaderGroups:!0,source:i})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.getGridColumns(e).forEach(l=>{let c=l.getParent();for(;c&&c!=i;)c.isPadding()||s.add(c),c=c.getParent()});let o;const a=[];for(const l of s){for(const c of this.ctrlsService.getHeaderRowContainerCtrls())if(o=c.getHeaderCtrlForColumn(l),o)break;o&&o.resizeLeafColumnsToFit(t)}return a}autoSizeAllColumns(e,t="api"){const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:t})}getColumnsFromTree(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const o=s[n];o instanceof me?t.push(o):o instanceof Ge&&i(o.getChildren())}};return i(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,i,s){const n=[];let o=null;for(let a=0;a<t.length;a++){const l=t[a],c=t.length-a,d=Math.min(l.getColSpan(e),c),h=[l];if(d>1){const p=d-1;for(let f=1;f<=p;f++)h.push(t[a+f]);a+=p}let u;i?(u=!1,h.forEach(p=>{i(p)&&(u=!0)})):u=!0,u&&(n.length===0&&o&&(s&&s(l))&&n.push(o),n.push(l)),o=l}return n}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=s=>{const n=s.getLeft();return q(n)&&n>this.viewportLeft},i=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,t)}getAriaColumnIndex(e){return this.getAllGridColumns().indexOf(e)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,o=t<s&&i<s,a=t>n&&i>n;return!o&&!a}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,i,s,n,o="api"){if(!e||Ys(e))return;let a=!1;if(e.forEach(c=>{const d=this.getPrimaryColumn(c);if(d){if(i){if(t.indexOf(d)>=0)return;t.push(d)}else{if(t.indexOf(d)<0)return;ns(t,d)}s(d),a=!0}}),!a)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o);const l={type:n,columns:t,column:t.length===1?t[0]:null,source:o};this.eventService.dispatchEvent(l)}setRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(t,!1,i),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(t,!0,i))}addRowGroupColumn(e,t="api"){e&&this.addRowGroupColumns([e],t)}addRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),E.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),E.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumn(e,t="api"){e&&this.removeRowGroupColumns([e],t)}addPivotColumns(e,t="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,t),E.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t="api"){this.setPrimaryColumnList(e,this.pivotColumns,E.EVENT_COLUMN_PIVOT_CHANGED,(i,s)=>{s.setPivotActive(i,t)},t)}addPivotColumn(e,t="api"){this.addPivotColumns([e],t)}removePivotColumns(e,t="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,t),E.EVENT_COLUMN_PIVOT_CHANGED,t)}removePivotColumn(e,t="api"){this.removePivotColumns([e],t)}setPrimaryColumnList(e,t,i,s,n){t.length=0,q(e)&&e.forEach(o=>{const a=this.getPrimaryColumn(o);a&&t.push(a)}),(this.primaryColumns||[]).forEach(o=>{const a=t.indexOf(o)>=0;s(a,o)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(i,t,n)}setValueColumns(e,t="api"){this.setPrimaryColumnList(e,this.valueColumns,E.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc())){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t="api"){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),E.EVENT_COLUMN_VALUE_CHANGED,t)}addValueColumn(e,t="api"){e&&this.addValueColumns([e],t)}removeValueColumn(e,t="api"){this.removeValueColumns([e],t)}removeValueColumns(e,t="api"){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),E.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const i=e.getMinWidth();q(i)&&t<i&&(t=i);const s=e.getMaxWidth();return q(s)&&e.isGreaterThanMax(t)&&(t=s),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,i,s="api"){const n=[];e.forEach(o=>{const a=this.getPrimaryOrGridColumn(o.key);if(!a)return;if(n.push({width:o.newWidth,ratios:[1],columns:[a]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(t=!t),t){const c=this.getDisplayedColAfter(a);if(!c)return;const d=a.getActualWidth()-o.newWidth,h=c.getActualWidth()+d;n.push({width:h,ratios:[1],columns:[c]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;t.forEach(c=>{const d=c.getMinWidth();s+=d||0;const h=c.getMaxWidth();q(h)&&h>0?n+=h:o=!1});const a=i>=s,l=!o||i<=n;return a&&l}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(h=>this.checkMinAndMaxWidthsForSet(h)))){if(i){const h=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(h,i,s)}return}const o=[],a=[];t.forEach(h=>{const{width:u,columns:p,ratios:f}=h,g={},m={};p.forEach(y=>a.push(y));let v=!0,C=0;for(;v;){if(C++,C>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}v=!1;const y=[];let R=0,b=u;p.forEach((x,O)=>{if(m[x.getId()])b-=g[x.getId()];else{y.push(x);const N=f[O];R+=N}});const w=1/R;y.forEach((x,O)=>{const M=O===y.length-1;let N;M?N=b:(N=Math.round(f[O]*u*w),b-=N);const V=x.getMinWidth(),I=x.getMaxWidth();q(V)&&N<V?(N=V,m[x.getId()]=!0,v=!0):q(I)&&I>0&&N>I&&(N=I,m[x.getId()]=!0,v=!0),g[x.getId()]=N})}p.forEach(y=>{const R=g[y.getId()];y.getActualWidth()!==R&&(y.setActualWidth(R,s),o.push(y))})});const l=o.length>0;let c=[];l&&(c=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());const d=a.concat(c);(l||i)&&this.dispatchColumnResizedEvent(d,i,s,c)}setColumnAggFunc(e,t,i="api"){if(!e)return;const s=this.getPrimaryColumn(e);s&&(s.setAggFunc(t),this.dispatchColumnChangedEvent(E.EVENT_COLUMN_VALUE_CHANGED,[s],i))}moveRowGroupColumn(e,t,i="api"){const s=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,s);const n={type:E.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:this.rowGroupColumns.length===1?this.rowGroupColumns[0]:null,source:i};this.eventService.dispatchEvent(n)}moveColumns(e,t,i="api",s=!0){if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const n=this.getGridColumns(e);this.doesMovePassRules(n,t)&&(lS(this.gridColumns,n,t),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:n,source:i,toIndex:t,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const i=this.gridColumns.slice();return lS(i,e,t),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.gridColumns.indexOf(i),o=this.gridColumns.indexOf(s);return n-o})}doesMovePassLockedPositions(e){let t=0,i=!0;const s=n=>n?n===!0||n==="left"?0:2:1;return e.forEach(n=>{const o=s(n.getColDef().lockPosition);o<t&&(i=!1),t=o}),i}doesMovePassMarryChildren(e){let t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof Ge))return;const s=i,n=s.getColGroupDef();if(!(n&&n.marryChildren))return;const a=[];s.getLeafColumns().forEach(u=>{const p=e.indexOf(u);a.push(p)});const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,h=s.getLeafColumns().length-1;d>h&&(t=!1)}),t}moveColumn(e,t,i="api"){this.moveColumns([e],t,i)}moveColumnByIndex(e,t,i="api"){const s=this.gridColumns[e];this.moveColumn(s,t,i)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,i)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((t,i)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;const n={type:E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns.slice():null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns.slice():null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){return this.gridColumns}isEmpty(){return Ys(this.gridColumns)}isRowGroupEmpty(){return Ys(this.rowGroupColumns)}setColumnVisible(e,t,i="api"){this.setColumnsVisible([e],t,i)}setColumnsVisible(e,t=!1,i="api"){this.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColumnPinned(e,t,i="api"){e&&this.setColumnsPinned([e],t,i)}setColumnsPinned(e,t,i="api"){if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null,this.actionOnGridColumns(e,n=>n.getPinned()!==s?(n.setPinned(s),!0):!1,i,()=>({type:E.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,i,s){if(Ys(e))return;const n=[];if(e.forEach(o=>{const a=this.getGridColumn(o);if(!a)return;t(a)!==!1&&n.push(a)}),!!n.length&&(this.updateDisplayedColumns(i),q(s)&&s)){const o=s();o.columns=n,o.column=n.length===1?n[0]:null,this.eventService.dispatchEvent(o)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i>0?t[i-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?dt(s):s[0],o=`getDisplayedCol${t}`;for(;;){const a=this[o](n);if(!a)return null;const l=this.getColumnGroupAtLevel(a,i);if(l!==e)return l}}getColumnGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,s=e.isValueActive()?e.getAggFunc():null,n=e.getSort()!=null?e.getSort():null,o=e.getSortIndex()!=null?e.getSortIndex():null,a=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:n,sortIndex:o,aggFunc:s,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:a}}getColumnState(){if(Se(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=ia(this.gridColumns.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{const n=t.has(i.colId)?t.get(i.colId):-1,o=t.has(s.colId)?t.get(s.colId):-1;return n-o})}resetColumnState(e="api"){const t=this.getColumnsFromTree(this.primaryColumnTree),i=[];let s=1e3,n=1e3,o=[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),t&&(o=o.concat(t)),o.forEach(a=>{const l=(w,x)=>w??x??null,c=a.getColDef(),d=l(c.sort,c.initialSort),h=l(c.sortIndex,c.initialSortIndex),u=l(c.hide,c.initialHide),p=l(c.pinned,c.initialPinned),f=l(c.width,c.initialWidth),g=l(c.flex,c.initialFlex);let m=l(c.rowGroupIndex,c.initialRowGroupIndex),v=l(c.rowGroup,c.initialRowGroup);m==null&&(v==null||v==!1)&&(m=null,v=null);let C=l(c.pivotIndex,c.initialPivotIndex),y=l(c.pivot,c.initialPivot);C==null&&(y==null||y==!1)&&(C=null,y=null);const R=l(c.aggFunc,c.initialAggFunc),b={colId:a.getColId(),sort:d,sortIndex:h,hide:u,pinned:p,width:f,flex:g,rowGroup:v,rowGroupIndex:m,pivot:y,pivotIndex:C,aggFunc:R};Se(m)&&v&&(b.rowGroupIndex=s++),Se(C)&&y&&(b.pivotIndex=n++),i.push(b)}),this.applyColumnState({state:i,applyOrder:!0},e)}applyColumnState(e,t){if(Ys(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(o,a,l)=>{const c=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const d=a.slice(),h={},u={},p=[],f=[];let g=0;const m=this.rowGroupColumns.slice(),v=this.pivotColumns.slice();o.forEach(b=>{const w=b.colId||"";if(w.startsWith(ma)){p.push(b),f.push(b);return}const O=l(w);O?(this.syncColumnWithStateItem(O,b,e.defaultState,h,u,!1,t),ns(d,O)):(f.push(b),g+=1)});const C=b=>this.syncColumnWithStateItem(b,null,e.defaultState,h,u,!1,t);d.forEach(C);const y=(b,w,x,O)=>{const M=b[x.getId()],N=b[O.getId()],V=M!=null,I=N!=null;if(V&&I)return M-N;if(V)return-1;if(I)return 1;const H=w.indexOf(x),B=w.indexOf(O),X=H>=0,J=B>=0;return X&&J?H-B:X?-1:1};this.rowGroupColumns.sort(y.bind(this,h,m)),this.pivotColumns.sort(y.bind(this,u,v)),this.updateGridColumns();const R=this.groupAutoColumns?this.groupAutoColumns.slice():[];return p.forEach(b=>{const w=this.getAutoColumn(b.colId);ns(R,w),this.syncColumnWithStateItem(w,b,e.defaultState,null,null,!0,t)}),R.forEach(C),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),c(),{unmatchedAndAutoStates:f,unmatchedCount:g}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:n}=i(e.state||[],this.primaryColumns||[],o=>this.getPrimaryColumn(o));return(s.length>0||q(e.defaultState))&&(n=i(s,this.secondaryColumns||[],o=>this.getSecondaryColumn(o)).unmatchedCount),this.columnAnimationService.finish(),n===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const i={};e.state.forEach(n=>{if(!n.colId||i[n.colId])return;const o=this.gridColumnsMap[n.colId];o&&(t.push(o),i[n.colId]=!0)});let s=0;if(this.gridColumns.forEach(n=>{const o=n.getColId();if(i[o]!=null)return;o.startsWith(ma)?pf(t,n,s++):t.push(n)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.getPrimaryAndSecondaryAndAutoColumns(),o=(g,m,v,C)=>{const y=m.map(C),R=v.map(C);if(il(y,R))return;const w={type:g,columns:v,column:v.length===1?v[0]:null,source:e};this.eventService.dispatchEvent(w)},a=g=>{const m=[];return n.forEach(v=>{const C=s[v.getColId()];C&&g(C,v)&&m.push(v)}),m},l=g=>g.getColId();o(E.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,l),o(E.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,l),a((g,m)=>{const v=g.aggFunc!=null,C=v!=m.isValueActive(),y=v&&g.aggFunc!=m.getAggFunc();return C||y}).length>0&&this.dispatchColumnChangedEvent(E.EVENT_COLUMN_VALUE_CHANGED,this.valueColumns,e);const h=(g,m)=>g.width!=m.getActualWidth();this.dispatchColumnResizedEvent(a(h),!0,e);const u=(g,m)=>g.pinned!=m.getPinned();this.dispatchColumnPinnedEvent(a(u),e);const p=(g,m)=>g.hide==m.isVisible();this.dispatchColumnVisibleEvent(a(p),e),a((g,m)=>g.sort!=m.getSort()||g.sortIndex!=m.getSortIndex()).length>0&&this.sortController.dispatchSortChangedEvents(e),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}normaliseColumnMovedEventForColumnState(e,t){const i=this.getColumnState(),s={};i.forEach(c=>s[c.colId]=c);const n={};e.forEach(c=>{s[c.colId]&&(n[c.colId]=!0)});const o=e.filter(c=>n[c.colId]),a=i.filter(c=>n[c.colId]),l=[];a.forEach((c,d)=>{const h=o&&o[d];if(h&&h.colId!==c.colId){const u=this.getGridColumn(h.colId);u&&l.push(u)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:t,finished:!0})}syncColumnWithStateItem(e,t,i,s,n,o,a){if(!e)return;const l=(b,w)=>{const x={value1:void 0,value2:void 0};let O=!1;return t&&(t[b]!==void 0&&(x.value1=t[b],O=!0),q(w)&&t[w]!==void 0&&(x.value2=t[w],O=!0)),!O&&i&&(i[b]!==void 0&&(x.value1=i[b]),q(w)&&i[w]!==void 0&&(x.value2=i[w])),x},c=l("hide").value1;c!==void 0&&e.setVisible(!c,a);const d=l("pinned").value1;d!==void 0&&e.setPinned(d);const h=this.columnUtils.calculateColMinWidth(e.getColDef()),u=l("flex").value1;if(u!==void 0&&e.setFlex(u),e.getFlex()<=0){const b=l("width").value1;b!=null&&h!=null&&b>=h&&e.setActualWidth(b,a)}const f=l("sort").value1;f!==void 0&&(f==="desc"||f==="asc"?e.setSort(f,a):e.setSort(void 0,a));const g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;const m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,a),this.valueColumns.push(e))):(q(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),ns(this.valueColumns,e))));const{value1:v,value2:C}=l("rowGroup","rowGroupIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),this.rowGroupColumns.push(e)),s&&typeof C=="number"&&(s[e.getId()]=C)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),ns(this.rowGroupColumns,e)));const{value1:y,value2:R}=l("pivot","pivotIndex");(y!==void 0||R!==void 0)&&(typeof R=="number"||y?(e.isPivotActive()||(e.setPivotActive(!0,a),this.pivotColumns.push(e)),n&&typeof R=="number"&&(n[e.getId()]=R)):e.isPivotActive()&&(e.setPivotActive(!1,a),ns(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const i=[];return e&&e.forEach(s=>{const n=t(s);n&&i.push(n)}),i}getColumnWithValidation(e){if(e==null)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,i){if(!e)return null;if(typeof e=="string"&&i[e])return i[e];for(let s=0;s<t.length;s++)if(this.columnsMatch(t[s],e))return t[s];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(t);return i?[i]:null}getAutoColumn(e){return!this.groupAutoColumns||!q(this.groupAutoColumns)||Se(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const o=e.headerValueGetter;if(o){const a={colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return typeof o=="function"?o(a):typeof o=="string"?this.expressionService.evaluate(o,a):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return ZD(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=q(i);let n=null,o;if(s){const a=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;n=i?i.getAggFunc():null,o=!0}else{const a=e.isValueActive(),l=this.pivotMode||!this.isRowGroupEmpty();a&&l?(n=e.getAggFunc(),o=!0):o=!1}if(o){const a=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof vt)return e;const i=this.getAllDisplayedTrees(),s=typeof t=="number";let n=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,o=>{if(o instanceof vt){const a=o;let l;s?l=e===a.getGroupId()&&t===a.getPartId():l=e===a.getGroupId(),l&&(n=a)}}),n}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],t=[],i,s,n,o,a){const l=[],c=[];(this.primaryColumns||[]).forEach(u=>{const p=e.indexOf(u)<0,f=u.getColDef(),g=Jo(o(f)),m=Jo(a(f)),v=Ln(s(f)),C=Ln(n(f));let y;g!==void 0?y=g:v!==void 0?v===null?y=!1:y=v>=0:p?m!==void 0?y=m:C!==void 0?y=C!=null&&C>=0:y=!1:y=t.indexOf(u)>=0,y&&((p?v!=null||C!=null:v!=null)?l.push(u):c.push(u))});const d=u=>{const p=s(u.getColDef()),f=n(u.getColDef());return p??f};l.sort((u,p)=>{const f=d(u),g=d(p);return f===g?0:f<g?-1:1});const h=[].concat(l);return t.forEach(u=>{c.indexOf(u)>=0&&h.push(u)}),c.forEach(u=>{h.indexOf(u)<0&&h.push(u)}),t.forEach(u=>{h.indexOf(u)<0&&i(u,!1)}),h.forEach(u=>{t.indexOf(u)<0&&i(u,!0)}),h}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e="api"){const t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof Ge){const s=i.getColGroupDef(),n={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};t.push(n)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof Ge&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t="api"){this.columnAnimationService.start();const i=[];e.forEach(s=>{const n=s.groupId,o=s.open,a=this.getProvidedColumnGroup(n);a&&a.isExpanded()!==o&&(this.logger.log("columnGroupOpened("+a.getGroupId()+","+o+")"),a.setExpanded(o),i.push(a))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),i.forEach(s=>{const n={type:E.EVENT_COLUMN_GROUP_OPENED,columnGroup:s};this.eventService.dispatchEvent(n)}),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i="api"){let s;e instanceof Ge?s=e.getId():s=e||"",this.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof Ge&&i.getId()===e&&(t=i)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&Se(this.secondaryColumns)?e=this.gridColumns.filter(t=>{const i=this.groupAutoColumns&&Gn(this.groupAutoColumns,t),s=this.valueColumns&&Gn(this.valueColumns,t);return i||s}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&Gn(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(i=>{q(i.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=t=>{const i=t.getColDef(),s=i.showRowGroup;i&&q(s)&&(this.groupDisplayColumns.push(t),typeof s=="string"?this.groupDisplayColumnsMap[s]=t:s===!0&&this.getRowGroupColumns().forEach(n=>{this.groupDisplayColumnsMap[n.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return q(this.secondaryColumns)}setSecondaryColumns(e,t="api"){const i=e&&e.length>0;if(!(!i&&Se(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);const s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(n=>this.secondaryColumnsMap[n.getId()]=n),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(o=>{if(q(o.children)){const l=o;i&&i(l),s(l.children)}else t&&t(o)})};e&&s(e)}updateGridColumns(){const e=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;let t;if(this.secondaryColumns&&this.secondaryBalancedTree){const s=this.secondaryColumns.every(n=>this.gridColumnsMap[n.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&t){const s=ia(this.groupAutoColumns.map(n=>[n,!0]));t=t.filter(n=>!s.has(n)),t=[...this.groupAutoColumns,...t]}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!il(e,this.gridBalancedTree)){const s={type:E.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){if(this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,!(this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")))){const t="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";Qe(()=>console.warn(t),"autoHeightActive.wrongRowModel")}}orderGridColsLike(e){if(Se(e))return;const t=ia(e.map((c,d)=>[c,d]));let i=!0;if(this.gridColumns.forEach(c=>{t.has(c)&&(i=!1)}),i)return;const s=ia(this.gridColumns.map(c=>[c,!0])),n=e.filter(c=>s.has(c)),o=ia(n.map(c=>[c,!0])),a=this.gridColumns.filter(c=>!o.has(c)),l=n.slice();a.forEach(c=>{let d=c.getOriginalParent();if(!d){l.push(c);return}const h=[];for(;!h.length&&d;)d.getLeafColumns().forEach(g=>{const m=l.indexOf(g)>=0,v=h.indexOf(g)<0;m&&v&&h.push(g)}),d=d.getOriginalParent();if(!h.length){l.push(c);return}const u=h.map(f=>l.indexOf(f)),p=Math.max(...u);pf(l,c,p+1)}),this.gridColumns=l}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&e!==void 0?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?t:t.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(n=>{const o=n.getColDef().lockPosition;o==="right"?s.push(n):o==="left"||o===!0?t.push(n):i.push(n)}),[...t,...i,...s]}addAutoGroupToGridColumns(){if(Se(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:E.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinDisplayedColumns(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.primaryColumns.slice(0),i=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(i){let n=this.getWidthOfColsInList(s);s.forEach(o=>{n-=o.getActualWidth(),o.setLeft(n,e)})}else{let n=0;s.forEach(o=>{o.setLeft(n,e),n+=o.getActualWidth()})}yw(t,s)}),t.forEach(s=>{s.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof vt&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,i=>{i instanceof me&&t.push(i)})}extractViewportColumns(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let i;switch(e){case"left":i=this.viewportRowLeft[t];break;case"right":i=this.viewportRowRight[t];break;default:i=this.viewportRowCenter[t];break}return Se(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);const t=(i,s,n)=>{let o=!1;for(let a=0;a<i.length;a++){const l=i[a];let c=!1;if(l instanceof me)c=e[l.getId()]===!0;else{const h=l.getDisplayedChildren();h&&(c=t(h,s,n+1))}c&&(o=!0,s[n]||(s[n]=[]),s[n].push(l))}return o};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.viewportColumns.map(e).join("#"),i=this.viewportColumnsHash!==t;return i&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let i=-1;e.resizingCols&&e.resizingCols.forEach(h=>{const u=this.displayedColumnsCenter.indexOf(h);i<u&&(i=u)});const s=h=>{const u=this.displayedColumnsCenter.indexOf(h)>i;return h.getFlex()&&u},n=this.displayedColumnsCenter.filter(h=>!s(h)),o=this.displayedColumnsCenter.filter(h=>s(h)),a=[];if(!o.length)return[];const l=[];let c;e:for(;;){const h=o.reduce((u,p)=>u+p.getFlex(),0);c=this.flexViewportWidth-this.getWidthOfColsInList(n);for(let u=0;u<o.length;u++){const p=o[u],f=c*p.getFlex()/h;let g=0;const m=p.getMinWidth(),v=p.getMaxWidth();if(q(m)&&f<m?g=m:q(v)&&f>v&&(g=v),g){p.setActualWidth(g,t),ns(o,p),a.push(p),n.push(p);continue e}l[u]=Math.round(f)}break}let d=c;return o.forEach((h,u)=>{h.setActualWidth(Math.min(l[u],d),t),a.push(h),d-=l[u]}),e.skipSetLeft||this.setLeftValues(t),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(a,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var n,o,a,l,c;const d={};s&&((n=s==null?void 0:s.columnLimits)===null||n===void 0||n.forEach(C=>{var{key:y}=C,R=HF(C,["key"]);d[typeof y=="string"?y:y.getColId()]=R}));const h=this.getAllDisplayedColumns(),u=e===this.getWidthOfColsInList(h);if(e<=0||!h.length||u)return;const p=[],f=[];h.forEach(C=>{C.getColDef().suppressSizeToFit===!0?f.push(C):p.push(C)});const g=p.slice(0);let m=!1;const v=C=>{ns(p,C),f.push(C)};for(p.forEach(C=>C.resetActualWidth(t));!m;){m=!0;const C=e-this.getWidthOfColsInList(f);if(C<=0)p.forEach(y=>{var R,b;const w=(b=(R=d==null?void 0:d[y.getId()])===null||R===void 0?void 0:R.minWidth)!==null&&b!==void 0?b:s==null?void 0:s.defaultMinWidth;if(typeof w=="number"){y.setActualWidth(w);return}y.setMinimum(t)});else{const y=C/this.getWidthOfColsInList(p);let R=C;for(let b=p.length-1;b>=0;b--){const w=p[b],x=d==null?void 0:d[w.getId()],O=(o=x==null?void 0:x.minWidth)!==null&&o!==void 0?o:s==null?void 0:s.defaultMinWidth,M=(a=x==null?void 0:x.maxWidth)!==null&&a!==void 0?a:s==null?void 0:s.defaultMaxWidth,N=(l=w.getMinWidth())!==null&&l!==void 0?l:0,V=(c=w.getMaxWidth())!==null&&c!==void 0?c:Number.MAX_VALUE,I=typeof O=="number"&&O>N?O:w.getMinWidth(),H=typeof M=="number"&&M<V?M:w.getMaxWidth();let B=Math.round(w.getActualWidth()*y);q(I)&&B<I?(B=I,v(w),m=!1):q(H)&&B>H?(B=H,v(w),m=!1):b===0&&(B=R),w.setActualWidth(B,t,!0),R-=B}}}g.forEach(C=>{C.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(g,!0,t)}buildDisplayedTrees(e){const t=[],i=[],s=[];e.forEach(o=>{switch(o.getPinned()){case"left":t.push(o);break;case"right":i.push(o);break;default:s.push(o);break}});const n=new XD;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,this.gridBalancedTree,n,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,this.gridBalancedTree,n,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,this.gridBalancedTree,n,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,t=>{t instanceof vt&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.usingTreeData)&&!i&&!t){const o=this.groupAutoColumns||[],a=this.autoGroupColService.createAutoGroupColumns(o,this.rowGroupColumns);if(!this.autoColsEqual(a,this.groupAutoColumns)||e)return this.groupAutoColumns=a,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){const e=this.gridOptionsService.get("groupDisplayType");if(e?dS("custom",e):!1)return!0;const i=this.gridOptionsService.get("treeDataDisplayType");return i?kF("custom",i):!1}autoColsEqual(e,t){return il(e,t,(i,s)=>i.getColId()===s.getColId())}getWidthOfColsInList(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getGridBalancedTree(){return this.gridBalancedTree}hasFloatingFilters(){return this.gridColumns?this.gridColumns.some(t=>t.getColDef().floatingFilter):!1}getFirstDisplayedColumn(){const e=this.gridOptionsService.is("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?dt(s):s[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const s={type:E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("headerHeight"))!==null&&e!==void 0?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gridOptionsService.getNum("floatingFiltersHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("groupHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))!==null&&e!==void 0?e:this.getGroupHeaderHeight()}};Hi([S("expressionService")],ri.prototype,"expressionService",void 0);Hi([S("columnFactory")],ri.prototype,"columnFactory",void 0);Hi([S("displayedGroupCreator")],ri.prototype,"displayedGroupCreator",void 0);Hi([S("ctrlsService")],ri.prototype,"ctrlsService",void 0);Hi([S("autoWidthCalculator")],ri.prototype,"autoWidthCalculator",void 0);Hi([S("columnUtils")],ri.prototype,"columnUtils",void 0);Hi([S("columnAnimationService")],ri.prototype,"columnAnimationService",void 0);Hi([S("autoGroupColService")],ri.prototype,"autoGroupColService",void 0);Hi([Ne("aggFuncService")],ri.prototype,"aggFuncService",void 0);Hi([Ne("valueCache")],ri.prototype,"valueCache",void 0);Hi([Ne("animationFrameService")],ri.prototype,"animationFrameService",void 0);Hi([S("sortController")],ri.prototype,"sortController",void 0);Hi([S("columnDefFactory")],ri.prototype,"columnDefFactory",void 0);Hi([U],ri.prototype,"init",null);Hi([ft],ri.prototype,"destroyColumns",null);Hi([VF(0,Ss("loggerFactory"))],ri.prototype,"setBeans",null);ri=Hi([ee("columnModel")],ri);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var BF=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let hS=class extends j{calculateColMinWidth(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){const t=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e);let s;const n=Ln(e.width),o=Ln(e.initialWidth);return n!=null?s=n:o!=null?s=o:s=200,Math.max(Math.min(s,i),t)}getOriginalPathForColumn(e,t){const i=[];let s=!1;const n=(o,a)=>{for(let l=0;l<o.length;l++){if(s)return;const c=o[l];c instanceof Ge?(n(c.getChildren(),a+1),i[a]=c):c===e&&(s=!0)}};return n(t,0),s?i:null}depthFirstOriginalTreeSearch(e,t,i){t&&t.forEach(s=>{s instanceof Ge&&this.depthFirstOriginalTreeSearch(s,s.getChildren(),i),i(s,e)})}depthFirstAllColumnTreeSearch(e,t){e&&e.forEach(i=>{i instanceof vt&&this.depthFirstAllColumnTreeSearch(i.getChildren(),t),t(i)})}depthFirstDisplayedColumnTreeSearch(e,t){e&&e.forEach(i=>{i instanceof vt&&this.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),t),t(i)})}};hS=BF([ee("columnUtils")],hS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var WF=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let uS=class extends j{createDisplayedGroups(e,t,i,s,n){const o=[];let a,l;const c=this.mapOldGroupsById(n);return e.forEach(d=>{const h=this.getOriginalPathForColumn(t,d),u=[],p=!l;for(let g=0;g<h.length;g++)if(p||h[g]!==l[g]){const m=this.createColumnGroup(h[g],i,c,s);u[g]=m,g==0?o.push(m):u[g-1].addChild(m)}else u[g]=a[g];u.length===0?o.push(d):dt(u).addChild(d),a=u,l=h}),this.setupParentsIntoColumns(o,null),o}createColumnGroup(e,t,i,s){const n=e.getGroupId(),o=t.getInstanceIdForKey(n),a=vt.createUniqueId(n,o);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),q(l)?l.reset():(l=new vt(e,n,o,s),this.context.createBean(l)),l}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(n instanceof vt){const o=n;t[n.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoColumns(e,t){e.forEach(i=>{if(i.setParent(t),i instanceof vt){const s=i;this.setupParentsIntoColumns(s.getChildren(),s)}})}getOriginalPathForColumn(e,t){const i=[];let s=!1;const n=(o,a)=>{for(let l=0;l<o.length;l++){if(s)return;const c=o[l];c instanceof Ge?(n(c.getChildren(),a+1),i[a]=c):c===t&&(s=!0)}};return n(e,0),s?i:(console.warn("AG Grid: could not get path"),null)}};uS=WF([ee("displayedGroupCreator")],uS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var UF=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let pS=class extends j{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};pS=UF([ee("agStackComponentsRegistry")],pS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Sr(r,e,t){t==null||t==""?Ew(r,e):Kn(r,e,t)}function Kn(r,e,t){r.setAttribute(eO(e),t.toString())}function Ew(r,e){r.removeAttribute(eO(e))}function eO(r){return`aria-${r}`}function bi(r,e){e?r.setAttribute("role",e):r.removeAttribute("role")}function tO(r){let e;return r==="asc"?e="ascending":r==="desc"?e="descending":r==="mixed"?e="other":e="none",e}function iO(r){return parseInt(r.getAttribute("aria-level"),10)}function sO(r){return parseInt(r.getAttribute("aria-posinset"),10)}function jF(r){return r.getAttribute("aria-describedby")||""}function kl(r,e){Sr(r,"label",e)}function fC(r,e){Sr(r,"labelledby",e)}function nO(r,e){Sr(r,"description",e)}function oO(r,e){Sr(r,"describedby",e)}function rO(r,e){Sr(r,"live",e)}function aO(r,e){Sr(r,"level",e)}function xw(r,e){Sr(r,"disabled",e)}function gC(r,e){Sr(r,"hidden",e)}function fo(r,e){Kn(r,"expanded",e)}function lO(r){Ew(r,"expanded")}function Rw(r,e){Kn(r,"setsize",e)}function Tw(r,e){Kn(r,"posinset",e)}function cO(r,e){Kn(r,"multiselectable",e)}function dO(r,e){Kn(r,"rowcount",e)}function Dw(r,e){Kn(r,"rowindex",e)}function hO(r,e){Kn(r,"colcount",e)}function Ow(r,e){Kn(r,"colindex",e)}function uO(r,e){Kn(r,"colspan",e)}function pO(r,e){Kn(r,"sort",e)}function fO(r){Ew(r,"sort")}function tu(r,e){Sr(r,"selected",e)}function gO(r,e){Kn(r,"checked",e===void 0?"mixed":e)}function zF(r,e){Sr(r,"controls",e.id),fC(e,r.id)}function mC(r,e){return e===void 0?r("ariaIndeterminate","indeterminate"):e===!0?r("ariaChecked","checked"):r("ariaUnchecked","unchecked")}var $F=Object.freeze({__proto__:null,setAriaRole:bi,getAriaSortState:tO,getAriaLevel:iO,getAriaPosInSet:sO,getAriaDescribedBy:jF,setAriaLabel:kl,setAriaLabelledBy:fC,setAriaDescription:nO,setAriaDescribedBy:oO,setAriaLive:rO,setAriaLevel:aO,setAriaDisabled:xw,setAriaHidden:gC,setAriaExpanded:fo,removeAriaExpanded:lO,setAriaSetSize:Rw,setAriaPosInSet:Tw,setAriaMultiSelectable:cO,setAriaRowCount:dO,setAriaRowIndex:Dw,setAriaColCount:hO,setAriaColIndex:Ow,setAriaColSpan:uO,setAriaSort:pO,removeAriaSort:fO,setAriaSelected:tu,setAriaChecked:gO,setAriaControls:zF,getAriaCheckboxStateName:mC});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */let ry,Dm,ay,ly,cy,dy,fS,gS;function vo(){return ry===void 0&&(ry=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ry}function Aw(){if(Dm===void 0)if(vo()){const r=navigator.userAgent.match(/version\/(\d+)/i);r&&(Dm=r[1]!=null?parseFloat(r[1]):0)}else Dm=0;return Dm}function vC(){if(ay===void 0){const r=window;ay=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return ay}function Pw(){return ly===void 0&&(ly=/(firefox)/i.test(navigator.userAgent)),ly}function Mw(){return cy===void 0&&(cy=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),cy}function Vl(){return dy===void 0&&(dy=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),dy}function CC(){return!vo()||Aw()>=15}function gv(r){if(!r)return null;const e=r.tabIndex,t=r.getAttribute("tabIndex");return e===-1&&(t===null||t===""&&!Pw())?null:e.toString()}function mO(){if(!document.body)return-1;let r=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){const i=r*2;if(t.style.height=i+"px",i>e||t.clientHeight!==i)break;r=i}return document.body.removeChild(t),r}function vO(){var r,e,t;return(e=(r=document.body)===null||r===void 0?void 0:r.clientWidth)!==null&&e!==void 0?e:window.innerHeight||((t=document.documentElement)===null||t===void 0?void 0:t.clientWidth)||-1}function CO(){var r,e,t;return(e=(r=document.body)===null||r===void 0?void 0:r.clientHeight)!==null&&e!==void 0?e:window.innerHeight||((t=document.documentElement)===null||t===void 0?void 0:t.clientHeight)||-1}function yO(){return gS==null&&SO(),gS}function SO(){const r=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",r.appendChild(e);let t=e.offsetWidth-e.clientWidth;t===0&&e.clientWidth===0&&(t=null),e.parentNode&&e.parentNode.removeChild(e),t!=null&&(gS=t,fS=t===0)}function Hh(){return fS==null&&SO(),fS}var KF=Object.freeze({__proto__:null,isBrowserSafari:vo,getSafariVersion:Aw,isBrowserChrome:vC,isBrowserFirefox:Pw,isMacOsUserAgent:Mw,isIOSUserAgent:Vl,browserSupportsPreventScroll:CC,getTabIndex:gv,getMaxDivHeight:mO,getBodyWidth:vO,getBodyHeight:CO,getScrollbarWidth:yO,isInvisibleScrollbar:Hh});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Bh(r,e){return r.toString().padStart(e,"0")}function wO(r,e){const t=[];for(let i=r;i<=e;i++)t.push(i);return t}function YF(r){return typeof r=="string"&&(r=parseInt(r,10)),typeof r=="number"?Math.floor(r):null}function XF(r,e){let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(r&255),r>>>=8;return t}function qF(r,e,t){return typeof r!="number"?"":_w(Math.round(r*100)/100,e,t)}function _w(r,e,t){return typeof r!="number"?"":r.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function ZF(r){return r==null?null:r.reduce((e,t)=>e+t,0)}function JF(r,e){return r>=0?r:e}function QF(r,e){const t=parseInt(r,10);return!isNaN(t)&&isFinite(t)&&t>0?t:e}var eN=Object.freeze({__proto__:null,padStartWidthZeros:Bh,createArrayOfNumbers:wO,cleanNumber:YF,decToHex:XF,formatNumberTwoDecimalPlacesAndCommas:qF,formatNumberCommas:_w,sum:ZF,zeroOrGreater:JF,oneOrGreater:QF});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function kn(r,e=!0,t="-"){if(!r)return null;let i=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(s=>Bh(s,2)).join(t);return e&&(i+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(s=>Bh(s,2)).join(":")),i}const hy=r=>{if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Km(r,e="YYYY-MM-DD"){const t=Bh(r.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${r.getFullYear()}`,MMMM:()=>i[r.getMonth()],MMM:()=>i[r.getMonth()].slice(0,3),MM:()=>Bh(r.getMonth()+1,2),Mo:()=>`${r.getMonth()+1}${hy(r.getMonth()+1)}`,M:()=>`${r.getMonth()+1}`,Do:()=>`${r.getDate()}${hy(r.getDate())}`,DD:()=>Bh(r.getDate(),2),D:()=>`${r.getDate()}`,dddd:()=>s[r.getDay()],ddd:()=>s[r.getDay()].slice(0,3),dd:()=>s[r.getDay()].slice(0,2),do:()=>`${r.getDay()}${hy(r.getDay())}`,d:()=>`${r.getDay()}`},o=new RegExp(Object.keys(n).join("|"),"g");return e.replace(o,a=>a in n?n[a]():a)}function Co(r){if(!r)return null;const[e,t]=r.split(" ");if(!e)return null;const i=e.split("-").map(h=>parseInt(h,10));if(i.filter(h=>!isNaN(h)).length!==3)return null;const[s,n,o]=i,a=new Date(s,n-1,o);if(a.getFullYear()!==s||a.getMonth()!==n-1||a.getDate()!==o)return null;if(!t||t==="00:00:00")return a;const[l,c,d]=t.split(":").map(h=>parseInt(h,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),d>=0&&d<60&&a.setSeconds(d),a}var tN=Object.freeze({__proto__:null,serialiseDate:kn,dateToFormattedString:Km,parseDateTimeFromString:Co});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */let Om;function iN(r,e,t){const i=r.parentElement;let s=i&&i.firstChild;for(;s;)e&&s.classList.toggle(e,s===r),t&&s.classList.toggle(t,s!==r),s=s.nextSibling}const bO="[tabindex], input, select, button, textarea, [href]",Iw=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *";function Lw(r){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,t="input, select, button, textarea",i=e.call(r,t),s=e.call(r,Iw),n=Au(r);return i&&!s&&n}function je(r,e,t={}){const{skipAriaHidden:i}=t;r.classList.toggle("ag-hidden",!e),i||gC(r,!e)}function EO(r,e,t={}){const{skipAriaHidden:i}=t;r.classList.toggle("ag-invisible",!e),i||gC(r,!e)}function iu(r,e){const t="disabled",i=e?s=>s.setAttribute(t,""):s=>s.removeAttribute(t);i(r),Hw(r.querySelectorAll("input"),s=>i(s))}function Hc(r,e,t){let i=0;for(;r;){if(r.classList.contains(e))return!0;if(r=r.parentElement,typeof t=="number"){if(++i>t)break}else if(r===t)break}return!1}function wd(r){const{height:e,width:t,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:n,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:h,marginRight:u,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(r);return{height:parseFloat(e),width:parseFloat(t),borderTopWidth:parseFloat(i),borderRightWidth:parseFloat(s),borderBottomWidth:parseFloat(n),borderLeftWidth:parseFloat(o),paddingTop:parseFloat(a),paddingRight:parseFloat(l),paddingBottom:parseFloat(c),paddingLeft:parseFloat(d),marginTop:parseFloat(h),marginRight:parseFloat(u),marginBottom:parseFloat(p),marginLeft:parseFloat(f),boxSizing:g}}function eg(r){const e=wd(r);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function yC(r){const e=wd(r);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function Fw(r){const e=wd(r),t=e.marginBottom+e.marginTop;return Math.ceil(r.offsetHeight+t)}function SC(r){const e=wd(r),t=e.marginLeft+e.marginRight;return Math.ceil(r.offsetWidth+t)}function gf(){if(typeof Om=="boolean")return Om;const r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(r),r.scrollLeft=1,Om=Math.floor(r.scrollLeft)===0,document.body.removeChild(r),Om}function mf(r,e){let t=r.scrollLeft;return e&&(t=Math.abs(t),vC()&&!gf()&&(t=r.scrollWidth-r.clientWidth-t)),t}function mv(r,e,t){t&&(gf()?e*=-1:(vo()||vC())&&(e=r.scrollWidth-r.clientWidth-e)),r.scrollLeft=e}function Qs(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function sN(r,e){ra(r.querySelector(e))}function ra(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function Au(r){return r.offsetParent!==null}function Li(r){const e=document.createElement("div");return e.innerHTML=(r||"").trim(),e.firstChild}function nN(r,e){r.lastChild?r.insertAdjacentHTML("afterbegin",e):r.innerHTML=e}function oN(r,e){return r.attributes&&r.attributes[e]?r.attributes[e].value:null}function mS(r){return r&&r.clientHeight?r.clientHeight:0}function vS(r){return r&&r.clientWidth?r.clientWidth:0}function Nw(r,e,t){if(t&&t.nextSibling===e)return;const i=document.activeElement,s=e.contains(i);t?t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e):r.firstChild&&r.firstChild!==e&&r.insertAdjacentElement("afterbegin",e),s&&i&&CC()&&i.focus({preventScroll:!0})}function Gw(r,e){for(let t=0;t<e.length;t++){const i=e[t],s=r.children[t];s!==i&&r.insertBefore(i,s)}}function xO(r,e,t){t?t.insertAdjacentElement("afterend",e):r.firstChild?r.insertAdjacentElement("afterbegin",e):r.appendChild(e)}function rN(r,e){q(r.firstChild)?r.insertBefore(e,r.firstChild):r.appendChild(e)}function kw(r,e){if(e)for(const[t,i]of Object.entries(e)){if(!t||!t.length||i==null)continue;const s=JD(t),n=i.toString(),o=n.replace(/\s*!important/g,""),a=o.length!=n.length?"important":void 0;r.style.setProperty(s,o,a)}}function RO(r){return r.clientWidth<r.scrollWidth}function TO(r){return r.clientHeight<r.scrollHeight}function tg(r,e){e==="flex"?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):Vn(r,e)}function Vn(r,e){e=Vw(e),r.style.width=e.toString(),r.style.maxWidth=e.toString(),r.style.minWidth=e.toString()}function aN(r,e){e==="flex"?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Bc(r,e)}function Bc(r,e){e=Vw(e),r.style.height=e.toString(),r.style.maxHeight=e.toString(),r.style.minHeight=e.toString()}function Vw(r){return typeof r=="number"?`${r}px`:r}function ig(r){return r instanceof Node||r instanceof HTMLElement}function DO(r){if(r==null)return[];const e=[];return Hw(r,t=>e.push(t)),e}function OO(r,e){if(r)for(let t=0;t<r.length;t++){const i=r[t];e(i.name,i.value)}}function pl(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t.toString())}function Hw(r,e){if(r!=null)for(let t=0;t<r.length;t++)e(r[t])}var lN=Object.freeze({__proto__:null,radioCssClass:iN,FOCUSABLE_SELECTOR:bO,FOCUSABLE_EXCLUDE:Iw,isFocusableFormField:Lw,setDisplayed:je,setVisible:EO,setDisabled:iu,isElementChildOfClass:Hc,getElementSize:wd,getInnerHeight:eg,getInnerWidth:yC,getAbsoluteHeight:Fw,getAbsoluteWidth:SC,isRtlNegativeScroll:gf,getScrollLeft:mf,setScrollLeft:mv,clearElement:Qs,removeElement:sN,removeFromParent:ra,isVisible:Au,loadTemplate:Li,appendHtml:nN,getElementAttribute:oN,offsetHeight:mS,offsetWidth:vS,ensureDomOrder:Nw,setDomChildOrder:Gw,insertWithDomOrder:xO,prependDC:rN,addStylesToElement:kw,isHorizontalScrollShowing:RO,isVerticalScrollShowing:TO,setElementWidth:tg,setFixedWidth:Vn,setElementHeight:aN,setFixedHeight:Bc,formatSize:Vw,isNodeOrElement:ig,copyNodeList:DO,iterateNamedNodeMap:OO,addOrRemoveAttribute:pl,nodeListForEach:Hw});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const AO={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function Pn(r,e,t){const i=Wt(r,e,t);if(i){const{className:n}=i;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return i}const s=document.createElement("span");return s.appendChild(i),s}function Wt(r,e,t,i){let s=null;const n=t&&t.getColDef().icons;if(n&&(s=n[r]),e&&!s){const o=e.get("icons");o&&(s=o[r])}if(s){let o;if(typeof s=="function")o=s();else if(typeof s=="string")o=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Li(o);if(ig(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=AO[r];return a||(i?a=r:(console.warn(`AG Grid: Did not find icon ${r}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),bi(o,"presentation"),o}}var cN=Object.freeze({__proto__:null,iconNameClassMap:AO,createIcon:Pn,createIconNoSpan:Wt});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class W{}W.BACKSPACE="Backspace";W.TAB="Tab";W.ENTER="Enter";W.ESCAPE="Escape";W.SPACE=" ";W.LEFT="ArrowLeft";W.UP="ArrowUp";W.RIGHT="ArrowRight";W.DOWN="ArrowDown";W.DELETE="Delete";W.F2="F2";W.PAGE_UP="PageUp";W.PAGE_DOWN="PageDown";W.PAGE_HOME="Home";W.PAGE_END="End";W.A="KeyA";W.C="KeyC";W.D="KeyD";W.V="KeyV";W.X="KeyX";W.Y="KeyY";W.Z="KeyZ";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const dN=65,hN=67,uN=86,pN=68,fN=90,gN=89;function Bw(r){return r.altKey||r.ctrlKey||r.metaKey?!1:r.key.length===1}function vv(r,e,t,i,s){const n=i?i.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;const o={event:e,editing:s,column:i,api:r.api,node:t,data:t.data,colDef:i.getColDef(),context:r.context,columnApi:r.columnApi};return!!(n&&n(o))}function PO(r,e,t,i){const s=i.getDefinition(),n=s&&s.suppressHeaderKeyboardEvent;if(!q(n))return!1;const o={api:r.api,columnApi:r.columnApi,context:r.context,colDef:s,column:i,headerRowIndex:t,event:e};return!!n(o)}function MO(r){const{keyCode:e}=r;let t;switch(e){case dN:t=W.A;break;case hN:t=W.C;break;case uN:t=W.V;break;case pN:t=W.D;break;case fN:t=W.Z;break;case gN:t=W.Y;break;default:t=r.code}return t}function _O(r,e=!1){return r===W.DELETE?!0:!e&&r===W.BACKSPACE?Mw():!1}var mN=Object.freeze({__proto__:null,isEventFromPrintableCharacter:Bw,isUserSuppressingKeyboardEvent:vv,isUserSuppressingHeaderKeyboardEvent:PO,normaliseQwertyAzerty:MO,isDeleteKey:_O});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Ww(r,e,t){if(t===0)return!1;const i=Math.abs(r.clientX-e.clientX),s=Math.abs(r.clientY-e.clientY);return Math.max(i,s)<=t}var vN=Object.freeze({__proto__:null,areEventsNear:Ww});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function CN(r,e){if(!r)return!1;const t=(o,a)=>{const l=e[o.id],c=e[a.id],d=l!==void 0,h=c!==void 0,u=d&&h,p=!d&&!h;return u?l-c:p?o.__objectId-a.__objectId:d?1:-1};let i,s,n=!1;for(let o=0;o<r.length-1;o++)if(i=r[o],s=r[o+1],t(i,s)>0){n=!0;break}return n?(r.sort(t),!0):!1}function yN(r,e){const t=[];i(r);function i(s){s&&s.forEach(n=>{if(n.group||n.hasChildren()){t.push(n.key);const o=t.join("|");e(n,o),i(n.childrenAfterGroup),t.pop()}})}}var SN=Object.freeze({__proto__:null,sortRowNodesByOrder:CN,traverseNodesWithKey:yN});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Uw(r){const e=new Set;return r.forEach(t=>e.add(t)),e}var wN=Object.freeze({__proto__:null,convertToSet:Uw});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const bN=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$F),xF),KF),tN),lN),TF),pF),GF),sF),cN),mN),FF),vN),eN),dF),SN),wN),_F),A=bN;/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Ni{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ih;(function(r){r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED"})(Ih||(Ih={}));class Xe{constructor(e){this.status=Ih.IN_PROGRESS,this.resolution=null,this.waiters=[],e(t=>this.onDone(t),t=>this.onReject(t))}static all(e){return new Xe(t=>{let i=e.length;const s=new Array(i);e.forEach((n,o)=>{n.then(a=>{s[o]=a,i--,i===0&&t(s)})})})}static resolve(e=null){return new Xe(t=>t(e))}then(e){return new Xe(t=>{this.status===Ih.RESOLVED?t(e(this.resolution)):this.waiters.push(i=>t(e(i)))})}resolveNow(e,t){return this.status===Ih.RESOLVED?t(this.resolution):e}onDone(e){this.status=Ih.RESOLVED,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){console.warn("TBI")}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var jw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},ro;(function(r){r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING"})(ro||(ro={}));class va extends j{constructor(e){super(),this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.state=ro.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1,this.parentComp=e}postConstruct(){this.tooltipShowDelay=this.getTooltipDelay("show")||this.DEFAULT_SHOW_TOOLTIP_DELAY,this.tooltipHideDelay=this.getTooltipDelay("hide")||this.DEFAULT_HIDE_TOOLTIP_DELAY,this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");const e=this.parentComp.getGui();this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this))}destroy(){this.setToDoNothing(),super.destroy()}onMouseEnter(e){if(Vl()||this.state!=ro.NOTHING)return;const t=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.lastMouseEvent=e,this.state=ro.WAITING_TO_SHOW}onMouseLeave(){this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}setToDoNothing(){this.state===ro.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=ro.NOTHING}onMouseMove(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===ro.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()}onMouseDown(){this.setToDoNothing()}getTooltipDelay(e){const t=this.gridOptionsService.getNum("tooltipShowDelay"),i=this.gridOptionsService.getNum("tooltipHideDelay"),s=e==="show"?t:i,n=qD(e);return q(s)?(s<0&&Qe(()=>console.warn(`AG Grid: tooltip${n}Delay should not be lower than 0`),`tooltip${n}DelayWarn`),Math.max(200,s)):null}hideTooltip(){this.tooltipComp&&(this.destroyTooltipComp(),va.lastTooltipHideTime=new Date().getTime()),this.state=ro.NOTHING}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp;window.setTimeout(()=>{e(),this.getContext().destroyBean(t)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}isLastTooltipHiddenRecently(){const e=new Date().getTime(),t=va.lastTooltipHideTime;return e-t<this.SHOW_QUICK_TOOLTIP_DIFF}showTooltip(){const e=Object.assign({},this.parentComp.getTooltipParams());if(!q(e.value)){this.setToDoNothing();return}this.state=ro.SHOWING,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}newTooltipComponentCallback(e,t){if(this.state!==ro.SHOWING||this.tooltipInstanceCount!==e){this.getContext().destroyBean(t);return}const s=t.getGui();this.tooltipComp=t,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom");const n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:s,ariaLabel:n("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}positionTooltipUnderLastMouseEvent(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack})}clearTimeouts(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}}jw([S("popupService")],va.prototype,"popupService",void 0);jw([S("userComponentFactory")],va.prototype,"userComponentFactory",void 0);jw([U],va.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class EN{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const xN=new Ni;class Q extends j{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=xN.next(),this.cssClassManager=new EN(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const t=()=>{this.usingBrowserTooltips?this.getGui().removeAttribute("title"):this.tooltipFeature=this.destroyBean(this.tooltipFeature)},i=()=>{this.usingBrowserTooltips?this.getGui().setAttribute("title",this.tooltipText):this.tooltipFeature=this.createBean(new va(this))};this.tooltipText!=e&&(this.tooltipText&&t(),e!=null&&(this.tooltipText=e,this.tooltipText&&i()))}createChildComponentsFromTags(e,t){DO(e.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;const n=this.createComponentFromElement(s,o=>{o.getGui()&&this.copyAttributesFromNode(s,o.getGui())},t);if(n){if(n.addItems&&s.children.length){this.createChildComponentsFromTags(s,t);const o=Array.prototype.slice.call(s.children);n.addItems(o)}this.swapComponentForNode(n,e,s)}else s.childNodes&&this.createChildComponentsFromTags(s,t)})}createComponentFromElement(e,t,i){const s=e.nodeName,n=i?i[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(s);if(o){Q.elementGettingCreated=e;const a=new o(n);return a.setParentComponent(this),this.createBean(a,null,t),a}return null}copyAttributesFromNode(e,t){OO(e.attributes,(i,s)=>t.setAttribute(i,s))}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,i)}swapInComponentForQuerySelectors(e,t){const i=this;this.iterateOverQuerySelectors(s=>{i[s.attributeName]===t&&(i[s.attributeName]=e)})}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;t!=null;){const i=t.__agComponentMetaData,s=cC(t.constructor);i&&i[s]&&i[s].querySelectors&&i[s].querySelectors.forEach(n=>e(n)),t=Object.getPrototypeOf(t)}}setTemplate(e,t){const i=Li(e);this.setTemplateFromElement(i,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(t=>{const i=n=>e[t.attributeName]=n;if(t.refSelector&&this.eGui.getAttribute("ref")===t.refSelector)i(this.eGui);else{const n=this.eGui.querySelector(t.querySelector);n&&i(n.__agComponent||n)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){if(e!=null)if(t||(t=this.eGui),ig(e))t.appendChild(e);else{const i=e;t.appendChild(i.getGui())}}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;EO(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;je(this.eGui,e,{skipAriaHidden:i});const s={type:Q.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(s)}}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){const{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}}Q.EVENT_DISPLAYED_CHANGED="displayedChanged";zw([S("agStackComponentsRegistry")],Q.prototype,"agStackComponentsRegistry",void 0);zw([Ou],Q.prototype,"preConstructOnComponent",null);zw([Ou],Q.prototype,"createChildComponentsPreConstruct",null);function G(r){return RN.bind(this,`[ref=${r}]`,r)}function RN(r,e,t,i,s){if(r===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof s=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}TN(t,"querySelectors",{attributeName:i,querySelector:r,refSelector:e})}function TN(r,e,t){const i=DN(r,cC(r.constructor));i[e]||(i[e]=[]),i[e].push(t)}function DN(r,e){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[e]||(r.__agComponentMetaData[e]={}),r.__agComponentMetaData[e]}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var IO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class $w extends Q{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}}IO([G("eFloatingFilterText")],$w.prototype,"eFloatingFilterText",void 0);IO([S("columnModel")],$w.prototype,"columnModel",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class LO{constructor(e,t,i,s){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){je(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class FO{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const NO={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var GO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class bs extends j{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=Object.assign({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(bs.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",t=>{if(!(t.defaultPrevented||dr(t))){if(this.callbacks.shouldStopEventPropagation(t)){ga(t);return}t.key===W.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}})}}bs.FOCUS_MANAGED_CLASS="ag-focus-managed";GO([S("focusService")],bs.prototype,"focusService",void 0);GO([U],bs.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Kw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const kO="ag-resizer-wrapper",ON=`<div class="${kO}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`;class bd extends j{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:o,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const h=!!this.element.offsetParent;if(h){const u=this.findBoundaryElement(),p=window.getComputedStyle(u);if(p.minWidth!=null){const f=u.offsetWidth-this.element.offsetWidth;d=parseInt(p.minWidth,10)-f}if(p.minHeight!=null){const f=u.offsetHeight-this.element.offsetHeight;c=parseInt(p.minHeight,10)-f}}if(this.minHeight=n||c,this.minWidth=i||d,s&&this.setWidth(s),o&&this.setHeight(o),(!s||!o)&&this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(h&&t&&this.boundaryEl){const u=parseFloat(this.boundaryEl.style.top),p=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(p)?0:p,isNaN(u)?0:u)}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Bc(i,e),e=Fw(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Bc(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,a=e?0:n.top;let l=0;if(t){const d=this.element.parentElement;if(d){const{bottom:h}=d.getBoundingClientRect();l=h-s.bottom}}return i+a-o-l}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Vn(t,e),e=SC(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Vn(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const i=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,a=t.clientX-this.dragStartPosition.x,l=t.clientY-this.dragStartPosition.y,c=this.shouldSkipX(t,!!i,!!n,a)?0:a,d=this.shouldSkipY(t,!!s,o,l)?0:l;return{movementX:c,movementY:d}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:n.left;let c=l<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return c?!0:(t?c=s<0&&e.clientX>l+o.left||s>0&&e.clientX<l+o.left:i?c=s<0&&e.clientX>a.right||s>0&&e.clientX<l+o.left:c=s<0&&e.clientX>a.right||s>0&&e.clientX<a.right,c)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:n.top;let c=l<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return c?!0:(t?c=s<0&&e.clientY>l+o.top+i||s>0&&e.clientY<l+o.top:c=s<0&&e.clientY>a.bottom||s>0&&e.clientY<a.bottom,c)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(ON,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${kO}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let a=this.minHeight||0,l=this.minWidth||0;if(o){const c=window.getComputedStyle(n);c.minHeight&&(a=parseInt(c.minHeight,10)),c.minWidth&&(l=parseInt(c.minWidth,10))}else a=n.offsetHeight,l=n.offsetWidth;t+=a,i+=l}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:a}=this.currentResizer,l=n||a,c=o||s,{movementX:d,movementY:h}=this.calculateMouseMovement({e,isLeft:a,isTop:s}),u=this.position.x,p=this.position.y;let f=0,g=0;if(l&&d){const m=a?-1:1,v=this.getWidth(),C=v+d*m;let y=!1;a&&(f=v-C,(u+f<=0||C<=this.minWidth)&&(y=!0,f=0)),y||this.setWidth(C)}if(c&&h){const m=s?-1:1,v=this.getHeight(),C=v+h*m;let y=!1;s?(g=v-C,(p+g<=0||C<=this.minHeight)&&(y=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&f||g)&&this.offsetElement(u+f,p+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const i={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}}Kw([S("popupService")],bd.prototype,"popupService",void 0);Kw([S("resizeObserverService")],bd.prototype,"resizeObserverService",void 0);Kw([S("dragService")],bd.prototype,"dragService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Yw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class en extends Q{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null}postConstruct(){this.resetTemplate(),this.createManagedBean(new bs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new bd(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=en.isUseApplyButton(e),this.createButtonPanel()}createButtonPanel(){const{buttons:e}=this.providedFilterParams;if(!e||e.length<1||this.isReadOnly())return;const t=document.createElement("div");t.classList.add("ag-filter-apply-panel");const i=s=>{let n,o;switch(s){case"apply":n=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":n=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":n=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":n=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:console.warn("AG Grid: Unknown button type specified");return}const l=Li(`<button
                    type="${s==="apply"?"submit":"button"}"
                    ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${n}
                </button>`);t.appendChild(l),this.addManagedListener(l,"click",o)};Uw(e).forEach(s=>i(s)),this.getGui().appendChild(t)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=en.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),t=or(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t});const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;(i==="Enter"||i==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi());iu(this.getRefElement("applyFilterButton"),!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter",{positionableFeature:i,gridOptionsService:s}=this;t?(i.restoreLastSize(),i.setResizable(s.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,t){return en.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,NO[e])}getCellValue(e){const{api:t,colDef:i,column:s,columnApi:n,context:o}=this.providedFilterParams;return this.providedFilterParams.valueGetter({api:t,colDef:i,column:s,columnApi:n,context:o,data:e.data,getValue:a=>e.data[a],node:e})}getPositionableElement(){return this.eFilterBody}}Yw([S("rowModel")],en.prototype,"rowModel",void 0);Yw([G("eFilterBody")],en.prototype,"eFilterBody",void 0);Yw([U],en.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var AN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class wC extends Q{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s}=this.config;e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){Qs(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(je(this.eLabel,!1),bi(this.eLabel,"presentation")):(je(this.eLabel,!0),bi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(tg(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return iu(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}}AN([U],wC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Ms extends wC{constructor(e,t,i){super(e,t),this.className=i}postConstruct(){super.postConstruct(),this.className&&this.addCssClass(this.className)}onValueChange(e){return this.addManagedListener(this,Ms.EVENT_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Vn(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:Ms.EVENT_CHANGED}),this)}}Ms.EVENT_CHANGED="valueChange";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var bC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Pu extends Ms{constructor(e,t,i,s){super(e,`<div class="ag-picker-field" role="presentation">
                <div ref="eLabel"></div>
                <div ref="eWrapper"
                    class="ag-wrapper ag-picker-field-wrapper"
                    tabIndex="-1"
                    aria-expanded="false"
                    ${s?`role="${s}"`:""}
                >
                    <div ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,t),this.pickerIcon=i,this.isPickerDisplayed=!1,this.isDestroyingPicker=!1,this.skipClick=!1}postConstruct(){super.postConstruct();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e),oO(this.eWrapper,e);const t=()=>{if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.pickerComponent=this.showPicker())},i=this.getGui();if(this.addManagedListener(i,"mousedown",s=>{!this.skipClick&&this.pickerComponent&&this.pickerComponent.isAlive()&&Au(this.pickerComponent.getGui())&&i.contains(s.target)&&(this.skipClick=!0)}),this.addManagedListener(i,"keydown",s=>{switch(s.key){case W.UP:case W.DOWN:case W.ENTER:case W.SPACE:t();case W.ESCAPE:this.isPickerDisplayed&&s.preventDefault();break}}),this.addManagedListener(this.eWrapper,"click",t),this.addManagedListener(this.eLabel,"click",t),this.pickerIcon){const s=Wt(this.pickerIcon,this.gridOptionsService);s&&this.eIcon.appendChild(s)}}refreshLabel(){q(this.getLabel())?fC(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),super.refreshLabel()}setAriaLabel(e){return kl(this.eWrapper,e),this}setInputWidth(e){return tg(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}}bC([G("eLabel")],Pu.prototype,"eLabel",void 0);bC([G("eWrapper")],Pu.prototype,"eWrapper",void 0);bC([G("eDisplayField")],Pu.prototype,"eDisplayField",void 0);bC([G("eIcon")],Pu.prototype,"eIcon",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var PN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class la extends Q{constructor(e="default"){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.options=[],this.itemEls=[]}init(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const t=e.key;switch(t){case W.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case W.DOWN:case W.UP:const i=t===W.DOWN;let s;if(e.preventDefault(),!this.highlightedEl)s=this.itemEls[i?0:this.itemEls.length-1];else{let o=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);o=Math.min(Math.max(o,0),this.itemEls.length-1),s=this.itemEls[o]}this.highlightItem(s);break}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,s=pr(i||t);return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{Tw(t,i+1),Rw(t,e.length)})}renderOption(e,t){const i=document.createElement("div");bi(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`),i.innerHTML=`<span>${t}</span>`,i.tabIndex=-1,this.itemEls.push(i),this.addManagedListener(i,"mouseover",()=>this.highlightItem(i)),this.addManagedListener(i,"mouseleave",()=>this.clearHighlighted()),this.addManagedListener(i,"click",()=>this.setValue(e)),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text!=null?s.text:s.value,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()}highlightItem(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(la.ACTIVE_CLASS),tu(this.highlightedEl,!0),this.highlightedEl.focus())}clearHighlighted(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(la.ACTIVE_CLASS),tu(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:Ms.EVENT_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:la.EVENT_ITEM_SELECTED})}}la.EVENT_ITEM_SELECTED="selectedItem";la.ACTIVE_CLASS="ag-active-item";PN([U],la.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var VO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Oo extends Pu{constructor(e){super(e,"ag-select","smallDown","listbox")}init(){this.listComponent=this.createBean(new la("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,la.EVENT_ITEM_SELECTED,()=>{this.hideList&&this.hideList(),this.dispatchEvent({type:Oo.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,Ms.EVENT_CHANGED,()=>{this.setValue(this.listComponent.getValue(),!1,!0),this.hideList&&this.hideList()})}showPicker(){const e=this.listComponent.getGui(),t=this.gridOptionsService.getDocument(),i=this.addManagedListener(t.body,"wheel",a=>{!e.contains(a.target)&&this.hideList&&this.hideList()}),s=this.addManagedListener(e,"focusout",a=>{!e.contains(a.relatedTarget)&&this.hideList&&this.hideList()}),n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,closedCallback:()=>{this.hideList=null,this.isPickerDisplayed=!1,s(),i(),this.isAlive()&&(fo(this.eWrapper,!1),this.getFocusableElement().focus())},ariaLabel:n("ariaLabelSelectField","Select Field")});return o&&(this.hideList=o.hideFunc),this.isPickerDisplayed=!0,tg(e,SC(this.eWrapper)),fo(this.eWrapper,!0),e.style.maxHeight=eg(this.popupService.getPopupParent())+"px",e.style.position="absolute",this.popupService.positionPopupByComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:e,position:"under",keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}setValue(e,t,i){return this.value===e?this:(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),super.setValue(e,t)))}destroy(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),super.destroy()}}Oo.EVENT_ITEM_SELECTED="selectedItem";VO([S("popupService")],Oo.prototype,"popupService",void 0);VO([U],Oo.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Xw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class go extends Ms{constructor(e,t,i="text",s="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,t),this.inputType=i,this.displayFieldTag=s}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{width:e,value:t}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),this.addInputListeners()}refreshLabel(){q(this.getLabel())?fC(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),super.refreshLabel()}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return tg(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return pl(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return kl(this.eInput,e),this}setDisabled(e){return iu(this.eInput,e),super.setDisabled(e)}}Xw([G("eLabel")],go.prototype,"eLabel",void 0);Xw([G("eWrapper")],go.prototype,"eWrapper",void 0);Xw([G("eInput")],go.prototype,"eInput",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class _s extends go{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchEvent({type:_s.EVENT_CHANGED,selected:e,previousValue:t,event:i});const s=this.getInputElement(),n={type:E.EVENT_CHECKBOX_CHANGED,id:s.id,name:s.name,selected:e,previousValue:t};this.eventService.dispatchEvent(n)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class qw extends _s{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,E.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Zw{constructor(e,t){this.localeService=e,this.optionsFactory=t}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e;let{conditions:n}=s;if(!n){const{condition1:l,condition2:c}=s;n=[l,c]}const o=n.map(l=>this.getModelAsString(l)),a=s.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(a,NO[a])} `)}else{if(e.type===Ie.BLANK||e.type===Ie.NOT_BLANK)return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:o,displayName:a,numberOfInputs:l}=n||{};return o&&a&&l===0?(i(o,a),a):this.conditionToString(s,n)}}}}class Ie extends en{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}const i=[Ie.EMPTY,Ie.NOT_BLANK,Ie.BLANK];return e&&i.indexOf(e)>=0?0:e===Ie.IN_RANGE?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let o;if(i){const a=e,l=t;o=this.areSimpleModelsEqual(a,l)}else{const a=e,l=t;o=a.operator===l.operator&&il(a.conditions,l.conditions,(c,d)=>this.areSimpleModelsEqual(c,d))}return o}setModelIntoUi(e){if(e.operator){let i=e;i.conditions||(i.conditions=[i.condition1,i.condition2]);const s=this.validateAndUpdateConditions(i.conditions),n=this.getNumConditions();if(s<n)this.removeConditionsAndOperators(s);else if(s>n)for(let a=n;a<s;a++)this.createJoinOperatorPanel(),this.createOption();const o=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Xe.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),Qe(()=>console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),"simpleFilterSetModelMaxNumConditions"),t=this.maxNumConditions),t}doesFilterPass(e){var t;const i=this.getModel();if(i==null)return!0;const{operator:s}=i,n=[];if(s){const a=i;n.push(...(t=a.conditions)!==null&&t!==void 0?t:[])}else n.push(i);return n[s&&s==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new FO,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators()}setNumConditions(e){var t,i;e.suppressAndOrCondition!=null&&Qe(()=>console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),"simpleFilterSuppressAndOrCondition"),e.alwaysShowBothConditions!=null&&Qe(()=>console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=(t=e.maxNumConditions)!==null&&t!==void 0?t:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Qe(()=>console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.'),"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(i=e.numAlwaysVisibleConditions)!==null&&i!==void 0?i:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Qe(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Qe(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Oo);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new qw);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let t=-1,i=!0;for(let s=0;s<this.getNumConditions();s++)this.isConditionUiComplete(s)?t=s:i=!1;if(this.shouldAddNewConditionAtEnd(i))this.createJoinOperatorPanel(),this.createOption();else{const s=(e=this.lastUiCompletePosition)!==null&&e!==void 0?e:this.getNumConditions()-2;if(t<s){this.removeConditionsAndOperators(s+1);const n=t+1,o=s-n;o>0&&this.removeConditionsAndOperators(n,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const o=this.isConditionDisabled(n,e);s.setDisabled(o||this.filterListOptions.length<=1),n===1&&(iu(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((s,n)=>{je(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((s,n)=>{s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach((s,n)=>{s.setValue(i,!0)}),this.forEachInput((s,n,o,a)=>{this.setElementDisplayed(s,n<a),this.setElementDisabled(s,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>ra(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{ra(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e||!e.suppressFocus&&!this.isReadOnly()){const t=this.getInputs(0)[0];if(!t)return;t instanceof go&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();(!this.areModelsEqual(e,this.getModelFromUi())||this.hasInvalidInputs())&&this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,i=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<t;(l||c)&&(this.removeConditionsAndOperators(a,1),s=!0,c&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(dC(this.filterPlaceholder)){const s=this.filterPlaceholder,n=this.eTypes[t].getValue(),o=this.translate(n);i=s({filterOptionKey:n,filterOption:o,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof go))return;const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",a=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(a)})}setElementValue(e,t){e instanceof go&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Q&&je(e.getGui(),t)}setElementDisabled(e,t){e instanceof Q&&iu(e.getGui(),t)}attachElementOnChange(e,t){e instanceof go&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const a=n[o];a!=null&&i(a,o,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===Ie.EMPTY||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Xe.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((s,n,o,a)=>{o===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s,n)=>{this.setElementValue(t,i===0&&s===0?e:null)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,s,i);return o??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}}Ie.EMPTY="empty";Ie.BLANK="blank";Ie.NOT_BLANK="notBlank";Ie.EQUALS="equals";Ie.NOT_EQUAL="notEqual";Ie.LESS_THAN="lessThan";Ie.LESS_THAN_OR_EQUAL="lessThanOrEqual";Ie.GREATER_THAN="greaterThan";Ie.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Ie.IN_RANGE="inRange";Ie.CONTAINS="contains";Ie.NOT_CONTAINS="notContains";Ie.STARTS_WITH="startsWith";Ie.ENDS_WITH="endsWith";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Ue extends Ie{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case Ue.EQUALS:case Ue.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case Ue.GREATER_THAN:case Ue.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case Ue.LESS_THAN:case Ue.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case Ue.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case Ue.BLANK:return!0;case Ue.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=e[0]!=null?s(e[0],t):0;switch(i.type){case Ue.EQUALS:return n===0;case Ue.NOT_EQUAL:return n!==0;case Ue.GREATER_THAN:return n>0;case Ue.GREATER_THAN_OR_EQUAL:return n>=0;case Ue.LESS_THAN:return n<0;case Ue.LESS_THAN_OR_EQUAL:return n<=0;case Ue.IN_RANGE:{const o=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case Ue.BLANK:return this.isBlank(t);case Ue.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var MN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const Ox=1e3,Ax=1/0;class HO extends Zw{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i==Ie.IN_RANGE||s===2,o=Co(e.dateFrom),a=Co(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const c=o!==null?Km(o,l):"null",d=a!==null?Km(a,l):"null";return`${c}-${d}`}return o!=null?Km(o,l):`${i}`}}class Mu extends Ue{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=Ox,this.maxValidYear=Ax}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Co(t)||null,i&&Co(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,s)=>{if(e[i]!=null)if(isNaN(e[i]))console.warn(`AG Grid: DateFilter ${i} is not a number`);else return e[i]==null?s:Number(e[i]);return s};this.minValidYear=t("minValidYear",Ox),this.maxValidYear=t("maxValidYear",Ax),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.filterModelFormatter=new HO(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new LO(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Mu.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const n=document.createElement("div");n.classList.add(`ag-filter-${s}`),n.classList.add(`ag-filter-date-${s}`),t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;const t=s=>s!=null&&s.getUTCFullYear()>=this.minValidYear&&s.getUTCFullYear()<=this.maxValidYear;let i=!0;return this.forEachInput((s,n,o,a)=>{o!==e||!i||n>=a||(i=i&&t(s.getDate()))}),i}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=kn(s[0])),s.length>1&&(i.dateTo=kn(s[1])),Object.assign({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},i)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(i.getDate())}),t}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}}Mu.DEFAULT_FILTER_OPTIONS=[Ue.EQUALS,Ue.GREATER_THAN,Ue.LESS_THAN,Ue.NOT_EQUAL,Ue.IN_RANGE,Ue.BLANK,Ue.NOT_BLANK];MN([S("userComponentFactory")],Mu.prototype,"userComponentFactory",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class BO extends Q{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.optionsFactory=new FO,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;const t=this.isTypeEditable(this.lastType);this.setEditable(t)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=[Ie.IN_RANGE,Ie.EMPTY,Ie.BLANK,Ie.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Jw=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class EC extends BO{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return Mu.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent();const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input")),this.filterModelFormatter=new HO(this.filterParams,this.localeService,this.optionsFactory)}setEditable(e){je(this.eDateWrapper,e),je(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){if(this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t))return;super.setLastTypeFromModel(e);const i=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(i),i){if(e){const s=e;this.dateComp.setDate(Co(s.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}onDateChanged(){const e=this.dateComp.getDate(),t=kn(e);this.params.parentFilterInstance(i=>{if(i){const s=Co(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}createDateComponent(){const e=en.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),t={onDateChanged:or(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new LO(this.getContext(),this.userComponentFactory,t,this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}getFilterModelFormatter(){return this.filterModelFormatter}}Jw([S("userComponentFactory")],EC.prototype,"userComponentFactory",void 0);Jw([G("eReadOnlyText")],EC.prototype,"eReadOnlyText",void 0);Jw([G("eDateWrapper")],EC.prototype,"eDateWrapper",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _N=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class WO extends Q{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){const t=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement(),s=this.shouldUseBrowserDatePicker(e);s&&(i.type="date");const n=s&&vo();this.addManagedListener(i,"mousedown",()=>{this.eDateInput.isDisabled()||n||i.focus()}),this.addManagedListener(i,"input",l=>{l.target===t.activeElement&&(this.eDateInput.isDisabled()||e.onDateChanged())});const{minValidYear:o,maxValidYear:a}=e.filterParams||{};o&&(i.min=`${o}-01-01`),a&&(i.max=`${a}-12-31`)}getDate(){return Co(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(kn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:vC()||Pw()||vo()&&Aw()>=14.1}}_N([G("eDateInput")],WO.prototype,"eDateInput",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Hl extends go{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value!==e&&(this.eInput.value=q(e)?e:""),i}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{Bw(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",i=>{var s;const n=(s=i.clipboardData)===null||s===void 0?void 0:s.getData("text");n&&n.split("").some(o=>!e.test(o))&&i.preventDefault()})}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Qw extends Hl{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,pl(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,pl(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,pl(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(q(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class UO extends Zw{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==Ie.IN_RANGE||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}}function jO(r){const{allowedCharPattern:e}=r??{};return e??null}class sg extends Ue{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new UO(this.localeService,this.optionsFactory)}getDefaultFilterOptions(){return sg.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=jO(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),bi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new Hl({allowedCharPattern:s}):new Qw);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=ul(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}}sg.DEFAULT_FILTER_OPTIONS=[Ue.EQUALS,Ue.NOT_EQUAL,Ue.LESS_THAN,Ue.LESS_THAN_OR_EQUAL,Ue.GREATER_THAN,Ue.GREATER_THAN_OR_EQUAL,Ue.IN_RANGE,Ue.BLANK,Ue.NOT_BLANK];/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class zO extends Zw{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==Ie.IN_RANGE||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}}class $t extends Ie{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const t=e&&e.trim();return t===""?e:t}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?$t.DEFAULT_FORMATTER:$t.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new zO(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(A.doOnce(()=>console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead."),"textCustomComparator.deprecated"),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||$t.DEFAULT_MATCHER}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{if(s<o){const a=ul(i.getValue()),l=(this.textFilterParams.trimInput?$t.trimInput(a):a)||null;t.push(l),i.setValue(l,!0)}}),t}getDefaultFilterOptions(){return $t.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),bi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new Hl);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){const t=[Ie.NOT_EQUAL,Ie.NOT_CONTAINS,Ie.BLANK];return e?t.indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(f=>this.formatter(f))||[],o=this.formatter(t),{api:a,colDef:l,column:c,columnApi:d,context:h,textFormatter:u}=this.textFilterParams;if(i.type===Ie.BLANK)return this.isBlank(t);if(i.type===Ie.NOT_BLANK)return!this.isBlank(t);const p={api:a,colDef:l,column:c,columnApi:d,context:h,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:u};return n.some(f=>this.matcher(Object.assign(Object.assign({},p),{filterText:f})))}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}}$t.DEFAULT_FILTER_OPTIONS=[Ie.CONTAINS,Ie.NOT_CONTAINS,Ie.EQUALS,Ie.NOT_EQUAL,Ie.STARTS_WITH,Ie.ENDS_WITH,Ie.BLANK,Ie.NOT_BLANK];$t.DEFAULT_FORMATTER=r=>r;$t.DEFAULT_LOWERCASE_FORMATTER=r=>r==null?null:r.toString().toLowerCase();$t.DEFAULT_MATCHER=({filterOption:r,value:e,filterText:t})=>{if(t==null)return!1;switch(r){case $t.CONTAINS:return e.indexOf(t)>=0;case $t.NOT_CONTAINS:return e.indexOf(t)<0;case $t.EQUALS:return e===t;case $t.NOT_EQUAL:return e!=t;case $t.STARTS_WITH:return e.indexOf(t)===0;case $t.ENDS_WITH:const i=e.lastIndexOf(t);return i>=0&&i===e.length-t.length;default:return!1}};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var eb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class $O extends j{constructor(e){super(),this.params=e}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new Hl(this.params.config)),this.eFloatingFilterTextInput.setInputAriaLabel(this.params.ariaLabel),e.appendChild(this.eFloatingFilterTextInput.getGui())}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}addValueChangedListener(e){const t=this.eFloatingFilterTextInput.getGui();this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)}}class ng extends BO{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc(),s=`${t} ${i("ariaFilterInput","Filter Input")}`;if(this.floatingFilterInputService=this.createFloatingFilterInputService(s),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer),super.init(e),this.applyActive=en.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const n=en.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),o=or(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.addValueChangedListener(o)}}syncUpWithParentFilter(e){const t=e.key===W.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=$t.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}}eb([S("columnModel")],ng.prototype,"columnModel",void 0);eb([G("eFloatingFilterInputContainer")],ng.prototype,"eFloatingFilterInputContainer",void 0);eb([U],ng.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class IN extends j{constructor(e){super(),this.params=e,this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Qw),this.eFloatingFilterTextInput=this.createManagedBean(new Hl),this.eFloatingFilterTextInput.setDisabled(!0),this.eFloatingFilterNumberInput.setInputAriaLabel(this.params.ariaLabel),this.eFloatingFilterTextInput.setInputAriaLabel(this.params.ariaLabel),e.appendChild(this.eFloatingFilterNumberInput.getGui()),e.appendChild(this.eFloatingFilterTextInput.getGui())}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}addValueChangedListener(e){this.setupListeners(this.eFloatingFilterNumberInput.getGui(),e),this.setupListeners(this.eFloatingFilterTextInput.getGui(),e)}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}}class LN extends ng{init(e){super.init(e),this.filterModelFormatter=new UO(this.localeService,this.optionsFactory)}getDefaultFilterOptions(){return sg.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){const t=jO(this.params.filterParams);return t?this.createManagedBean(new $O({config:{allowedCharPattern:t},ariaLabel:e})):this.createManagedBean(new IN({ariaLabel:e}))}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class FN extends ng{init(e){super.init(e),this.filterModelFormatter=new zO(this.localeService,this.optionsFactory)}getDefaultFilterOptions(){return $t.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.createManagedBean(new $O({ariaLabel:e}))}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class St{constructor(e,t=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new nn,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const s={type:St.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!Ww(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:St.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>St.DOUBLE_TAP_MILLIS){const i={type:St.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}}St.EVENT_TAP="tap";St.EVENT_DOUBLE_TAP="doubleTap";St.EVENT_LONG_TAP="longTap";St.DOUBLE_TAP_MILLIS=500;/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ed=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class cn extends Q{constructor(e){super(),e||this.setTemplate(cn.TEMPLATE)}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,t,i){if(t==null)return;const s=Wt(e,this.gridOptionsService,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";je(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";je(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),i=e==null;je(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";je(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),i=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&e!==void 0?e:-1,s=t.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!==null&&a!==void 0?a:-1>=1}),n=i>=0&&s;je(this.eSortOrder,n,{skipAriaHidden:!0}),i>=0?this.eSortOrder.innerHTML=(i+1).toString():Qs(this.eSortOrder)}}cn.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;Ed([G("eSortOrder")],cn.prototype,"eSortOrder",void 0);Ed([G("eSortAsc")],cn.prototype,"eSortAsc",void 0);Ed([G("eSortDesc")],cn.prototype,"eSortDesc",void 0);Ed([G("eSortMixed")],cn.prototype,"eSortMixed",void 0);Ed([G("eSortNone")],cn.prototype,"eSortNone",void 0);Ed([S("columnModel")],cn.prototype,"columnModel",void 0);Ed([S("sortController")],cn.prototype,"sortController",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var dn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Bi extends Q{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=WD(this.params.template,Bi.TEMPLATE);return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=pr(this.currentDisplayName);this.eText&&(this.eText.innerHTML=t)}}setupIcons(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)}addInIcon(e,t,i){if(t==null)return;const s=Wt(e,this.gridOptionsService,i);s&&t.appendChild(s)}setupTap(){const{gridOptionsService:e}=this;if(e.is("suppressTouch"))return;const t=new St(this.getGui(),!0),i=e.is("suppressMenuHide"),s=i&&q(this.eMenu),n=s?new St(this.eMenu,!0):t;if(this.params.enableMenu){const o=s?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>{e.api.showColumnMenuAfterMouseClick(this.params.column,l.touchStart)};this.addManagedListener(n,St[o],a)}if(this.params.enableSorting){const o=a=>{const l=a.touchStart.target;i&&this.eMenu.contains(l)||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(t,St.EVENT_TAP,o)}this.addDestroyFunc(()=>t.destroy()),s&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){const e=!this.gridOptionsService.is("suppressMenuHide"),t=Vl()&&e;return this.params.enableMenu&&!t}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){ra(this.eMenu);return}const e=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",()=>this.showMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",e)}showMenu(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new cn(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;const e=this.gridOptionsService.get("multiSortKey")==="ctrl";this.addManagedListener(this.params.column,me.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{const s=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(s||o)){const l=e?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});const t=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,t),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}setupFilterIcon(){this.eFilter&&(this.addManagedListener(this.params.column,me.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())}onFilterChanged(){const e=this.params.column.isFilterActive();je(this.eFilter,e,{skipAriaHidden:!0})}}Bi.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;dn([S("sortController")],Bi.prototype,"sortController",void 0);dn([S("menuFactory")],Bi.prototype,"menuFactory",void 0);dn([S("columnModel")],Bi.prototype,"columnModel",void 0);dn([G("eFilter")],Bi.prototype,"eFilter",void 0);dn([G("eSortIndicator")],Bi.prototype,"eSortIndicator",void 0);dn([G("eMenu")],Bi.prototype,"eMenu",void 0);dn([G("eLabel")],Bi.prototype,"eLabel",void 0);dn([G("eText")],Bi.prototype,"eText",void 0);dn([G("eSortOrder")],Bi.prototype,"eSortOrder",void 0);dn([G("eSortAsc")],Bi.prototype,"eSortAsc",void 0);dn([G("eSortDesc")],Bi.prototype,"eSortDesc",void 0);dn([G("eSortMixed")],Bi.prototype,"eSortMixed",void 0);dn([G("eSortNone")],Bi.prototype,"eSortNone",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var tb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class xd extends Q{constructor(){super(xd.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){if(this.params.template){const t="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";Qe(()=>console.warn(t),"HeaderGroupComp.templateNotSupported")}}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=s=>{if(dr(s))return;const n=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),n,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const t=s=>{ga(s)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(i,Ge.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(i,Ge.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){const i=new St(e,!0);this.addManagedListener(i,St.EVENT_TAP,t),this.addDestroyFunc(()=>i.destroy()),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();je(this.eOpenIcon,t),je(this.eCloseIcon,!t)}else je(this.eOpenIcon,!1),je(this.eCloseIcon,!1)}addInIcon(e,t){const i=Wt(e,this.gridOptionsService,null);i&&this.getRefElement(t).appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){je(this.eOpenIcon,!1),je(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:t,columnGroup:i}=this.params;if(q(t)){const s=pr(t);this.getRefElement("agLabel").innerHTML=s}this.addOrRemoveCssClass("ag-sticky-label",!(!((e=i.getColGroupDef())===null||e===void 0)&&e.suppressStickyLabel))}}xd.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;tb([S("columnModel")],xd.prototype,"columnModel",void 0);tb([G("agOpened")],xd.prototype,"eOpenIcon",void 0);tb([G("agClosed")],xd.prototype,"eCloseIcon",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Rd extends Q{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var NN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class og extends Rd{constructor(){super(og.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),q(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))}onKeyDown(e){const t=e.key;(t===W.LEFT||t===W.UP||t===W.RIGHT||t===W.DOWN||e.shiftKey&&t===W.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e)}}og.TEMPLATE=`<div class="ag-large-text" tabindex="0">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;NN([G("eTextArea")],og.prototype,"eTextArea",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var KO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ib extends Rd{constructor(){super('<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>'),this.startedByEnter=!1}init(e){if(this.focusAfterAttached=e.cellStartedEdit,Se(e.values)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=e.eventKey!=null?e.eventKey===W.ENTER:!1;let t=!1;e.values.forEach(i=>{const s={value:i},n=this.valueFormatterService.formatValue(e.column,null,i),o=n!=null;s.text=o?n:i,this.eSelect.addOption(s),t=t||e.value===i}),t?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),this.gridOptionsService.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,Oo.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}KO([S("valueFormatterService")],ib.prototype,"valueFormatterService",void 0);KO([G("eSelect")],ib.prototype,"eSelect",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var GN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class rg extends Rd{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;this.cellEditorInput.init(t,e);let i;if(e.cellStartedEdit){this.focusAfterAttached=!0;const s=e.eventKey;s===W.BACKSPACE||e.eventKey===W.DELETE?i="":s&&s.length===1?i=s:(i=this.cellEditorInput.getStartValue(),s!==W.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&t.setStartValue(i),this.addManagedListener(t.getGui(),"keydown",s=>{const{key:n}=s;(n===W.PAGE_UP||n===W.PAGE_DOWN)&&s.preventDefault()})}afterGuiAttached(){var e,t;const i=this.localeService.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;vo()||s.getFocusableElement().focus();const n=s.getInputElement();this.highlightAllOnFocus?n.select():(t=(e=this.cellEditorInput).setCaret)===null||t===void 0||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}}GN([G("eInput")],rg.prototype,"eInput",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class kN{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=q(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}}class Px extends rg{constructor(){super(new kN)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var VN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const HN="â",BN="â";class ag extends Q{constructor(){super(ag.TEMPLATE),this.refreshCount=0}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=q(s)?s:i,o=t>=0;o?this.eDelta.innerHTML=HN+n:this.eDelta.innerHTML=BN+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Qs(this.eDelta)}refresh(e){const t=e.value;if(t===this.lastValue||(q(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:q(e.value)?this.eValue.innerHTML=t:Qs(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof t=="number"&&typeof this.lastValue=="number"){const i=t-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=t,!0}}ag.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>';VN([S("filterManager")],ag.prototype,"filterManager",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var WN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class lg extends Q{constructor(){super(lg.TEMPLATE),this.refreshCount=0,this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Li('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)}refresh(e){let t=e.value;return Se(t)&&(t=""),t===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=t,q(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:q(e.value)?this.eCurrent.innerHTML=t:Qs(this.eCurrent),!0)}}lg.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`;WN([S("filterManager")],lg.prototype,"filterManager",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class oe{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=oe.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,i,t);this.dispatchLocalEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:oe.EVENT_DATA_CHANGED,node:this,oldData:t,newData:e,update:i}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new oe(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,t){const i=q(this.id)?this.createDaemonNode():null,s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.beans.selectionService.syncInRowNode(this,i),this.checkRowSelectable();const n=this.createDataChangedEvent(e,s,!1);this.dispatchLocalEvent(n)}checkRowSelectable(){const e=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e){if(this.selectable!==e&&(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){const i=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:i??!1,source:"selectableChanged"})}}setId(e){const t=this.beans.gridOptionsService.getCallback("getRowId");if(t)if(this.data){const i=this.getGroupKeys(!0);this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(oe.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${oe.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const t=[];let i=this;for(e&&(i=i.parent);i&&i.level>=0;)t.push(i.key),i=i.parent;return t.reverse(),t}isPixelInRange(e){return!q(this.rowTop)||!q(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_GROUP_CHANGED)))}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=or(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,i=0;const s=this.__autoHeights;if(s==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=s[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":c=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:c=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(c.includes(a)){e=!0;return}l=-1}else{e=!0;return}else t=!1;l>i&&(i=l)}),e)||((t||i<10)&&(i=this.beans.gridOptionsService.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,t){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_EXPANDED_CHANGED));const i=Object.assign({},this.createGlobalRowEvent(E.EVENT_ROW_GROUP_OPENED),{expanded:e,event:t||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i),this.beans.gridOptionsService.is("groupIncludeFooter")&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return{type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,t,i){const n=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!==null&&l!==void 0?l:this.beans.columnModel.getPrimaryColumn(e)})(),o=this.getValueFromValueService(n);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(n,o,t,i),!1;const a=this.beans.valueService.setValue(this,n,t,i);return this.dispatchCellChangedEvent(n,t,o),this.checkRowSelectable(),a}getValueFromValueService(e){const t=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!t,s=this.beans.gridOptionsService.is("groupIncludeFooter"),n=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),o=i&&s&&!n;return this.beans.valueService.getValue(e,this,!1,o)}dispatchEventForSaveValueReadOnly(e,t,i,s){const n={type:E.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:t,newValue:i,value:i,source:s};this.beans.eventService.dispatchEvent(n)}setGroupValue(e,t){const i=this.beans.columnModel.getGridColumn(e);Se(this.groupData)&&(this.groupData={});const s=i.getColId(),n=this.groupData[s];n!==t&&(this.groupData[s]=t,this.dispatchCellChangedEvent(i,t,n))}setAggData(e){const t=ID([this.aggData,e]),i=this.aggData;this.aggData=e,this.eventService&&t.forEach(s=>{const n=this.beans.columnModel.getGridColumn(s),o=this.aggData?this.aggData[s]:void 0,a=i?i[s]:void 0;this.dispatchCellChangedEvent(n,o,a)})}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const i=this.beans.gridOptionsService.isTreeData(),s=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(i?!!s&&s(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(oe.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Ys(this.childrenAfterGroup)}dispatchCellChangedEvent(e,t,i){const s={type:oe.EVENT_CELL_CHANGED,node:this,column:e,newValue:t,oldValue:i};this.dispatchLocalEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!!(this.hasChildren()&&!this.footer||this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(t=>t.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let t=!1,i=!1,s=!1;if(!(!((e=this.childrenAfterGroup)===null||e===void 0)&&e.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const o=this.childrenAfterGroup[n];let a=o.isSelected();if(!o.selectable){const l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:t=!0;break;case!1:i=!0;break;default:s=!0;break}}if(!(s||t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,t,i="api"){const s=!this.selectable&&e,n=this.selected===e;if(s||n)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(oe.EVENT_ROW_SELECTED));const o=Object.assign(Object.assign({},this.createGlobalRowEvent(E.EVENT_ROW_SELECTED)),{event:t||null,source:i});return this.beans.eventService.dispatchEvent(o),!0}setSelected(e,t=!1,i="api"){if(typeof i=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:i})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Object.assign(Object.assign({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let t=this.parent;for(;t;){if(t===e)return!0;t=t.parent}return!1}addEventListener(e,t){this.eventService||(this.eventService=new nn),this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService&&(this.eventService.removeEventListener(e,t),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(oe.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(oe.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let t=this,i=!0,s=!1,n=null;for(;i&&!s;){const o=t.parent;q(o)&&t.firstChild?o.rowGroupColumn===e&&(s=!0,n=o):i=!1,t=o}return s?n:null}isFullWidthCell(){const e=this.beans.gridOptionsService.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let t=this;for(;t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new oe(this.beans);Object.keys(this).forEach(t=>{e[t]=this[t]}),e.footer=!0,e.setRowTop(null),e.setRowIndex(null),e.oldRowTop=null,e.id="rowGroupFooter_"+this.id,e.sibling=this,this.sibling=e}}oe.ID_PREFIX_ROW_GROUP="row-group-";oe.ID_PREFIX_TOP_PINNED="t-";oe.ID_PREFIX_BOTTOM_PINNED="b-";oe.OBJECT_ID_SEQUENCE=0;oe.EVENT_ROW_SELECTED="rowSelected";oe.EVENT_DATA_CHANGED="dataChanged";oe.EVENT_CELL_CHANGED="cellChanged";oe.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";oe.EVENT_MASTER_CHANGED="masterChanged";oe.EVENT_GROUP_CHANGED="groupChanged";oe.EVENT_MOUSE_ENTER="mouseEnter";oe.EVENT_MOUSE_LEAVE="mouseLeave";oe.EVENT_HEIGHT_CHANGED="heightChanged";oe.EVENT_TOP_CHANGED="topChanged";oe.EVENT_DISPLAYED_CHANGED="displayedChanged";oe.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";oe.EVENT_LAST_CHILD_CHANGED="lastChildChanged";oe.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";oe.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";oe.EVENT_EXPANDED_CHANGED="expandedChanged";oe.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";oe.EVENT_SELECTABLE_CHANGED="selectableChanged";oe.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";oe.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";oe.EVENT_DRAGGING_CHANGED="draggingChanged";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class xC extends Q{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0),rO(this.eCheckbox.getInputElement(),"polite")}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=mC(e,t),s=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}onCheckedClicked(e){const t=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"checkboxSelected"})}onUncheckedClicked(e){const t=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",s=>{ga(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",s=>{ga(s),this.eCheckbox.getValue()?this.onCheckedClicked(s):this.onUncheckedClicked(s||{})}),this.addManagedListener(this.rowNode,oe.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,oe.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){var e,t,i,s;let n=this.rowNode.selectable;const o=this.getIsVisible();if(n)if(typeof o=="function"){const l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,c=(t=this.column)===null||t===void 0?void 0:t.createColumnFunctionCallbackParams(this.rowNode);n=c?o(Object.assign(Object.assign({},l),c)):!1}else n=o??!1;if((i=this.column)===null||i===void 0?void 0:i.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!n),this.setVisible(!0),this.setDisplayed(!0);return}if(!((s=this.overrides)===null||s===void 0)&&s.removeHidden){this.setDisplayed(n);return}this.setVisible(n)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||t===void 0?void 0:t.checkboxSelection}}YO([G("eCheckbox")],xC.prototype,"eCheckbox",void 0);YO([U],xC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Td=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},js,_t;(function(r){r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel"})(_t||(_t={}));var su;(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"})(su||(su={}));var Qo;(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right"})(Qo||(Qo={}));let De=js=class extends j{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Pn("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Pn("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Pn("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Pn("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Pn("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Pn("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Pn("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Pn("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Pn("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i,t)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),ns(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var i,s,n,o;const a=this.getHorizontalDirection(e),l=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const c=this.dropTargets.filter(h=>this.isMouseOnDropTarget(e,h)),d=this.findCurrentDropTarget(e,c);if(d!==this.lastDropTarget)this.leaveLastTargetIfExists(e,a,l,t),this.lastDropTarget!==null&&d===null&&((s=(i=this.dragSource).onGridExit)===null||s===void 0||s.call(i,this.dragItem)),this.lastDropTarget===null&&d!==null&&((o=(n=this.dragSource).onGridEnter)===null||o===void 0||o.call(n,this.dragItem)),this.enterDragTargetIfExists(d,e,a,l,t),this.lastDropTarget=d;else if(d&&d.onDragging){const h=this.createDropTargetEvent(d,e,a,l,t);d.onDragging(h)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const s=i.getBoundingClientRect();if(s.width===0||s.height===0)return!1;const n=e.clientX>=s.left&&e.clientX<s.right,o=e.clientY>=s.top&&e.clientY<s.bottom;if(!n||!o)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const n of i)if(this.allContainersIntersect(e,n)){s=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:s&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const a of t)if(jD(this.getAllContainersFromDropTarget(a)).indexOf(o)!==-1)return a;return null}enterDragTargetIfExists(e,t,i,s,n){if(e){if(e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(o)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const n=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(n)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?Qo.Left:Qo.Right}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?su.Up:su.Down}createDropTargetEvent(e,t,i,s,n){const o=e.getContainer(),a=o.getBoundingClientRect(),{gridApi:l,columnApi:c,dragItem:d,dragSource:h}=this,u=t.clientX-a.left,p=t.clientY-a.top;return{event:t,x:u,y:p,vDirection:s,hDirection:i,dragSource:h,fromNudge:n,dragItem:d,api:l,columnApi:c,dropZoneTarget:o}}positionGhost(e){const t=this.eGhost;if(!t)return;const s=t.getBoundingClientRect().height,n=vO()-2,o=CO()-2;let a=e.pageY-s/2,l=e.pageX-10;const c=this.gridOptionsService.getDocument(),d=c.defaultView||window,h=d.pageYOffset||c.documentElement.scrollTop,u=d.pageXOffset||c.documentElement.scrollLeft;n>0&&l+t.clientWidth>n+u&&(l=n+u-t.clientWidth),l<0&&(l=0),o>0&&a+t.clientHeight>o+h&&(a=o+h-t.clientHeight),a<0&&(a=0),t.style.left=`${l}px`,t.style.top=`${a}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Li(js.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let i=this.dragSource.dragItemName;dC(i)&&(i=i()),t.innerHTML=pr(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const s=this.gridOptionsService.getDocument();let n=null;try{n=s.fullscreenElement}catch{}finally{if(!n){const o=this.gridOptionsService.getRootNode(),a=o.querySelector("body");a?n=a:o instanceof ShadowRoot?n=o:n=o==null?void 0:o.documentElement}}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){Qs(this.eGhostIcon);let i=null;switch(e||(e=this.dragSource.defaultIconName||js.ICON_NOT_ALLOWED),e){case js.ICON_PINNED:i=this.ePinnedIcon;break;case js.ICON_MOVE:i=this.eMoveIcon;break;case js.ICON_LEFT:i=this.eLeftIcon;break;case js.ICON_RIGHT:i=this.eRightIcon;break;case js.ICON_GROUP:i=this.eGroupIcon;break;case js.ICON_AGGREGATE:i=this.eAggregateIcon;break;case js.ICON_PIVOT:i=this.ePivotIcon;break;case js.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case js.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};De.ICON_PINNED="pinned";De.ICON_MOVE="move";De.ICON_LEFT="left";De.ICON_RIGHT="right";De.ICON_GROUP="group";De.ICON_AGGREGATE="aggregate";De.ICON_PIVOT="pivot";De.ICON_NOT_ALLOWED="notAllowed";De.ICON_HIDE="hide";De.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;Td([S("dragService")],De.prototype,"dragService",void 0);Td([S("mouseEventService")],De.prototype,"mouseEventService",void 0);Td([S("columnApi")],De.prototype,"columnApi",void 0);Td([S("gridApi")],De.prototype,"gridApi",void 0);Td([U],De.prototype,"init",null);Td([ft],De.prototype,"clearDragSourceParamsList",null);De=js=Td([ee("dragAndDropService")],De);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Yc extends Q{constructor(e,t,i,s,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Wt("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gridOptionsService.is("rowDragManaged")?new ZO(this,this.beans,this.rowNode,this.column):new qO(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gridOptionsService.is("rowDragManaged");this.gridOptionsService.isTreeData()&&e&&Qe(()=>console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true"),"RowDragComp.managedAndTreeData")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getRowDragText(this.column),i=this.localeService.getLocaleTextFunc();this.dragSource={type:_t.RowDrag,eElement:this.getGui(),dragItemName:()=>{var s;const n=this.getDragItem(),o=((s=n.rowNodes)===null||s===void 0?void 0:s.length)||1;return t?t(n,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}}cg([S("beans")],Yc.prototype,"beans",void 0);cg([U],Yc.prototype,"postConstruct",null);cg([ft],Yc.prototype,"removeDragSource",null);class XO extends j{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=dC(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}}class qO extends XO{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)}}cg([U],qO.prototype,"postConstruct",null);class ZO extends XO{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,E.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gridOptionsService.is("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!n||s;this.setDisplayedOrVisible(o)}}cg([U],ZO.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var dg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class _u extends j{init(e,t,i,s,n,o,a){this.params=a,this.eGui=t,this.eCheckbox=i,this.eExpanded=s,this.eContracted=n,this.comp=e,this.compClass=o;const l=this.isTopLevelFooter(),c=this.isEmbeddedRowMismatch(),d=a.value==null&&!a.node.master;let h=!1;if(this.gridOptionsService.is("groupIncludeFooter")&&this.gridOptionsService.is("groupHideOpenParents")){const u=a.node;if(u.footer){const p=a.colDef&&a.colDef.showRowGroup,f=u.rowGroupColumn&&u.rowGroupColumn.getColId();h=p!==f}}this.cellIsBlank=l?!1:c||d&&!a.node.master||h,!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eParentOfValue:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){lO(t);return}const i=()=>{fo(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,oe.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const i=this.columnModel.getRowGroupColumns();return!i||i.length===0?!0:i[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;const e=this.params.pinned==="left",t=this.params.pinned==="right",i=!e&&!t;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!t:!i:this.columnModel.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;i!=null;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}Se(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gridOptionsService.is("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){const n=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(n)){this.showingValueForOpenedParent=!1;return}}const s=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=s}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){const e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),{valueFormatted:i,value:s}=e;let n=i;n==null&&(s===""&&this.params.node.group?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=s??null),this.comp.setInnerRenderer(t,n)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(t!=null&&!t.isRowGroupDisplayed(e.getId()))return this.params;const s=this.params,{value:n,node:o}=this.params,a=this.valueFormatterService.formatValue(e,o,n);return Object.assign(Object.assign({},s),{valueFormatted:a})}addFooterValue(){const e=this.params.footerValueGetter;let t="";if(e){const s=Cw(this.params);s.value=this.params.value,typeof e=="function"?t=e(s):typeof e=="string"?t=this.expressionService.evaluate(e,s):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t="Total "+(this.params.value!=null?this.params.value:"");const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),i=a=>a&&a.componentClass==this.compClass;if(t&&!i(t))return t;const s=this.displayedGroupNode.rowGroupColumn,n=s?s.getColDef():void 0;if(!n)return;const o=this.userComponentFactory.getCellRendererDetails(n,e);if(o&&!i(o))return o;if(i(o)&&n.cellRendererParams&&n.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(n.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,oe.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(s)}isShowRowGroupForThisRow(){if(this.gridOptionsService.isTreeData())return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return t==null||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,i=Wt("groupExpanded",this.gridOptionsService,null),s=Wt("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),s&&this.eContracted.appendChild(s);const n=t.eGridCell;!(((e=this.params.column)===null||e===void 0?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.is("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(n,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(n,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,oe.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const a=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,oe.EVENT_ALL_CHILDREN_COUNT_CHANGED,a),this.addManagedListener(this.displayedGroupNode,oe.EVENT_MASTER_CHANGED,a),this.addManagedListener(this.displayedGroupNode,oe.EVENT_GROUP_CHANGED,a),this.addManagedListener(this.displayedGroupNode,oe.EVENT_HAS_CHILDREN_CHANGED,a)}onExpandClicked(e){dr(e)||(ga(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const s=this.params.column;return s!=null&&typeof s.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:i}=this,{node:s}=e,n=this.isExpandable();if(n){const d=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const o=i.isPivotMode(),a=o&&t.leafGroup,l=n&&!a,c=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),o?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",a):c||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,oe.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.is("groupHideOpenParents"))return;const e=this.params,t=e.node,i=!!e.colDef,s=this.gridOptionsService.isTreeData(),o=!i||s||e.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new Yc(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const i=new xC;this.getContext().createBean(i),i.init({rowNode:e,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(t)}onKeyDown(e){!(e.key===W.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(dr(e))return;pv(this.eExpanded,e)||pv(this.eContracted,e)||this.onExpandOrContract(e)}}dg([S("expressionService")],_u.prototype,"expressionService",void 0);dg([S("valueFormatterService")],_u.prototype,"valueFormatterService",void 0);dg([S("columnModel")],_u.prototype,"columnModel",void 0);dg([S("userComponentFactory")],_u.prototype,"userComponentFactory",void 0);dg([S("ctrlsService")],_u.prototype,"ctrlsService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class fr extends Q{constructor(){super(fr.TEMPLATE)}init(e){const t={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.innerHTML=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>je(this.eContracted,o),setExpandedDisplayed:o=>je(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},i=this.createManagedBean(new _u),s=!e.colDef,n=this.getGui();i.init(t,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),s&&bi(n,"gridcell")}setRenderDetails(e,t){if(e){const i=e.newAgStackInstance();if(!i)return;i.then(s=>{if(!s)return;const n=()=>this.context.destroyBean(s);this.isAlive()?(this.eValue.appendChild(s.getGui()),this.addDestroyFunc(n)):n()})}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}}fr.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;hg([G("eExpanded")],fr.prototype,"eExpanded",void 0);hg([G("eContracted")],fr.prototype,"eContracted",void 0);hg([G("eCheckbox")],fr.prototype,"eCheckbox",void 0);hg([G("eValue")],fr.prototype,"eValue",void 0);hg([G("eChildCount")],fr.prototype,"eChildCount",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var JO=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Iu extends Q{constructor(){super(Iu.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Wt("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}}Iu.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;JO([G("eLoadingIcon")],Iu.prototype,"eLoadingIcon",void 0);JO([G("eLoadingText")],Iu.prototype,"eLoadingText",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class RC extends Q{constructor(){super()}destroy(){super.destroy()}init(e){var t;const i=(t=this.gridOptionsService.get("overlayLoadingTemplate"))!==null&&t!==void 0?t:RC.DEFAULT_LOADING_OVERLAY_TEMPLATE,s=this.localeService.getLocaleTextFunc(),n=i.replace("[LOADING...]",s("loadingOoo","Loading..."));this.setTemplate(n)}}RC.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>';/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class TC extends Q{constructor(){super()}destroy(){super.destroy()}init(e){var t;const i=(t=this.gridOptionsService.get("overlayNoRowsTemplate"))!==null&&t!==void 0?t:TC.DEFAULT_NO_ROWS_TEMPLATE,s=this.localeService.getLocaleTextFunc(),n=i.replace("[NO_ROWS_TO_SHOW]",s("noRowsToShow","No Rows To Show"));this.setTemplate(n)}}TC.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>';/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class UN extends Rd{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().innerHTML=pr(t)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class jN{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step),t.showStepperButtons&&e.getInputElement().classList.add("ag-number-field-input-stepper")}getValue(){const e=this.eInput.getValue();if(!q(e)&&!q(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}}class zN extends rg{constructor(){super(new jN)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class $N{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!q(e)&&!q(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return kn(e,!1)}}class KN extends rg{constructor(){super(new $N)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class XN{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,t;return kn((t=this.parseDate((e=this.params.value)!==null&&e!==void 0?e:void 0))!==null&&t!==void 0?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction()(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction()(e)}}class QO extends rg{constructor(){super(new XN(()=>this.dataTypeService))}}YN([S("dataTypeService")],QO.prototype,"dataTypeService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ug extends Q{constructor(){super(ug.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",i=>{if(ga(i),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",i=>{ga(i)});const t=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",i=>{if(i.key===W.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===t.activeElement&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),i.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,i,s;let n,o=!0;if(e.node.group&&e.column){const h=e.column.getColId();h.startsWith(ma)?n=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[h]!==void 0?n=(t=e.value)!==null&&t!==void 0?t:void 0:o=!1}else n=(i=e.value)!==null&&i!==void 0?i:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(n);const a=e.disabled!=null?e.disabled:!(!((s=e.column)===null||s===void 0)&&s.isCellEditable(e.node));this.eCheckbox.setDisabled(a);const l=this.localeService.getLocaleTextFunc(),c=mC(l,n),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;this.eCheckbox.setInputAriaLabel(d)}onCheckboxChanged(e){const{column:t,node:i,rowIndex:s,value:n}=this.params,o={type:E.EVENT_CELL_EDITING_STARTED,column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:s,rowPinned:i.rowPinned,value:n};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:E.EVENT_CELL_EDITING_STOPPED,column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:s,rowPinned:i.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}}ug.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;qN([G("eCheckbox")],ug.prototype,"eCheckbox",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ZN=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class eA extends Rd{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var t;this.params=e;const i=(t=e.value)!==null&&t!==void 0?t:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,_s.EVENT_CHANGED,s=>this.setAriaLabel(s.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=mC(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}}ZN([G("eCheckbox")],eA.prototype,"eCheckbox",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let vf=class extends j{constructor(){super(...arguments),this.agGridDefaults={agDateInput:WO,agColumnHeader:Bi,agColumnGroupHeader:xd,agSortIndicator:cn,agTextColumnFloatingFilter:FN,agNumberColumnFloatingFilter:LN,agDateColumnFloatingFilter:EC,agReadOnlyFloatingFilter:$w,agAnimateShowChangeCellRenderer:ag,agAnimateSlideCellRenderer:lg,agGroupCellRenderer:fr,agGroupRowRenderer:fr,agLoadingCellRenderer:Iu,agCheckboxCellRenderer:ug,agCellEditor:Px,agTextCellEditor:Px,agNumberCellEditor:zN,agDateCellEditor:KN,agDateStringCellEditor:QO,agSelectCellEditor:ib,agLargeTextCellEditor:og,agCheckboxCellEditor:eA,agTextColumnFilter:$t,agNumberColumnFilter:sg,agDateColumnFilter:Mu,agLoadingOverlay:RC,agNoRowsOverlay:TC,agTooltipComponent:UN},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:te.SetFilterModule,agSetColumnFloatingFilter:te.SetFilterModule,agMultiColumnFilter:te.MultiFilterModule,agMultiColumnFloatingFilter:te.MultiFilterModule,agGroupColumnFilter:te.RowGroupingModule,agGroupColumnFloatingFilter:te.RowGroupingModule,agRichSelect:te.RichSelectModule,agRichSelectCellEditor:te.RichSelectModule,agDetailCellRenderer:te.MasterDetailModule,agSparklineCellRenderer:te.SparklinesModule},this.jsComps={}}init(){this.gridOptions.components!=null&&Et(this.gridOptions.components,(e,t)=>this.registerJsComponent(e,t))}registerDefaultComponent(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(l,c)=>({componentFromFramework:c,component:l}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const l=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,l)}const o=this.agGridDefaults[t];if(o)return i(o,!1);const a=this.enterpriseAgDefaultCompsModule[t];return a?ie.assertRegistered(a,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):Qe(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=bw(t,i,!0,.8);console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&console.warn(`         Did you mean: [${s.slice(0,3)}]?`),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")}};sb([S("gridOptions")],vf.prototype,"gridOptions",void 0);sb([U],vf.prototype,"init",null);vf=sb([ee("userComponentRegistry")],vf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const JN={propertyName:"dateComponent",cellRenderer:!1},QN={propertyName:"headerComponent",cellRenderer:!1},e1={propertyName:"headerGroupComponent",cellRenderer:!1},Mx={propertyName:"cellRenderer",cellRenderer:!0},t1={propertyName:"cellEditor",cellRenderer:!1},_x={propertyName:"innerRenderer",cellRenderer:!0},i1={propertyName:"loadingOverlayComponent",cellRenderer:!1},s1={propertyName:"noRowsOverlayComponent",cellRenderer:!1},n1={propertyName:"tooltipComponent",cellRenderer:!1},CS={propertyName:"filter",cellRenderer:!1},o1={propertyName:"floatingFilterComponent",cellRenderer:!1},r1={propertyName:"toolPanel",cellRenderer:!1},a1={propertyName:"statusPanel",cellRenderer:!1},l1={propertyName:"fullWidthCellRenderer",cellRenderer:!0},c1={propertyName:"loadingCellRenderer",cellRenderer:!0},d1={propertyName:"groupRowRenderer",cellRenderer:!0},h1={propertyName:"detailCellRenderer",cellRenderer:!0};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class tA{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}}tA.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Lu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let vl=class extends j{getHeaderCompDetails(e,t){return this.getCompDetails(e,QN,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,e1,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,l1,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,c1,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,d1,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,h1,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,_x,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,_x,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,Mx,null,t)}getCellEditorDetails(e,t){return this.getCompDetails(e,t1,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,CS,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,JN,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,i1,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,s1,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,n1,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,Mx,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,o1,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,r1,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,a1,null,t,!0)}getCompDetails(e,t,i,s,n=!1){const{propertyName:o,cellRenderer:a}=t;let{compName:l,jsComp:c,fwComp:d,paramsFromSelector:h,popupFromSelector:u,popupPositionFromSelector:p}=this.getCompKeys(e,t,s);const f=C=>{const y=this.userComponentRegistry.retrieve(o,C);y&&(c=y.componentFromFramework?void 0:y.component,d=y.componentFromFramework?y.component:void 0)};if(l!=null&&f(l),c==null&&d==null&&i!=null&&f(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!d){n&&console.error(`AG Grid: Could not find component ${l}, did you forget to configure this component?`);return}const g=this.mergeParamsWithApplicationProvidedParams(e,t,s,h),m=c==null,v=c||d;return{componentFromFramework:m,componentClass:v,params:g,type:t,popupFromSelector:u,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(v,m,g,t)}}getCompKeys(e,t,i){const{propertyName:s}=t;let n,o,a,l,c,d;if(e){const h=e,u=h[s+"Selector"],p=u?u(i):null,f=g=>{typeof g=="string"?n=g:g!=null&&g!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(g)?a=g:o=g)};p?(f(p.component),l=p.params,c=p.popup,d=p.popupPosition):f(h[s])}return{compName:n,jsComp:o,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}newAgStackInstance(e,t,i,s){const n=s.propertyName,o=!t;let a;if(o)a=new e;else{const c=this.componentMetadataProvider.retrieve(n);a=this.frameworkComponentWrapper.wrap(e,c.mandatoryMethodList,c.optionalMethodList,s)}const l=this.initComponent(a,i);return l==null?Xe.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(e,t,i,s=null){const n={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};qs(n,i);const o=e,a=o&&o[t.propertyName+"Params"];if(typeof a=="function"){const l=a(i);qs(n,l)}else typeof a=="object"&&qs(n,a);return qs(n,s),n}initComponent(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)}getDefaultFloatingFilterType(e,t){if(e==null)return null;let i=null,{compName:s,jsComp:n,fwComp:o}=this.getCompKeys(e,CS);return s?i=tA.getFloatingFilterType(s):n==null&&o==null&&e.filter===!0&&(i=t()),i}};Lu([S("gridOptions")],vl.prototype,"gridOptions",void 0);Lu([S("agComponentUtils")],vl.prototype,"agComponentUtils",void 0);Lu([S("componentMetadataProvider")],vl.prototype,"componentMetadataProvider",void 0);Lu([S("userComponentRegistry")],vl.prototype,"userComponentRegistry",void 0);Lu([Ne("frameworkComponentWrapper")],vl.prototype,"frameworkComponentWrapper",void 0);vl=Lu([ee("userComponentFactory")],vl);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Xc;(function(r){r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET"})(Xc||(Xc={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var nb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Cf=class extends j{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),ns(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e,t=!1){const i=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",i);let s=null;const n=this.gridOptionsService.is("suppressTouch");t&&!n&&(s=o=>{Lw(o.target)||(o.cancelable&&(o.preventDefault(),o.stopPropagation()),this.onTouchStart(e,o))},e.eElement.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:i,touchStartListener:s,touchEnabled:t})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=c=>this.onTouchMove(c,e.eElement),n=c=>this.onTouchUp(c,e.eElement),o=c=>{c.cancelable&&c.preventDefault()},a=t.target,l=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:o,options:{passive:!1}},{target:a,type:"touchmove",listener:s,options:{passive:!0}},{target:a,type:"touchend",listener:n,options:{passive:!0}},{target:a,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=c=>this.onMouseMove(c,e.eElement),n=c=>this.onMouseUp(c,e.eElement),o=c=>c.preventDefault(),a=this.gridOptionsService.getRootNode(),l=[{target:a,type:"mousemove",listener:s},{target:a,type:"mouseup",listener:n},{target:a,type:"contextmenu",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.addEventListener(s,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.removeEventListener(s,n,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=q(i)?i:4;return Ww(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const s={type:E.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){(this.gridOptionsService.is("enableCellTextSelection")||vo())&&e.type==="mousemove"&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const i={type:E.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};nb([S("mouseEventService")],Cf.prototype,"mouseEventService",void 0);nb([ft],Cf.prototype,"removeAllListeners",null);Cf=nb([ee("dragService")],Cf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ca;(function(r){r[r.Above=0]="Above",r[r.Below=1]="Below"})(ca||(ca={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var st;(function(r){r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing"})(st||(st={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var et=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function Ec(r){const e=r;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():r}let Ke=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}registerOverlayWrapperComp(e){this.overlayWrapperComp=e}registerSideBarComp(e){this.sideBarComp=e}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}getSetterMethod(e){return`set${e.charAt(0).toUpperCase()}${e.substring(1)}`}__setProperty(e,t){this.gridOptionsService.set(e,t);const i=this.getSetterMethod(e),s=this;s[i]&&s[i](t)}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;Et(this.detailGridInfoMap,(i,s)=>{q(s)&&(e(s,t),t++)})}getDataAsCsv(e){if(ie.assertRegistered(te.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){ie.assertRegistered(te.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}getExcelExportMode(e){const t=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},t,e).exportMode}assertNotExcelMultiSheet(e,t){if(!ie.assertRegistered(te.ExcelExportModule,"api."+e,this.context.getGridId()))return!1;const i=this.getExcelExportMode(t);return this.excelCreator.getFactoryMode(i)===Xc.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(!ie.assertRegistered(te.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return;const t=this.getExcelExportMode(e);return this.excelCreator.setFactoryMode(Xc.MULTI_SHEET,t),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(ie.assertRegistered(te.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){if(ie.assertRegistered(te.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const i=this.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${e}`;t===null?i.removeAttribute(s):i.setAttribute(s,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}setServerSideDatasource(e){this.serverSideRowModel?this.serverSideRowModel.setDatasource(e):this.logMissingRowModel("setServerSideDatasource","serverSide")}setCacheBlockSize(e){this.serverSideRowModel?(this.gridOptionsService.set("cacheBlockSize",e),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")}setDatasource(e){this.gridOptionsService.isRowModelType("infinite")?this.rowModel.setDatasource(e):this.logMissingRowModel("setDatasource","infinite")}setViewportDatasource(e){this.gridOptionsService.isRowModelType("viewport")?this.rowModel.setViewportDatasource(e):this.logMissingRowModel("setViewportDatasource","viewport")}setRowData(e){if(this.immutableService==null){this.logMissingRowModel("setRowData","clientSide");return}this.immutableService.isActive()?this.immutableService.setRowData(e):(this.selectionService.reset(),this.clientSideRowModel.setRowData(e))}setPinnedTopRowData(e){this.pinnedRowModel.setPinnedTopRowData(e)}setPinnedBottomRowData(e){this.pinnedRowModel.setPinnedBottomRowData(e)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}setColumnDefs(e,t="api"){this.columnModel.setColumnDefs(e,t),this.gridOptionsService.set("columnDefs",e,!0,{source:t})}setAutoGroupColumnDef(e,t="api"){this.gridOptionsService.set("autoGroupColumnDef",e,!0,{source:t})}setDefaultColDef(e,t="api"){this.gridOptionsService.set("defaultColDef",e,!0,{source:t})}setColumnTypes(e,t="api"){this.gridOptionsService.set("columnTypes",e,!0,{source:t})}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}setAlwaysShowHorizontalScroll(e){this.gridOptionsService.set("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.gridOptionsService.set("alwaysShowVerticalScroll",e)}refreshCells(e={}){this.rowRenderer.refreshCells(e)}flashCells(e={}){this.rowRenderer.flashCells(e)}redrawRows(e={}){const t=e?e.rowNodes:void 0;this.rowRenderer.redrawRows(t)}setFunctionsReadOnly(e){this.gridOptionsService.set("functionsReadOnly",e)}refreshHeader(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh())}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return this.rowModel}setRowNodeExpanded(e,t,i){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i),e.setExpanded(t))}onGroupExpandedOrCollapsed(){if(Se(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.clientSideRowModel.refreshModel({step:st.MAP})}refreshClientSideRowModel(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gridOptionsService.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")}addRenderedRowListener(e,t,i){this.rowRenderer.addRenderedRowListener(e,t,i)}getQuickFilter(){return this.gridOptionsService.get("quickFilterText")}setQuickFilter(e){this.gridOptionsService.set("quickFilterText",e)}setExcludeHiddenColumnsFromQuickFilter(e){_n("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!e)}setIncludeHiddenColumnsInQuickFilter(e){this.gridOptionsService.set("includeHiddenColumnsInQuickFilter",e)}setNodesSelected(e){if(!e.nodes.every(a=>a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):a.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:i,source:s,newValue:n}=e,o=i;this.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:n})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return Se(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()}setServerSideSelectionState(e){if(Se(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setServerSideSelectionState(e)}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}sizeColumnsToFit(e){this.gridBodyCtrl.sizeColumnsToFit(e)}showLoadingOverlay(){this.overlayWrapperComp.showLoadingOverlay()}showNoRowsOverlay(){this.overlayWrapperComp.showNoRowsOverlay()}hideOverlay(){this.overlayWrapperComp.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Se(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t)}ensureIndexVisible(e,t){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t)}ensureNodeVisible(e,t=null){this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t)}forEachLeafNode(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){const i=this.getFilterInstanceImpl(e,n=>{if(!t)return;const o=Ec(n);t(o)});return Ec(i)}getFilterInstanceImpl(e,t){const i=this.columnModel.getPrimaryColumn(e);if(!i)return;const s=this.filterManager.getFilterComponent(i,"NO_UI"),n=s&&s.resolveNow(null,o=>o);return n?setTimeout(t,0,n):s&&s.then(o=>{t(o)}),n}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!ie.assertRegistered(te.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return;const t=this.statusBarService.getStatusPanel(e);return Ec(t)}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(){this.filterManager.onFilterChanged()}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.filterManager.setFilterModel(e)}getFilterModel(){return this.filterManager.getFilterModel()}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,i){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:i,forceBrowserFocus:!0})}setSuppressRowDrag(e){this.gridOptionsService.set("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.gridOptionsService.set("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.gridOptionsService.set("suppressRowClickSelection",e)}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}setHeaderHeight(e){this.gridOptionsService.set("headerHeight",e)}setDomLayout(e){if(!this.clientSideRowModel&&e==="autoHeight"&&!this.gridOptionsService.is("pagination")){console.error("AG Grid: domLayout can only be set to 'autoHeight' when using the client side row model or when using pagination.");return}this.gridOptionsService.set("domLayout",e)}setEnableCellTextSelection(e){this.gridBodyCtrl.setCellTextSelection(e)}setFillHandleDirection(e){this.gridOptionsService.set("fillHandleDirection",e)}setGroupHeaderHeight(e){this.gridOptionsService.set("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.gridOptionsService.set("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.gridOptionsService.set("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.gridOptionsService.set("pivotGroupHeaderHeight",e)}setPivotMode(e){this.columnModel.setPivotMode(e)}setAnimateRows(e){this.gridOptionsService.set("animateRows",e)}setIsExternalFilterPresent(e){this.gridOptionsService.set("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.gridOptionsService.set("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.gridOptionsService.set("navigateToNextCell",e)}setTabToNextCell(e){this.gridOptionsService.set("tabToNextCell",e)}setTabToNextHeader(e){this.gridOptionsService.set("tabToNextHeader",e)}setNavigateToNextHeader(e){this.gridOptionsService.set("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.gridOptionsService.set("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.gridOptionsService.set("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.gridOptionsService.set("getBusinessKeyForNode",e)}setGetChildCount(e){this.gridOptionsService.set("getChildCount",e)}setProcessRowPostCreate(e){this.gridOptionsService.set("processRowPostCreate",e)}setGetRowId(e){this.gridOptionsService.set("getRowId",e)}setGetRowClass(e){this.gridOptionsService.set("getRowClass",e)}setIsFullWidthRow(e){this.gridOptionsService.set("isFullWidthRow",e)}setIsRowSelectable(e){this.gridOptionsService.set("isRowSelectable",e)}setIsRowMaster(e){this.gridOptionsService.set("isRowMaster",e)}setPostSortRows(e){this.gridOptionsService.set("postSortRows",e)}setGetDocument(e){this.gridOptionsService.set("getDocument",e)}setGetContextMenuItems(e){this.gridOptionsService.set("getContextMenuItems",e)}setGetMainMenuItems(e){this.gridOptionsService.set("getMainMenuItems",e)}setProcessCellForClipboard(e){this.gridOptionsService.set("processCellForClipboard",e)}setSendToClipboard(e){this.gridOptionsService.set("sendToClipboard",e)}setProcessCellFromClipboard(e){this.gridOptionsService.set("processCellFromClipboard",e)}setProcessSecondaryColDef(e){_n("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(e)}setProcessSecondaryColGroupDef(e){_n("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(e)}setProcessPivotResultColDef(e){this.gridOptionsService.set("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.gridOptionsService.set("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.gridOptionsService.set("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.gridOptionsService.set("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.gridOptionsService.set("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.gridOptionsService.set("paginationNumberFormatter",e)}setGetServerSideStoreParams(e){_n("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(e)}setGetServerSideGroupLevelParams(e){this.gridOptionsService.set("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.gridOptionsService.set("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.gridOptionsService.set("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.gridOptionsService.set("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.gridOptionsService.set("getServerSideGroupKey",e)}setGetRowStyle(e){this.gridOptionsService.set("getRowStyle",e)}setGetRowHeight(e){this.gridOptionsService.set("getRowHeight",e)}assertSideBarLoaded(e){return ie.assertRegistered(te.SideBarModule,"api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){const t=this.sideBarComp.getToolPanelInstance(e);return Ec(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()}setSideBar(e){this.gridOptionsService.set("sideBar",e)}setSuppressClipboardPaste(e){this.gridOptionsService.set("suppressClipboardPaste",e)}resetRowHeights(){if(q(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setGroupRemoveSingleChildren(e){this.gridOptionsService.set("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.gridOptionsService.set("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.gridOptionsService.set("groupDisplayType",e)}setRowClass(e){this.gridOptionsService.set("rowClass",e)}setDeltaSort(e){this.gridOptionsService.set("deltaSort",e)}setRowCount(e,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){let i=this.columnModel.getPrimaryColumn(e);return Se(i)&&(i=this.columnModel.getGridColumn(e)),Se(i)?null:this.valueService.getValue(i,t)}addEventListener(e,t){const i=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(e,t,i)}addGlobalListener(e){const t=this.gridOptionsService.useAsyncEvents();this.eventService.addGlobalListener(e,t)}removeEventListener(e,t){const i=this.gridOptionsService.useAsyncEvents();this.eventService.removeEventListener(e,t,i)}removeGlobalListener(e){const t=this.gridOptionsService.useAsyncEvents();this.eventService.removeGlobalListener(e,t)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){if(this.destroyCalled)return;this.destroyCalled=!0;const e=this.ctrlsService.getGridCtrl();e&&e.destroyGridUi(),this.context.destroy()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(LD.bind(window,this,"Grid API"),100)}warnIfDestroyed(e){return this.destroyCalled&&console.warn(`AG Grid: Grid API method ${e} was called on a grid that was destroyed.`),this.destroyCalled}resetQuickFilter(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(ie.assertRegistered(te.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}ie.assertRegistered(te.RangeSelectionModule,"api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),ie.assertRegistered(te.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}getChartModels(){if(ie.assertRegistered(te.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()}getChartRef(e){if(ie.assertRegistered(te.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(e)}getChartImageDataURL(e){if(ie.assertRegistered(te.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(e)}downloadChart(e){if(ie.assertRegistered(te.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(e)}openChartToolPanel(e){if(ie.assertRegistered(te.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(e)}closeChartToolPanel(e){if(ie.assertRegistered(te.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(e.chartId)}createRangeChart(e){if(ie.assertRegistered(te.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(e)}createPivotChart(e){if(ie.assertRegistered(te.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(e)}createCrossFilterChart(e){if(ie.assertRegistered(te.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(e)}updateChart(e){ie.assertRegistered(te.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(e)}restoreChart(e,t){if(ie.assertRegistered(te.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(e,t)}copyToClipboard(e){ie.assertRegistered(te.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(e)}cutToClipboard(e){ie.assertRegistered(te.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(e,"api")}copySelectedRowsToClipboard(e){ie.assertRegistered(te.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(e)}copySelectedRangeToClipboard(e){ie.assertRegistered(te.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(e)}copySelectedRangeDown(){ie.assertRegistered(te.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()}pasteFromClipboard(){ie.assertRegistered(te.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()}showColumnMenuAfterButtonClick(e,t){const i=this.columnModel.getGridColumn(e);this.menuFactory.showMenuAfterButtonClick(i,t,"columnMenu")}showColumnMenuAfterMouseClick(e,t){let i=this.columnModel.getGridColumn(e);if(i||(i=this.columnModel.getPrimaryColumn(e)),!i){console.error(`AG Grid: column '${e}' not found`);return}this.menuFactory.showMenuAfterMouseEvent(i,t)}hidePopupMenu(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()}setPopupParent(e){this.gridOptionsService.set("popupParent",e)}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(Ec)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(Ec)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t){console.warn(`AG Grid: no column found for ${e.colKey}`);return}const i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};e.rowPinned==null&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e.rowIndex);const n=this.navigationService.getCellByPosition(i);n&&n.startRowOrCellEdit(e.key)}addAggFunc(e,t){this.aggFuncService&&this.aggFuncService.addAggFunc(e,t)}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,t)}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}const t=this.clientSideRowModel.updateRowData(e);return this.gridOptionsService.is("suppressChangeDetection")||this.rowRenderer.refreshCells(),t}applyTransactionAsync(e,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.clientSideRowModel.batchUpdateRowData(e,t)}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.clientSideRowModel.flushAsyncTransactions()}setSuppressModelUpdateAfterUpdateTransaction(e){this.gridOptionsService.set("suppressModelUpdateAfterUpdateTransaction",e)}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}refreshServerSideStore(e){return _n("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(e)}getServerSideStoreState(){return _n("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}setDataTypeDefinitions(e){this.gridOptionsService.set("dataTypeDefinitions",e)}setPagination(e){if(!this.clientSideRowModel&&this.gridOptionsService.get("domLayout")==="autoHeight"&&!e){console.error("AG Grid: Pagination cannot be disabled when using domLayout set to 'autoHeight' unless using the client-side row model.");return}this.gridOptionsService.set("pagination",e)}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationSetPageSize(e){this.gridOptionsService.set("paginationPageSize",e)}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}};et([Ne("immutableService")],Ke.prototype,"immutableService",void 0);et([Ne("csvCreator")],Ke.prototype,"csvCreator",void 0);et([Ne("excelCreator")],Ke.prototype,"excelCreator",void 0);et([S("rowRenderer")],Ke.prototype,"rowRenderer",void 0);et([S("navigationService")],Ke.prototype,"navigationService",void 0);et([S("filterManager")],Ke.prototype,"filterManager",void 0);et([S("columnModel")],Ke.prototype,"columnModel",void 0);et([S("selectionService")],Ke.prototype,"selectionService",void 0);et([S("gridOptionsService")],Ke.prototype,"gridOptionsService",void 0);et([S("valueService")],Ke.prototype,"valueService",void 0);et([S("alignedGridsService")],Ke.prototype,"alignedGridsService",void 0);et([S("eventService")],Ke.prototype,"eventService",void 0);et([S("pinnedRowModel")],Ke.prototype,"pinnedRowModel",void 0);et([S("context")],Ke.prototype,"context",void 0);et([S("rowModel")],Ke.prototype,"rowModel",void 0);et([S("sortController")],Ke.prototype,"sortController",void 0);et([S("paginationProxy")],Ke.prototype,"paginationProxy",void 0);et([S("focusService")],Ke.prototype,"focusService",void 0);et([S("dragAndDropService")],Ke.prototype,"dragAndDropService",void 0);et([Ne("rangeService")],Ke.prototype,"rangeService",void 0);et([Ne("clipboardService")],Ke.prototype,"clipboardService",void 0);et([Ne("aggFuncService")],Ke.prototype,"aggFuncService",void 0);et([S("menuFactory")],Ke.prototype,"menuFactory",void 0);et([Ne("contextMenuFactory")],Ke.prototype,"contextMenuFactory",void 0);et([S("valueCache")],Ke.prototype,"valueCache",void 0);et([S("animationFrameService")],Ke.prototype,"animationFrameService",void 0);et([Ne("statusBarService")],Ke.prototype,"statusBarService",void 0);et([Ne("chartService")],Ke.prototype,"chartService",void 0);et([Ne("undoRedoService")],Ke.prototype,"undoRedoService",void 0);et([Ne("rowNodeBlockLoader")],Ke.prototype,"rowNodeBlockLoader",void 0);et([Ne("ssrmTransactionManager")],Ke.prototype,"serverSideTransactionManager",void 0);et([S("ctrlsService")],Ke.prototype,"ctrlsService",void 0);et([U],Ke.prototype,"init",null);et([ft],Ke.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);Ke=et([ee("gridApi")],Ke);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Dd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},yS;let gr=yS=class extends j{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.quickFilter=null,this.quickFilterParts=null,this.processingFilterChange=!1}init(){this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.refreshFiltersForAggregations(),this.resetQuickFilterCache()}),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>this.updateAggFiltering())}isExternalFilterPresentCallback(){const e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gridOptionsService.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setQuickFilterParts(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null}setFilterModel(e){const t=[],i=this.getFilterModel();if(e){const s=Uw(Object.keys(e));this.allColumnFilters.forEach((n,o)=>{const a=e[o];t.push(this.setModelOnFilterWrapper(n.filterPromise,a)),s.delete(o)}),s.forEach(n=>{const o=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}const a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}t.push(this.setModelOnFilterWrapper(a.filterPromise,e[n]))})}else this.allColumnFilters.forEach(s=>{t.push(this.setModelOnFilterWrapper(s.filterPromise,null))});Xe.all(t).then(()=>{const s=this.getFilterModel(),n=[];this.allColumnFilters.forEach((o,a)=>{const l=i?i[a]:null,c=s?s[a]:null;A.jsonEquals(l,c)||n.push(o.column)}),n.length>0&&this.onFilterChanged({columns:n})})}setModelOnFilterWrapper(e,t){return new Xe(i=>{e.then(s=>{typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||Xe.resolve()).then(()=>i())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,i)=>{const n=t.filterPromise.resolveNow(null,a=>a);if(n==null)return null;if(typeof n.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}const o=n.getModel();q(o)&&(e[i]=o)}),e}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=s=>s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gridOptionsService.getGroupAggFiltering(),i=s=>{if(!s.isPrimary())return!0;const o=!this.columnModel.isPivotActive();return!s.isValueActive()||!o?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(s=>{if(s.filterPromise.resolveNow(!1,e)){const n=s.filterPromise.resolveNow(null,o=>o);i(s.column)?this.activeAggregateFilters.push(n):this.activeColumnFilters.push(n)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(i=>{const s=i.filterPromise.resolveNow(!1,n=>n.isFilterActive());i.column.setFilterActive(s,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,a=i?n:s;for(let l=0;l<o.length;l++){const c=o[l];if(!(c==null||c===t)){if(typeof c.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:a}))return!1}}return!0}parseQuickFilter(e){return q(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - setQuickFilter() only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.onFilterChanged())}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.onFilterChanged()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e={}){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i,columns:s}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",i),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(a=>{a&&a!==t&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});const n={type:E.EVENT_FILTER_CHANGED,columns:s||[]};i&&qs(n,i),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilter!==null}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(s=>{const n=this.getQuickFilterTextForColumn(s,e);return q(n)&&n.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return e.quickFilterAggregateText||this.aggregateRowForQuickFilter(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilter(e){const t=this.gridOptionsService.is("cacheQuickFilter");return this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n={value:i,node:t,data:t.data,column:e,colDef:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i=s.getQuickFilterText(n)}return q(i)?i.toString().toUpperCase():null}aggregateRowForQuickFilter(e){const t=[];this.columnModel.getAllColumnsForQuickFilter().forEach(s=>{const n=this.getQuickFilterTextForColumn(s,e);q(n)&&t.push(n)}),e.quickFilterAggregateText=t.join(yS.QUICK_FILTER_SEPARATOR)}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}getFilterComponent(e,t,i=!0){var s;if(i)return((s=this.getOrCreateFilterWrapper(e,t))===null||s===void 0?void 0:s.filterPromise)||null;const n=this.cachedFilter(e);return n?n.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);if(i)t!=="NO_UI"&&this.putIntoGui(i,t);else{i=this.createFilterWrapper(e,t);const s=e.getColId();this.allColumnFilters.set(s,i),this.allColumnListeners.set(s,this.addManagedListener(e,me.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(s)))}return i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(ie.isRegistered(te.SetFilterModule,this.context.getGridId()))t="agSetColumnFilter";else{const i=e.getColDef().cellDataType;i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(ie.isRegistered(te.SetFilterModule,this.context.getGridId()))t="agSetColumnFloatingFilter";else{const i=e.getColDef().cellDataType;i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),i=e.getColDef();let s;const n=Object.assign(Object.assign({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>{const a={type:E.EVENT_FILTER_MODIFIED,column:e,filterInstance:s};this.eventService.dispatchEvent(a)},filterChangedCallback:a=>{const l={filterInstance:s,additionalEventAttributes:a,columns:[e]};this.callOnFilterChangedOutsideRenderCycle(l)},doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(s,a)}),o=this.userComponentFactory.getFilterDetails(i,n,t);return o?{filterPromise:()=>{const a=o.newAgStackInstance();return a&&a.then(l=>s=l),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return{column:e,colDef:Cw(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),doesRowPassOtherFilter:()=>!0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}createFilterWrapper(e,t){var i;const s={column:e,filterPromise:null,compiledElement:null,guiPromise:Xe.resolve(null),compDetails:null},{filterPromise:n,compDetails:o}=this.createFilterInstance(e);return s.filterPromise=(i=n==null?void 0:n())!==null&&i!==void 0?i:null,s.compDetails=o,n&&this.putIntoGui(s,t),s}putIntoGui(e,t){const i=document.createElement("div");i.className="ag-filter",e.guiPromise=new Xe(s=>{e.filterPromise.then(n=>{let o=n.getGui();q(o)||console.warn(`AG Grid: getGui method from filter returned ${o}, it should be a DOM element or an HTML template string.`),typeof o=="string"&&(o=Li(o)),i.appendChild(o),s(i);const a={type:E.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:i};this.eventService.dispatchEvent(a)})})}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,i)=>{let s;t.column.isPrimary()?s=this.columnModel.getPrimaryColumn(i):s=this.columnModel.getGridColumn(i),!s&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}),e.length>0?this.onFilterChanged({columns:e}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,i;if(!e.isFilterAllowed())return!1;const n=this.allColumnFilters.get(e.getColId());return(i=(t=n==null?void 0:n.filterPromise)===null||t===void 0?void 0:t.resolveNow(!0,o=>{var a,l;return typeof((a=o)===null||a===void 0?void 0:a.isFilterAllowed)=="function"?(l=o)===null||l===void 0?void 0:l.isFilterAllowed():!0}))!==null&&i!==void 0?i:!0}getFloatingFilterCompDetails(e,t){const i=e.getColDef(),s=this.createFilterParams(e,i),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,CS,s);let o=this.userComponentFactory.getDefaultFloatingFilterType(i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");const l={column:e,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:c=>{const d=this.getFilterComponent(e,"NO_UI");d!=null&&d.then(h=>{c(Ec(h))})},showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,l,o)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(e,t="api"){const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),s&&(this.disposeFilterWrapper(s,t),this.onFilterChanged({columns:[e]}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{(i.setModel(null)||Xe.resolve()).then(()=>{this.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const s={type:E.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(s)})})}checkDestroyFilter(e){var t;const i=this.allColumnFilters.get(e);if(!i)return;const s=i.column,{compDetails:n}=s.isFilterAllowed()?this.createFilterInstance(s):{compDetails:null};(!n||((t=i.compDetails)===null||t===void 0?void 0:t.componentClass)!==n.componentClass)&&this.destroyFilter(s,"columnChanged")}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};gr.QUICK_FILTER_SEPARATOR=`
`;Dd([S("valueService")],gr.prototype,"valueService",void 0);Dd([S("columnModel")],gr.prototype,"columnModel",void 0);Dd([S("rowModel")],gr.prototype,"rowModel",void 0);Dd([S("userComponentFactory")],gr.prototype,"userComponentFactory",void 0);Dd([S("rowRenderer")],gr.prototype,"rowRenderer",void 0);Dd([U],gr.prototype,"init",null);gr=yS=Dd([ee("filterManager")],gr);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class ob extends Q{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Da extends ob{constructor(e){super(Da.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),addOrRemoveBodyCssClass:(i,s)=>this.eFloatingFilterBody.classList.toggle(i,s),setButtonWrapperDisplayed:i=>je(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}}Da.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;pg([G("eFloatingFilterBody")],Da.prototype,"eFloatingFilterBody",void 0);pg([G("eButtonWrapper")],Da.prototype,"eButtonWrapper",void 0);pg([G("eButtonShowMainFilter")],Da.prototype,"eButtonShowMainFilter",void 0);pg([U],Da.prototype,"postConstruct",null);pg([ft],Da.prototype,"destroyFloatingFilterComp",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var u1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Kt;(function(r){r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print"})(Kt||(Kt={}));class DC extends j{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?Kt.AUTO_HEIGHT:t.print?Kt.PRINT:Kt.NORMAL;this.view.updateLayoutClasses(i,t)}getDomLayout(){var e;const t=(e=this.gridOptionsService.get("domLayout"))!==null&&e!==void 0?e:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(Qe(()=>console.warn(`AG Grid: ${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"warn about dom layout values"),"normal"):t}}u1([U],DC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Bl=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Oa extends j{constructor(e){super(),this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=or(()=>this.eLastHScroll=null,500),this.resetLastVScrollDebounced=or(()=>this.eLastVScroll=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),this.addManagedListener(e.getViewport(),"scroll",this.onFakeHScroll.bind(this));const i=this.gridOptionsService.is("debounceVerticalScrollbar"),s=i?or(this.onVScroll.bind(this),100):this.onVScroll.bind(this),n=i?or(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s),this.addManagedListener(t.getViewport(),"scroll",n)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowContainerCtrl==null)return;e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?e:-e,s=this.ctrlsService.getTopCenterRowContainerCtrl(),n=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),o=this.ctrlsService.getBottomCenterRowContainerCtrl(),a=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-i),o.setContainerTranslateX(i),s.setContainerTranslateX(i),n.setContainerTranslateX(i);const c=this.centerRowContainerCtrl.getViewportElement(),h=this.eLastHScroll===c?a.getViewport():this.centerRowContainerCtrl.getViewportElement();mv(h,Math.abs(e),this.enableRtl)}isControllingHScroll(e){return this.eLastHScroll?e===this.eLastHScroll:(this.eLastHScroll=e,!0)}isControllingVScroll(e){return this.eLastVScroll?e===this.eLastVScroll:(this.eLastVScroll=e,!0)}onFakeHScroll(){const e=this.ctrlsService.getFakeHScrollComp().getViewport();this.isControllingHScroll(e)&&this.onHScrollCommon(e)}onHScroll(){const e=this.centerRowContainerCtrl.getViewportElement();this.isControllingHScroll(e)&&this.onHScrollCommon(e)}onHScrollCommon(e){const t=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:i}=t;this.shouldBlockScrollUpdate("horizontal",i,!0)||(this.doHorizontalScroll(Math.round(mf(e,this.enableRtl))),this.resetLastHScrollDebounced())}onFakeVScroll(){const e=this.ctrlsService.getFakeVScrollComp().getViewport();this.isControllingVScroll(e)&&this.onVScrollCommon(e)}onVScroll(){this.isControllingVScroll(this.eBodyViewport)&&this.onVScrollCommon(this.eBodyViewport)}onVScrollCommon(e){const t=e.scrollTop;if(!this.shouldBlockScrollUpdate("vertical",t,!0)){if(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===this.eBodyViewport){const i=this.ctrlsService.getFakeVScrollComp().getViewport();i.scrollTop=t}else this.eBodyViewport.scrollTop=t;this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced()}}doHorizontalScroll(e){const t=this.ctrlsService.getFakeHScrollComp().getViewport(),i=mf(t,this.enableRtl);this.scrollLeft===e&&e===i||(this.scrollLeft=e,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())}fireScrollEvent(e){const t={type:E.EVENT_BODY_SCROLL,direction:e,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i=Object.assign(Object.assign({},t),{type:E.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!Vl()?!1:e==="vertical"?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=eg(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&gf()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent("vertical")}onHorizontalViewportChanged(){this.centerRowContainerCtrl.onHorizontalViewportChanged()}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(this.centerRowContainerCtrl.getViewportElement())}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){this.ctrlsService.getFakeHScrollComp().getGui();const t=0,i=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",e)&&(this.enableRtl&&gf()?e=e>0?0:i:e=Math.min(Math.max(e,t),i)),mv(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const o=this.rowModel.getRow(n);if(typeof e=="function"){if(o&&e(o)){s=n;break}}else if(e===o||e===o.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(this.gridOptionsService.isDomLayout("print"))return;const i=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(e);const a=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),l=this.paginationProxy.getRow(e);let c;do{const d=l.rowTop,h=l.rowHeight,u=this.paginationProxy.getPixelOffset(),p=l.rowTop-u,f=p+l.rowHeight,g=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),v=g.top+m,C=g.bottom+m,y=C-v,R=this.heightScaler.getScrollPositionForPixel(p),b=this.heightScaler.getScrollPositionForPixel(f-y),w=Math.min((R+b)/2,p),x=v+a>p,O=C<f;let M=null;t==="top"?M=R:t==="bottom"?M=b:t==="middle"?M=w:x?M=R-a:O&&(M=b),M!==null&&(this.setVerticalScrollPosition(M),this.rowRenderer.redrawAfterScroll()),c=d!==l.rowTop||h!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getGridColumn(e);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);s!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(s),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowContainerCtrl.getCenterWidth(),a=this.enableRtl;let l=(a?i:s)||n,c=a?s:i;t!=="auto"&&(l=t==="start",c=t==="end");const d=t==="middle";if(l||c||d){const{colLeft:h,colMiddle:u,colRight:p}=this.getColumnBounds(e);return d?u-o/2:l?a?p:h:a?h-o:p-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,a=o?t>n:i<n,l=o?i<s:t>s;return{columnBeforeStart:a,columnAfterEnd:l}}getColumnBounds(e){const t=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,a=t?i-n:n,l=a+s*o,c=a+s/2*o;return{colLeft:a,colMiddle:c,colRight:l}}getViewportBounds(){const e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}}Bl([S("ctrlsService")],Oa.prototype,"ctrlsService",void 0);Bl([S("animationFrameService")],Oa.prototype,"animationFrameService",void 0);Bl([S("paginationProxy")],Oa.prototype,"paginationProxy",void 0);Bl([S("rowModel")],Oa.prototype,"rowModel",void 0);Bl([S("rowContainerHeightService")],Oa.prototype,"heightScaler",void 0);Bl([S("rowRenderer")],Oa.prototype,"rowRenderer",void 0);Bl([S("columnModel")],Oa.prototype,"columnModel",void 0);Bl([U],Oa.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class OC{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Yn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class hn extends j{constructor(e){super(),this.isMultiRowDrag=!1,this.isGridSorted=!1,this.isGridFiltered=!1,this.isRowGroupActive=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);const e=()=>{this.onSortChanged(),this.onFilterChanged(),this.onRowGroupChanged()};this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,()=>{e()}),e(),this.ctrlsService.whenReady(()=>{const t=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new OC({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}onSortChanged(){this.isGridSorted=this.sortController.isSortActive()}onFilterChanged(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()}onRowGroupChanged(){const e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!Ys(e)}getContainer(){return this.eContainer}isInterestedIn(e){return e===_t.RowDrag}getIconName(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?De.ICON_NOT_ALLOWED:De.ICON_MOVE}shouldPreventRowMove(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=this.gridOptionsService.is("rowDragMultiRow"),i=[...this.selectionService.getSelectedNodes()].sort((n,o)=>n.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(o)),s=e.dragItem.rowNode;return t&&i.indexOf(s)!==-1?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[s])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(E.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return!i.contains(s)}onEnterOrDragging(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gridOptionsService.is("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){return parseInt(dt(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===ca.Below,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach(a=>{a.rowTop<s&&(o-=1)}),this.moveRows(n,s,o);else{const a=this.gridOptionsService.getCallback("getRowId");let l=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===ca.Above&&l--,this.clientSideRowModel.updateRowData({add:n.map(c=>c.data).filter(c=>!this.clientSideRowModel.getRowNode(a?a({data:c,level:0}):c.id)),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){Qe(()=>console.warn("AG Grid: addRowDropZone - A container target needs to be provided"),"add-drop-zone-empty-target");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,t=e):(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Object.assign({isInterestedIn:i=>i===_t.RowDrag,getIconName:()=>De.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?a=>{i(a),e.onDragEnter(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_ENTER,a))}:i,onDragLeave:e.onDragLeave?a=>{s(a),e.onDragLeave(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_LEAVE,a))}:s,onDragging:e.onDragging?a=>{n(a),e.onDragging(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_MOVE,a))}:n,onDragStop:e.onDragStop?a=>{o(a),e.onDragStop(this.draggingToRowDragEvent(E.EVENT_ROW_DRAG_END,a))}:o,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:o,fromGrid:!0}}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.paginationProxy.getCurrentPageHeight();let n=-1,o;s||(n=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(n));let a;switch(t.vDirection){case su.Down:a="down";break;case su.Up:a="up";break;default:a=null;break}return{type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:o,y:i,vDirection:a}}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}}Yn([S("dragAndDropService")],hn.prototype,"dragAndDropService",void 0);Yn([S("rowModel")],hn.prototype,"rowModel",void 0);Yn([S("paginationProxy")],hn.prototype,"paginationProxy",void 0);Yn([S("columnModel")],hn.prototype,"columnModel",void 0);Yn([S("focusService")],hn.prototype,"focusService",void 0);Yn([S("sortController")],hn.prototype,"sortController",void 0);Yn([S("filterManager")],hn.prototype,"filterManager",void 0);Yn([S("selectionService")],hn.prototype,"selectionService",void 0);Yn([S("mouseEventService")],hn.prototype,"mouseEventService",void 0);Yn([S("ctrlsService")],hn.prototype,"ctrlsService",void 0);Yn([Ne("rangeService")],hn.prototype,"rangeService",void 0);Yn([U],hn.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var un=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},nu;(function(r){r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation"})(nu||(nu={}));const iA="ag-force-vertical-scroll",p1="ag-selectable",f1="ag-column-moving";class Ls extends j{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new DC(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Oa(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",i=>{const{target:s}=i,n=Hc(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)}),this.addManagedListener(t,"focusout",i=>{const{target:s,relatedTarget:n}=i,o=t.contains(n),a=Hc(n,"ag-root",t);Hc(s,"ag-root",t)||(!o||a)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(f1,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(p1,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);const t=e&&this.gridOptionsService.getScrollbarWidth()||0,i=Hh()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.is("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(gv(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(o=>o.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const o=this.popupService;n=o.getActivePopups().some(a=>a.contains(s))||o.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];t.forEach(i=>this.addManagedListener(i,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gridOptionsService.is("alwaysShowVerticalScroll"),t=e?iA:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&TO(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const t=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=t?nu.ANIMATION_ON:nu.ANIMATION_OFF;this.comp.setRowAnimationCssOnBodyViewport(i,t)};e(),this.addManagedListener(this.eventService,E.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",i=>this.onFullWidthContainerWheel(i,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gridOptionsService.is("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;if(s===this.eBodyViewport||s===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):i&&this.contextMenuFactory.onContextMenu(null,i,null,null,null,this.eGridBody)}}mockContextMenuForIPad(e){if(!Vl())return;const t=new St(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(t,St.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new hn(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight();t&&(t+=1);let i=e.getPinnedBottomTotalHeight();i&&(i+=1),this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(!e)this.comp.setStickyTopWidth("100%");else{const t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t+1),i>0&&(s+=i+1),this.comp.setStickyTopTop(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,o=yC(this.eGridBody)-s;if(o>0){this.columnModel.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}}un([S("animationFrameService")],Ls.prototype,"animationFrameService",void 0);un([S("rowContainerHeightService")],Ls.prototype,"rowContainerHeightService",void 0);un([S("ctrlsService")],Ls.prototype,"ctrlsService",void 0);un([S("columnModel")],Ls.prototype,"columnModel",void 0);un([S("scrollVisibleService")],Ls.prototype,"scrollVisibleService",void 0);un([Ne("contextMenuFactory")],Ls.prototype,"contextMenuFactory",void 0);un([S("headerNavigationService")],Ls.prototype,"headerNavigationService",void 0);un([S("dragAndDropService")],Ls.prototype,"dragAndDropService",void 0);un([S("pinnedRowModel")],Ls.prototype,"pinnedRowModel",void 0);un([S("rowRenderer")],Ls.prototype,"rowRenderer",void 0);un([S("popupService")],Ls.prototype,"popupService",void 0);un([S("mouseEventService")],Ls.prototype,"mouseEventService",void 0);un([S("rowModel")],Ls.prototype,"rowModel",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Cl;(function(r){r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE"})(Cl||(Cl={}));var Xs;(function(r){r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION"})(Xs||(Xs={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const Mp="ag-cell-range-selected",g1="ag-cell-range-chart",m1="ag-cell-range-single-cell",v1="ag-cell-range-chart-category",C1="ag-cell-range-handle",y1="ag-cell-range-top",S1="ag-cell-range-right",w1="ag-cell-range-bottom",b1="ag-cell-range-left";class E1{constructor(e,t){this.beans=e,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Mp,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Mp}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Mp}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Mp}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Mp}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(g1,this.hasChartRange),tu(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(m1,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(y1,i),this.cellComp.addOrRemoveCssClass(S1,s),this.cellComp.addOrRemoveCssClass(w1,n),this.cellComp.addOrRemoveCssClass(b1,o)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>Gn([Xs.DIMENSION,Xs.VALUE],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gridOptionsService.is("enableRtl");let t=!1,i=!1,s=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,{rangeService:a,columnModel:l}=this.beans;let c,d;e?(c=l.getDisplayedColAfter(o),d=l.getDisplayedColBefore(o)):(c=l.getDisplayedColBefore(o),d=l.getDisplayedColAfter(o));const h=a.getCellRanges().filter(u=>a.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));c||(n=!0),d||(i=!0);for(let u=0;u<h.length&&!(t&&i&&s&&n);u++){const p=h[u],f=a.getRangeStartRow(p),g=a.getRangeEndRow(p);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(s=!0),!n&&c&&p.columns.indexOf(c)<0&&(n=!0),!i&&d&&p.columns.indexOf(d)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(!this.beans.rangeService)return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(C1,!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=t.getCellRanges(),s=i.length;if(this.rangeCount<1||s<1)return!1;const n=dt(i),o=this.cellCtrl.getCellPosition(),a=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.is("enableRangeHandle");let c=s===1&&!this.cellCtrl.isEditing()&&(a||l);if(this.hasChartRange){const h=i[0].type===Xs.DIMENSION&&t.isCellInSpecificRange(o,i[0]);this.cellComp.addOrRemoveCssClass(v1,h),c=n.type===Xs.VALUE}return c&&n.endRow!=null&&t.isContiguousRange(n)&&t.isBottomRightCell(n,o)}addSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=dt(t.getCellRanges()).type,n=e.is("enableFillHandle")&&Se(i)?Cl.FILL:Cl.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class x1 extends j{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.setupColSpan(),this.setupRowSpan()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode)}setComp(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onDisplayColumnsChanged(){const e=this.getColSpanningList();il(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||Se(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?e=dt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(){if(this.rowSpan===1)return;const t=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class R1 extends j{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),t={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(e.cellClassRules,t,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1))}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class rb extends j{constructor(e,t){super(),this.ctrl=e,this.beans=t}setComp(e){this.comp=e,this.setupTooltip()}setupTooltip(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(this.tooltip!=null?this.tooltip:void 0):this.createTooltipFeatureIfNeeded()}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.genericTooltipFeature!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.genericTooltipFeature=this.createManagedBean(new va(e),this.beans.context)}refreshToolTip(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(this.tooltip!=null?this.tooltip:void 0)}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,s=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0}}getTooltipText(){return this.tooltip}destroy(){super.destroy()}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _e=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Oe=class{postConstruct(){this.doingMasterDetail=this.gridOptionsService.isMasterDetail(),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};_e([S("resizeObserverService")],Oe.prototype,"resizeObserverService",void 0);_e([S("paginationProxy")],Oe.prototype,"paginationProxy",void 0);_e([S("context")],Oe.prototype,"context",void 0);_e([S("columnApi")],Oe.prototype,"columnApi",void 0);_e([S("gridApi")],Oe.prototype,"gridApi",void 0);_e([S("gridOptionsService")],Oe.prototype,"gridOptionsService",void 0);_e([S("expressionService")],Oe.prototype,"expressionService",void 0);_e([S("environment")],Oe.prototype,"environment",void 0);_e([S("rowRenderer")],Oe.prototype,"rowRenderer",void 0);_e([S("templateService")],Oe.prototype,"templateService",void 0);_e([S("valueService")],Oe.prototype,"valueService",void 0);_e([S("eventService")],Oe.prototype,"eventService",void 0);_e([S("columnModel")],Oe.prototype,"columnModel",void 0);_e([S("headerNavigationService")],Oe.prototype,"headerNavigationService",void 0);_e([S("navigationService")],Oe.prototype,"navigationService",void 0);_e([S("columnAnimationService")],Oe.prototype,"columnAnimationService",void 0);_e([Ne("rangeService")],Oe.prototype,"rangeService",void 0);_e([S("focusService")],Oe.prototype,"focusService",void 0);_e([Ne("contextMenuFactory")],Oe.prototype,"contextMenuFactory",void 0);_e([S("popupService")],Oe.prototype,"popupService",void 0);_e([S("valueFormatterService")],Oe.prototype,"valueFormatterService",void 0);_e([S("stylingService")],Oe.prototype,"stylingService",void 0);_e([S("columnHoverService")],Oe.prototype,"columnHoverService",void 0);_e([S("userComponentFactory")],Oe.prototype,"userComponentFactory",void 0);_e([S("userComponentRegistry")],Oe.prototype,"userComponentRegistry",void 0);_e([S("animationFrameService")],Oe.prototype,"animationFrameService",void 0);_e([S("dragService")],Oe.prototype,"dragService",void 0);_e([S("dragAndDropService")],Oe.prototype,"dragAndDropService",void 0);_e([S("sortController")],Oe.prototype,"sortController",void 0);_e([S("filterManager")],Oe.prototype,"filterManager",void 0);_e([S("rowContainerHeightService")],Oe.prototype,"rowContainerHeightService",void 0);_e([S("frameworkOverrides")],Oe.prototype,"frameworkOverrides",void 0);_e([S("cellPositionUtils")],Oe.prototype,"cellPositionUtils",void 0);_e([S("rowPositionUtils")],Oe.prototype,"rowPositionUtils",void 0);_e([S("selectionService")],Oe.prototype,"selectionService",void 0);_e([Ne("selectionHandleFactory")],Oe.prototype,"selectionHandleFactory",void 0);_e([S("rowCssClassCalculator")],Oe.prototype,"rowCssClassCalculator",void 0);_e([S("rowModel")],Oe.prototype,"rowModel",void 0);_e([S("ctrlsService")],Oe.prototype,"ctrlsService",void 0);_e([S("ctrlsFactory")],Oe.prototype,"ctrlsFactory",void 0);_e([S("agStackComponentsRegistry")],Oe.prototype,"agStackComponentsRegistry",void 0);_e([S("valueCache")],Oe.prototype,"valueCache",void 0);_e([S("rowNodeEventThrottle")],Oe.prototype,"rowNodeEventThrottle",void 0);_e([S("localeService")],Oe.prototype,"localeService",void 0);_e([S("valueParserService")],Oe.prototype,"valueParserService",void 0);_e([U],Oe.prototype,"postConstruct",null);Oe=_e([ee("beans")],Oe);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class T1 extends Oe{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!dr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gridOptionsService:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,E.EVENT_CELL_CLICKED);t.dispatchEvent(o);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>a.onCellClicked(o),0),(s.is("singleClickEdit")||a.singleClickEdit)&&!s.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Vl()||Sw("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),i=this.cellCtrl.createEvent(e,E.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>t.onCellDoubleClicked(i),0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{eventService:o,rangeService:a}=this.beans;if(this.isRightClickInExistingRange(e))return;const l=a&&a.getCellRanges().length!=0;if(!s||!l){const c=vo()&&!this.cellCtrl.isEditing()&&!Lw(n);this.cellCtrl.focusCell(c)}if(s&&l&&e.preventDefault(),!this.containsWidget(n)){if(a){const c=this.cellCtrl.getCellPosition();if(s)a.extendLatestRangeToCell(c);else{const d=t||i;a.setRangeToCell(c,d)}}o.dispatchEvent(this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;return!!(t&&t.isCellInAnyRange(this.cellCtrl.getCellPosition())&&e.button===2)}containsWidget(e){return Hc(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class D1 extends j{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case W.ENTER:this.onEnterKeyDown(e);break;case W.F2:this.onF2KeyDown(e);break;case W.ESCAPE:this.onEscapeKeyDown(e);break;case W.TAB:this.onTabKeyDown(e);break;case W.BACKSPACE:case W.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case W.DOWN:case W.UP:case W.RIGHT:case W.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gridOptionsService:o,rangeService:a,eventService:l}=s;i.isEditing()||(l.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),_O(e,o.is("enableCellEditingOnBackspace"))?a&&o.isEnableRangeSelection()?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&n.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,t),l.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){const t=e.shiftKey?W.UP:W.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(W.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(W.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(s,e),e.preventDefault())}onSpaceKeyDown(e){const{gridOptionsService:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const i=this.rowNode.isSelected(),s=!i;if(s||!t.is("suppressRowDeselection")){const n=this.beans.gridOptionsService.is("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var O1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class sA extends Q{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Wt("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}O1([U],sA.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const A1="ag-cell",P1="ag-cell-auto-height",M1="ag-cell-normal-height",_1="ag-cell-focus",I1="ag-cell-first-right-pinned",L1="ag-cell-last-left-pinned",F1="ag-cell-not-inline-editing",N1="ag-column-hover",G1="ag-cell-wrap-text";let k1=0;class Hn extends j{constructor(e,t,i,s){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=t,this.beans=i,this.rowCtrl=s,this.instanceId=e.getId()+"-"+k1++,this.createCellPosition(),this.addFeatures()}addFeatures(){this.cellPositionFeature=new x1(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellPositionFeature)===null||t===void 0||t.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new R1(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellCustomStyleFeature)===null||t===void 0||t.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new T1(this,this.beans,this.column),this.addDestroyFunc(()=>{var t;(t=this.cellMouseListenerFeature)===null||t===void 0||t.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new D1(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var t;(t=this.cellKeyboardListenerFeature)===null||t===void 0||t.destroy(),this.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.isEnableRangeSelection()&&(this.cellRangeFeature=new E1(this.beans,this),this.addDestroyFunc(()=>{var t;(t=this.cellRangeFeature)===null||t===void 0||t.destroy(),this.cellRangeFeature=null})),this.column.isTooltipEnabled()&&this.addTooltipFeature()}addTooltipFeature(){const t={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:()=>{const i=this.column.getColDef(),s=this.rowNode.data;if(i.tooltipField&&q(s))return Vc(s,i.tooltipField,this.column.isTooltipFieldContainsDots());const n=i.tooltipValueGetter;return n?n({location:"cell",api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted}):null},getValueFormatted:()=>this.valueFormatted};this.tooltipFeature=new rb(t,this.beans),this.addDestroyFunc(()=>{var i;(i=this.tooltipFeature)===null||i===void 0||i.destroy(),this.tooltipFeature=null})}setComp(e,t,i,s,n){var o,a,l,c;this.cellComp=e,this.eGui=t,this.printLayout=s,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),i&&this.setupAutoHeight(i),this.setAriaColIndex(),this.beans.gridOptionsService.is("suppressCellFocus")||this.cellComp.setTabIndex(-1);const d=pr(this.column.getId());this.cellComp.setColId(d),this.cellComp.setRole("gridcell"),(o=this.cellPositionFeature)===null||o===void 0||o.setComp(t),(a=this.cellCustomStyleFeature)===null||a===void 0||a.setComp(e),(l=this.tooltipFeature)===null||l===void 0||l.setComp(e),(c=this.cellKeyboardListenerFeature)===null||c===void 0||c.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(h=>h()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(!this.column.isAutoHeight())return;const t=e.parentElement,i=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=a=>{if(this.editing||!this.isAlive())return;const{paddingTop:l,paddingBottom:c,borderBottomWidth:d,borderTopWidth:h}=wd(t),u=l+c+d+h,f=e.offsetHeight+u;if(a<5){const m=this.beans.gridOptionsService.getDocument(),v=!m||!m.contains(e),C=f==0;if(v||C){this.beans.frameworkOverrides.setTimeout(()=>s(a+1),0);return}}const g=Math.max(f,i);this.rowNode.setRowAutoHeight(g,this.column)},n=()=>s(0);n();const o=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getInstanceId(){return this.instanceId}showValue(e=!1){const t=this.valueFormatted!=null?this.valueFormatted:this.value,i=this.createCellRendererParams(),s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),i);this.cellComp.setRenderDetails(s,t,e),this.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource);return t||i||s}startEditing(e=null,t=!1,i=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,t,i)});return}const s=this.createCellEditorParams(e,t),n=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(n,s),a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!n.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:n.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l);const c=this.createEvent(i,E.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(c)}setEditing(e){this.editing!==e&&(this.editing=e,this.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const t={newValueExists:!1};if(e)return t;const i=this.cellComp.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?t:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t){if(t===e)return!1;this.suppressRefreshCell=!0;const i=this.rowNode.setDataValue(this.column,t,"edit");return this.suppressRefreshCell=!1,i}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:t,newValueExists:i}=this.takeValueFromCellEditor(e),s=this.rowNode.getValueFromValueService(this.column);let n=!1;return i&&(n=this.saveNewValue(s,t)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,t,!e&&!!n),n}dispatchEditingStoppedEvent(e,t,i){const s=Object.assign(Object.assign({},this.createEvent(null,E.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:t,valueChanged:i});this.beans.eventService.dispatchEvent(s)}createCellEditorParams(e,t){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:t,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}}createCellRendererParams(){return{value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:t=>this.beans.valueService.setValue(this.rowNode,this.column,t),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(t,i,s,n)=>this.registerRowDragger(t,i,n)}}parseValue(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){if(!this.cellComp)return;e.column===this.column&&this.refreshCell({})}refreshCell(e){var t,i,s;if(this.suppressRefreshCell||this.editing||!this.cellComp)return;const n=this.column.getColDef(),o=e!=null&&!!e.newData,a=e!=null&&!!e.suppressFlash||!!n.suppressCellFlash,l=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,c=e&&e.forceRefresh||l||o,d=this.updateAndFormatValue();if(c||d){this.showValue(o);const u=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!a&&!u&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),(t=this.cellCustomStyleFeature)===null||t===void 0||t.applyUserStyles(),(i=this.cellCustomStyleFeature)===null||i===void 0||i.applyClassesFromColDef()}this.refreshToolTip(),(s=this.cellCustomStyleFeature)===null||s===void 0||s.applyCellClassRules()}stopEditingAndFocus(e=!1,t=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(t)}navigateAfterEdit(e){if(this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit")){const i=e?W.UP:W.DOWN;this.beans.navigationService.navigateToNextCell(null,i,this.getCellPosition(),!1)}}flashCell(e){const t=e&&e.flashDelay,i=e&&e.fadeDelay;this.animateCell("data-changed",t,i)}animateCell(e,t,i){var s,n;const o=`ag-cell-${e}`,a=`ag-cell-${e}-animation`,{gridOptionsService:l}=this.beans;t||(t=(s=l.getNum("cellFlashDelay"))!==null&&s!==void 0?s:500),q(i)||(i=(n=l.getNum("cellFadeDelay"))!==null&&n!==void 0?n:1e3),this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(a,!1),window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(a,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.eGui.style.transition="")},i))},t)}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){const t=this.callValueFormatter(e);return t??e}callValueFormatter(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e=!1){const t=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!0:!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const e=this.getGui();this.beans.gridOptionsService.setDomData(e,Hn.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(e,Hn.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){return{type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex}}processCharacter(e){var t;(t=this.cellKeyboardListenerFeature)===null||t===void 0||t.processCharacter(e)}onKeyDown(e){var t;(t=this.cellKeyboardListenerFeature)===null||t===void 0||t.onKeyDown(e)}onMouseEvent(e,t){var i;(i=this.cellMouseListenerFeature)===null||i===void 0||i.onMouseEvent(e,t)}getGui(){return this.eGui}refreshToolTip(){var e;(e=this.tooltipFeature)===null||e===void 0||e.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)===null||e===void 0||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&this.setAriaColIndex()}setAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);Ow(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)===null||e===void 0?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(e){this.eGui.appendChild(e)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,t=null){this.cellComp&&(this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t))}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(I1,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(L1,e)}onCellFocused(e){if(!this.cellComp||this.beans.gridOptionsService.is("suppressCellFocus"))return;const t=this.beans.focusService.isCellFocused(this.cellPosition);this.cellComp.addOrRemoveCssClass(_1,t),t&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const i=this.beans.gridOptionsService.get("editType")==="fullRow";!t&&!i&&this.editing&&this.stopRowOrCellEdit()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:ul(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(A1,!0),this.cellComp.addOrRemoveCssClass(F1,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(P1,e),this.cellComp.addOrRemoveCssClass(M1,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.is("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(N1,e)}onColDefChanged(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(G1,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,E.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>t.onCellContextMenu(i),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new xC;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new sA(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(e,t,i){const s=this.beans.gridOptionsService.is("pagination"),n=this.beans.gridOptionsService.is("rowDragManaged"),o=this.beans.gridOptionsService.isRowModelType("clientSide");if(n){if(!o){Qe(()=>console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model"),"CellComp.addRowDragging");return}if(s){Qe(()=>console.warn("AG Grid: managed row dragging is not possible when doing pagination"),"CellComp.addRowDragging");return}}const a=new Yc(()=>this.value,this.rowNode,this.column,e,t,i);return this.beans.context.createBean(a),a}}Hn.DOM_DATA_KEY_CELL_CTRL="cellCtrl";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ds;(function(r){r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail"})(Ds||(Ds={}));let V1=0;class mo extends j{constructor(e,t,i,s,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.lastMouseDownOnDragger=!1,this.updateColumnListsPending=!1,this.businessKeySanitised=null,this.beans=t,this.gridOptionsService=t.gridOptionsService,this.rowNode=e,this.paginationPage=t.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=s,this.printLayout=n,this.instanceId=e.id+"-"+V1++,this.setAnimateFlags(i),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=pr(e)}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(e,t,i){const s={rowComp:e,element:t,containerType:i};this.allRowGuis.push(s),i===ss.LEFT?this.leftGui=s:i===ss.RIGHT?this.rightGui=s:i===ss.FULL_WIDTH?this.fullWidthGui=s:this.centerGui=s,this.initialiseRowComp(s),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),e===ss.LEFT?this.leftGui=void 0:e===ss.RIGHT?this.rightGui=void 0:e===ss.FULL_WIDTH&&(this.fullWidthGui=void 0)}isCacheable(){return this.rowType===Ds.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=t)}initialiseRowComp(e){const t=this.gridOptionsService;this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(e),t.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp;i.setRole("row"),this.getInitialRowClasses(e.containerType).forEach(n=>i.addOrRemoveCssClass(n,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&fo(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),this.isFullWidth()&&!this.gridOptionsService.is("suppressCellFocus")&&i.setTabIndex(-1),t.setDomData(e.element,mo.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>t.setDomData(e.element,mo.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),t.is("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}setRowCompRowId(e){const t=pr(this.rowNode.id);t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(rS(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(rS(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(this.gridOptionsService.isEnableRangeSelection()){Qe(()=>{console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");return}const t=this.beans.localeService.getLocaleTextFunc(),i=new Yc(()=>`1 ${t("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(i,this.beans.context)}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthParams(e.element,t);if(this.rowType==Ds.FullWidthDetail&&!ie.assertRegistered(te.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let s;switch(this.rowType){case Ds.FullWidthDetail:s=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(i);break;case Ds.FullWidthGroup:s=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(i);break;case Ds.FullWidthLoading:s=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(i);break;default:s=this.beans.userComponentFactory.getFullWidthCellRendererDetails(i);break}e.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderer(){var e,t;return(t=(e=this.fullWidthGui)===null||e===void 0?void 0:e.rowComp)===null||t===void 0?void 0:t.getFullWidthCellRenderer()}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){var e;const t=this.gridOptionsService.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:(e=this.centerGui)===null||e===void 0?void 0:e.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),t=!!this.centerGui,i=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&t&&i}setRowType(){const e=this.rowNode.stub,t=this.rowNode.isFullWidthCell(),i=this.beans.doingMasterDetail&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(s);e?this.rowType=Ds.FullWidthLoading:i?this.rowType=Ds.FullWidthDetail:t?this.rowType=Ds.FullWidth:o?this.rowType=Ds.FullWidthGroup:this.rowType=Ds.Normal}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;if(e||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t,i=null){const s={list:[],map:{}},n=(o,a)=>{s.list.push(a),s.map[o]=a};return t.forEach(o=>{const a=o.getInstanceId();let l=e.map[a];l||(l=new Hn(o,this.rowNode,this.beans,this)),n(a,l)}),e.list.forEach(o=>{if(s.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){n(o.getColumn().getInstanceId(),o);return}o.destroy()}),s}updateColumnListsImpl(e=!1){this.updateColumnListsPending=!1;const t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}this.allRowGuis.forEach(i=>{const s=i.containerType===ss.LEFT?this.leftCellCtrls:i.containerType===ss.RIGHT?this.rightCellCtrls:this.centerCellCtrls;i.rowComp.setCellCtrls(s.list,e)})}isCellEligibleToBeRemoved(e,t){if(e.getColumn().getPinned()!=t)return!0;const o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){const c=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(c)>=0)}return!0}listenOnDomOrder(e){const t=()=>{const i=this.gridOptionsService.is("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");e.rowComp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=q(this.rowNode.oldRowTop),i=this.beans.columnModel.isPinningLeft(),s=this.beans.columnModel.isPinningRight();t?(this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s):(this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s)}isEditing(){return this.editingRow}stopRowEditing(e){this.stopEditing(e)}isFullWidth(){return this.rowType!==Ds.Normal}getRowType(){return this.rowType}refreshFullWidth(){const e=(a,l)=>{if(!a)return!0;const c=a.rowComp.getFullWidthCellRenderer();if(!c||!c.refresh)return!1;const d=this.createFullWidthParams(a.element,l);return c.refresh(d)},t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&s&&n}addListeners(){this.addManagedListener(this.rowNode,oe.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,oe.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,oe.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,oe.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,E.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,E.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,E.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(e,E.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(e,E.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,E.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,E.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()}onColumnMoved(){this.updateColumnLists()}addListenersForCellComps(){this.addManagedListener(this.rowNode,oe.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,oe.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.rowNode.detailNode&&this.beans.rowRenderer.refreshFullWidthRow(this.rowNode.detailNode),this.isFullWidth()){this.beans.rowRenderer.refreshFullWidthRow(this.rowNode);return}this.getAllCellCtrls().forEach(t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(t=>{this.setRowCompRowId(t.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(t.rowComp)}),this.onRowSelected(),this.postProcessCss()}onRowNodeCellChanged(){this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const i=e===ca.Above,s=e===ca.Below;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}onRowNodeDraggingChanged(){this.postProcessRowDragging()}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),fo(i.element,e&&t)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ul(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((t?t.element:null)===e.target))return;const n=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||dr(e))return;const t=this.allRowGuis.find(o=>o.element.contains(e.target)),i=t?t.element:null,s=i===e.target;let n=null;s||(n=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&s||!n)&&this.beans.navigationService.onTabKeyDown(this,e)}onFullWidthRowFocused(e){var t;const i=this.rowNode,s=e?this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(t=this.centerGui)===null||t===void 0?void 0:t.element;n&&(n.classList.toggle("ag-full-width-focus",s),s&&n.focus({preventScroll:!0}))}refreshCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach(s=>{s!==t&&(i.list.push(s),i.map[s.getInstanceId()]=s)}),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:t}}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(dr(e))return;const t=this.createRowEventWithSource(E.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Hc(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,i=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:i.getAllDisplayedColumns()[0],rowPinned:t.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(dr(e)||this.lastMouseDownOnDragger)return;const i=this.createRowEventWithSource(E.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(i);const s=e.ctrlKey||e.metaKey,n=e.shiftKey;if(this.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))return;const a=this.gridOptionsService.is("rowMultiSelectWithClick"),l=!this.gridOptionsService.is("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):s?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:e,source:c});else{const d=a?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:n,event:e,source:c})}}setupDetailRowAutoHeight(e){if(this.rowType!==Ds.FullWidthDetail||!this.gridOptionsService.is("detailRowAutoHeight"))return;const t=()=>{const s=e.clientHeight;if(s!=null&&s>0){const n=()=>{this.rowNode.setRowHeight(s),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};this.beans.frameworkOverrides.setTimeout(n,0)}},i=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(i),t()}createFullWidthParams(e,t){return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,n,o,a)=>this.addFullWidthRowDragging(s,n,o,a)}}addFullWidthRowDragging(e,t,i="",s){if(!this.isFullWidth())return;const n=new Yc(()=>i,this.rowNode,void 0,e,t,s);this.createManagedBean(n,this.beans.context)}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(t,!0),s.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}onModelUpdated(){this.refreshFirstAndLastRowStyles()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",t)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const t=this.getAllCellCtrls(),i=this.editingRow;this.stoppingRowEdit=!0;let s=!1;for(const n of t){const o=n.stopEditing(e);i&&!e&&!s&&o&&(s=!0)}if(s){const n=this.createRowEvent(E.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(n)}i&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",e));const t=e?this.createRowEvent(E.EVENT_ROW_EDITING_STARTED):this.createRowEvent(E.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)}startRowEditing(e=null,t=null,i=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((n,o)=>{const a=o===t;return a?o.startEditing(e,a,i):o.startEditing(null,a,i),n?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e){const t=this.processStylesFromGridOptions();this.forEachGui(e,i=>i.rowComp.setUserStyles(t))}getPinnedForContainer(e){return e===ss.LEFT?"left":e===ss.RIGHT?"right":null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const t=this.gridOptionsService.getCallback("getRowStyle");let i;if(t){const s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=t(s)}return Object.assign({},e,i)}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",t),tu(i.element,t?!0:void 0);const s=this.createAriaLabel();kl(i.element,s??"")})}createAriaLabel(){const e=this.rowNode.isSelected();return e&&this.gridOptionsService.is("suppressRowDeselection")?void 0:this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,oe.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.is("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,oe.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,e),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){(e?[e]:this.allRowGuis).forEach(t)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,o=n?`${Math.min(i,n)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${t}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);const e=this.createRowEvent(E.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),super.destroy()}setupRemoveAnimation(){if(this.isSticky())return;if(this.rowNode.rowTop!=null){const t=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(t)}else this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0))}destroySecondPass(){this.allRowGuis.length=0;const e=t=>(t.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocused(){this.onCellFocusChanged()}onCellFocusCleared(){this.onCellFocusChanged()}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned())return e;const i=this.beans.paginationProxy.getPixelOffset();return e+i*(t?1:-1)}setRowTop(e){if(!this.printLayout&&q(e)){const t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.gridOptionsService.is("suppressRowTransform")?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t;if(this.isSticky())t=this.rowNode.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(i);t=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s)}return t+"px"}setRowTopStyle(e){const t=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(i=>t?i.rowComp.setTop(e):i.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==e&&(t=i)}),t!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(e)>=0&&(t=i)}),t}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString(),i=this.beans.headerNavigationService.getHeaderRowCount(),s=this.rowNode.rowIndex%2===0,n=i+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.addOrRemoveCssClass("ag-row-even",s),o.rowComp.addOrRemoveCssClass("ag-row-odd",!s),Dw(o.element,n)})}getPinnedLeftRowElement(){return this.leftGui?this.leftGui.element:void 0}getPinnedRightRowElement(){return this.rightGui?this.rightGui.element:void 0}getBodyRowElement(){return this.centerGui?this.centerGui.element:void 0}getFullWidthRowElement(){return this.fullWidthGui?this.fullWidthGui.element:void 0}}mo.DOM_DATA_KEY_ROW_CTRL="renderedRow";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Fs extends j{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Sw("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,s)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||dr(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,null,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Vl())return;const e=new St(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(null,i.touchEvent,s,n)};this.addManagedListener(e,St.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=this.gridOptionsService.getDomData(t,mo.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,o=s?s.getColumn():null;let a=null;if(o){const d=e||t;s.dispatchCellContextMenuEvent(d),a=this.valueService.getValue(o,n)}const l=this.ctrlsService.getGridBodyCtrl(),c=s?s.getGui():l.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,t,n,o,a,c)}getControlsForEventTarget(e){return{cellCtrl:uv(this.gridOptionsService,e,Hn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:uv(this.gridOptionsService,e,mo.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),o=e.isEditing();if(!vv(this.gridOptionsService,i,s,n,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),Bw(i)&&e.processCharacter(i)),t==="keydown"){const l=e.createEvent(i,E.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(l)}}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!vv(this.gridOptionsService,i,s,o,!1)){const l=i.key;if(t==="keydown")switch(l){case W.PAGE_HOME:case W.PAGE_END:this.navigationService.handlePageScrollingKey(i);break;case W.UP:case W.DOWN:e.onKeyboardNavigate(i);break;case W.TAB:e.onTabKeyDown(i);break}}if(t==="keydown"){const l=e.createRowEvent(E.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(l)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=MO(e);if(i===W.A)return this.onCtrlAndA(e);if(i===W.C)return this.onCtrlAndC(e);if(i===W.D)return this.onCtrlAndD(e);if(i===W.V)return this.onCtrlAndV(e);if(i===W.X)return this.onCtrlAndX(e);if(i===W.Y)return this.onCtrlAndY();if(i===W.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,o]=[t.isEmpty("top"),t.isEmpty("bottom")],a=n?null:"top";let l,c;o?(l=null,c=this.paginationProxy.getRowCount()-1):(l="bottom",c=t.getPinnedBottomRowData().length-1);const d=this.columnModel.getAllDisplayedColumns();if(Ys(d))return;s.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:c,rowEndPinned:l,columnStart:d[0],columnEnd:dt(d)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||this.gridOptionsService.is("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}}pn([S("mouseEventService")],Fs.prototype,"mouseEventService",void 0);pn([S("valueService")],Fs.prototype,"valueService",void 0);pn([Ne("contextMenuFactory")],Fs.prototype,"contextMenuFactory",void 0);pn([S("ctrlsService")],Fs.prototype,"ctrlsService",void 0);pn([S("navigationService")],Fs.prototype,"navigationService",void 0);pn([S("focusService")],Fs.prototype,"focusService",void 0);pn([S("undoRedoService")],Fs.prototype,"undoRedoService",void 0);pn([S("columnModel")],Fs.prototype,"columnModel",void 0);pn([S("paginationProxy")],Fs.prototype,"paginationProxy",void 0);pn([S("pinnedRowModel")],Fs.prototype,"pinnedRowModel",void 0);pn([Ne("rangeService")],Fs.prototype,"rangeService",void 0);pn([Ne("clipboardService")],Fs.prototype,"clipboardService",void 0);pn([U],Fs.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var AC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class fg extends j{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=eg(e);if(this.bodyHeight!==t){this.bodyHeight=t;const i={type:E.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}}AC([S("ctrlsService")],fg.prototype,"ctrlsService",void 0);AC([S("columnModel")],fg.prototype,"columnModel",void 0);AC([S("scrollVisibleService")],fg.prototype,"scrollVisibleService",void 0);AC([U],fg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var nA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ab extends j{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;je(this.element,t),Vn(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}}nA([S("pinnedWidthService")],ab.prototype,"pinnedWidthService",void 0);nA([U],ab.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var oA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class lb extends j{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;je(this.element,t),Vn(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}}oA([S("pinnedWidthService")],lb.prototype,"pinnedWidthService",void 0);oA([U],lb.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var rA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class PC extends j{constructor(e,t){super(),this.eContainer=e,this.eWrapper=t}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eWrapper&&(this.eWrapper.style.height=t)}}rA([S("rowContainerHeightService")],PC.prototype,"maxDivHeightScaler",void 0);rA([U],PC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class MC extends j{constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.gridOptionsService.isEnableRangeSelection()||Se(this.rangeService))return;const e={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(e),this.addDestroyFunc(()=>this.dragService.removeDragSource(e))}}cb([Ne("rangeService")],MC.prototype,"rangeService",void 0);cb([S("dragService")],MC.prototype,"dragService",void 0);cb([U],MC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var db=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Fu extends j{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),s=e.getDisplayedColumnsLeftWidth(),n=e.getDisplayedColumnsRightWidth();let o;t?o=i+s+n:(o=i,this.addSpacer&&(this.gridOptionsService.is("enableRtl")?s:n)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gridOptionsService.getScrollbarWidth())),this.callback(o)}}db([S("columnModel")],Fu.prototype,"columnModel",void 0);db([S("scrollVisibleService")],Fu.prototype,"scrollVisibleService",void 0);db([U],Fu.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Wl=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},$;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth"})($||($={}));var ss;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth"})(ss||(ss={}));function H1(r){switch(r){case $.CENTER:case $.TOP_CENTER:case $.STICKY_TOP_CENTER:case $.BOTTOM_CENTER:return ss.CENTER;case $.LEFT:case $.TOP_LEFT:case $.STICKY_TOP_LEFT:case $.BOTTOM_LEFT:return ss.LEFT;case $.RIGHT:case $.TOP_RIGHT:case $.STICKY_TOP_RIGHT:case $.BOTTOM_RIGHT:return ss.RIGHT;case $.FULL_WIDTH:case $.TOP_FULL_WIDTH:case $.STICKY_TOP_FULL_WIDTH:case $.BOTTOM_FULL_WIDTH:return ss.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}const B1=ia([[$.CENTER,"ag-center-cols-container"],[$.LEFT,"ag-pinned-left-cols-container"],[$.RIGHT,"ag-pinned-right-cols-container"],[$.FULL_WIDTH,"ag-full-width-container"],[$.TOP_CENTER,"ag-floating-top-container"],[$.TOP_LEFT,"ag-pinned-left-floating-top"],[$.TOP_RIGHT,"ag-pinned-right-floating-top"],[$.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[$.STICKY_TOP_CENTER,"ag-sticky-top-container"],[$.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[$.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[$.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[$.BOTTOM_CENTER,"ag-floating-bottom-container"],[$.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[$.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[$.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),W1=ia([[$.CENTER,"ag-center-cols-viewport"],[$.TOP_CENTER,"ag-floating-top-viewport"],[$.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[$.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),U1=ia([[$.CENTER,"ag-center-cols-clipper"]]);class Xn extends j{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name===$.TOP_FULL_WIDTH||this.name===$.STICKY_TOP_FULL_WIDTH||this.name===$.BOTTOM_FULL_WIDTH||this.name===$.FULL_WIDTH}static getRowContainerCssClasses(e){const t=B1.get(e),i=W1.get(e),s=U1.get(e);return{container:t,viewport:i,wrapper:s}}static getPinned(e){switch(e){case $.BOTTOM_LEFT:case $.TOP_LEFT:case $.STICKY_TOP_LEFT:case $.LEFT:return"left";case $.BOTTOM_RIGHT:case $.TOP_RIGHT:case $.STICKY_TOP_RIGHT:case $.RIGHT:return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([$.CENTER],()=>this.viewportSizeFeature=this.createManagedBean(new fg(this)))}registerWithCtrlsService(){switch(this.name){case $.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case $.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case $.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case $.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case $.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case $.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case $.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case $.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case $.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case $.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case $.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case $.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i,s){this.comp=e,this.eContainer=t,this.eViewport=i,this.eWrapper=s,this.createManagedBean(new Fs(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const n=[$.TOP_CENTER,$.TOP_LEFT,$.TOP_RIGHT],o=[$.STICKY_TOP_CENTER,$.STICKY_TOP_LEFT,$.STICKY_TOP_RIGHT],a=[$.BOTTOM_CENTER,$.BOTTOM_LEFT,$.BOTTOM_RIGHT],l=[$.CENTER,$.LEFT,$.RIGHT],c=[...n,...a,...l,...o],d=[$.CENTER,$.LEFT,$.RIGHT,$.FULL_WIDTH],h=[$.CENTER,$.TOP_CENTER,$.STICKY_TOP_CENTER,$.BOTTOM_CENTER],u=[$.LEFT,$.BOTTOM_LEFT,$.TOP_LEFT,$.STICKY_TOP_LEFT],p=[$.RIGHT,$.BOTTOM_RIGHT,$.TOP_RIGHT,$.STICKY_TOP_RIGHT];this.forContainers(u,()=>{this.pinnedWidthFeature=this.createManagedBean(new ab(this.eContainer)),this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new lb(this.eContainer)),this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(d,()=>this.createManagedBean(new PC(this.eContainer,this.eWrapper))),this.forContainers(c,()=>this.createManagedBean(new MC(this.eContainer))),this.forContainers(h,()=>this.createManagedBean(new Fu(f=>this.comp.setContainerWidth(`${f}px`)))),Hh()&&(this.forContainers([$.CENTER],()=>{const f=this.enableRtl?E.EVENT_LEFT_PINNED_WIDTH_CHANGED:E.EVENT_RIGHT_PINNED_WIDTH_CHANGED;this.addManagedListener(this.eventService,f,()=>this.refreshPaddingForFakeScrollbar())}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()}refreshPaddingForFakeScrollbar(){const{enableRtl:e,columnModel:t,name:i,eWrapper:s,eContainer:n}=this,o=e?$.LEFT:$.RIGHT;this.forContainers([$.CENTER,o],()=>{const a=t.getContainerWidth(o),l=e?"marginLeft":"marginRight";i===$.CENTER?s.style[l]=a?"0px":"16px":n.style[l]=a?"16px":"0px"})}addListeners(){this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,()=>this.onScrollVisibilityChanged()),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if([$.STICKY_TOP_CENTER,$.STICKY_TOP_LEFT,$.STICKY_TOP_RIGHT,$.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const i=()=>{const s=this.gridOptionsService.is("ensureDomOrder"),n=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(s||n)};this.addManagedPropertyListener("domLayout",i),i()}stopHScrollOnPinnedRows(){this.forContainers([$.TOP_CENTER,$.STICKY_TOP_CENTER,$.BOTTOM_CENTER],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers([$.CENTER],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers([$.CENTER],()=>this.onHorizontalViewportChanged())}onScrollVisibilityChanged(){const e=this.gridOptionsService.getScrollbarWidth()||0;if(this.name===$.CENTER){const i=this.scrollVisibleService.isHorizontalScrollShowing()?e:0,s=i==0?"100%":`calc(100% + ${i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setViewportHeight(s))}if(this.name===$.FULL_WIDTH){const i=`calc(100% - ${Hh()?16:0}px)`;this.eContainer.style.setProperty("width",i)}}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(){const e=this.getCenterWidth(),t=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}getCenterWidth(){return yC(this.eViewport)}getCenterViewportScrollLeft(){return mf(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportVisible(){return Au(this.eViewport)}getViewportScrollLeft(){return mf(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||RO(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){mv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!Xn.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),Hh()&&this.refreshPaddingForFakeScrollbar()}onDisplayedRowsChanged(e=!1){if(this.visible){const t=this.gridOptionsService.isDomLayout("print"),i=n=>{const o=n.isFullWidth(),a=this.embedFullWidthRows||t;return this.isFullWithContainer?!a&&o:a||!o},s=this.getRowCtrls().filter(i);this.comp.setRowCtrls(s,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)}getRowCtrls(){switch(this.name){case $.TOP_CENTER:case $.TOP_LEFT:case $.TOP_RIGHT:case $.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case $.STICKY_TOP_CENTER:case $.STICKY_TOP_LEFT:case $.STICKY_TOP_RIGHT:case $.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case $.BOTTOM_CENTER:case $.BOTTOM_LEFT:case $.BOTTOM_RIGHT:case $.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}}}Wl([S("scrollVisibleService")],Xn.prototype,"scrollVisibleService",void 0);Wl([S("dragService")],Xn.prototype,"dragService",void 0);Wl([S("ctrlsService")],Xn.prototype,"ctrlsService",void 0);Wl([S("columnModel")],Xn.prototype,"columnModel",void 0);Wl([S("resizeObserverService")],Xn.prototype,"resizeObserverService",void 0);Wl([S("animationFrameService")],Xn.prototype,"animationFrameService",void 0);Wl([S("rowRenderer")],Xn.prototype,"rowRenderer",void 0);Wl([U],Xn.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wr=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const j1=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="${$.TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="${$.TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="${$.TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="${$.TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-clipper" ref="eBodyClipper" role="presentation">
                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                    <ag-row-container ref="leftContainer" name="${$.LEFT}"></ag-row-container>
                    <ag-row-container ref="centerContainer" name="${$.CENTER}"></ag-row-container>
                    <ag-row-container ref="rightContainer" name="${$.RIGHT}"></ag-row-container>
                    <ag-row-container ref="fullWidthContainer" name="${$.FULL_WIDTH}"></ag-row-container>
                </div>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="${$.STICKY_TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="${$.STICKY_TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="${$.STICKY_TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="${$.STICKY_TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="${$.BOTTOM_LEFT}"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="${$.BOTTOM_CENTER}"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="${$.BOTTOM_RIGHT}"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="${$.BOTTOM_FULL_WIDTH}"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`;class Ao extends Q{constructor(){super(j1)}init(){const e=(i,s)=>{const n=`${i}px`;s.style.minHeight=n,s.style.height=n},t={setRowAnimationCssOnBodyViewport:(i,s)=>this.setRowAnimationCssOnBodyViewport(i,s),setColumnCount:i=>hO(this.getGui(),i),setRowCount:i=>dO(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setColumnMovingCss:(i,s)=>this.addOrRemoveCssClass(i,s),updateLayoutClasses:(i,s)=>{[this.eBodyViewport.classList,this.eBodyClipper.classList,this.eBody.classList].forEach(o=>{o.toggle(Kt.AUTO_HEIGHT,s.autoHeight),o.toggle(Kt.NORMAL,s.normal),o.toggle(Kt.PRINT,s.print)}),this.addOrRemoveCssClass(Kt.AUTO_HEIGHT,s.autoHeight),this.addOrRemoveCssClass(Kt.NORMAL,s.normal),this.addOrRemoveCssClass(Kt.PRINT,s.print)},setAlwaysVerticalScrollClass:(i,s)=>this.eBodyViewport.classList.toggle(iA,s),registerBodyViewportResizeListener:i=>{const s=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>s())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,s)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(n=>n.classList.toggle(i,s))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Ls),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||this.gridOptionsService.get("rowSelection")==="multiple")&&cO(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle(nu.ANIMATION_ON,t),i.toggle(nu.ANIMATION_OFF,!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}}wr([S("resizeObserverService")],Ao.prototype,"resizeObserverService",void 0);wr([Ne("rangeService")],Ao.prototype,"rangeService",void 0);wr([G("eBodyViewport")],Ao.prototype,"eBodyViewport",void 0);wr([G("eStickyTop")],Ao.prototype,"eStickyTop",void 0);wr([G("eTop")],Ao.prototype,"eTop",void 0);wr([G("eBottom")],Ao.prototype,"eBottom",void 0);wr([G("gridHeader")],Ao.prototype,"headerRootComp",void 0);wr([G("eBodyClipper")],Ao.prototype,"eBodyClipper",void 0);wr([G("eBody")],Ao.prototype,"eBody",void 0);wr([U],Ao.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let yf=class extends j{postConstruct(){this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)}updateImpl(){const e=this.ctrlsService.getCenterRowContainerCtrl();if(!e)return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const i={type:E.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};hb([S("ctrlsService")],yf.prototype,"ctrlsService",void 0);hb([U],yf.prototype,"postConstruct",null);yf=hb([ee("scrollVisibleService")],yf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var aA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Up;let ou=Up=class extends j{constructor(){super(...arguments),this.gridInstanceId=Up.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[Up.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return uv(this.gridOptionsService,e.target,Hn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const i=t[Up.GRID_DOM_KEY];if(q(i))return i===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gridOptionsService.isDomLayout("normal"),i=e;let s,n;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,n=i.clientY):(s=i.x,n=i.y),t){const o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,n+=a.top}return{x:s,y:n}}};ou.gridInstanceSequence=new Ni;ou.GRID_DOM_KEY="__ag_grid_instance";aA([S("ctrlsService")],ou.prototype,"ctrlsService",void 0);ou=Up=aA([ee("mouseEventService")],ou);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ns=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let ls=class extends j{constructor(){super(),this.onPageDown=aS(this.onPageDown,100),this.onPageUp=aS(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e){const t=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,n=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(t){case W.PAGE_HOME:case W.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(t),a=!0);break;case W.LEFT:case W.RIGHT:case W.UP:case W.DOWN:if(!o)return!1;s&&!i&&!n&&(this.onCtrlUpDownLeftRight(t,o),a=!0);break;case W.PAGE_DOWN:if(!o)return!1;!s&&!i&&(this.onPageDown(o),a=!0);break;case W.PAGE_UP:if(!o)return!1;!s&&!i&&(this.onPageUp(o),a=!0);break}return a&&e.preventDefault(),a}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:o}=e;if(q(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),q(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){const a={rowIndex:n,rowPinned:null,column:o};this.rangeService.setRangeToCell(a)}}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.paginationProxy.getPixelOffset(),o=i.top+s,a=this.paginationProxy.getRowIndexAtPixel(o+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.paginationProxy.getPixelOffset(),n=i.top,o=this.paginationProxy.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow(),a=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(e.rowIndex),c=i?(l==null?void 0:l.rowHeight)-s-a:s-a,d=(l==null?void 0:l.rowTop)+c;let h=this.paginationProxy.getRowIndexAtPixel(d+a);if(h===e.rowIndex){const p=i?-1:1;t=h=e.rowIndex+p}let u;i?(u="bottom",h<n&&(h=n),t<n&&(t=n)):(u="top",h>o&&(h=o),t>o&&(t=o)),this.isRowTallerThanView(h)&&(t=h,u="top"),this.navigateTo({scrollIndex:t,scrollType:u,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var i;const s=t?-1:1,n=this.getViewportHeight(),o=this.paginationProxy.getPageLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=o;){const c=this.paginationProxy.getRow(l);if(c){const d=(i=c.rowHeight)!==null&&i!==void 0?i:0;if(a+d>n)break;a+=d}l+=s}return Math.max(0,Math.min(l,o))}getViewportHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth();let s=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s,column:n}=i;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===W.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),s=t?i[0]:dt(i),n=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey;if(this.tabToNextCellCommon(e,i,t)){t.preventDefault();return}if(i){const{rowIndex:n,rowPinned:o}=e.getRowPosition();(o?n===0:n===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusLastHeader(t)))}else e instanceof Hn&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof Hn){const a=e.getRowCtrl();a&&(s=a.isEditing())}let n;return s?this.gridOptionsService.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n==null)return!1;const o=n.getCellPosition(),a=this.isCellEditable(s),l=this.isCellEditable(o),c=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;return a&&e.setFocusOutOnEditor(),c||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),l?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.columnModel.getAllDisplayedColumns();let s;e instanceof mo?s=Object.assign(Object.assign({},e.getRowPosition()),{column:t?i[0]:dt(i)}):s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n instanceof Hn)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return q(n)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const n=this.gridOptionsService.getCallback("tabToNextCell");if(q(n)){const c=n({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});q(c)?(c.floating&&(Qe(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),s={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}):s=null}if(!s)return null;if(s.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:s.column}}),null}const o=this.gridOptionsService.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const a=this.getCellByPosition(s);if(!a){const l=this.rowRenderer.getRowByPosition(s);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(s),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gridOptionsService.is("enableRtl")?t===W.LEFT&&(n=this.getLastCellOfColSpan(n)):t===W.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=Se(n);if(o&&e&&e.key===W.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const l=this.gridOptionsService.getCallback("navigateToNextCell");if(q(l)){const d=l({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});q(d)?(d.floating&&(Qe(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),d.rowPinned=d.floating),n={rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}):n=null}}if(!n)return;if(n.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+n.rowIndex,column:i.column},event:e||void 0});return}const a=this.getNormalisedPosition(n);a?this.focusPosition(a):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const i=this.columnModel.getAllDisplayedColumns(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?dt(i):i[0])};this.focusPosition(o);const a=n!=null?this.rowPositionUtils.before(o,n):!1,l={type:E.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,floating:o.rowPinned,fromBelow:a};return this.eventService.dispatchEvent(l),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:dt(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&Se(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};Ns([S("mouseEventService")],ls.prototype,"mouseEventService",void 0);Ns([S("paginationProxy")],ls.prototype,"paginationProxy",void 0);Ns([S("focusService")],ls.prototype,"focusService",void 0);Ns([Ne("rangeService")],ls.prototype,"rangeService",void 0);Ns([S("columnModel")],ls.prototype,"columnModel",void 0);Ns([S("rowModel")],ls.prototype,"rowModel",void 0);Ns([S("ctrlsService")],ls.prototype,"ctrlsService",void 0);Ns([S("rowRenderer")],ls.prototype,"rowRenderer",void 0);Ns([S("headerNavigationService")],ls.prototype,"headerNavigationService",void 0);Ns([S("rowPositionUtils")],ls.prototype,"rowPositionUtils",void 0);Ns([S("cellNavigationService")],ls.prototype,"cellNavigationService",void 0);Ns([S("pinnedRowModel")],ls.prototype,"pinnedRowModel",void 0);Ns([U],ls.prototype,"postConstruct",null);ls=Ns([ee("navigationService")],ls);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var z1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class gg extends Rd{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),gg.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{vv(this.gridOptionsService,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedListener(e,"keydown",i)}}gg.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";z1([U],gg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class $1 extends Q{constructor(e,t,i,s,n){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=s,this.setTemplate(`<div comp-id="${this.getCompId()}"/>`);const o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a=(c,d,h)=>{const u=h||o;d!=null&&d!=""?u.setAttribute(c,d):u.removeAttribute(c)},l={addOrRemoveCssClass:(c,d)=>this.addOrRemoveCssClass(c,d),setUserStyles:c=>kw(o,c),getFocusableElement:()=>this.getFocusableElement(),setTabIndex:c=>a("tabindex",c.toString()),setRole:c=>bi(o,c),setColId:c=>a("col-id",c),setTitle:c=>a("title",c),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,d,h)=>this.setRenderDetails(c,d,h),setEditDetails:(c,d,h)=>this.setEditDetails(c,d,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};this.cellCtrl=t,t.setComp(l,this.getGui(),this.eCellWrapper,i,n)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,s=i&&this.eCellWrapper==null;s&&(this.eCellWrapper=Li('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));const n=!i&&this.eCellWrapper!=null;n&&(ra(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const o=!e&&i,a=o&&this.eCellValue==null;a&&(this.eCellValue=Li('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));const l=!o&&this.eCellValue!=null;l&&(ra(this.eCellValue),this.eCellValue=void 0);const c=s||n||a||l;return c&&this.removeControls(),e||t&&this.addControls(),c}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const s=this.editorVersion,n=e.newAgStackInstance();if(!n)return;const{params:o}=e;n.then(l=>this.afterCellEditorCreated(s,l,o,t,i)),Se(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Qs(t);const i=e!=null?pr(e):null;i!=null&&(t.innerHTML=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),ra(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),ra(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const i=!this.beans.gridOptionsService.is("suppressAnimationFrame"),s=this.rendererVersion,{componentClass:n}=e,o=()=>{if(this.rendererVersion!==s||!this.isAlive())return;const l=e.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,s,n);l&&l.then(c)};i&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const n=this.getParentOfValue();Qs(n),n.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,s,n){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const l=s||t.isPopup!==void 0&&t.isPopup();l?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,l),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(i=this.rowCtrl)===null||i===void 0||i.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new gg(e));const s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);const n=this.beans.popupService,o=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),a=t??(i.getPopupPosition?i.getPopupPosition():"over"),l=this.beans.gridOptionsService.is("enableRtl"),c={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},d=n.positionPopupByComponent.bind(n,c),h=this.beans.localeService.getLocaleTextFunc(),u=n.addPopup({modal:o,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});u&&(this.hideEditorPopup=u.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&CC()&&e.focus({preventScroll:!0}),Qs(this.getParentOfValue())}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class K1 extends Q{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e,this.setTemplate(`<div comp-id="${this.getCompId()}" style="${this.getInitialStyle(i)}"/>`);const s=this.getGui(),n=s.style,o={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(a,l)=>this.addOrRemoveCssClass(a,l),setUserStyles:a=>kw(s,a),setTop:a=>n.top=a,setTransform:a=>n.transform=a,setRowIndex:a=>s.setAttribute("row-index",a),setRole:a=>bi(s,a),setRowId:a=>s.setAttribute("row-id",a),setRowBusinessKey:a=>s.setAttribute("row-business-key",a),setTabIndex:a=>s.setAttribute("tabindex",a.toString())};e.setComp(o,this.getGui(),i),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e),i=this.rowCtrl.getInitialRowTop(e);return t?`transform: ${t}`:`top: ${i}`}showFullWidth(e){const t=s=>{if(this.isAlive()){const n=s.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(s)}else this.beans.context.destroyBean(s)},i=e.newAgStackInstance();i&&i.then(t)}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(s=>{const n=s.getInstanceId();this.cellComps[n]==null?this.newCellComp(s):t[n]=null});const i=ur(t).filter(s=>s!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(i=>{const s=this.cellComps[i.getInstanceId()];s&&t.push(s.getGui())}),Gw(this.getGui(),t)}newCellComp(e){const t=new $1(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=ur(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;const i=t.getCtrl().getInstanceId();this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Nu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function Y1(){const r=Q.elementGettingCreated.getAttribute("name"),e=Xn.getRowContainerCssClasses(r);let t;const i=r===$.CENTER,s=r===$.TOP_CENTER||r===$.STICKY_TOP_CENTER||r===$.BOTTOM_CENTER;return i?t=`<div class="${e.wrapper}" ref="eWrapper" role="presentation">
                <div class="${e.viewport}" ref="eViewport" role="presentation">
                    <div class="${e.container}" ref="eContainer"></div>
                </div>
            </div>`:s?t=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" ref="eContainer"></div>`,t}class Od extends Q{constructor(){super(Y1()),this.rowComps={},this.name=Q.elementGettingCreated.getAttribute("name"),this.type=H1(this.name)}postConstruct(){const e={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:i=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new Xn(this.name)).setComp(e,this.eContainer,this.eViewport,this.eWrapper)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const t=Object.assign({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const i=s=>{const n=s.getInstanceId(),o=t[n];if(o)this.rowComps[n]=o,delete t[n],this.ensureDomOrder(o.getGui());else{const a=new K1(s,this.beans,this.type);this.rowComps[n]=a,this.appendRow(a.getGui())}};e.forEach(i),ur(t).forEach(s=>{this.eContainer.removeChild(s.getGui()),s.destroy()}),bi(this.eContainer,e.length?"rowgroup":"presentation")}appendRow(e){this.domOrder?xO(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(Nw(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}}Nu([S("beans")],Od.prototype,"beans",void 0);Nu([G("eViewport")],Od.prototype,"eViewport",void 0);Nu([G("eContainer")],Od.prototype,"eContainer",void 0);Nu([G("eWrapper")],Od.prototype,"eWrapper",void 0);Nu([U],Od.prototype,"postConstruct",null);Nu([ft],Od.prototype,"preDestroy",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ub{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.is("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?De.ICON_PINNED:De.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}}lA([S("columnModel")],ub.prototype,"columnModel",void 0);lA([S("gridOptionsService")],ub.prototype,"gridOptionsService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var mg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Gu{constructor(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=t,this.centerContainer=!q(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?De.ICON_PINNED:De.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===_t.ToolPanel)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(o=>s[o.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i="api"){if(e){const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,t,i)}}setColumnsPinned(e,t,i="api"){if(e){const s=e.filter(n=>!n.getColDef().lockPinned);this.columnModel.setColumnsPinned(s,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}normaliseX(e){return this.gridOptionsService.is("enableRtl")&&(e=this.eContainer.clientWidth-e),this.centerContainer&&(e+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}checkCenterForScrolling(e){if(this.centerContainer){const t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){var n;if(s){if(this.lastMovedInfo){const{columns:d,toIndex:h}=this.lastMovedInfo;this.moveColumns(d,h,"uiColumnMoved",!0)}return}if(this.lastDraggingEvent=e,Se(e.hDirection))return;const o=this.normaliseX(e.x);t||this.checkCenterForScrolling(o);const a=this.normaliseDirection(e.hDirection),l=e.dragSource.type,c=((n=e.dragSource.getDragItem().columns)===null||n===void 0?void 0:n.filter(d=>d.getColDef().lockPinned?d.getPinned()==this.pinned:!0))||[];this.attemptMoveColumns({dragSourceType:l,allMovingColumns:c,hDirection:a,mouseX:o,fromEnter:t,fakeEvent:i})}normaliseDirection(e){if(this.gridOptionsService.is("enableRtl"))switch(e){case Qo.Left:return Qo.Right;case Qo.Right:return Qo.Left;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}attemptMoveColumns(e){const{dragSourceType:t,hDirection:i,mouseX:s,fromEnter:n,fakeEvent:o}=e,a=i===Qo.Left,l=i===Qo.Right;let{allMovingColumns:c}=e;if(t===_t.HeaderCell){let C=[];c.forEach(y=>{let R=null,b=y.getParent();for(;b!=null&&b.getDisplayedLeafColumns().length===1;)R=b,b=b.getParent();R!=null?R.getProvidedColumnGroup().getLeafColumns().forEach(x=>{C.includes(x)||C.push(x)}):C.includes(y)||C.push(y)}),c=C}const d=c.slice();this.columnModel.sortColumnsLikeGridColumns(d);const h=this.calculateValidMoves(d,l,s),u=this.calculateOldIndex(d);if(h.length===0)return;const p=h[0];let f=u!==null&&!n;if(t==_t.HeaderCell&&(f=u!==null),f&&!o&&(a&&p>=u||l&&p<=u))return;const g=this.columnModel.getAllDisplayedColumns();let m=[],v=null;for(let C=0;C<h.length;C++){const y=h[C],R=this.columnModel.getProposedColumnOrder(d,y);if(!this.columnModel.doesOrderPassRules(R))continue;const b=R.filter(x=>g.includes(x));if(v===null)v=b;else if(!A.areEqual(b,v))break;const w=this.groupFragCount(R);m.push({move:y,fragCount:w})}m.length!==0&&(m.sort((C,y)=>C.fragCount-y.fragCount),this.moveColumns(c,m[0].move,"uiColumnMoved",!1))}calculateOldIndex(e){const t=this.columnModel.getAllGridColumns(),i=UD(e.map(l=>t.indexOf(l))),s=i[0];return dt(i)-s!==i.length-1?null:s}moveColumns(e,t,i,s){this.columnModel.moveColumns(e,t,i,s),this.lastMovedInfo=s?null:{columns:e,toIndex:t}}groupFragCount(e){function t(s){let n=[],o=s.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach(a=>{o.indexOf(a)===-1&&i++})}return i}calculateValidMoves(e,t,i){if(this.gridOptionsService.is("suppressMovableColumns")||e.some(g=>g.getColDef().suppressMovable))return[];const n=this.columnModel.getDisplayedColumns(this.pinned),o=this.columnModel.getAllGridColumns(),a=n.filter(g=>Gn(e,g)),l=n.filter(g=>!Gn(e,g)),c=o.filter(g=>!Gn(e,g));let d=0,h=i;if(t){let g=0;a.forEach(m=>g+=m.getActualWidth()),h-=g}if(h>0){for(let g=0;g<l.length;g++){const m=l[g];if(h-=m.getActualWidth(),h<0)break;d++}t&&d++}let u;if(d>0){const g=l[d-1];u=c.indexOf(g)+1}else u=c.indexOf(l[0]),u===-1&&(u=0);const p=[u],f=(g,m)=>g-m;if(t){let g=u+1;const m=o.length-1;for(;g<=m;)p.push(g),g++;p.sort(f)}else{let g=u;const m=o.length-1;let v=o[g];for(;g<=m&&this.isColumnHidden(n,v);)g++,p.push(g),v=o[g];g=u-1;const C=0;for(;g>=C;)p.push(g),g--;p.sort(f).reverse()}return p}isColumnHidden(e,t){return e.indexOf(t)<0}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(De.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(De.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(De.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const n=this.lastDraggingEvent.dragItem.columns.filter(o=>!o.getColDef().lockPinned);if(n.length>0&&(this.dragAndDropService.setGhostIcon(De.ICON_PINNED),this.failedMoveAttempts>7)){const o=this.needToMoveLeft?"left":"right";this.setColumnsPinned(n,o,"uiColumnDragged"),this.dragAndDropService.nudge()}}}}mg([S("columnModel")],Gu.prototype,"columnModel",void 0);mg([S("dragAndDropService")],Gu.prototype,"dragAndDropService",void 0);mg([S("gridOptionsService")],Gu.prototype,"gridOptionsService",void 0);mg([S("ctrlsService")],Gu.prototype,"ctrlsService",void 0);mg([U],Gu.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ku extends j{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(e){return e===_t.HeaderCell||e===_t.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Gu(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new ub(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===_t.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}}vg([S("dragAndDropService")],ku.prototype,"dragAndDropService",void 0);vg([S("columnModel")],ku.prototype,"columnModel",void 0);vg([S("ctrlsService")],ku.prototype,"ctrlsService",void 0);vg([U],ku.prototype,"postConstruct",null);vg([U],ku.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Cg{static getHeaderClassesFromColDef(e,t,i,s){return Se(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,i,s)}static getToolPanelClassesFromColDef(e,t,i,s){return Se(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,i,s)}static getClassParams(e,t,i,s){return{colDef:e,column:i,columnGroup:s,api:t.api,columnApi:t.columnApi,context:t.context}}static getColumnClassesFromCollDef(e,t,i,s,n){if(Se(e))return[];let o;if(typeof e=="function"){const a=this.getClassParams(t,i,s,n);o=e(a)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _C=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ul extends ob{constructor(e){super(Ul.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui(),t=(n,o,a)=>{const l=a||e;o!=null&&o!=""?l.setAttribute(n,o):l.removeAttribute(n)},i={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,o)=>this.addOrRemoveCssClass(n,o),setColId:n=>t("col-id",n),setTitle:n=>t("title",n),setAriaDescription:n=>nO(e,n),setAriaSort:n=>n?pO(e,n):fO(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper);const s=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",s)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}}Ul.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;_C([G("eResize")],Ul.prototype,"eResize",void 0);_C([G("eHeaderCompWrapper")],Ul.prototype,"eHeaderCompWrapper",void 0);_C([U],Ul.prototype,"postConstruct",null);_C([ft],Ul.prototype,"destroyHeaderComp",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ad extends ob{constructor(e){super(Ad.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t=(s,n)=>n!=null?e.setAttribute(s,n):e.removeAttribute(s),i={addOrRemoveCssClass:(s,n)=>this.addOrRemoveCssClass(s,n),setResizableDisplayed:s=>je(this.eResize,s),setWidth:s=>e.style.width=s,setColId:s=>e.setAttribute("col-id",s),setAriaExpanded:s=>t("aria-expanded",s),setTitle:s=>t("title",s),setUserCompDetails:s=>this.setUserCompDetails(s)};this.ctrl.setComp(i,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const i=this.getGui(),s=e.getGui();i.appendChild(s),this.addDestroyFunc(t),this.ctrl.setDragSource(i)}}Ad.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;pb([S("userComponentFactory")],Ad.prototype,"userComponentFactory",void 0);pb([G("eResize")],Ad.prototype,"eResize",void 0);pb([U],Ad.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Fi;(function(r){r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter"})(Fi||(Fi={}));class fb extends Q{constructor(e){super(),this.headerComps={};const t=e.getType()==Fi.COLUMN_GROUP?"ag-header-row-column-group":e.getType()==Fi.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";this.setTemplate(`<div class="ag-header-row ${t}" role="row"></div>`),this.ctrl=e}init(){const e={setTransform:t=>this.getGui().style.transform=t,setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:t=>this.setHeaderCtrls(t),setWidth:t=>this.getGui().style.width=t,setAriaRowIndex:t=>Dw(this.getGui(),t)};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([])}setHeaderCtrls(e){if(!this.isAlive())return;const t=this.headerComps;this.headerComps={},e.forEach(n=>{const o=n.getInstanceId();let a=t[o];delete t[o],a==null&&(a=this.createHeaderComp(n),this.getGui().appendChild(a.getGui())),this.headerComps[o]=a}),Et(t,(n,o)=>{this.getGui().removeChild(o.getGui()),this.destroyBean(o)});const i=this.gridOptionsService.is("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");if(i||s){const n=ur(this.headerComps);n.sort((a,l)=>{const c=a.getCtrl().getColumnGroupChild().getLeft(),d=l.getCtrl().getColumnGroupChild().getLeft();return c-d});const o=n.map(a=>a.getGui());Gw(this.getGui(),o)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case Fi.COLUMN_GROUP:t=new Ad(e);break;case Fi.FLOATING_FILTER:t=new Da(e);break;default:t=new Ul(e);break}return this.createBean(t),t.setParentComponent(this),t}}cA([U],fb.prototype,"init",null);cA([ft],fb.prototype,"destroyHeaderCtrls",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var gb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let X1=0;class br extends j{constructor(e,t){super(),this.lastFocusEvent=null,this.columnGroupChild=e,this.parentRowCtrl=t,this.instanceId=e.getUniqueId()+"-"+X1++}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return PO(this.gridOptionsService,e,t,i)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData()}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case W.PAGE_DOWN:case W.PAGE_UP:case W.PAGE_HOME:case W.PAGE_END:t&&e.preventDefault()}}addDomData(){const e=br.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}}br.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";gb([S("focusService")],br.prototype,"focusService",void 0);gb([S("beans")],br.prototype,"beans",void 0);gb([S("userComponentFactory")],br.prototype,"userComponentFactory",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var q1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class IC extends j{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?dt(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,me.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),t=q(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gridOptionsService.isDomLayout("print")||e.getPinned()==="left")return t;const s=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.columnModel.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){q(e)&&(this.eCell.style.left=`${e}px`);let t;if(this.columnOrGroup instanceof me)t=this.columnOrGroup;else{const n=this.columnOrGroup.getLeafColumns();if(!n.length)return;n.length>1&&uO(this.ariaEl,n.length),t=n[0]}const i=this.beans.columnModel.getAriaColumnIndex(t);Ow(this.ariaEl,i)}}q1([U],IC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var dA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class yg extends j{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}}dA([S("columnHoverService")],yg.prototype,"columnHoverService",void 0);dA([U],yg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var mb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class LC extends br{constructor(e,t){super(e,t),this.iconCreated=!1,this.column=e}setComp(e,t,i,s){super.setGui(t),this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,me.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Wt("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new bs(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();kl(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let i=this.column;do if(i=e?t.getDisplayedColBefore(i):t.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case W.UP:case W.DOWN:t||e.preventDefault();case W.LEFT:case W.RIGHT:if(t)return;e.stopPropagation();case W.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case W.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&Hc(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const o=this.lastFocusEvent,a=!!(o&&o.key===W.TAB);if(o&&a){const l=o.shiftKey;this.focusService.focusInto(this.eGui,l)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(){this.createManagedBean(new yg([this.column],this.eGui));const e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;const t=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new IC(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){const e=this.column.getColDef();this.suppressFilterButton=e.floatingFilterComponentParams?!!e.floatingFilterComponentParams.suppressFilterButton:!1}setupUserComp(){if(!this.active)return;const e=this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])}setupSyncWithFilter(){if(!this.active)return;const e=t=>{const i=this.comp.getFloatingFilterComp();i&&i.then(s=>{if(s){const n=this.filterManager.getCurrentFloatingFilterParentModel(this.column);s.onParentModelChanged(n,t)}})};this.destroySyncListener=this.addManagedListener(this.column,me.EVENT_FILTER_CHANGED,e),this.filterManager.isFilterActive(this.column)&&e(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,me.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))}updateFilterButton(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))}onColDefChanged(){var e,t;const i=this.active;this.setupActive();const s=!i&&this.active;i&&!this.active&&((e=this.destroySyncListener)===null||e===void 0||e.call(this),(t=this.destroyFilterChangedListener)===null||t===void 0||t.call(this));const n=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!n?this.updateCompDetails(n,s):o.then(a=>{var l;(!a||((l=this.userCompDetails)===null||l===void 0?void 0:l.componentClass)!==n.componentClass)&&this.updateCompDetails(n,s)})}updateCompDetails(e,t){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())}}mb([S("filterManager")],LC.prototype,"filterManager",void 0);mb([S("columnHoverService")],LC.prototype,"columnHoverService",void 0);mb([S("menuFactory")],LC.prototype,"menuFactory",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class FC extends j{constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=this.column.getColDef(),t=[];let i,s;const n=()=>{if(je(this.eResize,i),!i)return;const l=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(l),s){const c=this.gridOptionsService.is("skipHeaderOnAutoSize"),d=()=>{this.columnModel.autoSizeColumn(this.column,c,"uiColumnResized")};this.eResize.addEventListener("dblclick",d);const h=new St(this.eResize);h.addEventListener(St.EVENT_DOUBLE_TAP,d),this.addDestroyFunc(()=>{this.eResize.removeEventListener("dblclick",d),h.removeEventListener(St.EVENT_DOUBLE_TAP,d),h.destroy()})}},o=()=>{t.forEach(l=>l()),t.length=0},a=()=>{const l=this.column.isResizable(),c=!this.gridOptionsService.is("suppressAutoSize")&&!e.suppressAutoSize;(l!==i||c!==s)&&(i=l,s=c,o(),n())};a(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(a)}onResizing(e,t){const i=this.normaliseResizeAmount(t),s=[{key:this.column,newWidth:this.resizeStartWidth+i}];this.columnModel.setColumnWidths(s,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gridOptionsService.is("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}}vb([S("horizontalResizeService")],FC.prototype,"horizontalResizeService",void 0);vb([S("columnModel")],FC.prototype,"columnModel",void 0);vb([U],FC.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var NC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Sg extends j{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e;const t=e.getColDef();this.filteredOnly=!!(t!=null&&t.headerCheckboxSelectionFilteredOnly),this.currentPageOnly=!!(t!=null&&t.headerCheckboxSelectionCurrentPageOnly)}onSpaceKeyDown(e){const t=this.cbSelectAll,i=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(i.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new _s),this.cbSelectAll.addCssClass("ag-header-select-all"),bi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,_s.EVENT_CHANGED,this.onCbSelectAll.bind(this)),gC(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${i})`),this.headerCellCtrl.refreshAriaDescription()}checkRightRowModelType(e){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue();let t="uiSelectAll";this.currentPageOnly?t="uiSelectAllCurrentPage":this.filteredOnly&&(t="uiSelectAllFiltered");const i={source:t,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const t=e,i={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context};e=t(i)}return e?this.checkRightRowModelType("headerCheckboxSelection"):!1}}NC([S("gridApi")],Sg.prototype,"gridApi",void 0);NC([S("columnApi")],Sg.prototype,"columnApi",void 0);NC([S("rowModel")],Sg.prototype,"rowModel",void 0);NC([S("selectionService")],Sg.prototype,"selectionService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Aa=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Er extends br{constructor(e,t){super(e,t),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s){super.setGui(t),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new FC(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new yg([this.column],t)),this.createManagedBean(new IC(this.column,t,this.beans)),this.createManagedBean(new bs(t,{shouldStopEventPropagation:n=>this.shouldStopEventPropagation(n),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.column,me.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){const e=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:e.sortable,enableMenu:this.menuEnabled,showColumnMenu:i=>{this.gridApi.showColumnMenuAfterButtonClick(this.column,i)},progressSort:i=>{this.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,s)=>{this.sortController.setSortForColumn(this.column,i,!!s,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new Sg(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===W.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===W.ENTER&&this.onEnterKeyDown(e)}onEnterKeyDown(e){const t=this.comp.getUserCompInstance();if(t){if(e.ctrlKey||e.metaKey)this.menuEnabled&&t.showMenu&&(e.preventDefault(),t.showMenu());else if(this.sortable){const i=e.shiftKey;this.sortController.progressSort(this.column,i,"uiColumnSorted")}}}isMenuEnabled(){return this.menuEnabled}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column)}this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(){const e={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>this.eGui,getLocation:()=>"header",getTooltipValue:()=>this.column.getColDef().headerTooltip},t=this.createManagedBean(new rb(e,this.beans));t.setComp(this.comp),this.refreshFunctions.push(()=>t.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=Cg.getHeaderClassesFromColDef(t,this.gridOptionsService,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const t=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:_t.HeaderCell,eElement:e,defaultIconName:t?De.ICON_HIDE:De.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),dragItemName:this.displayName,onDragStarted:()=>this.column.setMoving(!0,"uiColumnMoved"),onDragStopped:()=>this.column.setMoving(!1,"uiColumnMoved"),onGridEnter:i=>{var s;if(t){const n=((s=i==null?void 0:i.columns)===null||s===void 0?void 0:s.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(n,!0,"uiColumnMoved")}},onGridExit:i=>{var s;if(t){const n=((s=i==null?void 0:i.columns)===null||s===void 0?void 0:s.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(n,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}createDragItem(){const e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}}removeDragSource(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)}onColDefChanged(){this.refresh()}updateState(){const e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gridOptionsService.is("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,me.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,me.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,me.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,columnModel:s,gridOptionsService:n}=this;if(!t.isSpanHeaderHeight())return;const{numberOfParents:o,isSpanningTotal:a}=this.getColumnGroupPaddingInfo();if(i.addOrRemoveCssClass("ag-header-span-height",o>0),o===0)return;i.addOrRemoveCssClass("ag-header-span-total",a);const c=n.is("pivotMode")?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight(),d=s.getColumnHeaderRowHeight(),h=o*c;e.style.setProperty("top",`${-h}px`),e.style.setProperty("height",`${d+h}px`)}getColumnGroupPaddingInfo(){let e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}setupAutoHeight(e){const t=l=>{if(!this.isAlive())return;const{paddingTop:c,paddingBottom:d,borderBottomWidth:h,borderTopWidth:u}=wd(this.getGui()),p=c+d+h+u,g=e.offsetHeight+p;if(l<5){const m=this.beans.gridOptionsService.getDocument(),v=!m||!m.contains(e),C=g==0;if(v||C){this.beans.frameworkOverrides.setTimeout(()=>t(l+1),0);return}}this.columnModel.setColumnHeaderHeight(this.column,g)};let i=!1,s;const n=()=>{const l=this.column.isAutoHeaderHeight();l&&!i&&o(),!l&&i&&a()},o=()=>{i=!0,t(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=this.resizeObserverService.observeResize(e,()=>t(0))},a=()=>{i=!1,s&&s(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};n(),this.addDestroyFunc(()=>a()),this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,()=>i&&t(0)),this.addManagedListener(this.eventService,me.EVENT_SORT_CHANGED,()=>{i&&this.beans.frameworkOverrides.setTimeout(()=>t(0))}),this.addRefreshFunction(n)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(tO(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}refreshAriaDescription(){const e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()}addColumnHoverListener(){const e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;const t=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupFilterCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-filtered",this.column.isFilterActive())};this.addManagedListener(this.column,me.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupColId(){this.comp.setColId(this.column.getColId())}addActiveHeaderMouseListeners(){const e=t=>this.setActiveHeader(t.type==="mouseenter");this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}}Aa([S("columnModel")],Er.prototype,"columnModel",void 0);Aa([S("columnHoverService")],Er.prototype,"columnHoverService",void 0);Aa([S("sortController")],Er.prototype,"sortController",void 0);Aa([S("menuFactory")],Er.prototype,"menuFactory",void 0);Aa([S("dragAndDropService")],Er.prototype,"dragAndDropService",void 0);Aa([S("resizeObserverService")],Er.prototype,"resizeObserverService",void 0);Aa([S("gridApi")],Er.prototype,"gridApi",void 0);Aa([S("columnApi")],Er.prototype,"columnApi",void 0);Aa([ft],Er.prototype,"removeDragSource",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var GC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class wg extends j{constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.is("suppressAutoSize")){const t=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){this.calculateInitialValues();let t=null;if(e&&(t=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),t){const i=t.getDisplayedLeafColumns();this.resizeTakeFromCols=i.filter(s=>s.isResizable()),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(s=>this.resizeTakeFromStartWidth+=s.getActualWidth()),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(s=>this.resizeTakeFromRatios.push(s.getActualWidth()/this.resizeTakeFromStartWidth))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumns(n,i,e)}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),t>this.resizeStartWidth&&this.resizeColumns(t,e,!0)}resizeColumns(e,t,i=!0){const s=[];if(s.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols){const n=e-this.resizeStartWidth;s.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-n})}this.columnModel.resizeColumnSets({resizeSets:s,finished:i,source:t}),i&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}calculateInitialValues(){const e=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=e.filter(t=>t.isResizable()),this.resizeStartWidth=0,this.resizeCols.forEach(t=>this.resizeStartWidth+=t.getActualWidth()),this.resizeRatios=[],this.resizeCols.forEach(t=>this.resizeRatios.push(t.getActualWidth()/this.resizeStartWidth))}normaliseDragChange(e){let t=e;return this.gridOptionsService.is("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}}GC([S("horizontalResizeService")],wg.prototype,"horizontalResizeService",void 0);GC([S("autoWidthCalculator")],wg.prototype,"autoWidthCalculator",void 0);GC([S("columnModel")],wg.prototype,"columnModel",void 0);GC([U],wg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Z1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class hA extends j{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,vt.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}}Z1([U],hA.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class bg extends br{constructor(e,t){super(e,t),this.columnGroup=e}setComp(e,t,i){super.setGui(t),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();const s=this.getParentRowCtrl().getPinned(),n=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new yg(n,t)),this.createManagedBean(new IC(this.columnGroup,t,this.beans)),this.createManagedBean(new hA(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new wg(e,i,s,this.columnGroup)),this.createManagedBean(new bs(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}resizeLeafColumnsToFit(e){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.displayName;const t={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:s=>{this.columnModel.setColumnGroupOpened(this.columnGroup.getProvidedColumnGroup(),s,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!e){let s=this.columnGroup;const n=s.getLeafColumns();for(;s.getParent()&&s.getParent().getLeafColumns().length===n.length;)s=s.getParent();const o=s.getColGroupDef();o&&(e=o.headerName),e||(e=n?this.columnModel.getDisplayNameForColumn(n[0],"header",!0):"")}const i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}setupTooltip(){const e=this.columnGroup.getColGroupDef(),t={getColumn:()=>this.columnGroup,getGui:()=>this.eGui,getLocation:()=>"headerGroup",getTooltipValue:()=>e&&e.headerTooltip};e&&(t.getColDef=()=>e),this.createManagedBean(new rb(t,this.beans)).setComp(this.comp)}setupExpandable(){const e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,Ge.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,Ge.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.columnGroup;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}addAttributes(){this.comp.setColId(this.columnGroup.getUniqueId())}addClasses(){const e=this.columnGroup.getColGroupDef(),t=Cg.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(t.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const t=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.columnGroup.isMoving());t.forEach(s=>{this.addManagedListener(s,me.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.columnGroup)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===W.ENTER){const i=this.columnGroup,s=!i.isExpanded();this.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(this.isSuppressMoving())return;const t=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),s={type:_t.HeaderCell,eElement:e,defaultIconName:i?De.ICON_HIDE:De.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:()=>t.forEach(n=>n.setMoving(!0,"uiColumnDragged")),onDragStopped:()=>t.forEach(n=>n.setMoving(!1,"uiColumnDragged")),onGridEnter:n=>{var o;if(i){const a=((o=n==null?void 0:n.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!0,"uiColumnMoved")}},onGridExit:n=>{var o;if(i){const a=((o=n==null?void 0:n.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(s))}getDragItemForGroup(){const e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),t={};e.forEach(s=>t[s.getId()]=s.isVisible());const i=[];return this.columnModel.getAllDisplayedColumns().forEach(s=>{e.indexOf(s)>=0&&(i.push(s),ns(e,s))}),e.forEach(s=>i.push(s)),{columns:i,visibleState:t}}isSuppressMoving(){let e=!1;return this.columnGroup.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.is("suppressMovableColumns")}}kC([S("columnModel")],bg.prototype,"columnModel",void 0);kC([S("dragAndDropService")],bg.prototype,"dragAndDropService",void 0);kC([S("gridApi")],bg.prototype,"gridApi",void 0);kC([S("columnApi")],bg.prototype,"columnApi",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let J1=0;class Jp extends j{constructor(e,t,i){super(),this.instanceId=J1++,this.headerCellCtrls={},this.rowIndex=e,this.pinned=t,this.type=i}getInstanceId(){return this.instanceId}setComp(e){this.comp=e,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),vo()&&this.comp.setTransform("translateZ(0)"),e.setAriaRowIndex(this.rowIndex+1)}addEventListeners(){this.addManagedListener(this.eventService,E.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){return Jh(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){return this.gridOptionsService.isDomLayout("print")?this.pinned!=null?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)}onRowHeightChanged(){let e=this.columnModel.getHeaderRowCount();const t=[];let i=0;this.columnModel.hasFloatingFilters()&&(e++,i=1);const s=this.columnModel.getColumnGroupHeaderRowHeight(),n=this.columnModel.getColumnHeaderRowHeight(),o=1+i,a=e-o;for(let d=0;d<a;d++)t.push(s);t.push(n);for(let d=0;d<i;d++)t.push(this.columnModel.getFloatingFiltersHeight());let l=0;for(let d=0;d<this.rowIndex;d++)l+=t[d];const c=t[this.rowIndex]+"px";this.comp.setTop(l+"px"),this.comp.setHeight(c)}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){const e=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(n=>{if(n.isEmptyGroup())return;const o=n.getUniqueId();let a=e[o];if(delete e[o],a&&a.getColumnGroupChild()!=n&&(this.destroyBean(a),a=void 0),a==null)switch(this.type){case Fi.FLOATING_FILTER:a=this.createBean(new LC(n,this));break;case Fi.COLUMN_GROUP:a=this.createBean(new bg(n,this));break;default:a=this.createBean(new Er(n,this));break}this.headerCellCtrls[o]=a});const i=n=>this.focusService.isHeaderWrapperFocused(n)?this.columnModel.isDisplayed(n.getColumnGroupChild()):!1;Et(e,(n,o)=>{i(o)?this.headerCellCtrls[n]=o:this.destroyBean(o)});const s=ur(this.headerCellCtrls);this.comp.setHeaderCtrls(s)}getColumnsInViewport(){return this.gridOptionsService.isDomLayout("print")?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth();return["left",null,"right"].forEach(i=>{const s=this.columnModel.getVirtualHeaderGroupRow(i,t);e=e.concat(s)}),e}getActualDepth(){return this.type==Fi.FLOATING_FILTER?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){const s=ur(this.headerCellCtrls).find(n=>n.getColumnGroupChild()==e);return s?(s.focus(t),!0):!1}destroy(){Et(this.headerCellCtrls,(e,t)=>{this.destroyBean(t)}),this.headerCellCtrls={},super.destroy()}}uA([S("columnModel")],Jp.prototype,"columnModel",void 0);uA([S("focusService")],Jp.prototype,"focusService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Eg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vu extends j{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new ku(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){const t=new Ni,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let c=0;c<l;c++){const d=this.createBean(new Jp(t.next(),this.pinned,Fi.COLUMN_GROUP));this.groupsRowCtrls.push(d)}},n=()=>{const l=t.next(),c=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==l);(c||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),c&&(this.columnsRowCtrl=this.createBean(new Jp(l,this.pinned,Fi.COLUMN)))},o=()=>{this.includeFloatingFilter=this.columnModel.hasFloatingFilters()&&!this.hidden;const l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){l();return}const c=t.next();if(this.filtersRowCtrl){const d=this.filtersRowCtrl.getRowIndex()!==c;(!e||d)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Jp(c,this.pinned,Fi.FLOATING_FILTER)))};s(),n(),o();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.columnModel.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Fu(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,o=this.hidden!==n,a=this.gridOptionsService.is("enableRtl"),l=this.gridOptionsService.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&t)?s+l:s;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!n),o&&(this.hidden=n,this.refresh())};this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(e){if(e instanceof me)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}}Eg([S("ctrlsService")],Vu.prototype,"ctrlsService",void 0);Eg([S("scrollVisibleService")],Vu.prototype,"scrollVisibleService",void 0);Eg([S("pinnedWidthService")],Vu.prototype,"pinnedWidthService",void 0);Eg([S("columnModel")],Vu.prototype,"columnModel",void 0);Eg([S("focusService")],Vu.prototype,"focusService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Cb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class tn extends Q{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{const s=this.getGui();s.style.width=i,s.style.maxWidth=i,s.style.minWidth=i}};this.createManagedBean(new Vu(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",i=e?tn.PINNED_LEFT_TEMPLATE:t?tn.PINNED_RIGHT_TEMPLATE:tn.CENTER_TEMPLATE;this.setTemplate(i),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i;const s=n=>{const o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&Nw(this.eRowContainer,o,i),i=o};e.forEach(n=>{const o=n.getInstanceId(),a=t[o];delete t[o];const l=a||this.createBean(new fb(n));this.headerRowComps[o]=l,this.rowCompsList.push(l),s(l)}),ur(t).forEach(n=>this.destroyRowComp(n))}}tn.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>';tn.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>';tn.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;Cb([G("eCenterContainer")],tn.prototype,"eCenterContainer",void 0);Cb([U],tn.prototype,"init",null);Cb([ft],tn.prototype,"destroyRowComps",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},er;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(er||(er={}));let qc=class extends j{postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s,column:n}=t,o=this.getHeaderRowCount(),a=e===er.UP;let{nextRow:l,nextFocusColumn:c}=a?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),d=!1;return l<0&&(l=0,c=n,d=!0),l>=o&&(l=-1),!d&&!c?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:c},allowUserOverride:!0,event:i})}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===er.LEFT,o=this.gridOptionsService.is("enableRtl");let a,l;return n!==o?(l="Before",a=this.headerPositionUtils.findHeader(s,l)):(l="After",a=this.headerPositionUtils.findHeader(s,l)),a||!t?this.focusService.focusHeaderPosition({headerPosition:a,direction:l,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(s,l,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,o;return t==="Before"?s>0&&(o=s-1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=s+1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),this.focusService.focusHeaderPosition({headerPosition:n,direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(e instanceof vt){const s=e.getDisplayedLeafColumns();i=t==="Before"?dt(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};xg([S("focusService")],qc.prototype,"focusService",void 0);xg([S("headerPositionUtils")],qc.prototype,"headerPositionUtils",void 0);xg([S("ctrlsService")],qc.prototype,"ctrlsService",void 0);xg([U],qc.prototype,"postConstruct",null);qc=xg([ee("headerNavigationService")],qc);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var VC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Rg extends j{setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new bs(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0,i=e.getHeaderRowCount(),s;e.hasFloatingFilters()&&(i++,t=1);const o=this.columnModel.getColumnGroupHeaderRowHeight(),a=this.columnModel.getColumnHeaderRowHeight(),l=1+t,c=i-l;if(s=t*e.getFloatingFiltersHeight(),s+=c*o,s+=a,this.headerHeight===s)return;this.headerHeight=s;const d=`${s+1}px`;this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:E.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gridOptionsService.is("enableRtl"),i=e.shiftKey!==t?er.LEFT:er.RIGHT;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case W.LEFT:t=er.LEFT;case W.RIGHT:q(t)||(t=er.RIGHT),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case W.UP:t=er.UP;case W.DOWN:q(t)||(t=er.DOWN),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const t=this.gridOptionsService.getDocument(),{relatedTarget:i}=e;!i&&this.eGui.contains(t.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}}VC([S("headerNavigationService")],Rg.prototype,"headerNavigationService",void 0);VC([S("focusService")],Rg.prototype,"focusService",void 0);VC([S("columnModel")],Rg.prototype,"columnModel",void 0);VC([S("ctrlsService")],Rg.prototype,"ctrlsService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Q1=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Tg extends Q{constructor(){super(Tg.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(s,n)=>this.addOrRemoveCssClass(s,n),setHeightAndMinHeight:s=>{this.getGui().style.height=s,this.getGui().style.minHeight=s}};this.createManagedBean(new Rg).setComp(e,this.getGui(),this.getFocusableElement());const i=s=>{this.createManagedBean(s),this.appendChild(s)};i(new tn("left")),i(new tn(null)),i(new tn("right"))}}Tg.TEMPLATE='<div class="ag-header" role="presentation"/>';Q1([U],Tg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Sf=class extends j{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};return this.dragService.addDragSource(t,!0),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};yb([S("dragService")],Sf.prototype,"dragService",void 0);yb([S("ctrlsService")],Sf.prototype,"ctrlsService",void 0);Sf=yb([ee("horizontalResizeService")],Sf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Dg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Zc=class extends j{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:t,ePopup:i})},"columnMenu",t.target)}showMenuAfterButtonClick(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:s,keepWithinBounds:!0,position:"under",column:e})},i,t)}showPopup(e,t,i,s){const n=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!n)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");bi(o,"presentation"),o.classList.add("ag-menu"),this.tabListener=this.addManagedListener(o,"keydown",p=>this.trapFocusWithin(p,o)),n.guiPromise.then(p=>o.appendChild(p));let a;const l=()=>{var p;return(p=n.filterPromise)===null||p===void 0?void 0:p.then(f=>{var g;return(g=f==null?void 0:f.afterGuiDetached)===null||g===void 0?void 0:g.call(f)})},c=s||this.ctrlsService.getGridBodyCtrl().getGui(),d=p=>{e.setMenuVisible(!1,"contextMenu");const f=p instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),f&&s&&Au(s)){const g=this.focusService.findTabbableParent(s);g&&g.focus()}l()},h=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});u&&(this.hidePopup=a=u.hideFunc),n.filterPromise.then(p=>{t(o),p.afterGuiAttached&&p.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu")}trapFocusWithin(e,t){e.key!==W.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}isMenuEnabled(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")}};Dg([S("filterManager")],Zc.prototype,"filterManager",void 0);Dg([S("popupService")],Zc.prototype,"popupService",void 0);Dg([S("focusService")],Zc.prototype,"focusService",void 0);Dg([S("ctrlsService")],Zc.prototype,"ctrlsService",void 0);Zc=Dg([ee("menuFactory")],Zc);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var HC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class jl extends Q{constructor(e){super(jl.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e,e.items&&e.items.forEach(t=>this.addItem(t))}postConstruct(){this.createManagedBean(new bs(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(()=>{var e,t,i;return(i=(t=(e=this.activeItem)===null||e===void 0?void 0:e.tabbedItem)===null||t===void 0?void 0:t.afterDetachedCallback)===null||i===void 0?void 0:i.call(t)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader" role="tablist" class="ag-tabs-header ${e?`${e}-header`:""}"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}handleKeyDown(e){const t=this.gridOptionsService.getDocument();switch(e.key){case W.RIGHT:case W.LEFT:if(!this.eHeader.contains(t.activeElement))return;const i=e.key===W.RIGHT,s=this.gridOptionsService.is("enableRtl"),n=this.items.indexOf(this.activeItem),o=i!==s?Math.min(n+1,this.items.length-1):Math.max(n-1,0);if(n===o)return;e.preventDefault();const a=this.items[o];this.showItemWrapper(a),a.eHeaderButton.focus();break;case W.UP:case W.DOWN:e.stopPropagation();break}}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,eHeader:i,eBody:s,activeItem:n}=this,a=this.gridOptionsService.getDocument().activeElement,l=e.target;if(e.preventDefault(),i.contains(a)){t.focusInto(s,e.shiftKey);return}let c=null;t.isTargetUnderManagedComponent(s,l)&&(e.shiftKey&&(c=this.focusService.findFocusableElementBeforeTabGuard(s,l)),c||(c=n.eHeaderButton)),!c&&s.contains(a)&&(c=t.findNextFocusableElement(s,!1,e.shiftKey),c||(c=n.eHeaderButton)),c&&c.focus()}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");bi(t,"tab"),t.setAttribute("tabIndex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eHeader.appendChild(t),kl(t,e.titleLabel);const i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const t=this.items.find(i=>i.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i;const{tabbedItem:s,eHeaderButton:n}=e;if(this.params.onItemClicked&&this.params.onItemClicked({item:s}),this.activeItem===e){kD(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Qs(this.eBody),s.bodyPromise.then(o=>{this.eBody.appendChild(o);const a=!this.focusService.isKeyboardMode();if(this.focusService.focusInto(this.eBody,!1,a),s.afterAttachedCallback&&s.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const l=s.getScrollableContainer&&s.getScrollableContainer()||o;this.lastScrollListener=this.addManagedListener(l,"scroll",()=>{this.tabbedItemScrollMap.set(s.name,l.scrollTop)});const c=this.tabbedItemScrollMap.get(s.name);c!==void 0&&setTimeout(()=>{l.scrollTop=c},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(i=(t=this.activeItem.tabbedItem).afterDetachedCallback)===null||i===void 0||i.call(t)),n.classList.add("ag-tab-selected"),this.activeItem=e}}HC([S("focusService")],jl.prototype,"focusService",void 0);HC([G("eHeader")],jl.prototype,"eHeader",void 0);HC([G("eBody")],jl.prototype,"eBody",void 0);HC([U],jl.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var eG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const tG=50;let SS=class extends j{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const i=this.gridOptionsService.getWindow(),s=()=>{const l=new i.ResizeObserver(t);return l.observe(e),()=>l.disconnect()},n=()=>{let l=vS(e),c=mS(e),d=!0;const h=()=>{if(d){const u=vS(e),p=mS(e);(u!==l||p!==c)&&(l=u,c=p,t()),this.doNextPolyfillTurn(h)}};return h(),()=>d=!1},o=this.gridOptionsService.is("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!o?s():n()}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(i=>i())};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(e,tG)}};SS=eG([ee("resizeObserverService")],SS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var BC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let ru=class extends j{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,o=this.destroyTasks,a=new Date().getTime();let l=new Date().getTime()-a;const c=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;c||l<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let u;if(i.length)this.sortTaskList(t),u=i.pop().task;else if(n.length)this.sortTaskList(s),u=n.pop().task;else if(o.length)u=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(u)||u()}l=new Date().getTime()-a}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){this.getFrameworkOverrides().setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};BC([S("ctrlsService")],ru.prototype,"ctrlsService",void 0);BC([S("paginationProxy")],ru.prototype,"paginationProxy",void 0);BC([U],ru.prototype,"init",null);ru=BC([ee("animationFrameService")],ru);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Og=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Jc=class extends j{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();i.appendChild(t),e.forEach(o=>this.cloneItemIntoDummy(o,t));const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){const e=this.gridOptionsService.getNum("autoSizePadding");return e!=null&&e>=0?e:20}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(l=>i.classList.contains(l))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(c=>a.classList.contains(c))){for(let c=0;c<a.classList.length;c++){const d=a.classList[c];d!="ag-row-position-absolute"&&n.add(d)}break}a=a.parentElement}s.appendChild(i),t.appendChild(s)}};Og([S("rowRenderer")],Jc.prototype,"rowRenderer",void 0);Og([S("ctrlsService")],Jc.prototype,"ctrlsService",void 0);Og([S("rowCssClassCalculator")],Jc.prototype,"rowCssClassCalculator",void 0);Og([U],Jc.prototype,"postConstruct",null);Jc=Og([ee("autoWidthCalculator")],Jc);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var WC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ag extends j{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky()){this.refreshNodesAndContainerHeight([],e);return}const t=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),s=n=>{var o,a,l;t.push(n);let c;if(this.isClientSide){let h=n;for(;h.expanded;)if(h.master)h=h.detailNode;else if(h.childrenAfterSort){if(h.childrenAfterSort.length===0)break;h=dt(h.childrenAfterSort)}c=h.rowTop+h.rowHeight}else if(n.master)c=n.detailNode.rowTop+n.detailNode.rowHeight;else{const h=(o=n.childStore)===null||o===void 0?void 0:o.getStoreBounds();c=((a=h==null?void 0:h.heightPx)!==null&&a!==void 0?a:0)+((l=h==null?void 0:h.topPx)!==null&&l!==void 0?l:0)}const d=i+e+n.rowHeight;c<d?n.stickyRowTop=e+(c-d):n.stickyRowTop=e,e=0,t.forEach(h=>{const u=h.stickyRowTop+h.rowHeight;e<u&&(e=u)})};for(;;){const n=i+e,o=this.rowModel.getRowIndexAtPixel(n),a=this.rowModel.getRow(o);if(a==null||a.level<0)break;const l=[];let c=a.parent;for(;c.level>=0;)l.push(c),c=c.parent;const d=l.reverse().find(h=>t.indexOf(h)<0&&h.displayed);if(d){s(d);continue}if(a.isExpandable()&&a.expanded&&a.rowTop<n){s(a);continue}break}this.refreshNodesAndContainerHeight(t,e)}refreshStickyNode(e){const t=[];for(let i=0;i<this.stickyRowCtrls.length;i++){const s=this.stickyRowCtrls[i].getRowNode();s!==e&&t.push(s)}this.refreshNodesAndContainerHeight(t,this.containerHeight),this.checkStickyRows()}refreshNodesAndContainerHeight(e,t){const i=this.stickyRowCtrls.filter(a=>e.indexOf(a.getRowNode())===-1),s=e.filter(a=>this.stickyRowCtrls.findIndex(l=>l.getRowNode()===a)===-1),n={};i.forEach(a=>{n[a.getRowNode().id]=a,this.stickyRowCtrls=this.stickyRowCtrls.filter(l=>l!==a)});for(const a of Object.values(n))a.getRowNode().sticky=!1;this.destroyRowCtrls(n,!1);const o=s.map(a=>(a.sticky=!0,this.createRowCon(a,!1,!1)));this.stickyRowCtrls.push(...o),this.stickyRowCtrls.forEach(a=>a.setRowTop(a.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t))}}WC([S("rowModel")],Ag.prototype,"rowModel",void 0);WC([S("rowRenderer")],Ag.prototype,"rowRenderer",void 0);WC([S("ctrlsService")],Ag.prototype,"ctrlsService",void 0);WC([U],Ag.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Po=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const iG=10;let on=class extends j{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new Ag(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.is("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new sG(t)}}getKeepDetailRowsCount(){const e=this.gridOptionsService.getNum("keepDetailRowsCount");return q(e)&&e>0?e:iG}getRowCtrls(){return this.allRowCtrls}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const e=ur(this.rowCtrlsByRowIndex),t=this.gridOptionsService.is("ensureDomOrder"),i=this.gridOptionsService.isDomLayout("print");(t||i)&&e.sort((o,a)=>o.getRowNode().rowIndex-a.getRowNode.rowIndex);const s=ur(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=[...e,...s,...n]}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,E.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,E.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,E.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(i=>i.onFlashCells(t))}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.gridOptionsService.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,E.EVENT_RANGE_SELECTION_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRangeSelectionChanged())}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.columnModel.getAllGridColumns();e&&e.forEach(t=>{const i=c=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===t&&c(d)})},s=()=>{i(c=>c.onLeftChanged())},n=()=>{i(c=>c.onWidthChanged())},o=()=>{i(c=>c.onFirstRightPinnedChanged())},a=()=>{i(c=>c.onLastLeftPinnedChanged())},l=()=>{i(c=>c.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",a),t.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",a),t.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){const e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.is("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,t&&t.forEach(i=>{const s=new mo(i,this.beans,!1,!1,this.printLayout);e.push(s)})}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}getRenderedIndexesForRowNodes(e){const t=[];return Se(e)||Et(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();e.indexOf(n)>=0&&t.push(i)}),t}redrawRows(e){const t=e!=null&&e.length>0;if(t){const i=this.getRenderedIndexesForRowNodes(e);this.removeRowCtrls(i)}this.redrawAfterModelUpdate({recycleRows:t})}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const s=this.gridOptionsService.getDocument().activeElement,n=this.gridOptionsService.getDomData(s,Hn.DOM_DATA_KEY_CELL_CTRL),o=this.gridOptionsService.getDomData(s,mo.DOM_DATA_KEY_ROW_CTRL);return n||o?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&this.gridOptionsService.isAnimateRows(),n=i?this.recycleRows():null;i||this.removeAllRowComps(),this.redraw(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gridOptionsService.is("suppressScrollOnNewData");t&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),o=n.length;for(let a=0;a<o;a++)e.push(n[a])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(const i of Object.keys(this.rowCtrlsByRowIndex))t.push(this.rowCtrlsByRowIndex[i]);return t}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){const{flashDelay:t,fadeDelay:i}=e;this.getCellCtrls(e.rowNodes,e.columns).forEach(s=>s.flashCell({flashDelay:t,fadeDelay:i}))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{if(i.refreshShouldDestroy()){const s=i.getRowCtrl();s&&s.refreshCell(i)}else i.refreshCell(t)}),this.refreshFullWidthRows(e.rowNodes)}getCellRendererInstances(e){var t;const i=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if(!((t=e.columns)===null||t===void 0)&&t.length)return i;const s=[],n=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(n&&!this.isRowInMap(o.getRowNode(),n)||!o.isFullWidth())return;const a=o.getFullWidthCellRenderer();a&&s.push(a)}),[...s,...i]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;i.rowPinned==="top"?t.top[s]=i:i.rowPinned==="bottom"?t.bottom[s]=i:t.normal[s]=i}),t}isRowInMap(e,t){const i=e.id,s=e.rowPinned;return s==="bottom"?t.bottom[i]!=null:s==="top"?t.top[i]!=null:t.normal[i]!=null}getCellCtrls(e,t){const i=this.mapRowNodes(e),s=[];let n;q(t)&&(n={},t.forEach(a=>{const l=this.columnModel.getGridColumn(a);q(l)&&(n[l.getId()]=!0)}));const o=a=>{const l=a.getRowNode();i!=null&&!this.isRowInMap(l,i)||a.getAllCellCtrls().forEach(c=>{const d=c.getColumn().getId();n&&!n[d]||s.push(c)})};return this.getAllRowCtrls().forEach(a=>o(a)),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}recycleRows(){const e=[];Et(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return Et(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){e.forEach(t=>{const i=this.rowCtrlsByRowIndex[t];i&&(i.destroyFirstPass(),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[t]})}onBodyScroll(e){e.direction==="vertical"&&this.redrawAfterScroll()}redrawAfterScroll(){let e;if(this.stickyRowFeature&&CC()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0),this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(!0),e!=null){const t=this.getCellToRestoreFocusToAfterRefresh();e!=null&&t==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}}removeRowCompsNotToDraw(e){const t={};e.forEach(n=>t[n]=!0);const s=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!t[n]);this.removeRowCtrls(s)}calculateIndexesToDraw(e){let t=wO(this.firstRenderedRow,this.lastRenderedRow);const i=(s,n)=>{const o=n.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&t.push(o)};return Et(this.rowCtrlsByRowIndex,i),Et(e,i),t.sort((s,n)=>s-n),t=t.filter(s=>{const n=this.paginationProxy.getRow(s);return n&&!n.sticky}),t}redraw(e,t=!1,i=!1){this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows();const s=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(s),this.printLayout&&(t=!1),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const t={type:E.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redrawAfterScroll()}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}refreshFullWidthRow(e){this.refreshFullWidthRows([e])}refreshFullWidthRows(e){const t=this.getFullWidthRowCtrls(e);let i=!1;const s=[];t.forEach(n=>{if(n.refreshFullWidth())return;const a=n.getRowNode();a.sticky?this.stickyRowFeature.refreshStickyNode(a):s.push(a.rowIndex),i=!0}),s.length>0&&this.removeRowCtrls(s),i&&this.redrawAfterScroll()}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.paginationProxy.getRow(e),q(n)&&q(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.paginationProxy.getRow(e)),q(n))o=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];Et(e,(s,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}n.destroyFirstPass(),t?(this.zombieRowCtrls[n.getInstanceId()]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[n.getInstanceId()]})):n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),FD(i))}getRowBuffer(){let e=this.gridOptionsService.getNum("rowBuffer");return typeof e=="number"?e<0&&(Qe(()=>console.warn("AG Grid: rowBuffer should not be negative"),"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e}getRowBufferInPixels(){const e=this.getRowBuffer(),t=this.gridOptionsService.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){let e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const l=this.getRowBufferInPixels(),c=this.ctrlsService.getGridBodyCtrl(),d=this.gridOptionsService.is("suppressRowVirtualisation");let h=!1,u,p;do{const C=this.paginationProxy.getPixelOffset(),{pageFirstPixel:y,pageLastPixel:R}=this.paginationProxy.getCurrentPagePixelRange(),b=this.rowContainerHeightService.getDivStretchOffset(),w=c.getScrollFeature().getVScrollPosition(),x=w.top,O=w.bottom;d?(u=y+b,p=R+b):(u=Math.max(x+C-l,y)+b,p=Math.min(O+C+l,R)+b),this.firstVisibleVPixel=Math.max(x+C,y)+b,h=this.ensureAllRowsInRangeHaveHeightsCalculated(u,p)}while(h);let f=this.paginationProxy.getRowIndexAtPixel(u),g=this.paginationProxy.getRowIndexAtPixel(p);const m=this.paginationProxy.getPageFirstRow(),v=this.paginationProxy.getPageLastRow();f<m&&(f=m),g>v&&(g=v),e=f,t=g}const i=this.gridOptionsService.isDomLayout("normal"),s=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,a=t!==this.lastRenderedRow;if(o||a){this.firstRenderedRow=e,this.lastRenderedRow=t;const l={type:E.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(l)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:E.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),o=e.isEditing(),a=s.detail;return n||o||a?!!this.paginationProxy.isRowPresent(s):!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gridOptionsService.is("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new mo(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.keys(e).map(t=>e[t].getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null);break}return t}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}};Po([S("animationFrameService")],on.prototype,"animationFrameService",void 0);Po([S("paginationProxy")],on.prototype,"paginationProxy",void 0);Po([S("columnModel")],on.prototype,"columnModel",void 0);Po([S("pinnedRowModel")],on.prototype,"pinnedRowModel",void 0);Po([S("rowModel")],on.prototype,"rowModel",void 0);Po([S("focusService")],on.prototype,"focusService",void 0);Po([S("beans")],on.prototype,"beans",void 0);Po([S("rowContainerHeightService")],on.prototype,"rowContainerHeightService",void 0);Po([S("ctrlsService")],on.prototype,"ctrlsService",void 0);Po([U],on.prototype,"postConstruct",null);on=Po([ee("rowRenderer")],on);class sG{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],ns(this.entriesList,e)}getEntries(){return this.entriesList}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Cv=class extends j{formatValue(e,t,i,s,n=!0){let o=null,a;const l=e.getColDef();if(s?a=s:n&&(a=l.valueFormatter),a){const c={value:i,node:t,data:t?t.data:null,colDef:l,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};typeof a=="function"?o=a(c):o=this.expressionService.evaluate(a,c)}else if(l.refData)return l.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}};pA([S("expressionService")],Cv.prototype,"expressionService",void 0);Cv=pA([ee("valueFormatterService")],Cv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Sb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let wf=class extends j{init(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))}isEmpty(e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Ys(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Ys(i))return 0;for(let s=0;s<i.length;s++){const n=i[s];if(n.rowTop+n.rowHeight-1>=e)return s}return i.length-1}setPinnedTopRowData(e){this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:E.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:E.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const i=[];if(e){let s=0;e.forEach((n,o)=>{const a=new oe(this.beans);a.data=n;const l=t?oe.ID_PREFIX_TOP_PINNED:oe.ID_PREFIX_BOTTOM_PINNED;a.id=l+o,a.rowPinned=t?"top":"bottom",a.setRowTop(s),a.setRowHeight(this.gridOptionsService.getRowHeightForNode(a).height),a.setRowIndex(o),s+=a.rowHeight,i.push(a)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){Ys(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){Ys(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const t=dt(e);return t.rowTop+t.rowHeight}};Sb([S("beans")],wf.prototype,"beans",void 0);Sb([U],wf.prototype,"init",null);wf=Sb([ee("pinnedRowModel")],wf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Os;(function(r){r.Applied="Applied",r.StoreNotFound="StoreNotFound",r.StoreLoading="StoreLoading",r.StoreWaitingToLoad="StoreWaitingToLoad",r.StoreLoadingFailed="StoreLoadingFailed",r.StoreWrongType="StoreWrongType",r.Cancelled="Cancelled"})(Os||(Os={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class UC{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Ht extends j{constructor(e){super(),this.state=Ht.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=Ht.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Ht.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=Ht.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=Ht.STATE_LOADED,this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:Ht.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(t)}}Ht.EVENT_LOAD_COMPLETE="loadComplete";Ht.STATE_WAITING_TO_LOAD="needsLoading";Ht.STATE_LOADING="loading";Ht.STATE_LOADED="loaded";Ht.STATE_FAILED="failed";/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var jC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},nG=function(r,e){return function(t,i){e(t,i,r)}},Ym;let Ca=Ym=class extends j{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gridOptionsService.getNum("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=A.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(Ht.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){A.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Ym.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Ym.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()===Ht.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Ca.BLOCK_LOADED_EVENT="blockLoaded";Ca.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";jC([S("rowModel")],Ca.prototype,"rowModel",void 0);jC([U],Ca.prototype,"postConstruct",null);jC([nG(0,Ss("loggerFactory"))],Ca.prototype,"setBeans",null);Ca=Ym=jC([ee("rowNodeBlockLoader")],Ca);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let bf=class extends j{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,i,s){const n=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return n&&this.calculatePages(),n}isPaginateChildRows(){return this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.is("paginateChildRows")}onModelUpdated(e){this.calculatePages();const t={type:E.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationPageSizeChanged(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();const e={type:E.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e;const t={type:E.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return Se(this.topRowBounds)||Se(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),i=this.getPageLastRow();for(let s=t;s<=i;s++){const n=this.getRow(s);n&&e(n)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPageSize(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(this.pageSize==null||this.pageSize<1)&&(this.pageSize=100)}calculatePages(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(q(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};wb([S("rowModel")],bf.prototype,"rowModel",void 0);wb([U],bf.prototype,"postConstruct",null);bf=wb([ee("paginationProxy")],bf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var fA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let yv=class extends j{processAllCellClasses(e,t,i,s){this.processClassRules(e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s){if(e==null)return;const n=Object.keys(e),o={},a={};for(let l=0;l<n.length;l++){const c=n[l],d=e[c];let h;typeof d=="string"?h=this.expressionService.evaluate(d,t):typeof d=="function"&&(h=d(t)),c.split(" ").forEach(u=>{u==null||u.trim()==""||(h?o[u]=!0:a[u]=!0)})}s&&Object.keys(a).forEach(s),Object.keys(o).forEach(i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}};fA([S("expressionService")],yv.prototype,"expressionService",void 0);yv=fA([ee("stylingService")],yv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class bb extends _s{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class oG extends go{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class rG extends Hl{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=vo();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?(t=kn(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.min===i?this:(this.min=i,pl(this.eInput,"min",i),this)}setMax(e){var t;const i=e instanceof Date?(t=kn(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.max===i?this:(this.max=i,pl(this.eInput,"max",i),this)}setStep(e){return this.step===e?this:(this.step=e,pl(this.eInput,"step",e),this)}getDate(){var e;if(this.eInput.validity.valid)return(e=Co(this.getValue()))!==null&&e!==void 0?e:void 0}setDate(e,t){this.setValue(kn(e??null,!1),t)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class aG extends go{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:i}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{const t=e.target.value;this.setValue(t)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,t);return this.eInput.value=e,i}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class _i extends wC{constructor(e){super(e,_i.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field")}onValueChange(e){const t=Ms.EVENT_CHANGED;return this.addManagedListener(this.eText,t,()=>{const i=parseFloat(this.eText.getValue());this.eSlider.setValue(i.toString(),!0),e(i||0)}),this.addManagedListener(this.eSlider,t,()=>{const i=this.eSlider.getValue();this.eText.setValue(i,!0),e(parseFloat(i))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:Ms.EVENT_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}}_i.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;zC([G("eLabel")],_i.prototype,"eLabel",void 0);zC([G("eSlider")],_i.prototype,"eSlider",void 0);zC([G("eText")],_i.prototype,"eText",void 0);zC([U],_i.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zl=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class At extends Q{constructor(e={}){super(At.getTemplate(e)),this.suppressEnabledCheckbox=!0,this.suppressOpenCloseIcons=!1;const{title:t,enabled:i,items:s,suppressEnabledCheckbox:n,suppressOpenCloseIcons:o}=e;this.title=t,this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=s||[],this.alignItems=e.alignItems||"center",n!=null&&(this.suppressEnabledCheckbox=n),o!=null&&(this.suppressOpenCloseIcons=o)}static getTemplate(e){const t=e.cssIdentifier||"default",i=e.direction||"vertical";return`<div class="ag-group ag-${t}-group" role="presentation">
            <div class="ag-group-title-bar ag-${t}-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${t}-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-${t}-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-${i} ag-${t}-group-container"></div>
        </div>`}postConstruct(){if(this.items.length){const t=this.items;this.items=[],this.addItems(t)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Pn("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Pn("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",()=>this.toggleGroupExpand()),this.addManagedListener(this.eTitleBar,"keydown",e=>{switch(e.key){case W.ENTER:case W.SPACE:e.preventDefault(),this.toggleGroupExpand();break;case W.RIGHT:case W.LEFT:e.preventDefault(),this.toggleGroupExpand(e.key===W.RIGHT);break}})}refreshAriaStatus(){this.suppressOpenCloseIcons||fo(this.eTitleBar,this.expanded)}refreshChildDisplay(){const e=!this.suppressOpenCloseIcons;je(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),je(this.eGroupOpenedIcon,e&&this.expanded),je(this.eGroupClosedIcon,e&&!this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const t=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(t),this}toggleGroupExpand(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),je(this.eContainer,!0),this):(e=e??!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),je(this.eContainer,e),this.dispatchEvent({type:this.expanded?At.EVENT_EXPANDED:At.EVENT_COLLAPSED}),this))}addItems(e){e.forEach(t=>this.addItem(t))}addItem(e){const t=this.eContainer,i=e instanceof Q?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t.appendChild(i),this.items.push(i)}hideItem(e,t){const i=this.items[t];je(i,!e)}setTitle(e){return this.eTitle.innerText=e,this}addCssClassToTitleBar(e){this.eTitleBar.classList.add(e)}setEnabled(e,t){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),t||this.cbGroupEnabled.setValue(e),this}isEnabled(){return this.enabled}onEnableChange(e){return this.cbGroupEnabled.onValueChange(t=>{this.setEnabled(t,!0),e(t)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this}refreshDisabledStyles(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)}}At.EVENT_EXPANDED="expanded";At.EVENT_COLLAPSED="collapsed";zl([G("eTitleBar")],At.prototype,"eTitleBar",void 0);zl([G("eGroupOpenedIcon")],At.prototype,"eGroupOpenedIcon",void 0);zl([G("eGroupClosedIcon")],At.prototype,"eGroupClosedIcon",void 0);zl([G("eToolbar")],At.prototype,"eToolbar",void 0);zl([G("cbGroupEnabled")],At.prototype,"cbGroupEnabled",void 0);zl([G("eTitle")],At.prototype,"eTitle",void 0);zl([G("eContainer")],At.prototype,"eContainer",void 0);zl([U],At.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var gA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Wh;(function(r){r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"})(Wh||(Wh={}));class Eb extends j{constructor(e){super(),this.skipTabGuardFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusInnerElement:n,onFocusIn:o,onFocusOut:a,shouldStopEventPropagation:l,onTabKeyDown:c,handleKeyDown:d,eFocusableElement:h}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=n,this.eFocusableElement=h,this.providedFocusIn=o,this.providedFocusOut=a,this.providedShouldStopEventPropagation=l,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new bs(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){this.comp.setTabIndex(this.getGridTabIndex())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}onFocusIn(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()}onFocusOut(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}getGridTabIndex(){return(this.gridOptionsService.getNum("tabIndex")||0).toString()}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,t.focus()}}gA([S("focusService")],Eb.prototype,"focusService",void 0);gA([U],Eb.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class Hu extends Q{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const t=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:s=>{t.forEach(n=>s!=null?n.setAttribute("tabIndex",s):n.removeAttribute("tabIndex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new Eb({comp:i,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))}createTabGuard(e){const t=document.createElement("div"),i=e==="top"?Wh.TAB_GUARD_TOP:Wh.TAB_GUARD_BOTTOM;return t.classList.add(Wh.TAB_GUARD,i),bi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Qs(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){ig(e)||(e=e.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var mA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class hr extends Hu{constructor(e=1){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}onTabKeyDown(e){const t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case W.UP:case W.RIGHT:case W.DOWN:case W.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case W.ESCAPE:const t=this.findTopMenu();t&&this.focusService.focusInto(t.getGui());break}}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&e.forEach(t=>{t==="separator"?this.addSeparator():typeof t=="string"?console.warn(`AG Grid: unrecognised menu item ${t}`):this.addItem(t)})}addItem(e){const t=this.createManagedBean(new Nt(Object.assign(Object.assign({},e),{isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen())})));t.setParentComponent(this),aO(t.getGui(),this.level),this.menuItems.push(t),this.appendChild(t.getGui()),this.addManagedListener(t,Nt.EVENT_MENU_ITEM_SELECTED,i=>{this.dispatchEvent(i)}),this.addManagedListener(t,Nt.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem})}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}addSeparator(){const e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Li(e))}findTopMenu(){let e=this.getParentComponent();if(!e&&this instanceof hr)return this;for(;;){const t=e&&e.getParentComponent&&e.getParentComponent();if(!t||!(t instanceof hr||t instanceof Nt))break;e=t}return e instanceof hr?e:void 0}handleNavKey(e){switch(e){case W.UP:case W.DOWN:const i=this.findNextItem(e===W.UP);i&&i!==this.activeMenuItem&&i.activate();return}const t=this.gridOptionsService.is("enableRtl")?W.RIGHT:W.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();t&&t instanceof Nt&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus())}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter(n=>!n.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?dt(t):t[0];e&&t.reverse();let i,s=!1;for(let n=0;n<t.length;n++){const o=t[n];if(!s){o===this.activeMenuItem&&(s=!0);continue}i=o;break}return i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}}mA([S("focusService")],hr.prototype,"focusService",void 0);mA([U],hr.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class vA extends Hu{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===W.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}}lG([U],vA.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var CA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Nt extends Q{constructor(e){super(),this.params=e,this.isActive=!1,this.subMenuIsOpen=!1,this.setTemplate(`<div class="${this.getClassName()}" tabindex="-1" role="treeitem"></div>`)}init(){this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();const e=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),xw(e,!0)):(this.addGuiEventListener("click",t=>this.onItemSelected(t)),this.addGuiEventListener("keydown",t=>{(t.key===W.ENTER||t.key===W.SPACE)&&(t.preventDefault(),this.onItemSelected(t))}),this.addGuiEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault()}),this.addGuiEventListener("mouseenter",()=>this.onMouseEnter()),this.addGuiEventListener("mouseleave",()=>this.onMouseLeave())),this.params.cssClasses&&this.params.cssClasses.forEach(t=>this.addCssClass(t))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){if(this.closeSubMenu(),!this.params.subMenu)return;const t=Li('<div class="ag-menu" role="presentation"></div>');let i;if(this.params.subMenu instanceof Array){const l=iO(this.getGui()),c=isNaN(l)?1:l+1,d=this.createBean(new hr(c));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),t.appendChild(d.getGui()),this.addManagedListener(d,Nt.EVENT_MENU_ITEM_SELECTED,h=>this.dispatchEvent(h)),d.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(d),e&&setTimeout(()=>d.activateFirstItem(),0)}else{const{subMenu:l}=this.params,c=this.createBean(new vA(l));c.setParentComponent(this);const d=c.getGui(),h="mouseenter",u=()=>this.cancelDeactivate();d.addEventListener(h,u),i=()=>d.removeEventListener(h,u),t.appendChild(d),l.afterGuiAttached&&setTimeout(()=>l.afterGuiAttached(),0)}const s=this.getGui(),n=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:s,ePopup:t}),o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:!0,eChild:t,positionCallback:n,anchorToElement:s,ariaLabel:o("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,fo(s,!0),this.hideSubMenu=()=>{a&&a.hideFunc(),this.subMenuIsOpen=!1,fo(s,!1),i()}}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,fo(this.getGui(),!1))}isSubMenuOpen(){return this.subMenuIsOpen}activate(e){this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}addIcon(){if(!this.params.checked&&!this.params.icon&&this.params.isCompact)return;const e=Li(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(Wt("check",this.gridOptionsService)):this.params.icon&&(ig(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){if(!this.params.name&&this.params.isCompact)return;const e=Li(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addTooltip(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new va(this)))}getTooltipParams(){return{location:"menu",value:this.tooltip}}addShortcut(){if(!this.params.shortcut&&this.params.isCompact)return;const e=Li(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){if(!this.params.subMenu&&this.params.isCompact)return;const e=Li(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const i=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";fo(t,!1),e.appendChild(Wt(i,this.gridOptionsService))}t.appendChild(e)}onItemSelected(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),this.params.subMenu&&!this.params.action)return;const t={type:Nt.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(t)}onItemActivated(){const e={type:Nt.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Nt.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Nt.ACTIVATION_DELAY):this.deactivate()}getClassName(e){const t=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?`${t}-${e}`:t}}Nt.EVENT_MENU_ITEM_SELECTED="menuItemSelected";Nt.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Nt.ACTIVATION_DELAY=80;CA([S("popupService")],Nt.prototype,"popupService",void 0);CA([U],Nt.prototype,"init",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Pg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Un extends Q{constructor(e){super(Un.getTemplate(e)),this.closable=!0,this.config=e}static getTemplate(e){const t=e&&e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:t,hideTitleBar:i,title:s,minWidth:n=250,width:o,minHeight:a=250,height:l,centered:c,popup:d,x:h,y:u}=this.config;this.positionableFeature=new bd(this.getGui(),{minWidth:n,width:o,minHeight:a,height:l,centered:c,x:h,y:u,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),i?je(this.eTitleBar,!1):(s&&this.setTitle(s),this.setClosable(t??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",f=>{const g=this.gridOptionsService.getDocument();if(p.contains(f.relatedTarget)||p.contains(g.activeElement)||this.eTitleBarButtons.contains(f.target)){f.preventDefault();return}const m=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");m&&m.focus()}),!(d&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new Q(Un.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);const i=t.getGui(),s=Wt("close",this.gridOptionsService);s.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(s),this.addTitleBarButton(t),t.addManagedListener(i,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const i=this.eTitleBarButtons,s=i.children,n=s.length;t==null&&(t=n),t=Math.max(0,Math.min(t,n)),e.addCssClass("ag-panel-title-bar-button");const o=e.getGui();t===0?i.insertAdjacentElement("afterbegin",o):t===n?i.insertAdjacentElement("beforeend",o):s[t-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return eg(this.eContentWrapper)}getBodyWidth(){return yC(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&e.offsetParent&&this.close(),super.destroy()}}Un.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';Pg([G("eContentWrapper")],Un.prototype,"eContentWrapper",void 0);Pg([G("eTitleBar")],Un.prototype,"eTitleBar",void 0);Pg([G("eTitleBarButtons")],Un.prototype,"eTitleBarButtons",void 0);Pg([G("eTitle")],Un.prototype,"eTitle",void 0);Pg([U],Un.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ef extends Un{constructor(e){super(Object.assign(Object.assign({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:i,maximizable:s}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",n=>{e.contains(n.relatedTarget)||this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),s&&this.setMaximizable(s),i&&this.setResizable(i)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:i,title:s}=this.config,n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:t,ariaLabel:s||n("ariaLabelDialog","Dialog")});o&&(this.close=o.hideFunc)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:i,width:s,height:n}=this.lastPosition;this.setWidth(s),this.setHeight(n),this.positionableFeature.offsetElement(t,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){je(this.maximizeIcon,!this.isMaximized),je(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new Q('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Wt("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Wt("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}}cG([S("popupService")],Ef.prototype,"popupService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xr=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},ts;let oi=ts=class extends j{static addKeyboardModeEvents(e,t){const i=ts.instancesMonitored.get(e);i&&i.length>0?i.indexOf(t)===-1&&i.push(t):(ts.instancesMonitored.set(e,[t]),e.addEventListener("keydown",ts.toggleKeyboardMode),e.addEventListener("mousedown",ts.toggleKeyboardMode))}static removeKeyboardModeEvents(e,t){const i=ts.instancesMonitored.get(e);let s=[];i&&i.length&&(s=[...i].filter(n=>n!==t),ts.instancesMonitored.set(e,s)),s.length===0&&(e.removeEventListener("keydown",ts.toggleKeyboardMode),e.removeEventListener("mousedown",ts.toggleKeyboardMode))}static toggleKeyboardMode(e){const t=ts.keyboardModeActive,i=e.type==="keydown";if(i&&(e.ctrlKey||e.metaKey||e.altKey)||t&&i||!t&&!i)return;ts.keyboardModeActive=i;const s=e.target.ownerDocument;if(!s)return;const n=ts.instancesMonitored.get(s);n&&n.forEach(o=>{o.dispatchEvent({type:i?E.EVENT_KEYBOARD_FOCUS:E.EVENT_MOUSE_FOCUS})})}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl;const i=this.gridOptionsService.getDocument();ts.addKeyboardModeEvents(i,this.gridCtrl),this.addDestroyFunc(()=>this.unregisterGridCompController(this.gridCtrl))})}unregisterGridCompController(e){const t=this.gridOptionsService.getDocument();ts.removeKeyboardModeEvents(t,e)}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return ts.keyboardModeActive}getFocusCellToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,mo.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,br.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(this.gridOptionsService.getDomData(i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:i}=this.focusedCellPosition,s={rowIndex:e,rowPinned:t,column:i,isFullWidthCell:!1},n=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return n&&(s.isFullWidthCell=n.isFullWidth()),s}clearFocusedCell(){if(this.focusedCellPosition==null)return;const e=Object.assign({type:E.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1}=e,a=this.columnModel.getGridColumn(t);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:ul(s),column:a}:null;const l=Object.assign(Object.assign({type:E.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:n,preventScrollOnBrowserFocus:o,floating:null});this.eventService.dispatchEvent(l)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.column===e.column&&this.isRowFocused(e.rowIndex,e.rowPinned)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:n,headerRowIndex:o}=this.focusedHeaderPosition;return t===n&&i===o&&s==n.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){const{direction:t,fromTab:i,allowUserOverride:s,event:n}=e;let{headerPosition:o}=e;if(s){const c=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(i){const h=this.gridOptionsService.getCallback("tabToNextHeader");h&&(o=h({backwards:t==="Before",previousHeaderPosition:c,nextHeaderPosition:o,headerRowCount:d}))}else{const h=this.gridOptionsService.getCallback("navigateToNextHeader");if(h&&n){const u={key:n.key,previousHeaderPosition:c,nextHeaderPosition:o,headerRowCount:d,event:n};o=h(u)}}}return o?o.headerRowIndex===-1?this.focusGridView(o.column):(this.headerNavigationService.scrollToColumn(o.column,t),this.ctrlsService.getHeaderRowContainerCtrl(o.column.getPinned()).focusHeader(o.headerRowIndex,o.column,n)):!1}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];return e?(e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:e}})):!1}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,i=dt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},event:e})}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===ul(t)}findFocusableElements(e,t,i=!1){const s=bO;let n=Iw;t&&(n+=", "+t),i&&(n+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(s)),a=Array.prototype.slice.apply(e.querySelectorAll(n));return a.length?((c,d)=>c.filter(h=>d.indexOf(h)===-1))(o,a):o}focusInto(e,t=!1,i=!1){const s=this.findFocusableElements(e,null,i),n=t?dt(s):s[0];return n?(n.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(s===-1)return null;let n=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains(Wh.TAB_GUARD_TOP)){n=o;break}return n<=0?null:i[n-1]}findNextFocusableElement(e=this.eGridDiv,t,i){const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),o=this.gridOptionsService.getDocument().activeElement;let a;t?a=s.findIndex(c=>c.contains(o)):a=s.indexOf(o);const l=a+(i?-1:1);return l<0||l>=s.length?null:s[l]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${bs.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(t))return!0;return!1}findTabbableParent(e,t=5){let i=0;for(;e&&gv(e)===null&&++i<=t;)e=e.parentElement;return gv(e)===null?null:e}focusGridView(e,t){if(this.gridOptionsService.is("suppressCellFocus"))return t?this.focusLastHeader():this.focusNextGridCoreContainer(!1);const i=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;const{rowIndex:s,rowPinned:n}=i,o=this.getFocusedHeader();if(!e&&o&&(e=o.column),s==null||!e)return!1;if(this.navigationService.ensureCellVisible({rowIndex:s,column:e,rowPinned:n}),this.setFocusedCell({rowIndex:s,column:e,rowPinned:ul(n),forceBrowserFocus:!0}),this.rangeService){const a={rowIndex:s,rowPinned:n,column:e};this.rangeService.setRangeToCell(a)}return!0}focusNextGridCoreContainer(e,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(e)?!0:((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}};oi.AG_KEYBOARD_FOCUS="ag-keyboard-focus";oi.keyboardModeActive=!1;oi.instancesMonitored=new Map;xr([S("eGridDiv")],oi.prototype,"eGridDiv",void 0);xr([S("columnModel")],oi.prototype,"columnModel",void 0);xr([S("headerNavigationService")],oi.prototype,"headerNavigationService",void 0);xr([S("rowRenderer")],oi.prototype,"rowRenderer",void 0);xr([S("rowPositionUtils")],oi.prototype,"rowPositionUtils",void 0);xr([Ne("rangeService")],oi.prototype,"rangeService",void 0);xr([S("navigationService")],oi.prototype,"navigationService",void 0);xr([S("ctrlsService")],oi.prototype,"ctrlsService",void 0);xr([U],oi.prototype,"init",null);oi=ts=xr([ee("focusService")],oi);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Mg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},wS,Za;(function(r){r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal"})(Za||(Za={}));let dG=0,yl=wS=class extends j{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl,this.addManagedListener(this.gridCtrl,E.EVENT_KEYBOARD_FOCUS,()=>{this.popupList.forEach(t=>t.element.classList.add(oi.AG_KEYBOARD_FOCUS))}),this.addManagedListener(this.gridCtrl,E.EVENT_MOUSE_FOCUS,()=>{this.popupList.forEach(t=>t.element.classList.remove(oi.AG_KEYBOARD_FOCUS))})})}getPopupParent(){const e=this.gridOptionsService.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const t=e.eventSource.getBoundingClientRect(),i=this.getParentRect(),s=this.keepXYWithinBounds(e.ePopup,t.top-i.top,Za.vertical),n=e.ePopup.clientWidth>0?e.ePopup.clientWidth:200;e.ePopup.style.minWidth=`${n}px`;const a=i.right-i.left-n;let l;this.gridOptionsService.is("enableRtl")?(l=d(),l<0&&(l=c()),l>a&&(l=0)):(l=c(),l>a&&(l=d()),l<0&&(l=0)),e.ePopup.style.left=`${l}px`,e.ePopup.style.top=`${s}px`;function c(){return t.right-i.left-2}function d(){return t.left-i.left-n}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const t=e.eventSource.getBoundingClientRect(),i=e.alignSide||"left",s=e.position||"over",n=this.getParentRect(),o=()=>{let a=t.left-n.left;i==="right"&&(a-=e.ePopup.offsetWidth-t.width);const l=s==="over"?t.top-n.top:t.top-n.top+t.height;return{x:a,y:l}};this.positionPopup({ePopup:e.ePopup,nudgeX:e.nudgeX,nudgeY:e.nudgeY,keepWithinBounds:e.keepWithinBounds,updatePosition:o,postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,e.eventSource,null,e.column,e.rowNode)})}callPostProcessPopup(e,t,i,s,n,o){const a=this.gridOptionsService.getCallback("postProcessPopup");a&&a({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:o,updatePosition:a}=e,l={width:0,height:0},c=(d=!1)=>{let{x:h,y:u}=a();d&&t.clientWidth===l.width&&t.clientHeight===l.height||(l.width=t.clientWidth,l.height=t.clientHeight,s&&(h+=s),n&&(u+=n),i&&(h=this.keepXYWithinBounds(t,h,Za.horizontal),u=this.keepXYWithinBounds(t,u,Za.vertical)),t.style.left=`${h}px`,t.style.top=`${u}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!o){const d=this.resizeObserverService.observeResize(t,()=>c(!0));setTimeout(()=>d(),wS.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gridOptionsService.getDocument();let t=this.getPopupParent();t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent);const i=getComputedStyle(t),s=t.getBoundingClientRect();return{top:s.top+parseFloat(i.borderTopWidth)||0,left:s.left+parseFloat(i.borderLeftWidth)||0,right:s.right+parseFloat(i.borderRightWidth)||0,bottom:s.bottom+parseFloat(i.borderBottomWidth)||0}}keepXYWithinBounds(e,t,i){const s=i===Za.vertical,n=s?"clientHeight":"clientWidth",o=s?"top":"left",a=s?"offsetHeight":"offsetWidth",l=s?"scrollTop":"scrollLeft",c=this.gridOptionsService.getDocument(),d=c.documentElement,h=this.getPopupParent(),u=h.getBoundingClientRect(),p=c.documentElement.getBoundingClientRect(),f=h===c.body,g=e[a];let v=f?(s?Fw:SC)(d)+d[l]:h[n];f&&(v-=Math.abs(p[o]-u[o]));const C=v-g;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){const t=this.gridOptionsService.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:o,anchorToElement:a}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.popupList.findIndex(h=>h.element===i);if(l!==-1)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(i);const c=this.createPopupWrapper(i,s,!!n),d=this.addEventListenersToPopup(Object.assign(Object.assign({},e),{wrapperEl:c}));return o&&o(),this.addPopupToPopupList(i,c,d,a),{hideFunc:d}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();q(e.style.top)||(e.style.top=`${i.top*-1}px`),q(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div"),{allThemes:o}=this.environment.getTheme();return o.length&&n.classList.add(...o),n.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||bi(e,"dialog"),kl(e,t),this.focusService.isKeyboardMode()&&e.classList.add(oi.AG_KEYBOARD_FOCUS),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}addEventListenersToPopup(e){const t=this.gridOptionsService.getDocument(),i=this.getPopupParent(),{wrapperEl:s,eChild:n,click:o,closedCallback:a,afterGuiAttached:l,closeOnEsc:c,modal:d}=e;let h=!1;const u=m=>{if(!s.contains(t.activeElement))return;m.key===W.ESCAPE&&g({keyboardEvent:m})},p=m=>g({mouseEvent:m}),f=m=>g({touchEvent:m}),g=(m={})=>{const{mouseEvent:v,touchEvent:C,keyboardEvent:y}=m;this.isEventFromCurrentPopup({mouseEvent:v,touchEvent:C},n)||this.isEventSameChainAsOriginalEvent({originalMouseEvent:o,mouseEvent:v,touchEvent:C})||h||(h=!0,i.removeChild(s),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",p),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",p),this.eventService.removeEventListener(E.EVENT_DRAG_STARTED,p),a&&a(v||C||y),this.removePopupFromPopupList(n))};return l&&l({hidePopup:g}),window.setTimeout(()=>{c&&t.addEventListener("keydown",u),d&&(t.addEventListener("mousedown",p),this.eventService.addEventListener(E.EVENT_DRAG_STARTED,p),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",p))},0),g}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:dG++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}setPopupPositionRelatedToElement(e,t){const i=this.popupList.find(n=>n.element===e);if(!i||(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(n=>n&&n()),i.stopAnchoringPromise=void 0,!t))return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,s}removePopupFromPopupList(e){this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),a=i.top-o.top,l=i.left-o.left;let c=a,d=l;const h=n.style.top,u=parseInt(h.substring(0,h.length-1),10),p=n.style.left,f=parseInt(p.substring(0,p.length-1),10);return new Xe(g=>{this.getFrameworkOverrides().setInterval(()=>{const m=t.getBoundingClientRect(),v=s.getBoundingClientRect();if(v.top==0&&v.left==0&&v.height==0&&v.width==0){e.hidePopup();return}const y=m.top-v.top;if(y!=c){const b=this.keepXYWithinBounds(n,u+a-y,Za.vertical);n.style.top=`${b}px`}c=y;const R=m.left-v.left;if(R!=d){const b=this.keepXYWithinBounds(n,f+l-R,Za.horizontal);n.style.left=`${b}px`}d=R},200).then(m=>{g(()=>{m!=null&&window.clearInterval(m)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.popupList.findIndex(a=>a.element===t);if(o===-1)return!1;for(let a=o;a<this.popupList.length;a++){const l=this.popupList[a];if(pv(l.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=this.gridOptionsService.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}isEventSameChainAsOriginalEvent(e){const{originalMouseEvent:t,mouseEvent:i,touchEvent:s}=e;let n=null;if(i?n=i:s&&(n=s.touches[0]),n&&t){const o=i?i.screenX:0,a=i?i.screenY:0,l=Math.abs(t.screenX-o)<5,c=Math.abs(t.screenY-a)<5;if(l&&c)return!0}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),o=n.length,a=this.getWrapper(e);if(!a||s<=1||!t.contains(e))return;const l=i.indexOf(a),c=a.querySelectorAll("div"),d=[];for(c.forEach(u=>{u.scrollTop!==0&&d.push([u,u.scrollTop])}),o?a.classList.contains("ag-always-on-top")?l!==s-1&&dt(n).insertAdjacentElement("afterend",a):l!==s-o-1&&n[0].insertAdjacentElement("beforebegin",a):l!==s-1&&dt(i).insertAdjacentElement("afterend",a);d.length;){const u=d.pop();u[0].scrollTop=u[1]}const h={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:a};this.eventService.dispatchEvent(h)}};yl.WAIT_FOR_POPUP_CONTENT_RESIZE=200;Mg([S("focusService")],yl.prototype,"focusService",void 0);Mg([S("ctrlsService")],yl.prototype,"ctrlsService",void 0);Mg([S("resizeObserverService")],yl.prototype,"resizeObserverService",void 0);Mg([U],yl.prototype,"postConstruct",null);yl=wS=Mg([ee("popupService")],yl);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Pa extends Hu{constructor(e="default",t="listbox",i){super(Pa.getTemplate(e)),this.cssIdentifier=e,this.ariaRole=t,this.listName=i,this.renderedRows=new Map,this.rowHeight=20}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;bi(i,this.ariaRole),kl(i,t)}addResizeObserver(){const e=()=>this.drawVirtualRows(),t=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;return t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=sO(t)-1),!1}onFocusOut(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1}handleKeyDown(e){switch(e.key){case W.UP:case W.DOWN:this.navigate(e.key===W.UP)&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(ga(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?!1:(this.focusRow(t),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()},10)}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,i)=>e(t.rowComponent,i))}static getTemplate(e){return`
            <div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.environment.getListItemHeight()}ensureIndexVisible(e){const t=this.model.getRowCount();if(typeof e!="number"||e<0||e>=t){console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e);return}const i=e*this.rowHeight,s=i+this.rowHeight,n=this.getGui(),o=n.scrollTop,a=n.offsetHeight,l=o+a,c=o>i,d=l<s;if(c)n.scrollTop=i;else if(d){const h=s-a;n.scrollTop=h}}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,GD(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive())return;const t=this.getGui(),i=t.scrollTop,s=i+t.offsetHeight,n=Math.floor(i/this.rowHeight),o=Math.floor(s/this.rowHeight);this.ensureRowsRendered(n,o,e)}ensureRowsRendered(e,t,i){this.renderedRows.forEach((s,n)=>{(n<e||n>t)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),i&&this.refreshRows();for(let s=e;s<=t;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)}insertRow(e){const t=this.model.getRow(e),i=document.createElement("div");if(i.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),bi(i,this.ariaRole==="tree"?"treeitem":"option"),Rw(i,this.model.getRowCount()),Tw(i,e+1),i.setAttribute("tabindex","-1"),typeof this.model.isRowSelected=="function"){const n=this.model.isRowSelected(e);tu(i,!!n),gO(i,n)}i.style.height=`${this.rowHeight}px`,i.style.top=`${this.rowHeight*e}px`;const s=this.componentCreator(t,i);s.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(s.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:s,eDiv:i,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,i)=>{var s,n;if(i>=e)this.removeRow(i);else{const o=this.model.getRow(i);!((n=(s=this.model).areRowsEqual)===null||n===void 0)&&n.call(s,t.value,o)?this.componentUpdater(o,t.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}}xb([S("resizeObserverService")],Pa.prototype,"resizeObserverService",void 0);xb([G("eContainer")],Pa.prototype,"eContainer",void 0);xb([U],Pa.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const hG=["mouseover","mouseout","mouseenter","mouseleave"],uG=["touchstart","touchend","touchmove","touchcancel"];class pG{constructor(){this.isOutsideAngular=e=>Gn(hG,e)}setTimeout(e,t){window.setTimeout(e,t)}setInterval(e,t){return new Xe(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=Gn(uG,t);e.addEventListener(t,i,{capture:!!s,passive:n})}dispatchEvent(e,t,i=!1){t()}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Bu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Sl=class extends j{getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===W.UP,s=e===W.DOWN,n=e===W.LEFT;let o,a;if(i||s)a=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=t.column;else{const l=this.columnModel.getAllDisplayedColumns(),c=this.gridOptionsService.is("enableRtl");a=t.rowIndex,o=n!==c?l[0]:dt(l)}return{rowIndex:a,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case W.UP:i=this.getCellAbove(i);break;case W.DOWN:i=this.getCellBelow(i);break;case W.RIGHT:this.gridOptionsService.is("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case W.LEFT:this.gridOptionsService.is("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(e.rowIndex),n=this.getNextStickyPosition(s);return n||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;const i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex),s=t?-1:1,n=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[n+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;if(i?t===0:t===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const n=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(n,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,s=e.rowPinned,n=this.columnModel.getDisplayedColAfter(e.column);if(!n){n=t[0];const o=this.getRowBelow(e);if(Se(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,s=e.rowPinned,n=this.columnModel.getDisplayedColBefore(e.column);if(!n){n=dt(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Se(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}};Bu([S("columnModel")],Sl.prototype,"columnModel",void 0);Bu([S("rowModel")],Sl.prototype,"rowModel",void 0);Bu([S("rowRenderer")],Sl.prototype,"rowRenderer",void 0);Bu([S("pinnedRowModel")],Sl.prototype,"pinnedRowModel",void 0);Bu([S("paginationProxy")],Sl.prototype,"paginationProxy",void 0);Sl=Bu([ee("cellNavigationService")],Sl);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _g=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},fG=function(r,e){return function(t,i){e(t,i,r)}};let Qc=class extends j{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}init(){this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){if(this.consuming)return;const t=this.gridOptionsService.get("alignedGrids");t&&t.forEach(i=>{if(i.api){const s=i.api.__getAlignedGridService();e(s)}})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case E.EVENT_COLUMN_MOVED:case E.EVENT_COLUMN_VISIBLE:case E.EVENT_COLUMN_PINNED:case E.EVENT_COLUMN_RESIZED:const t=e;this.processColumnEvent(t);break;case E.EVENT_COLUMN_GROUP_OPENED:const i=e;this.processGroupOpenedEvent(i);break;case E.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const t=e.columnGroup;let i=null;if(t){const s=t.getGroupId();i=this.columnModel.getProvidedColumnGroup(s)}t&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged"))}processColumnEvent(e){var t;const i=e.column;let s=null;if(i&&(s=this.columnModel.getPrimaryColumn(i.getColId())),i&&!s)return;const n=this.getMasterColumns(e);switch(e.type){case E.EVENT_COLUMN_MOVED:{const h=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId}));this.columnModel.applyColumnState({state:p,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${h.toIndex}`)}break;case E.EVENT_COLUMN_VISIBLE:{const h=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));this.columnModel.applyColumnState({state:p},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${h.visible}`)}break;case E.EVENT_COLUMN_PINNED:{const h=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));this.columnModel.applyColumnState({state:p},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${h.pinned}`)}break;case E.EVENT_COLUMN_RESIZED:const c=e,d={};n.forEach(h=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${h.getActualWidth()}`),d[h.getId()]={key:h.getColId(),newWidth:h.getActualWidth()}}),(t=c.flexColumns)===null||t===void 0||t.forEach(h=>{d[h.getId()]&&delete d[h.getId()]}),this.columnModel.setColumnWidths(Object.values(d),!1,c.finished,"alignedGridChanged");break}const a=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),l=this.gridOptionsService.get("alignedGrids");l&&l.forEach(c=>{c.api&&c.api.setAlwaysShowVerticalScroll(a)})}};_g([S("columnModel")],Qc.prototype,"columnModel",void 0);_g([S("ctrlsService")],Qc.prototype,"ctrlsService",void 0);_g([fG(0,Ss("loggerFactory"))],Qc.prototype,"setBeans",null);_g([U],Qc.prototype,"init",null);Qc=_g([ee("alignedGridsService")],Qc);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ig=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},gG=function(r,e){return function(t,i){e(t,i,r)}};let ed=class extends j{setBeans(e){this.logger=e.create("selectionService"),this.reset()}init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",e=>this.groupSelectsChildren=e.currentValue),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",e=>this.rowSelection=e.currentValue),this.addManagedListener(this.eventService,E.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var t;if(e.nodes.length===0)return 0;const{newValue:i,clearSelection:s,suppressFinishActions:n,rangeSelect:o,event:a,source:l="api"}=e;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const c=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,d=e.nodes.map(u=>u.footer?u.sibling:u);if(o){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;const u=this.getLastSelectedNode();if(u){const p=d[0];if(u!==p&&this.isMultiselect()){const g=this.selectRange(p,u,e.newValue,l);return this.setLastSelectedNode(p),g}}}let h=0;for(let u=0;u<d.length;u++){const p=d[u];c&&p.group||p.selectThisNode(i,e.event,l)&&h++,this.groupSelectsChildren&&(!((t=p.childrenAfterGroup)===null||t===void 0)&&t.length)&&(h+=this.selectChildren(p,i,c,l))}if(!n){if(i&&(s||!this.isMultiselect())&&(h+=this.clearOtherNodes(d[0],l)),h>0){this.updateGroupsFromChildrenSelections(l);const p={type:E.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(p)}i&&this.setLastSelectedNode(d[d.length-1])}return h}selectRange(e,t,i=!0,s){const n=this.rowModel.getNodesInRangeForSelection(e,t);let o=0;n.forEach(l=>{if(l.group&&this.groupSelectsChildren||i===!1&&e===l)return;l.selectThisNode(i,void 0,s)&&o++}),this.updateGroupsFromChildrenSelections(s);const a={type:E.EVENT_SELECTION_CHANGED,source:s};return this.eventService.dispatchEvent(a),o}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return A.missing(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}setLastSelectedNode(e){this.lastSelectedNode=e}getLastSelectedNode(){return this.lastSelectedNode}getSelectedNodes(){const e=[];return Et(this.selectedNodes,(t,i)=>{i&&e.push(i)}),e}getSelectedRows(){const e=[];return Et(this.selectedNodes,(t,i)=>{i&&i.data&&e.push(i.data)}),e}getSelectionCount(){return Object.values(this.selectedNodes).length}filterFromSelection(e){const t={};Object.entries(this.selectedNodes).forEach(([i,s])=>{s&&e(s)&&(t[i]=s)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const s=this.rowModel.getRootNode();t||(t=new UC(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==s){const a=o.calculateSelectedFromChildren();n=o.selectThisNode(a===null?!1:a,void 0,e)||n}}),n}clearOtherNodes(e,t){const i={};let s=0;return Et(this.selectedNodes,(n,o)=>{if(o&&o.id!==e.id){const a=this.selectedNodes[o.id];s+=a.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&(i[o.parent.id]=o.parent)}}),Et(i,(n,o)=>{const a=o.calculateSelectedFromChildren();o.selectThisNode(a===null?!1:a,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes[t.id]=t:delete this.selectedNodes[t.id])}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(q(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes[s]==e&&(this.selectedNodes[t.id]=t)}}syncInNewRowNode(e){q(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)}reset(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isSelected())i.push(l);else{const c=l;c.group&&c.children&&s(c.children)}}}return s(t),i}isEmpty(){let e=0;return Et(this.selectedNodes,(t,i)=>{i&&e++}),e===0}deselectAllRowNodes(e){const t=l=>l.selectThisNode(!1,void 0,s),i=this.rowModel.getType()==="clientSide",{source:s,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,o).forEach(t)}else Et(this.selectedNodes,(l,c)=>{c&&t(c)}),this.reset();i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s);const a={type:E.EVENT_SELECTION_CHANGED,source:s};this.eventService.dispatchEvent(a)}getSelectAllState(e,t){let i=0,s=0;const n=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),i===0&&s===0?!1:i>0&&s>0?null:i>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(t)return this.paginationProxy.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const o=a=>{var l;i.push(a),!((l=a.childrenAfterFilter)===null||l===void 0)&&l.length&&a.childrenAfterFilter.forEach(o)};o(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:i,justCurrentPage:s}=e,n=a=>a.selectThisNode(!0,void 0,t);this.getNodesToSelect(i,s).forEach(n),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);const o={type:E.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(o)}getServerSideSelectionState(){return null}setServerSideSelectionState(e){}};Ig([S("rowModel")],ed.prototype,"rowModel",void 0);Ig([S("paginationProxy")],ed.prototype,"paginationProxy",void 0);Ig([gG(0,Ss("loggerFactory"))],ed.prototype,"setBeans",null);Ig([U],ed.prototype,"init",null);ed=Ig([ee("selectionService")],ed);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Rb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let xf=class{sizeColumnsToFit(e){typeof e>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(e,"api")}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.columnModel.setColumnVisible(e,t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.columnModel.setColumnPinned(e,t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.columnModel.moveColumn(e,t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t)}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t)}setColumnWidth(e,t,i=!0,s){this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,i,s)}setColumnWidths(e,t=!0,i){this.columnModel.setColumnWidths(e,!1,t,i)}setPivotMode(e){this.columnModel.setPivotMode(e)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.columnModel.removeValueColumn(e,"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.columnModel.addValueColumn(e,"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.columnModel.removeRowGroupColumn(e,"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.columnModel.addRowGroupColumn(e,"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.columnModel.removePivotColumn(e,"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.columnModel.addPivotColumn(e,"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.columnModel.autoSizeColumn(e,t,"api")}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns(e,"api")}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(A.removeAllReferences.bind(window,this,"Column API"),100)}getAllColumns(){return _n("28.0","getAllColumns","getColumns"),this.getColumns()}getPrimaryColumns(){return _n("28.0","getPrimaryColumns","getColumns"),this.getColumns()}getSecondaryColumns(){return _n("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()}setSecondaryColumns(e){_n("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(e)}getSecondaryPivotColumn(e,t){return _n("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(e,t)}};Rb([S("columnModel")],xf.prototype,"columnModel",void 0);Rb([ft],xf.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);xf=Rb([ee("columnApi")],xf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Wu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let wl=class extends j{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(E.EVENT_CELL_VALUE_CHANGED,e=>this.callColumnCellValueChangedHandler(e),this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,a=e.getColId(),l=t.data;let c;const d=t.groupData&&t.groupData[a]!==void 0,h=!s&&t.aggData&&t.aggData[a]!==void 0,u=this.isSsrm&&s&&!!e.getColDef().aggFunc,p=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?c=this.executeFilterValueGetter(n.filterValueGetter,l,e,t):this.isTreeData&&h?c=t.aggData[a]:this.isTreeData&&n.valueGetter?c=this.executeValueGetter(n.valueGetter,l,e,t):this.isTreeData&&o&&l?c=Vc(l,o,e.isFieldContainsDots()):d?c=t.groupData[a]:h?c=t.aggData[a]:n.valueGetter?c=this.executeValueGetter(n.valueGetter,l,e,t):p?c=Vc(l,t.field,e.isFieldContainsDots()):o&&l&&!u&&(c=Vc(l,o,e.isFieldContainsDots())),this.cellExpressions&&typeof c=="string"&&c.indexOf("=")===0){const f=c.substring(1);c=this.executeValueGetter(f,l,e,t)}if(c==null){const f=this.getOpenedGroup(t,e);if(f!=null)return f}return c}getOpenedGroup(e,t){if(!this.gridOptionsService.is("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getPrimaryColumn(t);if(!e||!n)return!1;Se(e.data)&&(e.data={});const{field:o,valueSetter:a}=n.getColDef();if(Se(o)&&Se(a))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(n,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const l={node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};l.newValue=i;let c;if(q(a)?typeof a=="function"?c=a(l):c=this.expressionService.evaluate(a,l):c=this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),c===void 0&&(c=!0),!c)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(n,e);const d={type:E.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,api:l.api,columnApi:l.columnApi,colDef:l.colDef,context:l.context,data:e.data,node:e,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:s};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]==i,n||(e[t]=i);else{const o=t.split(".");let a=e;for(;o.length>0&&a;){const l=o.shift();o.length===0?(n=a[l]==i,n||(a[l]=i)):a=a[l]}}return!n}executeFilterValueGetter(e,t,i,s){const n={data:t,node:s,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,s)};return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(o!==void 0)return o;const a={data:t,node:s,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,s)};let l;return typeof e=="function"?l=e(a):l=this.expressionService.evaluate(e,a),this.valueCache.setValue(s,n,l),l}getValueCallback(e,t){const i=this.columnModel.getPrimaryColumn(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const o={value:i,colDef:e.getColDef(),column:e,node:t,data:t.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};n=s(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&Qe(()=>{console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]")),n}};Wu([S("expressionService")],wl.prototype,"expressionService",void 0);Wu([S("columnModel")],wl.prototype,"columnModel",void 0);Wu([S("valueCache")],wl.prototype,"valueCache",void 0);Wu([S("dataTypeService")],wl.prototype,"dataTypeService",void 0);Wu([U],wl.prototype,"init",null);wl=Wu([ee("valueService")],wl);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},mG=function(r,e){return function(t,i){e(t,i,r)}};let Sv=class extends j{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};yA([mG(0,Ss("loggerFactory"))],Sv.prototype,"setBeans",null);Sv=yA([ee("expressionService")],Sv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let bS=class extends j{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,t){const i=this.templateCache[e];if(i)return i;let s=this.waitingCallbacks[e];const n=this;if(!s){s=[],this.waitingCallbacks[e]=s;const o=new XMLHttpRequest;o.onload=function(){n.handleHttpResult(this,e)},o.open("GET",e),o.send()}return t&&s.push(t),null}handleHttpResult(e,t){if(e.status!==200||e.response===null){console.warn(`AG Grid: Unable to get template error ${e.status} - ${t}`);return}this.templateCache[t]=e.response||e.responseText;const i=this.waitingCallbacks[t];for(let s=0;s<i.length;s++){const n=i[s];n()}}};bS=vG([ee("templateService")],bS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var SA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},CG=function(r,e){return function(t,i){e(t,i,r)}};let wv=class extends j{setBeans(e){this.logging=e.is("debug")}create(e){return new ES(e,this.isLogging.bind(this))}isLogging(){return this.logging}};SA([CG(0,Ss("gridOptionsService"))],wv.prototype,"setBeans",null);wv=SA([ee("loggerFactory")],wv);let ES=class{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Uu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Pd extends j{setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:n=>n===_t.HeaderCell||n===_t.ToolPanel,getIconName:()=>De.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new DC(this.view)),this.addRtlSupport(),this.addManagedListener(this,E.EVENT_KEYBOARD_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,E.EVENT_MOUSE_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!1)});const s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return((e=t==null?void 0:t.getAttribute("row-id"))===null||e===void 0?void 0:e.startsWith("detail"))||!1}showDropZones(){return ie.isRegistered(te.RowGroupingModule,this.context.getGridId())}showSideBar(){return ie.isRegistered(te.SideBarModule,this.context.getGridId())}showStatusBar(){return ie.isRegistered(te.StatusBarModule,this.context.getGridId())}showWatermark(){return ie.isRegistered(te.EnterpriseCoreModule,this.context.getGridId())}onGridSizeChanged(){const e={type:E.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),n=i.findIndex(o=>o.contains(t.activeElement))+(e?-1:1);return n<=0||n>=i.length?!1:this.focusService.focusInto(i[n])}focusInnerElement(e){const t=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(dt(t),!0);const s=dt(i);if(this.focusService.focusGridView(s,!0))return!0}return this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusGridView(i[0]):this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}}Uu([S("focusService")],Pd.prototype,"focusService",void 0);Uu([S("resizeObserverService")],Pd.prototype,"resizeObserverService",void 0);Uu([S("columnModel")],Pd.prototype,"columnModel",void 0);Uu([S("ctrlsService")],Pd.prototype,"ctrlsService",void 0);Uu([S("mouseEventService")],Pd.prototype,"mouseEventService",void 0);Uu([S("dragAndDropService")],Pd.prototype,"dragAndDropService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Lg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ju extends Hu{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),addOrRemoveKeyboardFocusClass:i=>this.addOrRemoveCssClass(oi.AG_KEYBOARD_FOCUS,i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new Pd);const t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i)})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.eRootWrapperBody.classList;i.toggle(Kt.AUTO_HEIGHT,t.autoHeight),i.toggle(Kt.NORMAL,t.normal),i.toggle(Kt.PRINT,t.print),this.addOrRemoveCssClass(Kt.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(Kt.NORMAL,t.normal),this.addOrRemoveCssClass(Kt.PRINT,t.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",s=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${t}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${s}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(t=>Au(t))}}Lg([S("loggerFactory")],ju.prototype,"loggerFactory",void 0);Lg([G("gridBody")],ju.prototype,"gridBodyComp",void 0);Lg([G("sideBar")],ju.prototype,"sideBarComp",void 0);Lg([G("rootWrapperBody")],ju.prototype,"eRootWrapperBody",void 0);Lg([U],ju.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Xm;let Rf=Xm=class extends j{progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=this.gridOptionsService.isColumnsSortingCoupledToGroup();let o=[e];if(n&&e.getColDef().showRowGroup){const l=this.columnModel.getSourceColumnsForGroupColumn(e),c=l==null?void 0:l.filter(d=>d.getColDef().sortable);c&&(o=[e,...c])}o.forEach(l=>l.setSort(t,s)),(i||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(o,s),this.updateSortIndex(e),this.dispatchSortChangedEvents(s)}updateSortIndex(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(l=>l.setSortIndex(null));const o=n.filter(l=>l!==s);(s.getSort()?[...o,s]:o).forEach((l,c)=>l.setSortIndex(c))}onSortChanged(e){this.dispatchSortChangedEvents(e)}isSortActive(){const t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e){const t={type:E.EVENT_SORT_CHANGED,source:e};this.eventService.dispatchEvent(t)}clearSortBarTheseColumns(e,t){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(i=>{e.includes(i)||i.setSort(void 0,t)})}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?t=this.gridOptionsService.get("sortingOrder"):t=Xm.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let o;return s||n?o=t[0]:o=t[i+1],Xm.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(a=>{const l=!!a.getAggFunc(),c=!a.isPrimary(),d=o?this.columnModel.getGroupDisplayColumnForGroup(a.getId()):a.getColDef().showRowGroup;return l||c||d})}const t=this.columnModel.getRowGroupColumns().filter(o=>!!o.getSort()),i=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(o=>{var a;return(a=this.columnModel.getGroupDisplayColumnForGroup(o.getId()))!==null&&a!==void 0?a:o}))]);const s={};e.forEach((o,a)=>s[o.getId()]=a),e.sort((o,a)=>{const l=o.getSortIndex(),c=a.getSortIndex();if(l!=null&&c!=null)return l-c;if(l==null&&c==null){const d=s[o.getId()],h=s[a.getId()];return d>h?1:-1}else return c==null?-1:1});const n=new Map;return e.forEach((o,a)=>n.set(o,a)),i&&t.forEach(o=>{const a=this.columnModel.getGroupDisplayColumnForGroup(o.getId());n.set(o,n.get(a))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=!!e.getColDef().field?[e,...t]:t,n=s[0].getSort();return s.every(a=>a.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};Rf.DEFAULT_SORTING_ORDER=["asc","desc",null];wA([S("columnModel")],Rf.prototype,"columnModel",void 0);Rf=Xm=wA([ee("sortController")],Rf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let xS=class extends j{setMouseOver(e){this.selectedColumns=e;const t={type:E.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:E.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};xS=yG([ee("columnHoverService")],xS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Tb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Tf=class extends j{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active}start(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&(this.flush(),this.active=!1)}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(){const e=this.executeNextFuncs;this.executeNextFuncs=[];const t=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&t.length===0)&&(window.setTimeout(()=>e.forEach(i=>i()),0),window.setTimeout(()=>t.forEach(i=>i()),300))}};Tb([S("ctrlsService")],Tf.prototype,"ctrlsService",void 0);Tb([U],Tf.prototype,"postConstruct",null);Tf=Tb([ee("columnAnimationService")],Tf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Db=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Df=class extends j{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,E.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.is("paginationAutoPageSize")||this.centerRowContainerCon==null}checkPageSize(){if(this.notActive())return;const e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=this.gridOptionsService.getRowHeightAsNumber(),s=Math.floor(e/i);this.gridOptionsService.set("paginationPageSize",s)};this.isBodyRendered?or(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};Db([S("ctrlsService")],Df.prototype,"ctrlsService",void 0);Db([U],Df.prototype,"postConstruct",null);Df=Db([ee("paginationAutoPageSizeService")],Df);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var bA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let bv=class extends j{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}};bA([U],bv.prototype,"init",null);bv=bA([ee("valueCache")],bv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $C=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const SG="paste";let au=class extends j{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==SG&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(!this.gridOptionsService.is("suppressChangeDetection")){if(this.clientSideRowModel&&!e.isRowPinned()){const i=this.gridOptionsService.is("aggregateOnlyChangedColumns"),s=new UC(i,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s)}this.rowRenderer.refreshCells()}}};$C([S("rowModel")],au.prototype,"rowModel",void 0);$C([S("rowRenderer")],au.prototype,"rowRenderer",void 0);$C([U],au.prototype,"init",null);au=$C([ee("changeDetectionService")],au);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var EA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Ev=class extends j{adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(s){return!1}getGui(){return this.eGui}init(s){const n=e(s),o=typeof n;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Li("<span>"+n+"</span>");return}if(n==null){this.eGui=Li("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};EA([S("componentMetadataProvider")],Ev.prototype,"componentMetadataProvider",void 0);Ev=EA([ee("agComponentUtils")],Ev);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ob=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Of=class extends j{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}}retrieve(e){return this.componentMetaData[e]}};Ob([S("agComponentUtils")],Of.prototype,"agComponentUtils",void 0);Ob([U],Of.prototype,"postConstruct",null);Of=Ob([ee("componentMetadataProvider")],Of);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ab=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const wG=25,Ix=10,uy=8,bG=4,py=4,fy=6,EG={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:bG*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:uy*7,headerCellMinWidth:48,listItemHeight:uy*4,rowHeight:uy*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:py*8,headerCellMinWidth:24,listItemHeight:py*6,rowHeight:py*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:fy*8,headerCellMinWidth:36,listItemHeight:fy*4,rowHeight:fy*7,chartMenuPanelWidth:240}},Lx={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]};let Af=class extends j{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;const t=(e=this.getTheme().el)!==null&&e!==void 0?e:this.eGridDiv;this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:E.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:t,el:i}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});const s=this.calculatedSizes[t][e];return s??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,i),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,i){const s="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),n=EG[s][e],o=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!Lx[e])return n;const a=Lx[e],l=o.createElement("div"),c=Array.from(i.classList);l.classList.add(t,...c),l.style.position="absolute";const d=a.reduce((u,p)=>{const f=o.createElement("div");return f.style.position="static",f.classList.add(p),u.appendChild(f),f},l);let h=0;if(o.body){o.body.appendChild(l);const u=e.toLowerCase().indexOf("height")!==-1?"height":"width";h=parseInt(window.getComputedStyle(d)[u],10),o.body.removeChild(l)}return h||n}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,i=null,s=[];for(;t;)if(i=e.exec(t.className),!i)t=t.parentElement||void 0;else{const o=t.className.match(e);o&&(s=o);break}if(!i)return{allThemes:s};const n=i[0];return{theme:n,el:t,themeFamily:n.replace(/-dark$/,""),allThemes:s}}getFromTheme(e,t){var i;return(i=this.getSassVariable(t))!==null&&i!==void 0?i:e}getDefaultRowHeight(){return this.getFromTheme(wG,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}setRowHeightVariable(e){const t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),i=`${e}px`;t!=i&&this.eGridDiv.style.setProperty("--ag-line-height",i)}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return q(e)?Math.max(e,Ix):Ix}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};Ab([S("eGridDiv")],Af.prototype,"eGridDiv",void 0);Ab([U],Af.prototype,"postConstruct",null);Af=Ab([ee("environment")],Af);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var KC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},xG=function(r,e){return function(t,i){e(t,i,r)}};let lu=class extends j{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=mO(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:E.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}};KC([S("ctrlsService")],lu.prototype,"ctrlsService",void 0);KC([xG(0,Ss("loggerFactory"))],lu.prototype,"agWire",null);KC([U],lu.prototype,"postConstruct",null);lu=KC([ee("rowContainerHeightService")],lu);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let xv=class extends j{init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")}updateSelectableAfterGrouping(e){if(this.isRowSelectableFunc){const t=i=>i.childrenAfterGroup;this.recurseDown(e.childrenAfterGroup,t)}}recurseDown(e,t){e&&e.forEach(i=>{if(!i.group)return;i.hasChildren()&&this.recurseDown(t(i),t);let s;if(this.groupSelectsChildren){const n=(t(i)||[]).find(o=>o.selectable===!0);s=q(n)}else s=this.isRowSelectableFunc?this.isRowSelectableFunc(i):!1;i.setRowSelectable(s)})}};xA([U],xv.prototype,"init",null);xv=xA([ee("selectableService")],xv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class fn extends Q{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",Wt(e?"last":"first",this.gridOptionsService)),this.btPrevious.insertAdjacentElement("afterbegin",Wt(e?"next":"previous",this.gridOptionsService)),this.btNext.insertAdjacentElement("afterbegin",Wt(e?"previous":"next",this.gridOptionsService)),this.btLast.insertAdjacentElement("afterbegin",Wt(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()}onPaginationChanged(){const t=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListener(t,"click",i),this.addManagedListener(t,"keydown",s=>{(s.key===W.ENTER||s.key===W.SPACE)&&(s.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),i=e?t+1:0;this.lbCurrent.innerHTML=this.formatNumber(i)}formatNumber(e){const t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return _w(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),l=e("lastPage","Last Page"),c=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${c}">
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${c}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-to">${i}</span>
                    <span id="ag-${c}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-of">${s}</span>
                    <span id="ag-${c}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="${n}"></div>
                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${c}-start-page">${t}</span>
                        <span id="ag-${c}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${c}-of-page">${s}</span>
                        <span id="ag-${c}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="${a}"></div>
                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="${l}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=t&&e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){xw(e,t),e.classList.toggle("ag-disabled",t),t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","0")}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let n,o;if(this.isZeroPagesToDisplay()?n=o=0:(n=t*e+1,o=n+t-1,i&&o>s&&(o=s)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(n),this.rowNodeBlockLoader.isLoading()){const a=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=a("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(o)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(i===1){const s=this.paginationProxy.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(t),this.lbRecordCount.innerHTML=this.formatNumber(i);else{const s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)}}qn([S("paginationProxy")],fn.prototype,"paginationProxy",void 0);qn([S("rowNodeBlockLoader")],fn.prototype,"rowNodeBlockLoader",void 0);qn([G("btFirst")],fn.prototype,"btFirst",void 0);qn([G("btPrevious")],fn.prototype,"btPrevious",void 0);qn([G("btNext")],fn.prototype,"btNext",void 0);qn([G("btLast")],fn.prototype,"btLast",void 0);qn([G("lbRecordCount")],fn.prototype,"lbRecordCount",void 0);qn([G("lbFirstRowOnPage")],fn.prototype,"lbFirstRowOnPage",void 0);qn([G("lbLastRowOnPage")],fn.prototype,"lbLastRowOnPage",void 0);qn([G("lbCurrent")],fn.prototype,"lbCurrent",void 0);qn([G("lbTotal")],fn.prototype,"lbTotal",void 0);qn([U],fn.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Lh;(function(r){r[r.Loading=0]="Loading",r[r.NoRows=1]="NoRows"})(Lh||(Lh={}));class Rr extends Q{constructor(){super(Rr.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1,this.manuallyDisplayed=!1}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle(Kt.AUTO_HEIGHT,t.autoHeight),i.toggle(Kt.NORMAL,t.normal),i.toggle(Kt.PRINT,t.print)}postConstruct(){this.createManagedBean(new DC(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,E.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;t.toggle("ag-overlay-loading-wrapper",e===Lh.Loading),t.toggle("ag-overlay-no-rows-wrapper",e===Lh.NoRows)}showLoadingOverlay(){if(this.gridOptionsService.is("suppressLoadingOverlay"))return;const e={},i=this.userComponentFactory.getLoadingOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Lh.Loading)}showNoRowsOverlay(){if(this.gridOptionsService.is("suppressNoRowsOverlay"))return;const e={},i=this.userComponentFactory.getNoRowsOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Lh.NoRows)}showOverlay(e,t){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(i=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),Qs(this.eOverlayWrapper))}hideOverlay(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}}Rr.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`;zu([S("userComponentFactory")],Rr.prototype,"userComponentFactory",void 0);zu([S("paginationProxy")],Rr.prototype,"paginationProxy",void 0);zu([S("gridApi")],Rr.prototype,"gridApi",void 0);zu([S("columnModel")],Rr.prototype,"columnModel",void 0);zu([G("eOverlayWrapper")],Rr.prototype,"eOverlayWrapper",void 0);zu([U],Rr.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let cu=class extends j{getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(q(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}rowMax(e){let t;return e.forEach(i=>{(t===void 0||this.before(t,i))&&(t=i)}),t}rowMin(e){let t;return e.forEach(i=>{(t===void 0||this.before(i,t))&&(t=i)}),t}};YC([S("rowModel")],cu.prototype,"rowModel",void 0);YC([S("pinnedRowModel")],cu.prototype,"pinnedRowModel",void 0);YC([S("paginationProxy")],cu.prototype,"paginationProxy",void 0);cu=YC([ee("rowPositionUtils")],cu);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let RS=class extends j{createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}};RS=RG([ee("cellPositionUtils")],RS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class jp{constructor(e){this.cellValueChanges=e}}class gy extends jp{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}}class Pf{constructor(e){this.actionStack=[],this.maxStackSize=e||Pf.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}Pf.DEFAULT_STACK_SIZE=10;/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Tr=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let jn=class extends j{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:a,column:l,oldValue:c,value:d}=e,h={rowPinned:o,rowIndex:a,columnId:l.getColId(),newValue:d,oldValue:c};this.cellValueChanges.push(h)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.is("undoRedoCellEditing"))return;const e=this.gridOptionsService.getNum("undoRedoCellEditingLimit");e<=0||(this.undoStack=new Pf(e),this.redoStack=new Pf(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:E.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:E.EVENT_UNDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}redo(e){const t={type:E.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:E.EVENT_REDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,a=>a[s],n),o instanceof gy?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:o,columnId:a}=s,l={rowIndex:n,rowPinned:o},c=this.getRowNode(l);c.displayed&&c.setDataValue(a,t(s),i)})}processRange(e){let t;this.rangeService.removeAllCellRanges(!0),e.forEach((i,s)=>{if(!i)return;const n=i.startRow,o=i.endRow;s===e.length-1&&(t={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};this.rangeService.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=this.getRowNode(n),a={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a,!!this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getGridColumn(s);if(!a)return;o.ensureIndexVisible(i),o.ensureColumnVisible(a);const l={rowIndex:i,column:a,rowPinned:n};this.focusService.setFocusedCell(Object.assign(Object.assign({},l),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(l)}addRowEditingListeners(){this.addManagedListener(this.eventService,E.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,E.EVENT_ROW_EDITING_STOPPED,()=>{const e=new jp(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,E.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,E.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new jp(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,E.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,E.EVENT_PASTE_END,()=>{const e=new jp(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,E.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,E.EVENT_FILL_END,e=>{const t=new gy(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gridOptionsService.isEnableRangeSelection()?e=new gy(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new jp(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};Tr([S("focusService")],jn.prototype,"focusService",void 0);Tr([S("ctrlsService")],jn.prototype,"ctrlsService",void 0);Tr([S("rowModel")],jn.prototype,"rowModel",void 0);Tr([S("pinnedRowModel")],jn.prototype,"pinnedRowModel",void 0);Tr([S("cellPositionUtils")],jn.prototype,"cellPositionUtils",void 0);Tr([S("rowPositionUtils")],jn.prototype,"rowPositionUtils",void 0);Tr([S("columnModel")],jn.prototype,"columnModel",void 0);Tr([Ne("rangeService")],jn.prototype,"rangeService",void 0);Tr([U],jn.prototype,"init",null);jn=Tr([ee("undoRedoService")],jn);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Pb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Mf=class extends j{findHeader(e,t){let i,s,n;if(e.column instanceof vt?(s=`getDisplayedGroup${t}`,i=this.columnModel[s](e.column)):(n=`getDisplayedCol${t}`,i=this.columnModel[n](e.column)),!i)return;let{headerRowIndex:o}=e;if(this.getHeaderRowType(o)===Fi.COLUMN_GROUP){const l=i;if(l.isPadding()&&this.isAnyChildSpanningHeaderHeight(l)){const{nextFocusColumn:c,nextRow:d}=this.getColumnVisibleChild(l,o,t);c&&(i=c,o=d)}}return{column:i,headerRowIndex:o}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i===Fi.FLOATING_FILTER,n=i===Fi.COLUMN;let o=s?e:e.getParent(),a=t-1;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),a--;a<0&&(o=e,a=t)}return{nextFocusColumn:o,nextRow:a}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,o=t+1;if(s===Fi.COLUMN_GROUP){const a=e.getLeafColumns(),l=i==="After"?a[0]:dt(a);if(this.isAnyChildSpanningHeaderHeight(l.getParent())){n=l;let c=l.getParent();for(;c&&c!==e;)c=c.getParent(),o++}else n=e.getDisplayedChildren()[0]}return{nextFocusColumn:n,nextRow:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.columnModel.getAllDisplayedColumns(),s=i[t==="start"?0:i.length-1];if(!s)return;const o=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(e);if(o==Fi.COLUMN_GROUP){const a=this.columnModel.getColumnGroupAtLevel(s,e);return{headerRowIndex:e,column:a}}return{headerRowIndex:o==null?-1:e,column:s}}};Pb([S("columnModel")],Mf.prototype,"columnModel",void 0);Pb([S("ctrlsService")],Mf.prototype,"ctrlsService",void 0);Mf=Pb([ee("headerPositionUtils")],Mf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var TG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let TS=class{buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(o=>{const a=this.createDefFromColumn(o,t,i);let l=!0,c=a,d=o.getOriginalParent(),h=null;for(;d;){let u=null;if(d.isPadding()){d=d.getOriginalParent();continue}const p=n[d.getGroupId()];if(p){p.children.push(c),l=!1;break}if(u=this.createDefFromGroup(d),u&&(u.children=[c],n[u.groupId]=u,c=u,d=d.getOriginalParent()),h===d){l=!1;break}h=d}l&&s.push(c)}),s}createDefFromGroup(e){const t=dv(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=dv(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}};TS=TG([ee("columnDefFactory")],TS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Mb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let _f=class{getInitialRowClasses(e){const t=[];return q(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),cS(t,this.processClassesFromGridOptions(e.rowNode)),cS(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(a=>t.push(a))},s=this.gridOptionsService.get("rowClass");if(s){if(typeof s=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gridOptionsService.getCallback("getRowClass");if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex},a=n(o);i(a)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},i=>{}),t}processRowClassRules(e,t,i){const s={data:e.data,node:e,rowIndex:e.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};Mb([S("stylingService")],_f.prototype,"stylingService",void 0);Mb([S("gridOptionsService")],_f.prototype,"gridOptionsService",void 0);_f=Mb([ee("rowCssClassCalculator")],_f);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var XC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let du=class extends j{init(){this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const i=(n,o)=>({currentPos:o,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.sort==="desc",d=this.getValue(s,l.column),h=this.getValue(n,l.column);let u;const p=this.getComparator(l,s);if(p?u=p(d,h,s,n,c):u=A.defaultComparator(d,h,this.isAccentedSort),!isNaN(u)&&u!==0)return l.sort==="asc"?u:u*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getPrimaryColumn(n);if(o)return o.getColDef().comparator}getValue(e,t){var i,s;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(t.getColDef().keyCreator)return e.key;const c=(i=e.allLeafChildren)===null||i===void 0?void 0:i[0];return c?this.valueService.getValue(t,c,!1,!1):void 0}const a=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return a?(s=e.groupData)===null||s===void 0?void 0:s[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}};XC([S("valueService")],du.prototype,"valueService",void 0);XC([S("columnModel")],du.prototype,"columnModel",void 0);XC([U],du.prototype,"init",null);du=XC([ee("rowNodeSorter")],du);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var DG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},DS;let Rv=DS=class extends j{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){const e=this.createReadyParams();this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e;break}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};Rv.NAME="ctrlsService";Rv=DS=DG([ee(DS.NAME)],Rv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var OG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let OS=class extends j{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(t!=null)return new t}};OS=OG([ee("ctrlsFactory")],OS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Fg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Md extends Q{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Mw()||Vl())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Hh(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],i=this.getGui();e.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}getViewport(){return this.eViewport}getContainer(){return this.eContainer}}Fg([G("eViewport")],Md.prototype,"eViewport",void 0);Fg([G("eContainer")],Md.prototype,"eContainer",void 0);Fg([S("scrollVisibleService")],Md.prototype,"scrollVisibleService",void 0);Fg([S("ctrlsService")],Md.prototype,"ctrlsService",void 0);Fg([S("animationFrameService")],Md.prototype,"animationFrameService",void 0);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ng=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ma extends Md{constructor(){super(Ma.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new Fu(t=>this.eContainer.style.width=`${t}px`))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.columnModel.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.gridOptionsService.getScrollbarWidth();i&&(t+=s),Vn(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(n+=s),Vn(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gridOptionsService.is("suppressHorizontalScroll"),s=e&&this.gridOptionsService.getScrollbarWidth()||0,o=i?0:s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Bc(this.getGui(),o),Bc(this.eViewport,o),Bc(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}}Ma.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;Ng([G("eLeftSpacer")],Ma.prototype,"eLeftSpacer",void 0);Ng([G("eRightSpacer")],Ma.prototype,"eRightSpacer",void 0);Ng([S("columnModel")],Ma.prototype,"columnModel",void 0);Ng([S("pinnedRowModel")],Ma.prototype,"pinnedRowModel",void 0);Ng([U],Ma.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _b=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let If=class extends j{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:E.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:E.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};_b([S("columnModel")],If.prototype,"columnModel",void 0);_b([U],If.prototype,"postConstruct",null);If=_b([ee("pinnedWidthService")],If);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let hu=class extends j{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const t=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(t)),this.dispatchExpandedDebounced()}};qC([S("animationFrameService")],hu.prototype,"animationFrameService",void 0);qC([S("rowModel")],hu.prototype,"rowModel",void 0);qC([U],hu.prototype,"postConstruct",null);hu=qC([ee("rowNodeEventThrottle")],hu);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $l=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Fx=function(r,e){return function(t,i){e(t,i,r)}};function AG(r){if(typeof r=="number")return r;if(typeof r=="string")return parseInt(r,10)}function Nx(r){return r===!0||r==="true"}let mr=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new nn}get context(){return this.gridOptions.context}agWire(e,t){this.gridOptions.api=e,this.gridOptions.columnApi=t,this.api=e,this.columnApi=t}init(){this.gridOptionLookup=new Set([...He.ALL_PROPERTIES,...He.EVENT_CALLBACKS]);const e=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandler.bind(this),e),this.getScrollbarWidth()}destroy(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0}is(e){return Nx(this.gridOptions[e])}get(e){return this.gridOptions[e]}getNum(e){return AG(this.gridOptions[e])}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return q(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{const s=i;return s.api=this.api,s.columnApi=this.columnApi,s.context=this.context,e(s)})}set(e,t,i=!1,s={}){if(this.gridOptionLookup.has(e)){const n=this.gridOptions[e];if(i||n!==t){this.gridOptions[e]=t;const o=Object.assign({type:e,currentValue:t,previousValue:n},s);this.propertyEventService.dispatchEvent(o)}}}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}globalEventHandler(e,t){if(this.destroyed)return;const i=He.getCallbackForEvent(e);typeof this.gridOptions[i]=="function"&&this.gridOptions[i](t)}getGridId(){return this.api.getGridId()}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:yO();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:E.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&Se(this.gridOptions.rowModelType)}isDomLayout(e){var t;return((t=this.gridOptions.domLayout)!==null&&t!==void 0?t:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.is("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,t=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:i,estimated:!0};const n={node:e,data:e.data},o=this.getCallback("getRowHeight")(n);if(this.isNumeric(o))return o===0&&Qe(()=>console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),"invalidRowHeight"),{height:Math.max(1,o),estimated:!1}}return e.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Se(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.gridOptions.rowHeight;return e&&this.isNumeric(e)?(this.environment.setRowHeightVariable(e),e):(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const i=e[this.getDomDataKey()];return i?i[t]:void 0}setDomData(e,t,i){const s=this.getDomDataKey();let n=e[s];Se(n)&&(n={},e[s]=n),n[t]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&q(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&q(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return q(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.is("ensureDomOrder")?!1:this.is("animateRows")}isGroupRowsSticky(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))}isTreeData(){return this.is("treeData")&&ie.assertRegistered(te.RowGroupingModule,"Tree Data",this.api.getGridId())}isMasterDetail(){return this.is("masterDetail")&&ie.assertRegistered(te.MasterDetailModule,"masterDetail",this.api.getGridId())}isEnableRangeSelection(){return this.is("enableRangeSelection")&&ie.isRegistered(te.RangeSelectionModule,this.api.getGridId())}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!(e!=null&&e.comparator)&&!this.isTreeData()}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(Nx(e))return()=>!0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?dS("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType?dS("groupRows",this.gridOptions.groupDisplayType):!1}};$l([S("gridOptions")],mr.prototype,"gridOptions",void 0);$l([S("eventService")],mr.prototype,"eventService",void 0);$l([S("environment")],mr.prototype,"environment",void 0);$l([S("eGridDiv")],mr.prototype,"eGridDiv",void 0);$l([Fx(0,Ss("gridApi")),Fx(1,Ss("columnApi"))],mr.prototype,"agWire",null);$l([U],mr.prototype,"init",null);$l([ft],mr.prototype,"destroy",null);mr=$l([ee("gridOptionsService")],mr);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var PG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let AS=class extends j{getLocaleTextFunc(){const e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gridOptionsService.get("localeText");return(i,s,n)=>{let o=t&&t[i];if(o&&n&&n.length){let a=0;for(;!(a>=n.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",n[a++])}return o??s}}};AS=PG([ee("localeService")],AS);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var MG=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Gg extends Md{constructor(){super(Gg.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new PC(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.gridOptionsService.getScrollbarWidth()||0,s=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Vn(this.getGui(),s),Vn(this.eViewport,s),Vn(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const t=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement();this.eViewport.scrollTop!=t.scrollTop&&(this.eViewport.scrollTop=t.scrollTop)}}Gg.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;MG([U],Gg.prototype,"postConstruct",null);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $u=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const Gx={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},kx=["january","february","march","april","may","june","july","august","september","october","november","december"];let bl=class extends j{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1}init(){this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",()=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs("gridOptionsChanged")})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([s,n])=>{this.dataTypeDefinitions[s]=Object.assign(Object.assign({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})});const i=(e=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&e!==void 0?e:{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const o=this.processDataTypeDefinition(n,i,[s],t);o&&(this.dataTypeDefinitions[s]=o,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??t[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i=Object.assign(Object.assign({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.extendsDataType===e.baseDataType){const a=s[o];if(!this.validateDataTypeDefinition(e,a,o))return;n=this.mergeDataTypeDefinitions(a,e)}else{if(i.includes(o)){Qe(()=>console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.'),"dataTypeExtendsCircularRef");return}const a=t[o];if(!this.validateDataTypeDefinition(e,a,o))return;const l=this.processDataTypeDefinition(a,t,[...i,o],s);if(!l)return;n=this.mergeDataTypeDefinitions(l,e)}return Object.assign(Object.assign({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(Qe(()=>console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.'),"dataTypeBaseTypesMatch"),!1):!0:(Qe(()=>console.warn(`AG Grid: The data type definition ${i} does not exist.`),"dataTypeDefMissing"+i),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,s;if(!((i=t.node)===null||i===void 0)&&i.group){const n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.value}))}}}return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive())return typeof t.value!="string"||!((s=e.dataTypeMatcher)===null||s===void 0)&&s.call(e,t.value)?e.valueFormatter(t):void 0;return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n):!1),!s){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[s];if(!o){Qe(()=>console.warn(`AG Grid: Missing data type definition - "${s}"`),"dataTypeMissing"+s);return}return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,i),o.columnTypes}updateColDefAndGetColumnType(e,t,i){var s,n;const o=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,i),a=(n=(s=t.type)!==null&&s!==void 0?s:o)!==null&&n!==void 0?n:e.type;return a?this.convertColumnTypes(a):void 0}canInferCellDataType(e,t){var i;if(this.rowModel.getType()!=="clientSide")return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,s))return!1;const n=t.type===null?e.type:t.type;if(n){const o=(i=this.gridOptionsService.get("columnTypes"))!==null&&i!==void 0?i:{};if(this.convertColumnTypes(n).some(l=>{const c=o[l.trim()];return c&&this.doColDefPropsPreventInference(c,s)}))return!1}return!this.doColDefPropsPreventInference(e,s)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e){var t;if(!e)return;const i=this.gridOptionsService.get("rowData");let s;const n=e.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");if(i!=null&&i.length)s=Vc(i[0],e,n);else{const a=this.rowModel.getRootNode().allLeafChildren;a!=null&&a.length?s=Vc(a[0].data,e,n):this.initWaitForRowData()}if(s==null)return;const[o]=(t=Object.entries(this.dataTypeMatchers).find(([a,l])=>l(s)))!==null&&t!==void 0?t:["object"];return o}initWaitForRowData(){if(this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const e=this.addManagedListener(this.eventService,E.EVENT_ROW_DATA_UPDATED,()=>{e==null||e(),this.isWaitingForRowData=!1,setTimeout(()=>{this.columnModel.recreateColumnDefs("rowDataUpdated")})})}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(){return this.dataTypeDefinitions.dateString}getDateParserFunction(){return this.getDateStringTypeDefinition().dateParser}getDateFormatterFunction(){return this.getDateStringTypeDefinition().dateFormatter}checkType(e,t){var i;const s=e.getColDef();if(!s.cellDataType||t==null)return!0;const n=(i=this.dataTypeDefinitions[s.cellDataType])===null||i===void 0?void 0:i.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Qe(()=>console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),"dataTypeObjectValueFormatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Qe(()=>console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'),"dataTypeObjectValueParser"))}setColDefPropertiesForBaseDataType(e,t,i){const s=(a,l,c)=>{let d=a.getColDef().valueFormatter;return d===t.groupSafeValueFormatter&&(d=t.valueFormatter),this.valueFormatterService.formatValue(a,l,c,d)},n=ie.isRegistered(te.SetFilterModule,this.context.getGridId()),o=this.localeService.getLocaleTextFunc();switch(e.useValueFormatterForExport=!0,e.useValueParserForImport=!0,t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",n&&(e.filterParams={comparator:(a,l)=>{const c=a==null?0:parseInt(a),d=l==null?0:parseInt(l);return c===d?0:c>d?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===W.SPACE,n?e.filterParams={valueFormatter:a=>q(a.value)?o(String(a.value),a.value?"True":"False"):o("blanks","(Blanks)")}:e.filterParams={maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]};break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=a=>s(a.column,a.node,a.value),n&&(e.filterParams={valueFormatter:a=>{const l=s(a.column,a.node,a.value);return q(l)?l:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=kx[Number(a)-1];return o(c,Gx[c])}return a??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=l=>s(l.column,l.node,l.value);const a=this.getDateParserFunction();n?e.filterParams={valueFormatter:l=>{const c=s(l.column,l.node,l.value);return q(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{const c=a(l??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(l,c)=>{if(c===1&&l!=null){const d=kx[Number(l)-1];return o(d,Gx[d])}return l??o("blanks","(Blanks)")}}:e.filterParams={comparator:(l,c)=>{const d=a(c);return c==null||d<l?-1:d>l?1:0}};break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(a,l)=>{const c=this.columnModel.getPrimaryColumn(i),d=c==null?void 0:c.getColDef();if(!c||!d)return 0;const h=a==null?"":s(c,null,a),u=l==null?"":s(c,null,l);return h===u?0:h>u?1:-1},e.keyCreator=a=>s(a.column,a.node,a.value),n?e.filterParams={valueFormatter:a=>{const l=s(a.column,a.node,a.value);return q(l)?l:o("blanks","(Blanks)")}}:e.filterValueGetter=a=>s(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){const e=i=>!!i.match("\\d{4}-\\d{2}-\\d{2}"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>i.newValue===""?null:Number(i.newValue),valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:uf(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>i.newValue===""?null:String(i.newValue).toLowerCase()==="true",valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Co(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var s;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):(s=kn(i.value,!1))!==null&&s!==void 0?s:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var s;return(s=Co(i))!==null&&s!==void 0?s:void 0},dateFormatter:i=>{var s;return(s=kn(i??null,!1))!==null&&s!==void 0?s:void 0},valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var s;return(s=uf(i.value))!==null&&s!==void 0?s:""}}}}};$u([S("rowModel")],bl.prototype,"rowModel",void 0);$u([S("columnModel")],bl.prototype,"columnModel",void 0);$u([S("valueService")],bl.prototype,"valueService",void 0);$u([S("valueFormatterService")],bl.prototype,"valueFormatterService",void 0);$u([U],bl.prototype,"init",null);bl=$u([ee("dataTypeService")],bl);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Tv=class extends j{parseValue(e,t,i,s){const n=e.getColDef(),o={node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},a=n.valueParser;return q(a)?typeof a=="function"?a(o):this.expressionService.evaluate(a,o):i}};RA([S("expressionService")],Tv.prototype,"expressionService",void 0);Tv=RA([ee("valueParserService")],Tv);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */class kg{constructor(e,t,i){if(!t){console.error("AG Grid: no gridOptions provided to the grid");return}this.gridOptions=t,new IG().create(e,t,s=>{const n=new ju(e);s.createBean(n)},void 0,i)}destroy(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()}}let _G=1;class IG{create(e,t,i,s,n){var o;const a=!!t.debug,l=(o=t.gridId)!==null&&o!==void 0?o:String(_G++),c=this.getRegisteredModules(n,l),d=this.createBeansList(t.rowModelType,c,l),h=this.createProvidedBeans(e,t,n);if(!d)return;const u={providedBeanInstances:h,beanClasses:d,debug:a,gridId:l},p=new ES("AG Grid",()=>t.debug),f=new ES("Context",()=>u.debug),g=new fF(u,f),m=g.getBean("beans");this.registerModuleUserComponents(m,c),this.registerStackComponents(m,c),this.registerControllers(m,c),i(g),m.ctrlsService.whenReady(()=>{this.setColumnsAndData(m),this.dispatchGridReadyEvent(m);const v=ie.isRegistered(te.EnterpriseCoreModule,l);p.log(`initialised successfully, enterprise = ${v}`)}),s&&s(g)}registerControllers(e,t){t.forEach(i=>{i.controllers&&i.controllers.forEach(s=>e.ctrlsFactory.register(s))})}registerStackComponents(e,t){const i=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(e,t){const i=e?e.modules:null,s=ie.getRegisteredModules(t),n=[],o={},a=(l,c,d)=>{(u=>{o[u.moduleName]||(o[u.moduleName]=!0,n.push(u),ie.register(u,l,d))})(c),c.dependantModules&&c.dependantModules.forEach(u=>a(l,u,d))};return i&&i.forEach(l=>a(!0,l,t)),s&&s.forEach(l=>a(!ie.isPackageBased(),l,void 0)),n}registerModuleUserComponents(e,t){this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]).forEach(s=>{e.userComponentRegistry.registerDefaultComponent(s.componentName,s.componentClass)})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;Se(s)&&(s=new pG);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:_s},{componentName:"AgRadioButton",componentClass:qw},{componentName:"AgToggleButton",componentClass:bb},{componentName:"AgInputTextField",componentClass:Hl},{componentName:"AgInputTextArea",componentClass:oG},{componentName:"AgInputNumberField",componentClass:Qw},{componentName:"AgInputDateField",componentClass:rG},{componentName:"AgInputRange",componentClass:aG},{componentName:"AgSelect",componentClass:Oo},{componentName:"AgSlider",componentClass:_i},{componentName:"AgGridBody",componentClass:Ao},{componentName:"AgHeaderRoot",componentClass:Tg},{componentName:"AgSortIndicator",componentClass:cn},{componentName:"AgPagination",componentClass:fn},{componentName:"AgOverlayWrapper",componentClass:Rr},{componentName:"AgGroupComponent",componentClass:At},{componentName:"AgPanel",componentClass:Un},{componentName:"AgDialog",componentClass:Ef},{componentName:"AgRowContainer",componentClass:Od},{componentName:"AgFakeHorizontalScroll",componentClass:Ma},{componentName:"AgFakeVerticalScroll",componentClass:Gg}];const i=this.extractModuleEntity(e,s=>s.agStackComponents?s.agStackComponents:[]);return t=t.concat(i),t}createBeansList(e="clientSide",t,i){const s=t.filter(c=>!c.rowModel||c.rowModel===e),n={clientSide:te.ClientSideRowModelModule,infinite:te.InfiniteRowModelModule,serverSide:te.ServerSideRowModelModule,viewport:te.ViewportRowModelModule};if(!n[e]){console.error("AG Grid: could not find row model for rowModelType = "+e);return}if(!ie.assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const o=[Oe,cu,RS,Mf,Df,Ke,vf,Ev,Of,SS,vl,lu,Sf,AS,eu,wf,Cf,uS,nn,mr,yl,ed,gr,ri,qc,bf,on,Sv,Qh,bS,Qc,ls,bv,wl,wv,hS,Jc,Zc,De,xf,oi,ou,Af,Sl,Cv,yv,yf,Rf,xS,Tf,xv,ff,au,ru,jn,pS,TS,_f,Ca,du,Rv,If,hu,OS,bl,Tv],a=this.extractModuleEntity(s,c=>c.beans?c.beans:[]);o.push(...a);const l=[];return o.forEach(c=>{l.indexOf(c)<0&&l.push(c)}),l}extractModuleEntity(e,t){return[].concat(...e.map(t))}setColumnsAndData(e){const t=e.gridOptionsService.get("columnDefs");e.columnModel.setColumnDefs(t||[],"gridInitializing"),e.rowModel.start()}dispatchGridReadyEvent(e){const t={type:E.EVENT_GRID_READY};e.eventService.dispatchEvent(t)}}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const LG={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","doughnut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],histogramGroup:["histogram"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},my=["chartSettings","chartData","chartFormat"],Vx=["chartUnlink","chartLink","chartDownload"],qm={settings:"chartSettings",data:"chartData",format:"chartFormat"};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Hx;(function(r){r.InsideBase="insideBase",r.InsideEnd="insideEnd",r.Center="center",r.OutsideEnd="outsideEnd"})(Hx||(Hx={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.0.2
 * @link https://www.ag-grid.com/
 * @license MIT
 */const Ku=typeof global>"u"?{}:global;Ku.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Ku.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Ku.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Ku.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Ku.Node=typeof Node>"u"?{}:Node;Ku.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;class sl{constructor(e,t,i,s,n,o){this.nextId=0,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=t,this.eventService=i,this.columnModel=s,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=sl.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}postConstruct(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingTreeData=this.gridOptionsService.isTreeData(),this.doingMasterDetail=this.gridOptionsService.isMasterDetail()}getCopyOfNodesMap(){return A.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(s=>this.createNode(s,this.rootNode,sl.TOP_LEVEL)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){const i={remove:[],update:[],add:[]},s=[];return this.executeRemove(e,i,s),this.executeUpdate(e,i,s),this.executeAdd(e,i),this.updateSelection(s,"rowDataChanged"),t&&A.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),i}updateSelection(e,t){const i=e.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i){const s={type:E.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(s)}}executeAdd(e,t){var i;const{add:s,addIndex:n}=e;if(A.missingOrEmpty(s))return;const o=s.map(a=>this.createNode(a,this.rootNode,sl.TOP_LEVEL));if(typeof n=="number"&&n>=0){const{allLeafChildren:a}=this.rootNode,l=a.length;let c=n;if(this.doingTreeData&&n>0&&l>0){for(let u=0;u<l;u++)if(((i=a[u])===null||i===void 0?void 0:i.rowIndex)==n-1){c=u+1;break}}const d=a.slice(0,c),h=a.slice(c,a.length);this.rootNode.allLeafChildren=[...d,...o,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),t.add=o}executeRemove(e,t,i){const{remove:s}=e;if(A.missingOrEmpty(s))return;const n={};s.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&i.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],t.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!n[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,i){const{update:s}=e;A.missingOrEmpty(s)||s.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&i.push(o),this.setMasterForRow(o,n,sl.TOP_LEVEL,!1),t.update.push(o))})}lookupRowNode(e){const t=this.gridOptionsService.getCallback("getRowId");let i;if(t){const s=t({data:e,level:0});if(i=this.allNodesMap[s],!i)return console.error(`AG Grid: could not find row id=${s}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren.find(s=>s.data===e),!i)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i){const s=new oe(this.beans);return s.group=!1,this.setMasterForRow(s,e,i,!0),t&&!this.suppressParentsInRowNodes&&(s.parent=t),s.level=i,s.setDataAndId(e,this.nextId.toString()),this.allNodesMap[s.id]&&console.warn(`AG Grid: duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(e,t,i,s){if(this.doingTreeData)e.setMaster(!1),s&&(e.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?e.setMaster(this.isRowMasterFunc(t)):e.setMaster(!0):e.setMaster(!1),s){const n=this.columnModel.getRowGroupColumns(),o=n?n.length:0,a=i+o;e.expanded=e.master?this.isExpanded(a):!1}}isExpanded(e){const t=this.gridOptionsService.getNum("groupDefaultExpanded");return t===-1?!0:e<t}}sl.TOP_LEVEL=0;sl.ROOT_NODE_ID="ROOT_NODE_ID";var Gs=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Xo;(function(r){r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes"})(Xo||(Xo={}));let cs=class extends j{constructor(){super(...arguments),this.onRowHeightChanged_debounced=A.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[]}init(){const e=this.refreshModel.bind(this,{step:st.EVERYTHING}),t=!this.gridOptionsService.is("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:st.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:st.PIVOT})),this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));const s=this.refreshModel.bind(this,{step:st.MAP,keepRenderedRows:!0,animate:t});this.addManagedPropertyListener("groupRemoveSingleChildren",s),this.addManagedPropertyListener("groupRemoveLowestSingleChildren",s),this.rootNode=new oe(this.beans),this.nodeManager=new sl(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}start(){const e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),c=Math.max(a,i),d=Math.min(l,s);for(let h=c;h<=d;h++){const u=this.getRow(h);if(u.rowHeightEstimated){const p=this.gridOptionsService.getRowHeightForNode(u);u.setRowHeight(p.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=this.gridOptionsService.isDomLayout("normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(o.id!=null&&i.add(o.id),o.rowHeight==null){const a=this.gridOptionsService.getRowHeightForNode(o,s,e);o.setRowHeight(a.height,a.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},n=o=>{if(s(o),s(o.detailNode),s(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const a=o.level==-1;i&&!a&&!o.expanded||o.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),o=!this.gridOptionsService.is("suppressAnimationFrame");return n===e[0]?!1:(e.forEach(a=>{A.removeFromArray(this.rootNode.allLeafChildren,a)}),e.forEach((a,l)=>{A.insertIntoArray(this.rootNode.allLeafChildren,a,Math.max(s+i,0)+l)}),this.refreshModel({step:st.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),!0)}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||s===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const n=this.getHighlightPosition(t,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(n),this.lastHighlightedRow=s}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return ca.Below}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?ca.Above:ca.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(A.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:st.MAP,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gridOptionsService.isAnimateRows(),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?st.FILTER:st.FILTER_AGGREGATES;this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:st.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:st.PIVOT}):this.refreshModel({step:st.AGGREGATE})}createChangePath(e){const t=A.missingOrEmpty(e),i=new UC(!1,this.rootNode);return(t||this.gridOptionsService.isTreeData())&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t=st.EVERYTHING;const i={everything:st.EVERYTHING,group:st.EVERYTHING,filter:st.FILTER,map:st.MAP,aggregate:st.AGGREGATE,sort:st.SORT,pivot:st.PIVOT};if(A.exists(e)&&(t=i[e]),A.missing(t)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gridOptionsService.is("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(t.step){case st.EVERYTHING:this.doRowGrouping(t.groupState,t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case st.FILTER:this.doFilter(i);case st.PIVOT:this.doPivot(i);case st.AGGREGATE:this.doAggregate(i);case st.FILTER_AGGREGATES:this.doFilterAggregates(i);case st.SORT:this.doSort(t.rowNodeTransactions,i);case st.MAP:this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s);const n={type:E.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(n)}isEmpty(){const e=A.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return A.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return A.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!t,s=!1;const n=[],o=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(a=>{if(s)return;if(i&&(a===t||a===e)&&(s=!0,a.group&&o)){n.push(...a.allLeafChildren);return}if(!i){if(a!==t&&a!==e)return;i=!0}if(!a.group||!o){n.push(a);return}}),n}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(A.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,o=-1;for(;;){const a=Math.floor((t+i)/2),l=this.rowsToDisplay[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?t=a+1:l.rowTop>e&&(i=a-1),n===t&&o===i))return a;n=t,o=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:Xo.Normal,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:Xo.AfterFilter,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:Xo.AfterFilterAndSort,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:Xo.PivotNodes,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){var t;const{nodes:i,callback:s,recursionType:n,includeFooterNodes:o}=e;let{index:a}=e;const l=i[0];o&&(!((t=l==null?void 0:l.parent)===null||t===void 0)&&t.sibling)&&i.push(l.parent.sibling);for(let c=0;c<i.length;c++){const d=i[c];if(s(d,a++),d.hasChildren()&&!d.footer){let h=null;switch(n){case Xo.Normal:h=d.childrenAfterGroup;break;case Xo.AfterFilter:h=d.childrenAfterAggFilter;break;case Xo.AfterFilterAndSort:h=d.childrenAfterSort;break;case Xo.PivotNodes:h=d.leafGroup?null:d.childrenAfterSort;break}h&&(a=this.recursivelyWalkNodesAndCallback({nodes:[...h],callback:s,recursionType:n,index:a,includeFooterNodes:o}))}}return a}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gridOptionsService.isTreeData(),i=this.columnModel.isPivotActive(),s=a=>{a&&a.forEach(l=>{const c=()=>{l.expanded=e,s(l.childrenAfterGroup)};if(t){A.exists(l.childrenAfterGroup)&&c();return}if(i){!l.leafGroup&&c();return}l.group&&c()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:st.MAP});const n=e?"expandAll":"collapseAll",o={type:E.EVENT_EXPAND_COLLAPSE_ALL,source:n};this.eventService.dispatchEvent(o)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s,n){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:i,changedPath:s}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:s,afterColumnsChanged:n}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",s)){const a={type:E.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(a)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()}restoreGroupState(e){e&&A.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(t,i)=>{typeof e[i]=="boolean"&&(t.expanded=e[i])})}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getGroupState(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;const e={};return A.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(t,i)=>e[i]=t.expanded),e}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(oe.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){const t=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");const i={type:E.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:st.EVERYTHING,groupState:t,newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{const n=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);t.push(n),s.callback&&e.push(s.callback.bind(null,n)),typeof s.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0){const s={type:E.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,t),s=typeof e.addIndex=="number";return this.commonUpdateRowData([i],t,s),i}createRowNodeOrder(){if(this.gridOptionsService.is("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){const s=this.rootNode.allLeafChildren[i];t[s.id]=i}return t}commonUpdateRowData(e,t,i){const s=!this.gridOptionsService.is("suppressAnimationFrame");i&&(t=this.createRowNodeOrder()),this.refreshModel({step:st.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}),this.filterManager.onNewRowsLoaded("rowDataUpdated");const n={type:E.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(n)}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:st.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}};Gs([S("columnModel")],cs.prototype,"columnModel",void 0);Gs([S("selectionService")],cs.prototype,"selectionService",void 0);Gs([S("filterManager")],cs.prototype,"filterManager",void 0);Gs([S("valueCache")],cs.prototype,"valueCache",void 0);Gs([S("beans")],cs.prototype,"beans",void 0);Gs([S("filterStage")],cs.prototype,"filterStage",void 0);Gs([S("sortStage")],cs.prototype,"sortStage",void 0);Gs([S("flattenStage")],cs.prototype,"flattenStage",void 0);Gs([Ne("groupStage")],cs.prototype,"groupStage",void 0);Gs([Ne("aggregationStage")],cs.prototype,"aggregationStage",void 0);Gs([Ne("pivotStage")],cs.prototype,"pivotStage",void 0);Gs([Ne("filterAggregatesStage")],cs.prototype,"filterAggregatesStage",void 0);Gs([U],cs.prototype,"init",null);cs=Gs([ee("rowModel")],cs);var TA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Dv=class extends j{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};TA([S("filterService")],Dv.prototype,"filterService",void 0);Dv=TA([ee("filterStage")],Dv);var ZC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let uu=class extends j{execute(e){const t=this.sortController.getSortOptions(),i=A.exists(t)&&t.length>0,s=i&&A.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),n=t.some(o=>!!this.columnModel.getGroupDisplayColumnForGroup(o.column.getId()));this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}};ZC([S("sortService")],uu.prototype,"sortService",void 0);ZC([S("sortController")],uu.prototype,"sortController",void 0);ZC([S("columnModel")],uu.prototype,"columnModel",void 0);uu=ZC([ee("sortStage")],uu);var Ib=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Lf=class extends j{execute(e){const t=e.rowNode,i=[],s={value:0},n=this.columnModel.isPivotMode(),o=n&&t.leafGroup,a=o?[t]:t.childrenAfterSort;this.recursivelyAddToRowsToDisplay(a,i,s,n,0);const l=i.length>0;return!o&&l&&this.gridOptionsService.is("groupIncludeTotalFooter")&&(t.createFooter(),this.addRowNodeToRowsToDisplay(t.sibling,i,s,0)),i}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(A.missingOrEmpty(e))return;const o=this.gridOptionsService.is("groupHideOpenParents"),a=this.gridOptionsService.is("groupRemoveSingleChildren"),l=!a&&this.gridOptionsService.is("groupRemoveLowestSingleChildren");for(let c=0;c<e.length;c++){const d=e[c],h=d.hasChildren(),u=s&&!h,p=a&&h&&d.childrenAfterGroup.length===1,f=l&&h&&d.leafGroup&&d.childrenAfterGroup.length===1,g=s&&d.leafGroup,m=o&&d.expanded&&!d.master&&!g;if(!u&&!m&&!p&&!f&&this.addRowNodeToRowsToDisplay(d,t,i,n),!(s&&d.leafGroup)){if(h){const C=p||f;if(d.expanded||C){const y=C?n:n+1;this.recursivelyAddToRowsToDisplay(d.childrenAfterSort,t,i,s,y),this.gridOptionsService.is("groupIncludeFooter")&&this.addRowNodeToRowsToDisplay(d.sibling,t,i,y)}}else if(d.master&&d.expanded){const C=this.createDetailNode(d);this.addRowNodeToRowsToDisplay(C,t,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s){const n=this.gridOptionsService.isGroupMultiAutoColumn();t.push(e),e.setUiLevel(n?0:s)}createDetailNode(e){if(A.exists(e.detailNode))return e.detailNode;const t=new oe(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,A.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};Ib([S("columnModel")],Lf.prototype,"columnModel",void 0);Ib([S("beans")],Lf.prototype,"beans",void 0);Lf=Ib([ee("flattenStage")],Lf);var JC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let pu=class extends j{init(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")}sort(e,t,i,s,n,o){const a=this.gridOptionsService.is("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some(u=>u.isRowGroupActive());let c={};i&&s&&(c=this.calculateDirtyNodes(s));const d=this.columnModel.isPivotMode(),h=u=>{this.pullDownGroupDataForHideOpenParents(u.childrenAfterAggFilter,!0);const p=d&&u.leafGroup;if(a&&l&&!u.leafGroup&&!o){const g=u.childrenAfterAggFilter.slice(0);if(u.childrenAfterSort){const m={};u.childrenAfterSort.forEach((v,C)=>{m[v.id]=C}),g.sort((v,C)=>{var y,R;return((y=m[v.id])!==null&&y!==void 0?y:0)-((R=m[C.id])!==null&&R!==void 0?R:0)})}u.childrenAfterSort=g}else!t||p?u.childrenAfterSort=u.childrenAfterAggFilter.slice(0):i?u.childrenAfterSort=this.doDeltaSort(u,c,n,e):u.childrenAfterSort=this.rowNodeSorter.doFullSort(u.childrenAfterAggFilter,e);if(u.sibling&&(u.sibling.childrenAfterSort=u.childrenAfterSort),this.updateChildIndexes(u),this.postSortFunc){const g={nodes:u.childrenAfterSort};this.postSortFunc(g)}};n&&n.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,s);const a={},l=[];n.forEach(u=>{t[u.id]||!i.canSkip(u)?l.push(u):a[u.id]=!0});const c=o.filter(u=>a[u.id]),d=(u,p)=>({currentPos:p,rowNode:u}),h=l.map(d).sort((u,p)=>this.rowNodeSorter.compareRowNodes(s,u,p));return this.mergeSortedArrays(s,h,c.map(d)).map(({rowNode:u})=>u)}mergeSortedArrays(e,t,i){const s=[];let n=0,o=0;for(;n<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?s.push(t[n++]):s.push(i[o++]);for(;n<t.length;)s.push(t[n++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(A.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,o=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.is("groupHideOpenParents"))return;if(this.gridOptionsService.isTreeData()){const i="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return A.doOnce(()=>console.warn(i),"sortService.hideOpenParentsWithTreeData"),!1}const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gridOptionsService.is("groupHideOpenParents")||A.missing(e)||e.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(n=>{const o=n.getColDef().showRowGroup;if(typeof o!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=o,l=this.columnModel.getPrimaryColumn(a);if(l!==i.rowGroupColumn)if(t)i.setGroupValue(n.getId(),void 0);else{const d=i.getFirstChildOfFirstChild(l);d&&i.setGroupValue(n.getId(),d.key)}})})}};JC([S("columnModel")],pu.prototype,"columnModel",void 0);JC([S("rowNodeSorter")],pu.prototype,"rowNodeSorter",void 0);JC([U],pu.prototype,"init",null);pu=JC([ee("sortService")],pu);var DA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Ov=class extends j{filter(e){const t=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.filterManager.isExternalFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(o=>{const a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,l=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||l}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(o,a)=>{if(o.childrenAfterGroup)for(let l=0;l<o.childrenAfterGroup.length;l++){const c=o.childrenAfterGroup[l],d=a||this.filterManager.doesRowPassFilter({rowNode:c});c.childrenAfterGroup?s(o.childrenAfterGroup[l],d):i(c,d)}i(o,a)},n=o=>s(o,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.isTreeData()&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")}};DA([S("filterManager")],Ov.prototype,"filterManager",void 0);Ov=DA([ee("filterService")],Ov);var QC=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let fu=class extends j{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel)}isActive(){const e=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.is("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[i,s]=t;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(e){if(A.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const t=this.gridOptionsService.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const i={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),o=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return A.exists(e)&&e.forEach((a,l)=>{const c=t({data:a,level:0}),d=s[c];o&&(o[c]=l),d?(d.data!==a&&i.update.push(a),s[c]=void 0):i.add.push(a)}),A.iterateObject(s,(a,l)=>{l&&i.remove.push(l.data)}),[i,o]}};QC([S("rowModel")],fu.prototype,"rowModel",void 0);QC([S("rowRenderer")],fu.prototype,"rowRenderer",void 0);QC([U],fu.prototype,"postConstruct",null);fu=QC([ee("immutableService")],fu);const FG="30.0.2",NG={version:FG,moduleName:te.ClientSideRowModelModule,rowModel:"clientSide",beans:[cs,Dv,uu,Lf,pu,Ov,fu]};var Lb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ff extends Ht{constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),A.exists(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(A.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new oe(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;this.setDataAndId(i,n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()})}}Lb([S("beans")],Ff.prototype,"beans",void 0);Lb([U],Ff.prototype,"postConstruct",null);Lb([ft],Ff.prototype,"destroyRowNodes",null);var e0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},GG=function(r,e){return function(t,i){e(t,i,r)}};class Kl extends j{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new Ff(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(a=>a!=e),i=(a,l)=>l.getLastAccessed()-a.getLastAccessed();t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,o=Kl.MAX_EMPTY_BLOCKS_TO_KEEP-1;t.forEach((a,l)=>{const c=a.getState()===Ff.STATE_WAITING_TO_LOAD&&l>=o,d=s?l>=n:!1;if(c||d){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const s=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,A.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new Ni;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,s)=>i.getId()-s.getId();return A.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:E.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o=new Ni;A.missing(e)&&(n=!0);let a=!1;return this.getBlocksInOrder().forEach(c=>{if(!a){if(n&&s+1!==c.getId()){a=!0;return}s=c.getId(),c.forEachNode(d=>{const h=d===e||d===t;(n||h)&&i.push(d),h&&(n=!n)},o,this.rowCount)}}),a||n?[]:i}}Kl.MAX_EMPTY_BLOCKS_TO_KEEP=2;e0([S("rowRenderer")],Kl.prototype,"rowRenderer",void 0);e0([S("focusService")],Kl.prototype,"focusService",void 0);e0([GG(0,Ss("loggerFactory"))],Kl.prototype,"setBeans",null);e0([ft],Kl.prototype,"destroyAllBlocks",null);var Yl=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let vr=class extends j{getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(e,t,i,s){return!1}init(){this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){const e="AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";A.doOnce(()=>console.warn(e),"IRM.InitialGroupOrderComparator")}}start(){this.setDatasource(this.gridOptionsService.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,E.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!A.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gridOptionsService.getCallback("getRowId")!=null||this.selectionService.reset(),this.resetCache();const i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}createModelUpdatedEvent(){return{type:E.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new Ni},this.infiniteCache=this.createBean(new Kl(this.cacheParams))}defaultIfInvalid(e,t){return e>0?e:t}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};Yl([S("filterManager")],vr.prototype,"filterManager",void 0);Yl([S("sortController")],vr.prototype,"sortController",void 0);Yl([S("selectionService")],vr.prototype,"selectionService",void 0);Yl([S("rowRenderer")],vr.prototype,"rowRenderer",void 0);Yl([S("rowNodeBlockLoader")],vr.prototype,"rowNodeBlockLoader",void 0);Yl([U],vr.prototype,"init",null);Yl([ft],vr.prototype,"destroyDatasource",null);vr=Yl([ee("rowModel")],vr);const kG="30.0.2",VG={version:kG,moduleName:te.InfiniteRowModelModule,rowModel:"infinite",beans:[vr]};class OA{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}}class AA{constructor(e){this.groupColumns=[];const{columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:o,processCellCallback:a,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d}=e;this.columnModel=t,this.valueService=i,this.gridOptionsService=s,this.valueFormatterService=n,this.valueParserService=o,this.processCellCallback=a,this.processHeaderCallback=l,this.processGroupHeaderCallback=c,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return t??""}extractRowCellValue(e,t,i,s,n){const a=(!this.gridOptionsService.is("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:a,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var s;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(!((s=e.groupData)===null||s===void 0)&&s[t.getId()])return!0;if(e.footer&&e.level===-1){const l=t.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const a=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&a}getHeaderName(e,t){return e?e({column:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});const t=e.footer,i=[e.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,i.push(e.key);const s=i.reverse().join(" -> ");return t?`Total ${s}`:s}processCell(e){var t;const{accumulatedRowIndex:i,rowNode:s,column:n,value:o,processCellCallback:a,type:l}=e;return a?{value:(t=a({accumulatedRowIndex:i,column:n,node:s,value:o,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:l,parseValue:c=>this.valueParserService.parseValue(n,s,c,this.valueService.getValue(n,s)),formatValue:c=>{var d;return(d=this.valueFormatterService.formatValue(n,s,c))!==null&&d!==void 0?d:c}}))!==null&&t!==void 0?t:""}:n.getColDef().useValueFormatterForExport?{value:o??"",valueFormatted:this.valueFormatterService.formatValue(n,s,o)}:{value:o??""}}}class Fb{static download(e,t){const i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}}const Bx=`\r
`;class HG extends AA{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Bx),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var s;t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes((s=n.valueFormatted)!==null&&s!==void 0?s:n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=Bx),this.isFirstLine=!1}}var Xl=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let yo=class extends OA{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})}getMergedParams(e){const t=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"});return Fb.download(this.getFileName(t.fileName),s),i}exportDataAsCsv(e){return this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileName(){return"export.csv"}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:o}=this,{processCellCallback:a,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d,suppressQuotes:h,columnSeparator:u}=e;return new HG({columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:o,processCellCallback:a||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:d||void 0,suppressQuotes:h||!1,columnSeparator:u||","})}isExportSuppressed(){return this.gridOptionsService.is("suppressCsvExport")}};Xl([S("columnModel")],yo.prototype,"columnModel",void 0);Xl([S("valueService")],yo.prototype,"valueService",void 0);Xl([S("gridSerializer")],yo.prototype,"gridSerializer",void 0);Xl([S("gridOptionsService")],yo.prototype,"gridOptionsService",void 0);Xl([S("valueFormatterService")],yo.prototype,"valueFormatterService",void 0);Xl([S("valueParserService")],yo.prototype,"valueParserService",void 0);Xl([U],yo.prototype,"postConstruct",null);yo=Xl([ee("csvCreator")],yo);var ql=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Wc;(function(r){r[r.HEADER_GROUPING=0]="HEADER_GROUPING",r[r.HEADER=1]="HEADER",r[r.BODY=2]="BODY"})(Wc||(Wc={}));let So=class extends j{serialize(e,t={}){const i=this.getColumnsToExport(t.allColumns,t.columnKeys);return A.compose(this.prepareSession(i),this.prependContent(t),this.exportColumnGroups(t,i),this.exportHeaders(t,i),this.processPinnedTopRows(t,i),this.processRows(t,i),this.processPinnedBottomRows(t,i),this.appendContent(t))(e).parse()}processRow(e,t,i,s){const n=t.shouldRowBeSkipped||(()=>!1),o=this.gridOptionsService.context,a=this.gridOptionsService.api,l=this.gridOptionsService.columnApi,c=this.gridOptionsService.is("groupRemoveSingleChildren"),d=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),u=t.rowPositions!=null||!!t.onlySelected,p=this.gridOptionsService.is("groupHideOpenParents")&&!u,f=this.columnModel.isPivotMode()?s.leafGroup:!s.group,g=!!s.footer,m=t.skipGroups||t.skipRowGroups,v=d&&s.leafGroup,C=s.allChildrenCount===1&&(c||v);if(m&&t.skipGroups&&A.doOnce(()=>console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`."),"gridSerializer-skipGroups"),!f&&!g&&(t.skipRowGroups||C||p)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!f&&!g||n({node:s,api:a,columnApi:l,context:o}))return;const b=e.onNewBodyRow(s);if(i.forEach((w,x)=>{b.onColumn(w,x,s)}),t.getCustomContentBelowRow){const w=t.getCustomContentBelowRow({node:s,api:a,columnApi:l,context:o});w&&e.addCustomContent(w)}}appendContent(e){return t=>{const i=e.customFooter||e.appendContent;return i&&(e.customFooter&&A.doOnce(()=>console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead."),"gridSerializer-customFooter"),t.addCustomContent(i)),t}}prependContent(e){return t=>{const i=e.customHeader||e.prependContent;return i&&(e.customHeader&&A.doOnce(()=>console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead."),"gridSerializer-customHeader"),t.addCustomContent(i)),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(e.skipColumnGroupHeaders)e.columnGroups&&A.doOnce(()=>console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default."),"gridSerializer-columnGroups");else{const s=new XD,n=this.displayedGroupCreator.createDisplayedGroups(t,this.columnModel.getGridBalancedTree(),s,null);this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipHeader&&!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,o)=>{s.onColumn(n,o,void 0)})}else e.skipHeader&&A.doOnce(()=>console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`."),"gridSerializer-skipHeader");return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=s.getType(),o=n==="clientSide",a=n==="serverSide",l=!o&&e.onlySelected,c=this.processRow.bind(this,i,e,t),{exportedRows:d="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(h=>h.rowPinned==null).sort((h,u)=>h.rowIndex-u.rowIndex).map(h=>s.getRow(h.rowIndex)).forEach(c);else if(this.columnModel.isPivotMode())o?s.forEachPivotNode(c,!0):s.forEachNode(c);else if(e.onlySelectedAllPages||l){const h=this.selectionService.getSelectedNodes();this.replicateSortedOrder(h),h.forEach(c)}else d==="all"?s.forEachNode(c):o?s.forEachNodeAfterFilterAndSort(c,!0):a?s.forEachNodeAfterFilterAndSort(c):s.forEachNode(c);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var o,a,l,c;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((o=s.parent)===null||o===void 0?void 0:o.id)===((a=n.parent)===null||a===void 0?void 0:a.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:(l=s.rowIndex)!==null&&l!==void 0?l:-1},{rowNode:n,currentPos:(c=n.rowIndex)!==null&&c!==void 0?c:-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(e=!1,t){const i=this.columnModel.isPivotMode();return t&&t.length?this.columnModel.getGridColumns(t):e&&!i?(this.gridOptionsService.isTreeData()?this.columnModel.getGridColumns([ma]):[]).concat(this.columnModel.getAllGridColumns()||[]):this.columnModel.getAllDisplayedColumns()}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const o=n;o.getChildren&&o.getChildren().forEach(a=>s.push(a))}),e.length>0&&e[0]instanceof vt&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(o=>{const a=o;let l;i?l=i({columnGroup:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):l=this.columnModel.getDisplayNameForColumnGroup(a,"header");const c=a.getLeafColumns().reduce((d,h,u,p)=>{let f=A.last(d);return h.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[u],d.push(f)):f&&f[1]==null&&(f[1]=u-1),u===p.length-1&&f&&f[1]==null&&(f[1]=u),d},[]);s.onColumn(a,l||"",n++,a.getLeafColumns().length-1,c)})}};ql([S("displayedGroupCreator")],So.prototype,"displayedGroupCreator",void 0);ql([S("columnModel")],So.prototype,"columnModel",void 0);ql([S("rowModel")],So.prototype,"rowModel",void 0);ql([S("pinnedRowModel")],So.prototype,"pinnedRowModel",void 0);ql([S("selectionService")],So.prototype,"selectionService",void 0);ql([S("rowNodeSorter")],So.prototype,"rowNodeSorter",void 0);ql([S("sortController")],So.prototype,"sortController",void 0);So=ql([ee("gridSerializer")],So);const BG="30.0.2",Nb={version:BG,moduleName:te.CsvExportModule,beans:[yo,So]},Am=`\r
`;class PS{static createHeader(e={}){const t="<?",i="?>",s=["version"];e.version||(e.version="1.0"),e.encoding&&s.push("encoding"),e.standalone&&s.push("standalone");const n=s.map(o=>`${o}="${e[o]}"`).join(" ");return`${t}xml ${n} ${i}`}static createXml(e,t){let i="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(n=>{Object.keys(n.map).forEach(o=>{i+=this.returnAttributeIfPopulated(n.prefix+o,n.map[o],t)})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(n=>{i+=this.returnAttributeIfPopulated(n,e.properties.rawMap[n],t)}));let s="<"+e.name+i;return!e.children&&e.textNode==null?s+"/>"+Am:e.textNode!=null?s+">"+e.textNode+"</"+e.name+">"+Am:(s+=">"+Am,e.children&&e.children.forEach(n=>{s+=this.createXml(n,t)}),s+"</"+e.name+">"+Am)}static returnAttributeIfPopulated(e,t,i){if(!t&&t!==""&&t!==0)return"";let s=t;return typeof t=="boolean"&&i&&(s=i(t)),` ${e}="${s}"`}}const WG=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);class pi{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1})}static addFile(e,t,i=!1){this.files.push({path:e,created:new Date,content:t,isBase64:i})}static getContent(e="application/zip"){const t=this.buildFileStream(),i=this.buildUint8Array(t);return this.clearStream(),new Blob([i],{type:e})}static clearStream(){this.folders=[],this.files=[]}static buildFileStream(e=""){const t=this.folders.concat(this.files),i=t.length;let s="",n=0,o=0;for(const l of t){const{fileHeader:c,folderHeader:d,content:h}=this.getHeader(l,n);n+=c.length+h.length,o+=d.length,e+=c+h,s+=d}const a=this.buildFolderEnd(i,o,n);return e+s+a}static getHeader(e,t){const{content:i,path:s,created:n,isBase64:o}=e,{utf8_encode:a,decToHex:l}=A,c=a(s),d=c!==s,h=this.convertTime(n),u=this.convertDate(n);let p="";if(d){const y=l(1,1)+l(this.getFromCrc32Table(c),4)+c;p="up"+l(y.length,2)+y}const{size:f,content:g}=i?this.getConvertedContent(i,o):{size:0,content:""},m=`
\0`+(d?"\0\b":"\0\0")+"\0\0"+l(h,2)+l(u,2)+l(f?this.getFromCrc32Table(g):0,4)+l(f,4)+l(f,4)+l(c.length,2)+l(p.length,2),v="PK"+m+c+p,C="PK\0"+m+"\0\0\0\0\0\0"+(i?"\0\0\0\0":"\0\0\0")+l(t,4)+c+p;return{fileHeader:v,folderHeader:C,content:g||""}}static getConvertedContent(e,t=!1){return t&&(e=e.split(";base64,")[1]),e=t?atob(e):e,{size:e.length,content:e}}static buildFolderEnd(e,t,i){const{decToHex:s}=A;return"PK\0\0\0\0"+s(e,2)+s(e,2)+s(t,4)+s(i,4)+"\0\0"}static buildUint8Array(e){const t=new Uint8Array(e.length);for(let i=0;i<t.length;i++)t[i]=e.charCodeAt(i);return t}static getFromCrc32Table(e){if(!e.length)return 0;const t=e.length,i=new Uint8Array(t);for(let l=0;l<t;l++)i[l]=e.charCodeAt(l);let s=-1,n=0,o=0,a=0;for(let l=0;l<t;l++)n=i[l],o=(s^n)&255,a=WG[o],s=s>>>8^a;return s^-1}static convertTime(e){let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t}static convertDate(e){let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t}}pi.folders=[];pi.files=[];const PA=[NG,VG,Nb];ie.registerModules(PA);/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.2
          * @link https://www.ag-grid.com/
          * @license Commercial
          */class UG{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,t){let i=e[0],s=e[1],n=e[2],o=e[3];i=this.ff(i,s,n,o,t[0],7,-680876936),o=this.ff(o,i,s,n,t[1],12,-389564586),n=this.ff(n,o,i,s,t[2],17,606105819),s=this.ff(s,n,o,i,t[3],22,-1044525330),i=this.ff(i,s,n,o,t[4],7,-176418897),o=this.ff(o,i,s,n,t[5],12,1200080426),n=this.ff(n,o,i,s,t[6],17,-1473231341),s=this.ff(s,n,o,i,t[7],22,-45705983),i=this.ff(i,s,n,o,t[8],7,1770035416),o=this.ff(o,i,s,n,t[9],12,-1958414417),n=this.ff(n,o,i,s,t[10],17,-42063),s=this.ff(s,n,o,i,t[11],22,-1990404162),i=this.ff(i,s,n,o,t[12],7,1804603682),o=this.ff(o,i,s,n,t[13],12,-40341101),n=this.ff(n,o,i,s,t[14],17,-1502002290),s=this.ff(s,n,o,i,t[15],22,1236535329),i=this.gg(i,s,n,o,t[1],5,-165796510),o=this.gg(o,i,s,n,t[6],9,-1069501632),n=this.gg(n,o,i,s,t[11],14,643717713),s=this.gg(s,n,o,i,t[0],20,-373897302),i=this.gg(i,s,n,o,t[5],5,-701558691),o=this.gg(o,i,s,n,t[10],9,38016083),n=this.gg(n,o,i,s,t[15],14,-660478335),s=this.gg(s,n,o,i,t[4],20,-405537848),i=this.gg(i,s,n,o,t[9],5,568446438),o=this.gg(o,i,s,n,t[14],9,-1019803690),n=this.gg(n,o,i,s,t[3],14,-187363961),s=this.gg(s,n,o,i,t[8],20,1163531501),i=this.gg(i,s,n,o,t[13],5,-1444681467),o=this.gg(o,i,s,n,t[2],9,-51403784),n=this.gg(n,o,i,s,t[7],14,1735328473),s=this.gg(s,n,o,i,t[12],20,-1926607734),i=this.hh(i,s,n,o,t[5],4,-378558),o=this.hh(o,i,s,n,t[8],11,-2022574463),n=this.hh(n,o,i,s,t[11],16,1839030562),s=this.hh(s,n,o,i,t[14],23,-35309556),i=this.hh(i,s,n,o,t[1],4,-1530992060),o=this.hh(o,i,s,n,t[4],11,1272893353),n=this.hh(n,o,i,s,t[7],16,-155497632),s=this.hh(s,n,o,i,t[10],23,-1094730640),i=this.hh(i,s,n,o,t[13],4,681279174),o=this.hh(o,i,s,n,t[0],11,-358537222),n=this.hh(n,o,i,s,t[3],16,-722521979),s=this.hh(s,n,o,i,t[6],23,76029189),i=this.hh(i,s,n,o,t[9],4,-640364487),o=this.hh(o,i,s,n,t[12],11,-421815835),n=this.hh(n,o,i,s,t[15],16,530742520),s=this.hh(s,n,o,i,t[2],23,-995338651),i=this.ii(i,s,n,o,t[0],6,-198630844),o=this.ii(o,i,s,n,t[7],10,1126891415),n=this.ii(n,o,i,s,t[14],15,-1416354905),s=this.ii(s,n,o,i,t[5],21,-57434055),i=this.ii(i,s,n,o,t[12],6,1700485571),o=this.ii(o,i,s,n,t[3],10,-1894986606),n=this.ii(n,o,i,s,t[10],15,-1051523),s=this.ii(s,n,o,i,t[1],21,-2054922799),i=this.ii(i,s,n,o,t[8],6,1873313359),o=this.ii(o,i,s,n,t[15],10,-30611744),n=this.ii(n,o,i,s,t[6],15,-1560198380),s=this.ii(s,n,o,i,t[13],21,1309151649),i=this.ii(i,s,n,o,t[4],6,-145523070),o=this.ii(o,i,s,n,t[11],10,-1120210379),n=this.ii(n,o,i,s,t[2],15,718787259),s=this.ii(s,n,o,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(s,e[1]),e[2]=this.add32(n,e[2]),e[3]=this.add32(o,e[3])}cmn(e,t,i,s,n,o){return t=this.add32(this.add32(t,e),this.add32(s,o)),this.add32(t<<n|t>>>32-n,i)}ff(e,t,i,s,n,o,a){return this.cmn(t&i|~t&s,e,t,n,o,a)}gg(e,t,i,s,n,o,a){return this.cmn(t&s|i&~s,e,t,n,o,a)}hh(e,t,i,s,n,o,a){return this.cmn(t^i^s,e,t,n,o,a)}ii(e,t,i,s,n,o,a){return this.cmn(i^(t|~s),e,t,n,o,a)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=e.length;s+=64)this.md5cycle(i,this.md5blk(e.substring(s-64,s)));e=e.substring(s-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<e.length;s++)n[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,n),s=0;s<16;s++)n[s]=0;return n[14]=t*8,this.md5cycle(i,n),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=t[e>>s*8+4&15]+t[e>>s*8&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}}function Wx(r){return r==null||r.length===0}function jG(r,e=!1){return r!=null&&(r!==""||e)}class Dt{constructor(e){this.watermarkMessage=void 0,this.document=e,this.md5=new UG,this.md5.init()}validateLicense(){if(Wx(Dt.licenseKey))(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey();else if(Dt.licenseKey.length>32)if(Dt.licenseKey.indexOf("For_Trialing_ag-Grid_Only")!==-1)this.outputInvalidLicenseKey();else{const{md5:e,license:t,version:i,isTrial:s}=Dt.extractLicenseComponents(Dt.licenseKey);e===this.md5.md5(t)?jG(i)&&i?this.validateLicenseKeyForVersion(i,!!s,t):this.validateLegacyKey(t):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()}static extractExpiry(e){const t=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(Dt.decode(t),10))}static extractLicenseComponents(e){let t=e.replace(/[\u200B-\u200D\uFEFF]/g,"");t=t.replace(/\r?\n|\r/g,"");const i=t.length-32,s=t.substring(i),n=t.substring(0,i),[o,a]=Dt.extractBracketedInformation(t);return{md5:s,license:n,version:o,isTrial:a}}getLicenseDetails(e){const{md5:t,license:i,version:s,isTrial:n}=Dt.extractLicenseComponents(e);let o=t===this.md5.md5(i)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,a=null,l=null;return o&&(l=Dt.extractExpiry(i),o=!isNaN(l.getTime()),n&&(a=l<new Date)),{licenseKey:e,valid:o,expiry:o?Dt.formatDate(l):null,version:s||"legacy",isTrial:n,trialExpired:a}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Wx(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const t=(this.document.defaultView||window).location,{hostname:i=""}=t;return i}isForceWatermark(){const t=(this.document.defaultView||window).location,{pathname:i}=t;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=e.getDate(),s=e.getMonth(),n=e.getFullYear();return i+" "+t[s]+" "+n}static getGridReleaseDate(){return new Date(parseInt(Dt.decode(Dt.RELEASE_INFORMATION),10))}static decode(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i="",s,n,o,a,l,c,d,h=0;const u=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<u.length;)a=t.indexOf(u.charAt(h++)),l=t.indexOf(u.charAt(h++)),c=t.indexOf(u.charAt(h++)),d=t.indexOf(u.charAt(h++)),s=a<<2|l>>4,n=(l&15)<<4|c>>2,o=(c&3)<<6|d,i=i+String.fromCharCode(s),c!=64&&(i=i+String.fromCharCode(n)),d!=64&&(i=i+String.fromCharCode(o));return i=Dt.utf8_decode(i),i}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(s&63|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(s&63|128))}return t}static setLicenseKey(e){this.licenseKey=e}static extractBracketedInformation(e){const t=e.split("[").filter(function(n){return n.indexOf("]")>-1}).map(function(n){return n.split("]")[0]});if(!t||t.length===0)return[null,null];const i=t.filter(n=>n==="TRIAL").length===1;return[t.filter(n=>n.indexOf("v")===0).map(n=>n.replace(/^v/,""))[0],i]}validateLicenseKeyForVersion(e,t,i){e==="2"&&(t?this.validateForTrial(i):this.validateLegacyKey(i))}validateLegacyKey(e){const t=Dt.getGridReleaseDate(),i=Dt.extractExpiry(e);let s=!1,n=!1;if(isNaN(i.getTime())||(s=!0,n=t<i),!s)this.outputInvalidLicenseKey();else if(!n){const o=Dt.formatDate(i),a=Dt.formatDate(t);this.outputIncompatibleVersion(o,a)}}validateForTrial(e){const t=Dt.extractExpiry(e),i=new Date;let s=!1,n=!1;if(isNaN(t.getTime())||(s=!0,n=t>i),!s)this.outputInvalidLicenseKey();else if(!n){const o=Dt.formatDate(t);this.outputExpiredTrialKey(o)}}outputInvalidLicenseKey(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error(`* Your license for AG Grid Enterprise expired on ${e}.                                                *`),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"}outputIncompatibleVersion(e,t){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error(`* license end date. The license key that you have expires on ${e}, however the version of AG Grid you    *`),console.error(`* are trying to use was released on ${t}.                                                               *`),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"}}Dt.RELEASE_INFORMATION="MTY4NzEzMDAyMDg0OA==";var MA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Av=class extends j{validateLicense(){this.licenseManager=new Dt(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new Dt(null).getLicenseDetails(e)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){Dt.setLicenseKey(e)}};MA([Ou],Av.prototype,"validateLicense",null);Av=MA([ee("licenseManager")],Av);var Gb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class t0 extends Q{constructor(){super(`<div class="ag-watermark">
                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
            </div>`)}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}Gb([S("licenseManager")],t0.prototype,"licenseManager",void 0);Gb([G("eLicenseTextRef")],t0.prototype,"eLicenseTextRef",void 0);Gb([U],t0.prototype,"postConstruct",null);const zG="30.0.2",Wi={version:zG,moduleName:te.EnterpriseCoreModule,beans:[Av],agStackComponents:[{componentName:"AgWatermark",componentClass:t0}]};var Ui=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},MS;const vy="paste",Cy="dragCopy",Ux="clipboard";var Rc;(function(r){r[r.CellRange=0]="CellRange",r[r.SelectedRows=1]="SelectedRows",r[r.FocusedCell=2]="FocusedCell"})(Rc||(Rc={}));let ai=MS=class extends j{constructor(){super(...arguments),this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}init(){this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}pasteFromClipboard(){this.logger.log("pasteFromClipboard"),!this.gridOptionsService.is("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(t=>{A.doOnce(()=>{console.warn(t),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")},"clipboardApiError"),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1;const t=i=>{const s=new Date().getTime();s-this.lastPasteOperationTime<50&&(e=!0,i.preventDefault()),this.lastPasteOperationTime=s};this.executeOnTempElement(i=>{i.addEventListener("paste",t),i.focus({preventScroll:!0})},i=>{const s=i.value;e?this.refocusLastFocusedCell():this.processClipboardData(s),i.removeEventListener("paste",t)})}refocusLastFocusedCell(){const e=this.focusService.getFocusedCell();e&&this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const e=this.gridOptionsService.get("clipboardDelimiter");return A.exists(e)?e:"	"}processClipboardData(e){if(e==null)return;let t=MS.stringToArray(e,this.getClipboardDelimiter());const i=this.gridOptionsService.getCallback("processDataFromClipboard");if(i&&(t=i({data:t})),t==null)return;this.gridOptionsService.is("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(t);const s=(n,o,a,l)=>{this.rangeService&&this.rangeService.isMoreThanOneCell()&&!this.hasOnlyOneValueToPaste(t)?this.pasteIntoActiveRange(t,n,o,l):this.pasteStartingFromFocusedCell(t,n,o,a,l)};this.doPasteOperation(s)}static stringToArray(e,t=","){const i=[],s=o=>o==="\r"||o===`
`;let n=!1;if(e==="")return[[""]];for(let o=0,a=0,l=0;l<e.length;l++){const c=e[l-1],d=e[l],h=e[l+1],u=()=>{i[o]||(i[o]=[]),i[o][a]||(i[o][a]="")};if(u(),d==='"'&&(n?h==='"'?(i[o][a]+='"',l++):n=!1:(c===void 0||c===t||s(c))&&(n=!0)),!n&&d!=='"'){if(d===t){a++,u();continue}else if(s(d)){a=0,o++,u(),d==="\r"&&h===`
`&&l++;continue}}i[o][a]+=d}return i}doPasteOperation(e){const t=this.gridOptionsService.api,i=this.gridOptionsService.columnApi,s="clipboard";this.eventService.dispatchEvent({type:E.EVENT_PASTE_START,api:t,columnApi:i,source:s});let n;if(this.clientSideRowModel){const d=this.gridOptionsService.is("aggregateOnlyChangedColumns");n=new UC(d,this.clientSideRowModel.getRootNode())}const o={},a=[],l=this.focusService.getFocusedCell();e(o,a,l,n),n&&this.clientSideRowModel.doAggregate(n),this.rowRenderer.refreshCells(),this.dispatchFlashCells(o),this.fireRowChanged(a),this.refocusLastFocusedCell();const c={type:E.EVENT_PASTE_END,source:s};this.eventService.dispatchEvent(c)}pasteIntoActiveRange(e,t,i,s){const n=this.getRangeSize()%e.length!=0;let o=0,a=0;const l=(c,d,h,u)=>{if(u-o>=e.length){if(n)return;o+=a,a=0}const f=e[u-o];i.push(d);const g=this.gridOptionsService.getCallback("processCellFromClipboard");h.forEach((m,v)=>{if(!m.isCellEditable(d)||m.isSuppressPaste(d))return;v>=f.length&&(v=v%f.length);const C=this.processCell(d,m,f[v],Cy,g,!0);d.setDataValue(m,C,vy),s&&s.addParentNode(d.parent,[m]);const{rowIndex:y,rowPinned:R}=c,b=this.cellPositionUtils.createIdFromValues({rowIndex:y,column:m,rowPinned:R});t[b]=!0}),a++};this.iterateActiveRanges(!1,l)}pasteStartingFromFocusedCell(e,t,i,s,n){if(!s)return;const o={rowIndex:s.rowIndex,rowPinned:s.rowPinned},a=this.columnModel.getDisplayedColumnsStartingAt(s.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,i,t,n):this.pasteMultipleValues(e,o,i,a,t,Ux,n)}isPasteSingleValueIntoRange(e){return this.hasOnlyOneValueToPaste(e)&&this.rangeService!=null&&!this.rangeService.isEmpty()}pasteSingleValueIntoRange(e,t,i,s){const n=e[0][0],o=(a,l,c)=>{t.push(l),c.forEach(d=>this.updateCellValue(l,d,n,i,Ux,s))};this.iterateActiveRanges(!1,o)}hasOnlyOneValueToPaste(e){return e.length===1&&e[0].length===1}copyRangeDown(){if(!this.rangeService||this.rangeService.isEmpty())return;const e=[],t=(i,s,n,o)=>{const a=this.gridOptionsService.getCallback("processCellForClipboard"),l=this.gridOptionsService.getCallback("processCellFromClipboard"),c=(d,h,u)=>{e.length?(s.push(h),u.forEach((p,f)=>{if(!p.isCellEditable(h)||p.isSuppressPaste(h))return;const g=this.processCell(h,p,e[f],Cy,l,!0);h.setDataValue(p,g,vy),o&&o.addParentNode(h.parent,[p]);const{rowIndex:m,rowPinned:v}=d,C=this.cellPositionUtils.createIdFromValues({rowIndex:m,column:p,rowPinned:v});i[C]=!0})):u.forEach(p=>{const f=this.processCell(h,p,this.valueService.getValue(p,h),Cy,a,!1,!0);e.push(f)})};this.iterateActiveRanges(!0,c)};this.doPasteOperation(t)}removeLastLineIfBlank(e){const t=A.last(e);if(t&&t.length===1&&t[0]===""){if(e.length===1)return;A.removeFromArray(e,t)}}fireRowChanged(e){this.gridOptionsService.get("editType")==="fullRow"&&e.forEach(t=>{const i={type:E.EVENT_ROW_VALUE_CHANGED,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.eventService.dispatchEvent(i)})}pasteMultipleValues(e,t,i,s,n,o,a){let l=t;const c=this.clientSideRowModel!=null&&!this.gridOptionsService.is("enableGroupEdit")&&!this.gridOptionsService.isTreeData(),d=()=>{for(;;){if(!l)return null;const h=this.rowPositionUtils.getRowNode(l);if(l=this.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),h==null)return null;if(!(h.detail||h.footer||c&&h.group))return h}};e.forEach(h=>{const u=d();u&&(h.forEach((p,f)=>this.updateCellValue(u,s[f],p,n,o,a)),i.push(u))})}updateCellValue(e,t,i,s,n,o){if(!e||!t||!t.isCellEditable(e)||t.isSuppressPaste(e)||e.group&&t.isValueActive())return;const a=this.processCell(e,t,i,n,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,a,vy);const{rowIndex:l,rowPinned:c}=e,d=this.cellPositionUtils.createIdFromValues({rowIndex:l,column:t,rowPinned:c});s[d]=!0,o&&o.addParentNode(e.parent,[t])}copyToClipboard(e={}){this.copyOrCutToClipboard(e)}cutToClipboard(e={},t="api"){if(this.gridOptionsService.is("suppressCutToClipboard"))return;const i={type:E.EVENT_CUT_START,source:t};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(e,!0);const s={type:E.EVENT_CUT_END,source:t};this.eventService.dispatchEvent(s)}copyOrCutToClipboard(e,t){let{includeHeaders:i,includeGroupHeaders:s}=e;this.logger.log(`copyToClipboard: includeHeaders = ${i}`),i==null&&(i=this.gridOptionsService.is("copyHeadersToClipboard")),s==null&&(s=this.gridOptionsService.is("copyGroupHeadersToClipboard"));const n={includeHeaders:i,includeGroupHeaders:s},o=!this.gridOptionsService.is("suppressCopyRowsToClipboard");let a=null;this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange()?(this.copySelectedRangeToClipboard(n),a=Rc.CellRange):o&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(n),a=Rc.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(n),a=Rc.FocusedCell),t&&a!==null&&this.clearCellsAfterCopy(a)}clearCellsAfterCopy(e){if(this.eventService.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),e===Rc.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(e===Rc.SelectedRows)this.clearSelectedRows();else{const t=this.focusService.getFocusedCell();if(t==null)return;const i=this.rowPositionUtils.getRowNode(t);i&&this.clearCellValue(i,t.column)}this.eventService.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}clearSelectedRows(){const e=this.selectionService.getSelectedNodes(),t=this.columnModel.getAllDisplayedColumns();for(const i of e)for(const s of t)this.clearCellValue(i,s)}clearCellValue(e,t){t.isCellEditable(e)&&e.setDataValue(t,null,"clipboardService")}shouldSkipSingleCellRange(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()}iterateActiveRanges(e,t,i){if(!this.rangeService||this.rangeService.isEmpty())return;const s=this.rangeService.getCellRanges();e?this.iterateActiveRange(s[0],t,i,!0):s.forEach((n,o)=>this.iterateActiveRange(n,t,i,o===s.length-1))}iterateActiveRange(e,t,i,s){if(!this.rangeService)return;let n=this.rangeService.getRangeStartRow(e);const o=this.rangeService.getRangeEndRow(e);i&&e.columns&&i(e.columns);let a=0,l=!1;for(;!l&&n!=null;){const c=this.rowPositionUtils.getRowNode(n);l=this.rowPositionUtils.sameRow(n,o),t(n,c,e.columns,a++,l&&s),n=this.cellNavigationService.getRowBelow(n)}}copySelectedRangeToClipboard(e={}){if(!this.rangeService||this.rangeService.isEmpty())return;const t=this.rangeService.areAllRangesAbleToMerge(),{data:i,cellsToFlash:s}=t?this.buildDataFromMergedRanges(e):this.buildDataFromRanges(e);this.copyDataToClipboard(i),this.dispatchFlashCells(s)}buildDataFromMergedRanges(e){const t=new Set,i=this.rangeService.getCellRanges(),s=new Map,n=[],o={};i.forEach(d=>{d.columns.forEach(p=>t.add(p));const{rowPositions:h,cellsToFlash:u}=this.getRangeRowPositionsAndCellsToFlash(d);h.forEach(p=>{const f=`${p.rowIndex}-${p.rowPinned||"null"}`;s.get(f)||(s.set(f,!0),n.push(p))}),Object.assign(o,u)});const a=this.columnModel.getAllDisplayedColumns(),l=Array.from(t);return l.sort((d,h)=>{const u=a.indexOf(d),p=a.indexOf(h);return u-p}),{data:this.buildExportParams({columns:l,rowPositions:n,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}),cellsToFlash:o}}buildDataFromRanges(e){const t=this.rangeService.getCellRanges(),i=[],s={};return t.forEach(n=>{const{rowPositions:o,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(n);Object.assign(s,a),i.push(this.buildExportParams({columns:n.columns,rowPositions:o,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:i.join(`
`),cellsToFlash:s}}getRangeRowPositionsAndCellsToFlash(e){const t=[],i={},s=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e);let o=s;for(;o&&(t.push(o),e.columns.forEach(a=>{const{rowIndex:l,rowPinned:c}=o,d=this.cellPositionUtils.createIdFromValues({rowIndex:l,column:a,rowPinned:c});i[d]=!0}),!this.rowPositionUtils.sameRow(o,n));)o=this.cellNavigationService.getRowBelow(o);return{rowPositions:t,cellsToFlash:i}}copyFocusedCellToClipboard(e={}){const t=this.focusService.getFocusedCell();if(t==null)return;const i=this.cellPositionUtils.createId(t),s={rowPinned:t.rowPinned,rowIndex:t.rowIndex},n=t.column,o=this.buildExportParams({columns:[n],rowPositions:[s],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(o),this.dispatchFlashCells({[i]:!0})}copySelectedRowsToClipboard(e={}){const{columnKeys:t,includeHeaders:i,includeGroupHeaders:s}=e,n=this.buildExportParams({columns:t,includeHeaders:i,includeGroupHeaders:s});this.copyDataToClipboard(n)}buildExportParams(e){const{columns:t,rowPositions:i,includeHeaders:s=!1,includeGroupHeaders:n=!1}=e,o={columnKeys:t,rowPositions:i,skipColumnHeaders:!s,skipColumnGroupHeaders:!n,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:a=>this.processRowGroupCallback(a),processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(o,!0)}processRowGroupCallback(e){const{node:t}=e,{key:i}=t;let s=i??"";if(e.node.footer){let o="";i&&i.length&&(o=` ${i}`),s=`Total${o}`}const n=this.gridOptionsService.getCallback("processCellForClipboard");if(n){let o=t.rowGroupColumn;return!o&&t.footer&&t.level===-1&&(o=this.columnModel.getRowGroupColumns()[0]),n({value:s,node:t,column:o,type:"clipboard",formatValue:a=>{var l;return(l=this.valueFormatterService.formatValue(o,t,a))!==null&&l!==void 0?l:a},parseValue:a=>this.valueParserService.parseValue(o,t,a,this.valueService.getValue(o,t))})}return s}dispatchFlashCells(e){window.setTimeout(()=>{const t={type:E.EVENT_FLASH_CELLS,cells:e};this.eventService.dispatchEvent(t)},0)}processCell(e,t,i,s,n,o,a){var l;return n?n({column:t,node:e,value:i,type:s,formatValue:d=>{var h;return(h=this.valueFormatterService.formatValue(t,e??null,d))!==null&&h!==void 0?h:d},parseValue:d=>this.valueParserService.parseValue(t,e??null,d,this.valueService.getValue(t,e))}):o&&t.getColDef().useValueParserForImport?this.valueParserService.parseValue(t,e??null,i,this.valueService.getValue(t,e)):a&&t.getColDef().useValueFormatterForExport&&(l=this.valueFormatterService.formatValue(t,e??null,i))!==null&&l!==void 0?l:i}copyDataToClipboard(e){const t=this.gridOptionsService.getCallback("sendToClipboard");if(t){t({data:e});return}if(!this.gridOptionsService.is("suppressClipboardApi")&&navigator.clipboard){navigator.clipboard.writeText(e).catch(s=>{A.doOnce(()=>{console.warn(s),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")},"clipboardApiError"),this.copyDataToClipboardLegacy(e)});return}this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement(t=>{const i=this.gridOptionsService.getDocument(),s=i.activeElement;t.value=e||" ",t.select(),t.focus({preventScroll:!0}),i.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),s!=null&&s.focus!=null&&s.focus({preventScroll:!0})})}executeOnTempElement(e,t){const i=this.gridOptionsService.getDocument(),s=i.createElement("textarea");s.style.width="1px",s.style.height="1px",s.style.top=i.documentElement.scrollTop+"px",s.style.left=i.documentElement.scrollLeft+"px",s.style.position="absolute",s.style.opacity="0";const n=this.gridCtrl.getGui();n.appendChild(s);try{e(s)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}t?window.setTimeout(()=>{t(s),n.removeChild(s)},100):n.removeChild(s)}getRangeSize(){const e=this.rangeService.getCellRanges();let t=0,i=0;return e.length>0&&(t=this.rangeService.getRangeStartRow(e[0]).rowIndex,i=this.rangeService.getRangeEndRow(e[0]).rowIndex),t-i+1}};Ui([S("csvCreator")],ai.prototype,"csvCreator",void 0);Ui([S("loggerFactory")],ai.prototype,"loggerFactory",void 0);Ui([S("selectionService")],ai.prototype,"selectionService",void 0);Ui([Ne("rangeService")],ai.prototype,"rangeService",void 0);Ui([S("rowModel")],ai.prototype,"rowModel",void 0);Ui([S("ctrlsService")],ai.prototype,"ctrlsService",void 0);Ui([S("valueService")],ai.prototype,"valueService",void 0);Ui([S("focusService")],ai.prototype,"focusService",void 0);Ui([S("rowRenderer")],ai.prototype,"rowRenderer",void 0);Ui([S("columnModel")],ai.prototype,"columnModel",void 0);Ui([S("cellNavigationService")],ai.prototype,"cellNavigationService",void 0);Ui([S("cellPositionUtils")],ai.prototype,"cellPositionUtils",void 0);Ui([S("rowPositionUtils")],ai.prototype,"rowPositionUtils",void 0);Ui([S("valueFormatterService")],ai.prototype,"valueFormatterService",void 0);Ui([S("valueParserService")],ai.prototype,"valueParserService",void 0);Ui([U],ai.prototype,"init",null);ai=MS=Ui([ee("clipboardService")],ai);const $G="30.0.2",KG={version:$G,moduleName:te.ClipboardModule,beans:[ai],dependantModules:[Wi,Nb]};var Vg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},sr;(function(r){r[r.EXPANDED=0]="EXPANDED",r[r.COLLAPSED=1]="COLLAPSED",r[r.INDETERMINATE=2]="INDETERMINATE"})(sr||(sr={}));class Bn extends Q{constructor(){super(Bn.TEMPLATE)}postConstruct(){this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",t=>{t.key===W.SPACE&&(t.preventDefault(),this.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(()=>this.onFilterTextChanged()),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));const e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input"))}init(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=A.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=A.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=A.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(sr.EXPANDED)}showOrHideOptions(){const e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,s=this.columnModel.isPrimaryColumnGroupsPresent(),n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search...")),A.setDisplayed(this.eFilterTextField.getGui(),e),A.setDisplayed(this.eSelect.getGui(),t),A.setDisplayed(this.eExpand,i&&s)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=A.debounce(()=>{const e=this.eFilterTextField.getValue();this.dispatchEvent({type:"filterChanged",filterText:e})},Bn.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(e){e.key===W.ENTER&&setTimeout(()=>this.onSelectClicked(),Bn.DEBOUNCE_DELAY)}onSelectClicked(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchEvent({type:this.expandState===sr.EXPANDED?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,A.setDisplayed(this.eExpandChecked,this.expandState===sr.EXPANDED),A.setDisplayed(this.eExpandUnchecked,this.expandState===sr.COLLAPSED),A.setDisplayed(this.eExpandIndeterminate,this.expandState===sr.INDETERMINATE)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}Bn.DEBOUNCE_DELAY=300;Bn.TEMPLATE=`<div class="ag-column-select-header" role="presentation">
            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>
            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
        </div>`;Vg([S("columnModel")],Bn.prototype,"columnModel",void 0);Vg([G("eExpand")],Bn.prototype,"eExpand",void 0);Vg([G("eSelect")],Bn.prototype,"eSelect",void 0);Vg([G("eFilterTextField")],Bn.prototype,"eFilterTextField",void 0);Vg([U],Bn.prototype,"postConstruct",null);class nl{constructor(e,t,i,s=!1,n){this.eventService=new nn,this.displayName=e,this.dept=i,this.group=s,s?(this.columnGroup=t,this.expanded=n,this.children=[]):this.column=t}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:nl.EVENT_EXPANDED_CHANGED}))}setPassesFilter(e){this.passesFilter=e}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}}nl.EVENT_EXPANDED_CHANGED="expandedChanged";var i0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Yu extends Q{constructor(e,t,i){super('<div class="ag-menu"></div>'),this.column=e,this.mouseEvent=t,this.parentEl=i,this.displayName=null}postConstruct(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof me?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())}initializeProperties(e){e instanceof Ge?this.columns=e.getLeafColumns():this.columns=[e],this.allowGrouping=this.columns.some(t=>t.isPrimary()&&t.isAllowRowGroup()),this.allowValues=this.columns.some(t=>t.isPrimary()&&t.isAllowValue()),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(t=>t.isPrimary()&&t.isAllowPivot())}buildMenuItemMap(){const e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:t=>t.isPrimary()&&t.isAllowRowGroup(),activeFunction:t=>t.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${this.displayName}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${this.displayName}`,activateFunction:()=>{const t=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:t=>t.isPrimary()&&t.isAllowValue(),activeFunction:t=>t.isValueActive(),activateLabel:()=>e("addToValues",`Add ${this.displayName} to values`,[this.displayName]),deactivateLabel:()=>e("removeFromValues",`Remove ${this.displayName} from values`,[this.displayName]),activateFunction:()=>{const t=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:t=>this.columnModel.isPivotMode()&&t.isPrimary()&&t.isAllowPivot(),activeFunction:t=>t.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${this.displayName} to labels`,[this.displayName]),deactivateLabel:()=>e("removeFromLabels",`Remove ${this.displayName} from labels`,[this.displayName]),activateFunction:()=>{const t=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter(t=>e.indexOf(t)===-1))}removeColumnsFromList(e){return e.filter(t=>this.columns.indexOf(t)===-1)}displayContextMenu(){const e=this.getGui(),t=this.createBean(new hr),i=this.getMappedMenuItems(),s=this.localeService.getLocaleTextFunc();let n=()=>{};e.appendChild(t.getGui()),t.addMenuItems(i),t.addManagedListener(t,Nt.EVENT_MENU_ITEM_SELECTED,()=>{this.parentEl.focus(),n()});const o=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(t.getGui()),ariaLabel:s("ariaLabelContextMenu","Context Menu"),closedCallback:a=>{a instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(t)}});o&&(n=o.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[];for(const t of this.menuItemMap.values()){const i=this.columns.some(n=>t.allowedFunction(n)&&!t.activeFunction(n)),s=this.columns.some(n=>t.allowedFunction(n)&&t.activeFunction(n));i&&e.push({name:t.activateLabel(this.displayName),icon:A.createIconNoSpan(t.addIcon,this.gridOptionsService,null),action:()=>t.activateFunction()}),s&&e.push({name:t.deactivateLabel(this.displayName),icon:A.createIconNoSpan(t.removeIcon,this.gridOptionsService,null),action:()=>t.deActivateFunction()})}return e}}i0([S("columnModel")],Yu.prototype,"columnModel",void 0);i0([S("popupService")],Yu.prototype,"popupService",void 0);i0([S("focusService")],Yu.prototype,"focusService",void 0);i0([U],Yu.prototype,"postConstruct",null);var _a=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ks extends Q{constructor(e,t,i,s){super(),this.modelItem=e,this.allowDragging=t,this.eventType=i,this.focusWrapper=s,this.processingColumnStateChange=!1,this.modelItem=e,this.columnGroup=e.getColumnGroup(),this.columnDept=e.getDept(),this.allowDragging=t}init(){this.setTemplate(ks.TEMPLATE),this.eDragHandle=A.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType),A.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,_s.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,nl.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),Cg.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach(s=>this.addOrRemoveCssClass(s,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>{const i=e.headerTooltip;this.setTooltip(i)};t(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,t)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumnGroup",e}handleKeyDown(e){switch(e.key){case W.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case W.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case W.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){const{columnGroup:t,gridOptionsService:i}=this;if(i.is("functionsReadOnly"))return;const s=this.createBean(new Yu(t,e,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}addVisibilityListenersToAllChildren(){this.columnGroup.getLeafColumns().forEach(e=>{this.addManagedListener(e,me.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,me.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,me.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,me.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this))})}setupDragging(){if(!this.allowDragging){A.setDisplayed(this.eDragHandle,!1);return}const e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),t={type:_t.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:e?De.ICON_HIDE:De.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{const i={type:E.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.columnGroup};this.eventService.dispatchEvent(i)},onDragStopped:()=>{const i={type:E.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(i)},onGridEnter:()=>{e&&this.onChangeCommon(!0)},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e={};return this.columnGroup.getLeafColumns().forEach(t=>{e[t.getId()]=t.isVisible()}),{columns:this.columnGroup.getLeafColumns(),visibleState:e}}setupExpandContract(){this.eGroupClosedIcon.appendChild(A.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(A.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));const e=new St(this.eColumnGroupIcons,!0);this.addManagedListener(e,St.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=i=>{i.forEach(s=>{s.isPassesFilter()&&(s.isGroup()?t(s.getChildren()):e.push(s.getColumn()))})};return t(this.modelItem.getChildren()),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),i=this.cbSelect.getValue(),s=i===void 0?e("ariaIndeterminate","indeterminate"):i?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");A.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${n} (${s})`),A.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.columnModel.isPivotMode(),t=this.getVisibleLeafColumns();let i=0,s=0;if(t.forEach(n=>{!e&&n.getColDef().lockVisible||(this.isColumnChecked(n,e)?i++:s++)}),!(i>0&&s>0))return i>0}workOutReadOnlyValue(){const e=this.columnModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach(i=>{e?i.isAnyFunctionAllowed()&&t++:i.getColDef().lockVisible||t++}),t===0}isColumnChecked(e,t){if(t){const i=e.isPivotActive(),s=e.isRowGroupActive(),n=e.isValueActive();return i||s||n}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.isExpanded();A.setDisplayed(this.eGroupClosedIcon,!e),A.setDisplayed(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){A.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}}ks.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
            </span>
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`;_a([S("columnModel")],ks.prototype,"columnModel",void 0);_a([S("dragAndDropService")],ks.prototype,"dragAndDropService",void 0);_a([S("modelItemUtils")],ks.prototype,"modelItemUtils",void 0);_a([G("cbSelect")],ks.prototype,"cbSelect",void 0);_a([G("eLabel")],ks.prototype,"eLabel",void 0);_a([G("eGroupOpenedIcon")],ks.prototype,"eGroupOpenedIcon",void 0);_a([G("eGroupClosedIcon")],ks.prototype,"eGroupClosedIcon",void 0);_a([G("eColumnGroupIcons")],ks.prototype,"eColumnGroupIcons",void 0);_a([U],ks.prototype,"init",null);var kb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const yy="ag-list-item-hovered";class s0 extends j{constructor(e,t){super(),this.comp=e,this.virtualList=t,this.currentDragColumn=null,this.lastHoveredColumnItem=null}postConstruct(){this.addManagedListener(this.eventService,E.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}columnPanelItemDragStart({column:e}){this.currentDragColumn=e,this.getCurrentColumns().find(s=>{const n=s.getColDef();return!!n.suppressMovable||!!n.lockPosition})&&(this.moveBlocked=!0)}columnPanelItemDragEnd(){window.setTimeout(()=>{this.currentDragColumn=null,this.moveBlocked=!1},10)}createDropTarget(){const e={isInterestedIn:t=>t===_t.ToolPanel,getIconName:()=>De[this.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"],getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new OC({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragColumn||this.moveBlocked)return;const t=this.getDragColumnItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const s=i.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===t.rowIndex&&this.lastHoveredColumnItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=t,A.radioCssClass(s,`${yy}`),A.radioCssClass(s,`ag-item-highlight-${t.position}`))}getDragColumnItem(e){const t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),s=this.virtualList.getRowHeight(),n=this.virtualList.getScrollTop(),o=Math.max(0,(e.y-i+n)/s),a=this.comp.getDisplayedColsList().length-1,l=Math.min(a,o)|0;return{rowIndex:l,position:Math.round(o)>o||o>a?"bottom":"top",component:this.virtualList.getComponentAt(l)}}onDragStop(){if(this.moveBlocked)return;const e=this.getTargetIndex(),t=this.getCurrentColumns();e!=null&&this.columnModel.moveColumns(t,e,"toolPanelUi"),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}getMoveDiff(e){const t=this.columnModel.getAllGridColumns(),i=this.getCurrentColumns(),s=i[0],n=i.length;return t.indexOf(s)<e?n:0}getCurrentColumns(){return this.currentDragColumn instanceof Ge?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]}getTargetIndex(){if(!this.lastHoveredColumnItem)return null;const e=this.lastHoveredColumnItem.component;let t=this.lastHoveredColumnItem.position==="top",i;e instanceof ks?(i=e.getColumns()[0],t=!0):i=e.getColumn();const s=this.columnModel.getAllGridColumns().indexOf(i),n=t?s:s+1,o=this.getMoveDiff(n);return n-o}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${yy}`).forEach(t=>{[yy,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{t.classList.remove(i)})}),this.lastHoveredColumnItem=null}}kb([S("columnModel")],s0.prototype,"columnModel",void 0);kb([S("dragAndDropService")],s0.prototype,"dragAndDropService",void 0);kb([U],s0.prototype,"postConstruct",null);var Xu=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Dr extends Q{constructor(e,t,i,s,n){super(),this.column=e,this.columnDept=t,this.allowDragging=i,this.groupsExist=s,this.focusWrapper=n,this.processingColumnStateChange=!1}init(){this.setTemplate(Dr.TEMPLATE),this.eDragHandle=A.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");const i=A.escapeString(this.displayName);this.eLabel.innerHTML=i;const s=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${s}`),this.setupDragging(),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,me.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,me.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,me.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,me.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,_s.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),Cg.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach(o=>this.addOrRemoveCssClass(o,!0))}getColumn(){return this.column}setupTooltip(){const e=()=>{const t=this.column.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,e)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e}onContextMenu(e){const{column:t,gridOptionsService:i}=this;if(i.is("functionsReadOnly"))return;const s=this.createBean(new Yu(t,e,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}handleKeyDown(e){e.key===W.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gridOptionsService.is("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumn","Column"),i=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),s=e("ariaToggleVisibility","Press SPACE to toggle visibility");A.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${s} (${i})`),A.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging){A.setDisplayed(this.eDragHandle,!1);return}const e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),t={type:_t.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:e?De.ICON_HIDE:De.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{const i={type:E.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.column};this.eventService.dispatchEvent(i)},onDragStopped:()=>{const i={type:E.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(i)},onGridEnter:()=>{e&&this.onChangeCommon(!0)},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.columnModel.isPivotMode();if(e){const n=this.column.isAnyFunctionActive();this.cbSelect.setValue(n)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,i=!0;if(e){const n=this.gridOptionsService.is("functionsReadOnly"),o=!this.column.isAnyFunctionAllowed();t=!n&&!o,i=t}else{const{enableRowGroup:n,enableValue:o,lockPosition:a,suppressMovable:l,lockVisible:c}=this.column.getColDef(),d=!!n||!!o,h=!!a||!!l;t=!c,i=d||!h}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!t);const s=e&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(s),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")}}Dr.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`;Xu([S("columnModel")],Dr.prototype,"columnModel",void 0);Xu([S("dragAndDropService")],Dr.prototype,"dragAndDropService",void 0);Xu([S("modelItemUtils")],Dr.prototype,"modelItemUtils",void 0);Xu([G("eLabel")],Dr.prototype,"eLabel",void 0);Xu([G("cbSelect")],Dr.prototype,"cbSelect",void 0);Xu([U],Dr.prototype,"init",null);var n0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class YG{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}}const XG="ag-column-select-list";class Zl extends Q{constructor(){super(Zl.TEMPLATE),this.destroyColumnItemFuncs=[]}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,t,i){this.params=e,this.allowDragging=t,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[E.EVENT_COLUMN_PIVOT_CHANGED,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,E.EVENT_COLUMN_ROW_GROUP_CHANGED,E.EVENT_COLUMN_VALUE_CHANGED,E.EVENT_COLUMN_VISIBLE,E.EVENT_NEW_COLUMNS_LOADED].forEach(a=>{this.addManagedListener(this.eventService,a,this.fireSelectionChangedEvent.bind(this))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;const o=this.localeService.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new Pa("column-select","tree",o)),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((a,l)=>(A.setAriaLevel(l,a.getDept()+1),this.createComponentFromItem(a,l))),this.columnModel.isReady()&&this.onColumnsChanged(),!e.suppressColumnMove&&!this.gridOptionsService.is("suppressMovableColumns")&&this.createManagedBean(new s0(this,this.virtualList))}createComponentFromItem(e,t){if(e.isGroup()){const s=new ks(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(s),s}const i=new Dr(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);return this.getContext().createBean(i),i}onColumnsChanged(){const e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){if(!this.allColsTree)return{};const e={};return this.forEachItem(t=>{if(!t.isGroup())return;const i=t.getColumnGroup();i&&(e[i.getId()]=t.isExpanded())}),e}setExpandedStates(e){this.allColsTree&&this.forEachItem(t=>{if(!t.isGroup())return;const i=t.getColumnGroup();if(i){const s=e[i.getId()];s!=null&&t.setExpanded(s)}})}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(e){const t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some(i=>i&&typeof i.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()}buildListModel(e){const t=this.onColumnExpanded.bind(this),i=a=>{a.addEventListener(nl.EVENT_EXPANDED_CHANGED,t);const l=a.removeEventListener.bind(a,nl.EVENT_EXPANDED_CHANGED,t);this.destroyColumnItemFuncs.push(l)},s=(a,l,c)=>{a.forEach(d=>{d instanceof Ge?n(d,l,c):o(d,l,c)})},n=(a,l,c)=>{const d=a.getColGroupDef();if(d&&d.suppressColumnsToolPanel)return;if(a.isPadding()){s(a.getChildren(),l,c);return}const u=this.columnModel.getDisplayNameForProvidedColumnGroup(null,a,this.eventType),p=new nl(u,a,l,!0,this.expandGroupsByDefault);c.push(p),i(p),s(a.getChildren(),l+1,p.getChildren())},o=(a,l,c)=>{if(a.getColDef()&&a.getColDef().suppressColumnsToolPanel)return;const h=this.columnModel.getDisplayNameForColumn(a,"columnToolPanel");c.push(new nl(h,a,l))};this.destroyColumnTree(),s(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=i=>{i.isPassesFilter()&&(this.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new YG(this.displayedColsList));const t=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),t!=null&&this.focusRowIfAlive(t),this.notifyListeners()}focusRowIfAlive(e){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e)},0)}forEachItem(e){const t=i=>{i.forEach(s=>{e(s),s.isGroup()&&t(s.getChildren())})};t(this.allColsTree)}doSetExpandedAll(e){this.forEachItem(t=>{t.isGroup()&&t.setExpanded(e)})}setGroupsExpanded(e,t){if(!t){this.doSetExpandedAll(e);return}const i=[];this.forEachItem(n=>{if(!n.isGroup())return;const o=n.getColumnGroup().getId();t.indexOf(o)>=0&&(n.setExpanded(e),i.push(o))});const s=t.filter(n=>!A.includes(i,n));s.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",s)}getExpandState(){let e=0,t=0;return this.forEachItem(i=>{i.isGroup()&&(i.isExpanded()?e++:t++)}),e>0&&t>0?sr.INDETERMINATE:t>0?sr.COLLAPSED:sr.EXPANDED}doSetSelectedAll(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const i=this.columnModel.isPivotMode();if(this.forEachItem(s=>{if(s.isGroup()||!s.isPassesFilter())return;const n=s.getColumn(),o=n.getColDef();let a;if(i){if(!n.isAllowPivot()&&!n.isAllowRowGroup()&&!n.isAllowValue())return;a=n.isValueActive()||n.isPivotActive()||n.isRowGroupActive()}else{if(o.lockVisible)return;a=n.isVisible()}a?e++:t++}),!(e>0&&t>0))return!(e===0||t>0)}setFilterText(e){this.filterText=A.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=i=>{if(!A.exists(this.filterText))return!0;const s=i.getDisplayName();return s==null||s.toLowerCase().indexOf(this.filterText)!==-1},t=(i,s)=>{let n=!1;if(i.isGroup()){const a=e(i);i.getChildren().forEach(l=>{const c=t(l,a||s);c&&(n=c)})}const o=s||n?!0:e(i);return i.setPassesFilter(o),o};this.allColsTree.forEach(i=>t(i,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){const e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})}}Zl.TEMPLATE=`<div class="${XG}" role="presentation"></div>`;n0([S("columnModel")],Zl.prototype,"columnModel",void 0);n0([S("toolPanelColDefService")],Zl.prototype,"colDefService",void 0);n0([S("modelItemUtils")],Zl.prototype,"modelItemUtils",void 0);n0([ft],Zl.prototype,"destroyColumnTree",null);var Vb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Nf extends Q{createTemplate(){return`<div class="ag-pivot-mode-panel">
                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
            </div>`}init(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());const e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,_s.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))}onBtPivotMode(){const e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");const t=this.gridOptionsService.api;t&&t.refreshHeader()}}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)}}Vb([S("columnModel")],Nf.prototype,"columnModel",void 0);Vb([G("cbPivotMode")],Nf.prototype,"cbPivotMode",void 0);Vb([Ou],Nf.prototype,"init",null);var _d=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let ya=class extends j{init(){this.alwaysAggregateAtRootLevel=this.gridOptionsService.is("alwaysAggregateAtRootLevel"),this.addManagedPropertyListener("alwaysAggregateAtRootLevel",e=>this.alwaysAggregateAtRootLevel=e.currentValue),this.groupIncludeTotalFooter=this.gridOptionsService.is("groupIncludeTotalFooter"),this.addManagedPropertyListener("groupIncludeTotalFooter",e=>this.groupIncludeTotalFooter=e.currentValue)}execute(e){const t=A.missingOrEmpty(this.columnModel.getValueColumns()),i=!this.gridOptionsService.getCallback("getGroupRowAgg"),s=e.changedPath&&e.changedPath.isActive();if(t&&i&&s)return;const n=this.createAggDetails(e);this.recursivelyCreateAggData(n)}createAggDetails(e){const t=this.columnModel.isPivotActive(),i=this.columnModel.getValueColumns(),s=t?this.columnModel.getPivotColumns():[];return{changedPath:e.changedPath,valueColumns:i,pivotColumns:s}}isSuppressAggFilteredOnly(){return this.gridOptionsService.getGroupAggFiltering()!==void 0||this.gridOptionsService.is("suppressAggFilteredOnly")}recursivelyCreateAggData(e){this.filteredOnly=!this.isSuppressAggFilteredOnly();const t=i=>{if(!i.hasChildren()){i.aggData&&i.setAggData(null);return}if(i.level===-1&&!this.groupIncludeTotalFooter){const o=!this.columnModel.isPivotMode();if(!this.alwaysAggregateAtRootLevel&&o)return}this.aggregateRowNode(i,e)};e.changedPath.forEachChangedNodeDepthFirst(t,!0)}aggregateRowNode(e,t){const i=t.valueColumns.length===0,s=t.pivotColumns.length===0,n=this.gridOptionsService.getCallback("getGroupRowAgg");let o;if(n){const a={nodes:e.childrenAfterFilter};o=n(a)}else i?o=null:s?o=this.aggregateRowNodeUsingValuesOnly(e,t):o=this.aggregateRowNodeUsingValuesAndPivot(e);e.setAggData(o),e.sibling&&e.sibling.setAggData(o)}aggregateRowNodeUsingValuesAndPivot(e){var t;const i={},s=(t=this.columnModel.getSecondaryColumns())!==null&&t!==void 0?t:[];return s.forEach(n=>{const{pivotValueColumn:o,pivotTotalColumnIds:a,colId:l,pivotKeys:c}=n.getColDef();if(A.exists(a))return;const d=c??[];let h;e.leafGroup?h=this.getValuesFromMappedSet(e.childrenMapped,d,o):h=this.getValuesPivotNonLeaf(e,l),i[l]=this.aggregateValues(h,o.getAggFunc(),o,e,n)}),s.forEach(n=>{const{pivotValueColumn:o,pivotTotalColumnIds:a,colId:l}=n.getColDef();if(!A.exists(a))return;const c=[];!a||!a.length||(a.forEach(d=>{c.push(i[d])}),i[l]=this.aggregateValues(c,o.getAggFunc(),o,e,n))}),i}aggregateRowNodeUsingValuesOnly(e,t){const i={},s=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,n=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,o=this.getValuesNormal(e,s),a=e.aggData;return s.forEach((l,c)=>{i[l.getId()]=this.aggregateValues(o[c],l.getAggFunc(),l,e)}),n&&a&&n.forEach(l=>{i[l.getId()]=a[l.getId()]}),i}getValuesPivotNonLeaf(e,t){const i=[];return e.childrenAfterFilter.forEach(s=>{const n=s.aggData[t];i.push(n)}),i}getValuesFromMappedSet(e,t,i){let s=e;if(t.forEach(o=>s=s?s[o]:null),!s)return[];const n=[];return s.forEach(o=>{const a=this.valueService.getValue(i,o);n.push(a)}),n}getValuesNormal(e,t){const i=[];t.forEach(()=>i.push([]));const s=t.length,n=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,o=n.length;for(let a=0;a<o;a++){const l=n[a];for(let c=0;c<s;c++){const d=t[c],h=this.valueService.getValue(d,l);i[c].push(h)}}return i}aggregateValues(e,t,i,s,n){const o=typeof t=="string"?this.aggFuncService.getAggFunc(t):t;if(typeof o!="function")return console.error(`AG Grid: unrecognised aggregation function ${t}`),null;const a=o,l={values:e,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:n,rowNode:s,data:s?s.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};return a(l)}};_d([S("columnModel")],ya.prototype,"columnModel",void 0);_d([S("valueService")],ya.prototype,"valueService",void 0);_d([S("aggFuncService")],ya.prototype,"aggFuncService",void 0);_d([S("gridApi")],ya.prototype,"gridApi",void 0);_d([S("columnApi")],ya.prototype,"columnApi",void 0);_d([U],ya.prototype,"init",null);ya=_d([ee("aggregationStage")],ya);class Sy{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(e,t){const i=this.getSet(e);i.removeFromChildrenAfterGroup[t.id]=!0}isRemoveFromAllLeafChildren(e,t){return!!this.getSet(e).removeFromAllLeafChildren[t.id]}preventRemoveFromAllLeafChildren(e,t){const i=this.getSet(e);delete i.removeFromAllLeafChildren[t.id]}removeFromAllLeafChildren(e,t){const i=this.getSet(e);i.removeFromAllLeafChildren[t.id]=!0}getSet(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach(e=>{const t=this.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(i=>!t.removeFromChildrenAfterGroup[i.id]),e.allLeafChildren=e.allLeafChildren.filter(i=>!t.removeFromAllLeafChildren[i.id]),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0}}var Id=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Sa=class extends j{constructor(){super(...arguments),this.groupIdSequence=new Ni}postConstruct(){this.usingTreeData=this.gridOptionsService.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsService.get("getDataPath"))}execute(e){const t=this.createGroupingDetails(e);if(t.transactions)this.handleTransaction(t);else{const i=e.afterColumnsChanged===!0;this.shotgunResetEverything(t,i)}this.positionLeafsAndGroups(e.changedPath),this.orderGroups(t.rootNode),this.selectableService.updateSelectableAfterGrouping(t.rootNode)}positionLeafsAndGroups(e){this.usingTreeData||e.forEachChangedNodeDepthFirst(t=>{if(t.childrenAfterGroup){const i=[],s=[];let n;t.childrenAfterGroup.forEach(o=>{var a;!((a=o.childrenAfterGroup)===null||a===void 0)&&a.length?o.key===""&&!n?n=o:s.push(o):i.push(o)}),n&&s.push(n),t.childrenAfterGroup=[...i,...s]}},!1)}createGroupingDetails(e){const{rowNode:t,changedPath:i,rowNodeTransactions:s,rowNodeOrder:n}=e,o=this.usingTreeData?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:o,rootNode:t,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!o?0:o.length,rowNodeOrder:n,transactions:s,changedPath:i}}handleTransaction(e){e.transactions.forEach(t=>{const i=this.usingTreeData?void 0:new Sy;if(A.existsAndNotEmpty(t.remove)&&this.removeNodes(t.remove,e,i),A.existsAndNotEmpty(t.update)&&this.moveNodesInWrongPath(t.update,e,i),A.existsAndNotEmpty(t.add)&&this.insertNodes(t.add,e,!1),i){const s=i.getAllParents().slice();i.flush(),this.removeEmptyGroups(s,e)}}),e.rowNodeOrder&&this.sortChildren(e)}sortChildren(e){e.changedPath.forEachChangedNodeDepthFirst(t=>{if(!t.childrenAfterGroup)return;A.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder)&&e.changedPath.addParentNode(t)},!1,!0)}orderGroups(e){if(this.usingTreeData)return;const t=this.gridOptionsService.getCallback("initialGroupOrderComparator");A.exists(t)&&i(e);function i(s){A.exists(s.childrenAfterGroup)&&!s.leafGroup&&(s.childrenAfterGroup.sort((o,a)=>t({nodeA:o,nodeB:a})),s.childrenAfterGroup.forEach(o=>i(o)))}}getExistingPathForNode(e,t){const i=[];let s=this.usingTreeData?e:e.parent;for(;s&&s!==t.rootNode;)i.push({key:s.key,rowGroupColumn:s.rowGroupColumn,field:s.field}),s=s.parent;return i.reverse(),i}moveNodesInWrongPath(e,t,i){e.forEach(s=>{t.changedPath.isActive()&&t.changedPath.addParentNode(s.parent);const n=c=>c.key,o=this.getExistingPathForNode(s,t).map(n),a=this.getGroupInfo(s,t).map(n);A.areEqual(o,a)||this.moveNode(s,t,i)})}moveNode(e,t,i){if(this.removeNodesInStages([e],t,i),this.insertOneNode(e,t,!0,i),e.setData(e.data),t.changedPath.isActive()){const s=e.parent;t.changedPath.addParentNode(s)}}removeNodes(e,t,i){this.removeNodesInStages(e,t,i),t.changedPath.isActive()&&e.forEach(s=>t.changedPath.addParentNode(s.parent))}removeNodesInStages(e,t,i){if(this.removeNodesFromParents(e,t,i),this.usingTreeData){this.postRemoveCreateFillerNodes(e,t);const s=e.map(n=>n.parent);this.removeEmptyGroups(s,t)}}forEachParentGroup(e,t,i){let s=t;for(;s&&s!==e.rootNode;)i(s),s=s.parent}removeNodesFromParents(e,t,i){const s=i==null,n=i||new Sy;e.forEach(o=>{this.removeFromParent(o,n),this.forEachParentGroup(t,o.parent,a=>{n.removeFromAllLeafChildren(a,o)})}),s&&n.flush()}postRemoveCreateFillerNodes(e,t){e.forEach(i=>{if(i.hasChildren()){const n=this.getExistingPathForNode(i,t),o=this.findParentForNode(i,n,t);o.expanded=i.expanded,o.allLeafChildren=i.allLeafChildren,o.childrenAfterGroup=i.childrenAfterGroup,o.childrenMapped=i.childrenMapped,o.updateHasChildren(),o.childrenAfterGroup.forEach(a=>a.parent=o)}})}removeEmptyGroups(e,t){let i=!0;const s=n=>{const o=this.getChildrenMappedKey(n.key,n.rowGroupColumn),a=n.parent;return(a&&a.childrenMapped?!a.childrenMapped[o]:!0)?!1:!!n.isEmptyRowGroupNode()};for(;i;){i=!1;const n=new Sy;e.forEach(o=>{this.forEachParentGroup(t,o,a=>{s(a)&&(i=!0,this.removeFromParent(a,n),a.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),n.flush()}}removeFromParent(e,t){e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(A.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[i]=void 0),e.setRowTop(null),e.setRowIndex(null)}addToParent(e,t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);t&&(t.childrenMapped!=null&&(t.childrenMapped[i]=e),t.childrenAfterGroup.push(e),t.updateHasChildren())}areGroupColsEqual(e,t){return e==null||t==null||e.pivotMode!==t.pivotMode?!1:A.areEqual(e.groupedCols,t.groupedCols)}checkAllGroupDataAfterColsChanged(e){const t=i=>{i&&i.forEach(s=>{if(!this.usingTreeData&&!s.group)return;const o={field:s.field,key:s.key,rowGroupColumn:s.rowGroupColumn};this.setGroupData(s,o),t(s.childrenAfterGroup)})};t(e.rootNode.childrenAfterGroup)}shotgunResetEverything(e,t){if(this.noChangeInGroupingColumns(e,t))return;this.selectionService.filterFromSelection(o=>o&&!o.group);const{rootNode:i,groupedCols:s}=e;i.leafGroup=this.usingTreeData?!1:s.length===0,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();const n=i.sibling;n&&(n.childrenAfterGroup=i.childrenAfterGroup,n.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,e,!1)}noChangeInGroupingColumns(e,t){let i=!1;const s=this.columnModel.getGroupDisplayColumns(),n=s?s.map(o=>o.getId()).join("-"):"";return t&&(i=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==n&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=n,i}insertNodes(e,t,i){e.forEach(s=>{this.insertOneNode(s,t,i),t.changedPath.isActive()&&t.changedPath.addParentNode(s.parent)})}insertOneNode(e,t,i,s){const n=this.getGroupInfo(e,t),o=this.findParentForNode(e,n,t,s);o.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[o.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(o,e,i):(e.parent=o,e.level=n.length,o.childrenAfterGroup.push(e),o.updateHasChildren())}findParentForNode(e,t,i,s){let n=i.rootNode;return t.forEach((o,a)=>{n=this.getOrCreateNextNode(n,o,a,i),s!=null&&s.isRemoveFromAllLeafChildren(n,e)?s==null||s.preventRemoveFromAllLeafChildren(n,e):n.allLeafChildren.push(e)}),n}swapGroupWithUserNode(e,t,i){t.parent=e.parent,t.key=e.key,t.field=e.field,t.groupData=e.groupData,t.level=e.level,i||(t.expanded=e.expanded),t.leafGroup=e.leafGroup,t.rowGroupIndex=e.rowGroupIndex,t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped,t.sibling=e.sibling,t.updateHasChildren(),this.removeFromParent(e),t.childrenAfterGroup.forEach(s=>s.parent=t),this.addToParent(t,e.parent)}getOrCreateNextNode(e,t,i,s){const n=this.getChildrenMappedKey(t.key,t.rowGroupColumn);let o=e.childrenMapped?e.childrenMapped[n]:void 0;return o||(o=this.createGroup(t,e,i,s),this.addToParent(o,e)),o}createGroup(e,t,i,s){const n=new oe(this.beans);return n.group=!0,n.field=e.field,n.rowGroupColumn=e.rowGroupColumn,this.setGroupData(n,e),n.id=oe.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),n.key=e.key,n.level=i,n.leafGroup=this.usingTreeData?!1:i===s.groupedColCount-1,n.allLeafChildren=[],n.setAllChildrenCount(0),n.rowGroupIndex=this.usingTreeData?null:i,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren(),n.parent=s.includeParents?t:null,this.setExpandedInitialValue(s,n),this.gridOptionsService.is("groupIncludeFooter")&&n.createFooter(),n}setGroupData(e,t){e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(s=>{(this.usingTreeData||(e.rowGroupColumn?s.isRowGroupDisplayed(e.rowGroupColumn.getId()):!1))&&(e.groupData[s.getColId()]=t.key)})}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e.pivotMode&&t.leafGroup){t.expanded=!1;return}const i=this.gridOptionsService.getCallback("isGroupOpenByDefault");if(i){const n={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=i(n)==!0;return}const{expandByDefault:s}=e;if(e.expandByDefault===-1){t.expanded=!0;return}t.expanded=t.level<s}getGroupInfo(e,t){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,t)}getGroupInfoFromCallback(e){const t=this.getDataPath?this.getDataPath(e.data):null;(t==null||t.length===0)&&A.doOnce(()=>console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data),"groupStage.getGroupInfoFromCallback");const i=s=>({key:s,field:null,rowGroupColumn:null});return t?t.map(i):[]}getGroupInfoFromGroupColumns(e,t){const i=[];return t.groupedCols.forEach(s=>{let n=this.valueService.getKeyForNode(s,e),o=n!=null&&n!=="";if((t.pivotMode||!this.gridOptionsService.is("groupAllowUnbalanced"))&&!o&&(n="",o=!0),o){const l={key:n,field:s.getColDef().field,rowGroupColumn:s};i.push(l)}}),i}};Id([S("columnModel")],Sa.prototype,"columnModel",void 0);Id([S("selectableService")],Sa.prototype,"selectableService",void 0);Id([S("valueService")],Sa.prototype,"valueService",void 0);Id([S("beans")],Sa.prototype,"beans",void 0);Id([S("selectionService")],Sa.prototype,"selectionService",void 0);Id([U],Sa.prototype,"postConstruct",null);Sa=Id([ee("groupStage")],Sa);var _A=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Zm;let Gf=Zm=class extends j{createPivotColumnDefs(e){const t=this.columnModel.getPivotColumns(),i=this.columnModel.getValueColumns(),s=t.length,n=this.recursiveBuildGroup(0,e,[],s,t);function o(c,d=[]){return c.forEach(h=>{h.children!==void 0?o(h.children,d):d.push(h)}),d}const a=o(n);this.addRowGroupTotals(n,a,i),this.addExpandablePivotGroups(n,a),this.addPivotTotalsToGroups(n,a);const l=a.map(c=>A.cloneObject(c));return{pivotColumnGroupDefs:n,pivotColumnDefs:l}}recursiveBuildGroup(e,t,i,s,n){const o=this.columnModel.getValueColumns();if(e>=s)return this.buildMeasureCols(i);const a=n[e].getColDef(),l=this.headerNameComparator.bind(this,a.pivotComparator);if(o.length===1&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&e===s-1){const d=[];return A.iterateObject(t,h=>{const u=[...i,h];d.push(Object.assign(Object.assign({},this.createColDef(o[0],h,u)),{columnGroupShow:"open"}))}),d.sort(l),d}const c=[];return A.iterateObject(t,(d,h)=>{const u=[...i,d];c.push({children:this.recursiveBuildGroup(e+1,h,u,s,n),headerName:d,pivotKeys:u,columnGroupShow:"open",groupId:this.generateColumnGroupId(u)})}),c.sort(l),c}buildMeasureCols(e){const t=this.columnModel.getValueColumns();return t.length===0?[this.createColDef(null,"-",e)]:t.map(i=>{const s=this.columnModel.getDisplayNameForColumn(i,"header");return Object.assign(Object.assign({},this.createColDef(i,s,e)),{columnGroupShow:"open"})})}addExpandablePivotGroups(e,t){if(this.gridOptionsService.is("suppressExpandablePivotGroups")||this.gridOptionsService.get("pivotColumnGroupTotals"))return;const i=(s,n,o)=>{const a=s;if(a.children){const l=new Map;a.children.forEach(d=>{i(d,n,l)});const c=!a.children.some(d=>d.children);this.columnModel.getValueColumns().forEach(d=>{const h=this.columnModel.getDisplayNameForColumn(d,"header"),u=this.createColDef(d,h,s.pivotKeys);u.pivotTotalColumnIds=l.get(d.getColId()),u.columnGroupShow="closed",u.aggFunc=d.getAggFunc(),c||(s.children.push(u),n.push(u))}),this.merge(o,l)}else{const l=s;if(!l.pivotValueColumn)return;const c=l.pivotValueColumn.getColId(),d=o.has(c)?o.get(c):[];d.push(l.colId),o.set(c,d)}};e.forEach(s=>{i(s,t,new Map)})}addPivotTotalsToGroups(e,t){if(!this.gridOptionsService.get("pivotColumnGroupTotals"))return;const i=this.gridOptionsService.get("pivotColumnGroupTotals")==="after",s=this.columnModel.getValueColumns(),n=s.map(a=>a.getAggFunc());if(!n||n.length<1||!this.sameAggFuncs(n))return;const o=s[0];e.forEach(a=>{this.recursivelyAddPivotTotal(a,t,o,i)})}recursivelyAddPivotTotal(e,t,i,s){const n=e;if(!n.children){const a=e;return a.colId?[a.colId]:null}let o=[];if(n.children.forEach(a=>{const l=this.recursivelyAddPivotTotal(a,t,i,s);l&&(o=o.concat(l))}),n.children.length>1){const l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),c=this.createColDef(i,l,e.pivotKeys,!0);c.pivotTotalColumnIds=o,c.aggFunc=i.getAggFunc();const d=e.children;s?d.push(c):d.unshift(c),t.push(c)}return o}addRowGroupTotals(e,t,i){if(!this.gridOptionsService.get("pivotRowTotals"))return;const s=this.gridOptionsService.get("pivotRowTotals")==="after",n=s?i.slice():i.slice().reverse();for(let o=0;o<n.length;o++){const a=n[o];let l=[];e.forEach(d=>{l=l.concat(this.extractColIdsForValueColumn(d,a))});const c=n.length>1||!this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(e,t,a,l,s,c)}}extractColIdsForValueColumn(e,t){const i=e;if(!i.children){const n=i;return n.pivotValueColumn===t&&n.colId?[n.colId]:[]}let s=[];return i.children.forEach(n=>{this.extractColIdsForValueColumn(n,t);const o=this.extractColIdsForValueColumn(n,t);s=s.concat(o)}),s}createRowGroupTotal(e,t,i,s,n,o){const a=this.columnModel.getValueColumns();let l;if(a.length===0)l=this.createColDef(null,"-",[]);else{const d=this.columnModel.getDisplayNameForColumn(i,"header");l=this.createColDef(i,d,[]),l.pivotTotalColumnIds=s}l.colId=Zm.PIVOT_ROW_TOTAL_PREFIX+l.colId,t.push(l);const c=o?{children:[l],pivotKeys:[],groupId:`${Zm.PIVOT_ROW_TOTAL_PREFIX}_pivotGroup_${i.getColId()}`}:l;n?e.push(c):e.unshift(c)}createColDef(e,t,i,s=!1){const n={};if(e){const o=e.getColDef();Object.assign(n,o),n.hide=!1}return n.headerName=t,n.colId=this.generateColumnId(i||[],e&&!s?e.getColId():""),n.field=n.colId,n.valueGetter=o=>{var a;return(a=o.data)===null||a===void 0?void 0:a[o.colDef.field]},n.pivotKeys=i,n.pivotValueColumn=e,n.filter===!0&&(n.filter="agNumberColumnFilter"),n}sameAggFuncs(e){if(e.length==1)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,i){return e?e(t.headerName,i.headerName):t.headerName&&!i.headerName?1:!t.headerName&&i.headerName?-1:!t.headerName||!i.headerName?0:t.headerName<i.headerName?-1:t.headerName>i.headerName?1:0}merge(e,t){t.forEach((i,s,n)=>{const a=[...e.has(s)?e.get(s):[],...i];e.set(s,a)})}generateColumnGroupId(e){return`pivotGroup_${this.columnModel.getPivotColumns().map(i=>i.getColId()).join("-")}_${e.join("-")}`}generateColumnId(e,t){return`pivot_${this.columnModel.getPivotColumns().map(s=>s.getColId()).join("-")}_${e.join("-")}_${t}`}};Gf.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_";_A([S("columnModel")],Gf.prototype,"columnModel",void 0);Gf=Zm=_A([ee("pivotColDefService")],Gf);var o0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let gu=class extends j{constructor(){super(...arguments),this.uniqueValues={}}execute(e){const t=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())}executePivotOn(e){const t=this.bucketUpRowNodes(e),i=this.setUniqueValues(t),s=this.columnModel.getValueColumns(),n=s.map(h=>`${h.getId()}-${h.getColDef().headerName}`).join("#"),o=s.map(h=>h.getAggFunc().toString()).join("#"),a=this.aggregationColumnsHashLastTime!==n,l=this.aggregationFuncsHashLastTime!==o;this.aggregationColumnsHashLastTime=n,this.aggregationFuncsHashLastTime=o;const c=this.columnModel.getRowGroupColumns().map(h=>h.getId()).join("#"),d=c!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=c,i||a||d||l){const{pivotColumnGroupDefs:h,pivotColumnDefs:u}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=u,this.columnModel.setSecondaryColumns(h,"rowModelUpdated"),e&&e.setInactive()}}setUniqueValues(e){const t=JSON.stringify(e),i=JSON.stringify(this.uniqueValues);return t!==i?(this.uniqueValues=e,!0):!1}bucketUpRowNodes(e){const t={};e.forEachChangedNodeDepthFirst(s=>{s.leafGroup&&(s.childrenMapped=null)});const i=s=>{var n;s.leafGroup?this.bucketRowNode(s,t):(n=s.childrenAfterFilter)===null||n===void 0||n.forEach(i)};return e.executeFromRootNode(i),t}bucketRowNode(e,t){const i=this.columnModel.getPivotColumns();i.length===0?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,i,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t,i,s){const n={},o=t[i];if(e.forEach(a=>{let l=this.valueService.getKeyForNode(o,a);A.missing(l)&&(l=""),s[l]||(s[l]={}),n[l]||(n[l]=[]),n[l].push(a)}),i===t.length-1)return n;{const a={};return A.iterateObject(n,(l,c)=>{a[l]=this.bucketChildren(c,t,i+1,s[l])}),a}}getPivotColumnDefs(){return this.pivotColumnDefs}};o0([S("valueService")],gu.prototype,"valueService",void 0);o0([S("columnModel")],gu.prototype,"columnModel",void 0);o0([S("pivotColDefService")],gu.prototype,"pivotColDefService",void 0);gu=o0([ee("pivotStage")],gu);var IA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},no;const Zo=typeof BigInt>"u"?null:BigInt;let wo=no=class extends j{constructor(){super(...arguments),this.aggFuncsMap={},this.initialised=!1}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))}initialiseWithDefaultAggregations(){this.aggFuncsMap[no.AGG_SUM]=qG,this.aggFuncsMap[no.AGG_FIRST]=ZG,this.aggFuncsMap[no.AGG_LAST]=JG,this.aggFuncsMap[no.AGG_MIN]=QG,this.aggFuncsMap[no.AGG_MAX]=ek,this.aggFuncsMap[no.AGG_COUNT]=tk,this.aggFuncsMap[no.AGG_AVG]=ik,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e),s=A.includes(i,t),n=A.exists(this.aggFuncsMap[t]);return s&&n}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if(A.exists(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,no.AGG_SUM))return no.AGG_SUM;const i=this.getFuncNames(e);return A.existsAndNotEmpty(i)?i[0]:null}addAggFuncs(e){A.iterateObject(e,this.addAggFunc.bind(this))}addAggFunc(e,t){this.init(),this.aggFuncsMap[e]=t}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return t??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};wo.AGG_SUM="sum";wo.AGG_FIRST="first";wo.AGG_LAST="last";wo.AGG_MIN="min";wo.AGG_MAX="max";wo.AGG_COUNT="count";wo.AGG_AVG="avg";IA([U],wo.prototype,"init",null);wo=no=IA([ee("aggFuncService")],wo);function qG(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const s=e[i];typeof s=="number"?t===null?t=s:Zo?t+=typeof t=="number"?s:Zo(s):t+=s:typeof s=="bigint"&&(t===null?t=s:t=(typeof t=="bigint"?t:Zo(t))+s)}return t}function ZG(r){return r.values.length>0?r.values[0]:null}function JG(r){return r.values.length>0?A.last(r.values):null}function QG(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const s=e[i];(typeof s=="number"||typeof s=="bigint")&&(t===null||t>s)&&(t=s)}return t}function ek(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const s=e[i];(typeof s=="number"||typeof s=="bigint")&&(t===null||t<s)&&(t=s)}return t}function tk(r){const{values:e}=r;let t=0;for(let i=0;i<e.length;i++){const s=e[i];t+=s!=null&&typeof s.value=="number"?s.value:1}return t}function ik(r){var e,t,i;const{values:s}=r;let n=0,o=0;for(let c=0;c<s.length;c++){const d=s[c];let h=null;typeof d=="number"||typeof d=="bigint"?(h=d,o++):d!=null&&(typeof d.value=="number"||typeof d.value=="bigint")&&typeof d.count=="number"&&(Zo?h=d.value*(typeof d.value=="number"?d.count:Zo(d.count)):h=d.value*d.count,o+=d.count),typeof h=="number"?Zo?n+=typeof n=="number"?h:Zo(h):n+=h:typeof h=="bigint"&&(n=(typeof n=="bigint"?n:Zo(n))+h)}let a=null;o>0&&(Zo?a=n/(typeof n=="number"?o:Zo(o)):a=n/o);const l=(t=(e=r.rowNode)===null||e===void 0?void 0:e.aggData)===null||t===void 0?void 0:t[(i=r.column)===null||i===void 0?void 0:i.getColId()];return l&&l.count===o&&l.value===a?l:{count:o,value:a,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var Or=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vi extends Q{constructor(e,t,i,s,n){super(),this.column=e,this.dragSourceDropTarget=t,this.ghost=i,this.dropZonePurpose=s,this.horizontal=n,this.popupShowing=!1}init(){this.setTemplate(Vi.TEMPLATE);const e=this.getGui(),t=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(e),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(A.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(A.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!t&&this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,me.EVENT_SORT_CHANGED,()=>{this.setupAria()}),this.setupTooltip()}setupAria(){const e=this.localeService.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),s=e("ariaDropZoneColumnComponentAggFuncSeperator"," of "),n={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},o=this.column.getSort(),a=this.gridOptionsService.is("rowGroupPanelSuppressSort"),l=[[i&&`${i}${s}`,t,this.isGroupingZone()&&!a&&o&&`, ${n[o]}`].filter(h=>!!h).join("")],c=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!c){const h=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");l.push(h)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!a){const h=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");l.push(h)}const d=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");l.push(d),A.setAriaLabel(this.getGui(),l.join(". "))}setupTooltip(){const e=()=>{const t=this.column.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,e)}setupSort(){const e=this.column.getColDef().sortable,t=this.isGroupingZone();if(!(!e||!t)&&!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const i=s=>{s.preventDefault();const o=this.gridOptionsService.get("multiSortKey")==="ctrl"?s.ctrlKey||s.metaKey:s.shiftKey;this.sortController.progressSort(this.column,o,"uiColumnSorted")};this.addGuiEventListener("click",i),this.addGuiEventListener("keydown",s=>{s.key===W.ENTER&&this.isGroupingZone()&&i(s)})}}addDragSource(){const e={type:_t.ToolPanel,eElement:this.eDragHandle,defaultIconName:De.ICON_HIDE,getDragItem:()=>this.createDragItem(),dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(e))}createDragItem(){const e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}setupRemove(){A.setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));const e={type:Vi.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",i=>{const s=i.key===W.ENTER;i.key===W.DELETE&&(i.preventDefault(),this.dispatchEvent(e)),s&&this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&(i.preventDefault(),this.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",i=>{this.dispatchEvent(e),i.stopPropagation()});const t=new St(this.eButton);this.addManagedListener(t,St.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const i=this.column.getAggFunc(),s=typeof i=="string"?i:"agg";t=this.localeService.getLocaleTextFunc()(s,s)}return{name:e,aggFuncName:t}}setTextValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName(),i=this.isAggregationZone()?`${t}(${e})`:e,s=A.escapeString(i);this.eText.innerHTML=s}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const e=new Pa("select-agg-func"),t=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),s=e.getGui();e.setModel({getRow:function(d){return t[d]},getRowCount:function(){return t.length}}),this.getContext().createBean(e);const n=A.loadTemplate('<div class="ag-select-agg-func-popup"></div>');n.style.top="0px",n.style.left="0px",n.appendChild(s),n.style.width=`${i.clientWidth}px`;const o=()=>{this.destroyBean(e),this.popupShowing=!1,i.focus()},a=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:o,ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});l&&e.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),e.addGuiEventListener("keydown",d=>{if(d.key===W.ENTER||d.key===W.SPACE){const h=e.getLastFocusedRow();if(h==null)return;const u=e.getComponentAt(h);u&&u.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:n,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();let c=t.findIndex(d=>d===this.column.getAggFunc());c===-1&&(c=0),e.focusRow(c)}createAggSelect(e,t){const i=()=>{if(e(),this.gridOptionsService.is("functionsPassive")){const l={type:E.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[this.column],aggFunc:t};this.eventService.dispatchEvent(l)}else this.columnModel.setColumnAggFunc(this.column,t,"toolPanelDragAndDrop")},s=this.localeService.getLocaleTextFunc(),n=t.toString(),o=s(n,n);return new sk(i,o)}addElementClasses(e,t){t=t?`-${t}`:"";const i=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${t}`,`ag-column-drop-${i}-cell${t}`)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}}Vi.EVENT_COLUMN_REMOVE="columnRemove";Vi.TEMPLATE=`<span role="option" tabindex="0">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;Or([S("dragAndDropService")],Vi.prototype,"dragAndDropService",void 0);Or([S("columnModel")],Vi.prototype,"columnModel",void 0);Or([S("popupService")],Vi.prototype,"popupService",void 0);Or([Ne("aggFuncService")],Vi.prototype,"aggFuncService",void 0);Or([S("sortController")],Vi.prototype,"sortController",void 0);Or([G("eText")],Vi.prototype,"eText",void 0);Or([G("eDragHandle")],Vi.prototype,"eDragHandle",void 0);Or([G("eButton")],Vi.prototype,"eButton",void 0);Or([G("eSortIndicator")],Vi.prototype,"eSortIndicator",void 0);Or([U],Vi.prototype,"init",null);class sk extends Q{constructor(e,t){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=e,this.getGui().innerText=t,this.addGuiEventListener("click",this.selectItem)}}var LA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Mi extends Q{constructor(e,t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.dropZonePurpose=t,this.state=Mi.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childColumnComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.eColumnDropList=document.createElement("div"),this.addElementClasses(this.eColumnDropList,"list"),A.setAriaRole(this.eColumnDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}setBeans(e){this.beans=e}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,A.clearElement(this.getGui()),A.clearElement(this.eColumnDropList)}init(e){this.params=e,this.createManagedBean(new bs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new bd(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),A.setAriaLabel(this.eColumnDropList,this.getAriaLabel())}handleKeyDown(e){const t=!this.horizontal;let i=e.key===W.DOWN,s=e.key===W.UP;if(!t){const o=this.gridOptionsService.is("enableRtl");i=!o&&e.key===W.RIGHT||o&&e.key===W.LEFT,s=!o&&e.key===W.LEFT||o&&e.key===W.RIGHT}if(!i&&!s)return;const n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,s);n&&(e.preventDefault(),n.focus())}addElementClasses(e,t){t=t?`-${t}`:"";const i=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${t}`,`ag-column-drop-${i}${t}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)}isInterestedIn(e){return e===_t.HeaderCell||e===_t.ToolPanel}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const i=t!==this.insertIndex;return i&&(this.insertIndex=t),i}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,s=this.childColumnComponents.map(o=>o.getGui().getBoundingClientRect()),n=s.findIndex(o=>this.horizontal?o.right>i&&o.left<i:o.top<i&&o.bottom>i);if(n===-1){const o=this.beans.gridOptionsService.is("enableRtl");return s.every(c=>i>(this.horizontal?c.right:c.bottom))?o&&this.horizontal?0:this.childColumnComponents.length:s.every(c=>i<(this.horizontal?c.left:c.top))?o&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(e){this.state===Mi.STATE_NOT_DRAGGING&&(this.state=Mi.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}onDragEnter(e){const t=e.dragSource.getDragItem().columns||[];this.state=Mi.STATE_NEW_COLUMNS_IN;const i=t.filter(this.isColumnDroppable.bind(this));if(i.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!e.fromNudge){const o=e.dragSource.getDragItem().columns;this.setColumnsVisible(o,!1,"uiColumnDragged")}this.potentialDndColumns=i,this.checkInsertIndex(e),this.refreshGui()}}setColumnsVisible(e,t,i="api"){if(e){const s=e.filter(n=>!n.getColDef().lockVisible);this.colModel.setColumnsVisible(s,t,i)}}isPotentialDndColumns(){return A.existsAndNotEmpty(this.potentialDndColumns)}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}onDragLeave(e){if(this.state===Mi.STATE_REARRANGE_COLUMNS){const t=e.dragSource.getDragItem().columns||[];this.removeColumns(t)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!e.fromNudge){const i=e.dragSource.getDragItem();this.setColumnsVisible(i.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=Mi.STATE_NOT_DRAGGING}onDragStop(){if(this.isPotentialDndColumns()){let e=!1;this.state===Mi.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsService.is("functionsPassive")||!e)&&this.refreshGui()}this.state=Mi.STATE_NOT_DRAGGING}removeColumns(e){const t=this.getExistingColumns().filter(i=>!A.includes(e,i));this.updateColumns(t)}addColumns(e){if(!e)return;const t=this.getExistingColumns().slice(),i=e.filter(s=>t.indexOf(s)<0);A.insertArrayIntoArray(t,i,this.insertIndex),this.updateColumns(t)}rearrangeColumns(e){const t=this.getNonGhostColumns().slice();return A.insertArrayIntoArray(t,e,this.insertIndex),A.areEqual(t,this.getExistingColumns())?!1:(this.updateColumns(t),!0)}refreshGui(){const e=this.eColumnDropList.scrollTop,t=this.resizeEnabled,i=this.getFocusedItem();let s=this.focusService.findNextFocusableElement();s||(s=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(i,s)}getFocusedItem(){const e=this.getGui(),t=this.gridOptionsService.getDocument().activeElement;return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1}restoreFocus(e,t){const i=this.getGui(),s=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;s.length===0&&t.focus();const n=Math.min(s.length-1,e),o=s[n];o&&o.focus()}getNonGhostColumns(){const e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter(t=>!A.includes(this.potentialDndColumns,t)):e}addColumnsToGui(){const t=this.getNonGhostColumns().map(i=>this.createColumnComponent(i,!1));if(this.isPotentialDndColumns()){const i=this.potentialDndColumns.map(s=>this.createColumnComponent(s,!0));this.insertIndex>=t.length?t.push(...i):t.splice(this.insertIndex,0,...i)}this.appendChild(this.eColumnDropList),t.forEach((i,s)=>{s>0&&this.addArrow(this.eColumnDropList),this.eColumnDropList.appendChild(i.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childColumnComponents.forEach((e,t)=>{const i=e.getGui();A.setAriaPosInSet(i,t+1),A.setAriaSetSize(i,this.childColumnComponents.length)})}createColumnComponent(e,t){const i=new Vi(e,this.dropTarget,t,this.dropZonePurpose,this.horizontal);return i.addEventListener(Vi.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(i),this.guiDestroyFunctions.push(()=>this.destroyBean(i)),t||this.childColumnComponents.push(i),i}addIconAndTitleToGui(){const e=this.params.icon,t=document.createElement("div");if(A.setAriaHidden(t,!0),this.addElementClasses(t,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),t.appendChild(e),!this.horizontal){const i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=this.params.title,t.appendChild(i)}this.appendChild(t)}isExistingColumnsEmpty(){return this.getExistingColumns().length===0}addEmptyMessageToGui(){if(!this.isExistingColumnsEmpty()||this.isPotentialDndColumns())return;const e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}addArrow(e){if(this.horizontal){const t=this.beans.gridOptionsService.is("enableRtl"),i=A.createIconNoSpan(t?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(i,"cell-separator"),e.appendChild(i)}}}Mi.STATE_NOT_DRAGGING="notDragging";Mi.STATE_NEW_COLUMNS_IN="newColumnsIn";Mi.STATE_REARRANGE_COLUMNS="rearrangeColumns";LA([S("columnModel")],Mi.prototype,"colModel",void 0);LA([S("focusService")],Mi.prototype,"focusService",void 0);var r0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class td extends Mi{constructor(e){super(e,"rowGroup")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({dragAndDropIcon:De.ICON_GROUP,icon:A.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){const e=super.getTooltipParams();return e.location="rowGroupColumnsList",e}isColumnDroppable(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowRowGroup()&&!e.isRowGroupActive()}updateColumns(e){if(this.gridOptionsService.is("functionsPassive")){const t={type:E.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setRowGroupColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndColumns()?De.ICON_GROUP:De.ICON_NOT_ALLOWED}getExistingColumns(){return this.columnModel.getRowGroupColumns()}}r0([S("columnModel")],td.prototype,"columnModel",void 0);r0([S("loggerFactory")],td.prototype,"loggerFactory",void 0);r0([S("dragAndDropService")],td.prototype,"dragAndDropService",void 0);r0([U],td.prototype,"passBeansUp",null);var a0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class id extends Mi{constructor(e){super(e,"pivot")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({dragAndDropIcon:De.ICON_GROUP,icon:A.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){const e=super.getTooltipParams();return e.location="pivotColumnsList",e}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":const t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(!1);break}else this.setDisplayed(e)}isColumnDroppable(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowPivot()&&!e.isPivotActive()}updateColumns(e){if(this.gridOptionsService.is("functionsPassive")){const t={type:E.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setPivotColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndColumns()?De.ICON_PIVOT:De.ICON_NOT_ALLOWED}getExistingColumns(){return this.columnModel.getPivotColumns()}}a0([S("columnModel")],id.prototype,"columnModel",void 0);a0([S("loggerFactory")],id.prototype,"loggerFactory",void 0);a0([S("dragAndDropService")],id.prototype,"dragAndDropService",void 0);a0([U],id.prototype,"passBeansUp",null);var FA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Hb extends Q{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()}createNorthPanel(){const e=document.createElement("div"),t=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),A.setAriaRole(e,"presentation"),this.rowGroupComp=new td(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new id(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,Q.EVENT_DISPLAYED_CHANGED,t),this.addManagedListener(this.pivotComp,Q.EVENT_DISPLAYED_CHANGED,t),this.onDropPanelVisible(),e}onDropPanelVisible(){const e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)}onRowGroupChanged(){if(!this.rowGroupComp)return;const e=this.gridOptionsService.get("rowGroupPanelShow");if(e==="always")this.rowGroupComp.setDisplayed(!0);else if(e==="onlyWhenGrouping"){const t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else this.rowGroupComp.setDisplayed(!1)}}FA([S("columnModel")],Hb.prototype,"columnModel",void 0);FA([U],Hb.prototype,"postConstruct",null);var Bb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let kf=class extends j{execute(e){const t=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),s=d=>!d.node.group,n=d=>d.node.leafGroup,o=this.gridOptionsService.getGroupAggFiltering()||(t?n:s),{changedPath:a}=e,l=(d,h=!1)=>{d.childrenAfterFilter&&(d.childrenAfterAggFilter=d.childrenAfterFilter,h&&d.childrenAfterAggFilter.forEach(u=>l(u,h)),this.setAllChildrenCount(d)),d.sibling&&(d.sibling.childrenAfterAggFilter=d.childrenAfterAggFilter)},c=d=>{var h;d.childrenAfterAggFilter=((h=d.childrenAfterFilter)===null||h===void 0?void 0:h.filter(u=>{var p;return o({node:u})&&this.filterManager.doesRowPassAggregateFilters({rowNode:u})?(l(u,!0),!0):(p=u.childrenAfterAggFilter)===null||p===void 0?void 0:p.length}))||null,this.setAllChildrenCount(d),d.sibling&&(d.sibling.childrenAfterAggFilter=d.childrenAfterAggFilter)};a.forEachChangedNodeDepthFirst(i?c:l,!0)}setAllChildrenCountTreeData(e){let t=0;e.childrenAfterAggFilter.forEach(i=>{t++,t+=i.allChildrenCount}),e.setAllChildrenCount(t)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(i=>{i.group?t+=i.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gridOptionsService.isTreeData()?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)}};Bb([S("filterManager")],kf.prototype,"filterManager",void 0);Bb([S("columnModel")],kf.prototype,"columnModel",void 0);kf=Bb([ee("filterAggregatesStage")],kf);const nk="30.0.2";var Hg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class rn extends Hu{constructor(){super(`
            <div class="ag-group-filter">
                <div ref="eGroupField"></div>
                <div ref="eUnderlyingFilter"></div>
            </div>
        `)}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.validateParams(),this.updateGroups().then(()=>{this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}validateParams(){const{colDef:e}=this.params;e.field&&A.doOnce(()=>console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.'),"groupFilterFieldParam"),e.filterValueGetter&&A.doOnce(()=>console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),"groupFilterFilterValueGetterParam"),e.filterParams&&A.doOnce(()=>console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.'),"groupFilterFilterParams")}updateGroups(){const e=this.updateGroupField();return this.getUnderlyingFilters(e)}getSourceColumns(){if(this.groupColumn=this.params.column,this.gridOptionsService.is("treeData"))return A.doOnce(()=>console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),"groupFilterTreeData"),[];const e=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return e||(A.doOnce(()=>console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter."),"groupFilterNotGroupColumn"),[])}updateGroupField(){A.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const e=this.getSourceColumns(),t=e.filter(i=>i.isFilterAllowed());return t.length?(e.length===1?(this.selectedColumn=t[0],A.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!t.some(i=>i.getId()===this.selectedColumn.getId()))&&(this.selectedColumn=t[0]),this.createGroupFieldSelectElement(t),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(A.loadTemplate('<div class="ag-filter-separator"></div>')),A.setDisplayed(this.eGroupField,!0)),t):(this.selectedColumn=void 0,A.setDisplayed(this.eGroupField,!1),null)}createGroupFieldSelectElement(e){this.eGroupFieldSelect=this.createManagedBean(new Oo);const t=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(t("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map(i=>{var s;return{value:i.getId(),text:(s=this.columnModel.getDisplayNameForColumn(i,"groupFilter",!1))!==null&&s!==void 0?s:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(i=>this.updateSelectedColumn(i)),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),e.length===1&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(e){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),Xe.resolve();const t=[],i=[];return e.forEach(s=>{const n=this.filterManager.getOrCreateFilterWrapper(s,"COLUMN_MENU");n!=null&&n.filterPromise&&t.push(n.filterPromise.then(o=>(o&&i.push({filter:o,column:s}),s.getId()===this.selectedColumn.getId()&&(this.selectedFilter=o??void 0),o)))}),Xe.all(t).then(()=>{this.filterColumnPairs=i,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")})}addUnderlyingFilterElement(){if(A.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return Xe.resolve();const e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then(t=>{var i;this.eUnderlyingFilter.appendChild(t),(i=e.filterPromise)===null||i===void 0||i.then(s=>{var n,o;(n=s==null?void 0:s.afterGuiAttached)===null||n===void 0||n.call(s,this.afterGuiAttachedParams),!(!((o=this.afterGuiAttachedParams)===null||o===void 0)&&o.suppressFocus)&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()})}):Xe.resolve()}updateSelectedColumn(e){var t,i;if(!e)return;(i=(t=this.selectedFilter)===null||t===void 0?void 0:t.afterGuiDetached)===null||i===void 0||i.call(t);const s=this.getFilterColumnPair(e);this.selectedColumn=s==null?void 0:s.column,this.selectedFilter=s==null?void 0:s.filter,this.dispatchEvent({type:rn.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}isFilterActive(){var e;return!!(!((e=this.filterColumnPairs)===null||e===void 0)&&e.some(({filter:t})=>t.isFilterActive()))}doesFilterPass(){return!0}getModel(){return null}setModel(){return Xe.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()}afterGuiDetached(){var e,t;A.clearElement(this.eUnderlyingFilter),(t=(e=this.selectedFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||t===void 0||t.call(e)}onColumnRowGroupChanged(){this.updateGroups().then(()=>{this.dispatchEvent({type:rn.EVENT_COLUMN_ROW_GROUP_CHANGED}),this.eventService.dispatchEvent({type:"filterAllowedUpdated"})})}getFilterColumnPair(e){var t;if(e)return(t=this.filterColumnPairs)===null||t===void 0?void 0:t.find(({column:i})=>i.getId()===e)}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}}rn.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";rn.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged";Hg([S("filterManager")],rn.prototype,"filterManager",void 0);Hg([S("columnModel")],rn.prototype,"columnModel",void 0);Hg([G("eGroupField")],rn.prototype,"eGroupField",void 0);Hg([G("eUnderlyingFilter")],rn.prototype,"eUnderlyingFilter",void 0);Hg([U],rn.prototype,"postConstruct",null);var Wb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class l0 extends Q{constructor(){super(`
            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>
        `)}init(e){this.params=e;const t=this.gridOptionsService.get("groupDisplayType")==="multipleColumns";return new Xe(i=>{this.params.parentFilterInstance(s=>{this.parentFilterInstance=s,t?this.setupUnderlyingFloatingFilterElement().then(()=>i()):(this.setupReadOnlyFloatingFilterElement(),i())})}).then(()=>{this.addManagedListener(this.parentFilterInstance,rn.EVENT_SELECTED_COLUMN_CHANGED,()=>this.onSelectedColumnChanged()),this.addManagedListener(this.parentFilterInstance,rn.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}setupReadOnlyFloatingFilterElement(){if(!this.eFloatingFilterText){this.eFloatingFilterText=this.createManagedBean(new Hl);const e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),t=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${t("ariaFilterInput","Filter Input")}`).addGuiEventListener("click",()=>this.params.showParentFilter())}this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,A.clearElement(this.eFloatingFilter);const e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){const t=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(t)return this.columnVisibleChangedListener||(this.columnVisibleChangedListener=this.addManagedListener(e,me.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this))),t.newAgStackInstance().then(i=>{var s,n;this.underlyingFloatingFilter=i,(s=this.underlyingFloatingFilter)===null||s===void 0||s.onParentModelChanged((n=this.parentFilterInstance.getSelectedFilter())===null||n===void 0?void 0:n.getModel()),this.appendChild(i.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),Xe.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onParentModelChanged(e,t){var i,s;this.showingUnderlyingFloatingFilter?(i=this.underlyingFloatingFilter)===null||i===void 0||i.onParentModelChanged((s=this.parentFilterInstance.getSelectedFilter())===null||s===void 0?void 0:s.getModel(),t):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;const e=this.parentFilterInstance.getSelectedFilter();if(!e){this.eFloatingFilterText.setValue(""),this.eFloatingFilterText.setDisplayed(!1);return}if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){const t=e.getModel();this.eFloatingFilterText.setValue(t==null?"":e.getModelAsString(t))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}}Wb([S("columnModel")],l0.prototype,"columnModel",void 0);Wb([S("filterManager")],l0.prototype,"filterManager",void 0);Wb([G("eFloatingFilter")],l0.prototype,"eFloatingFilter",void 0);const NA={version:nk,moduleName:te.RowGroupingModule,beans:[ya,kf,Sa,Gf,gu,wo],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:Hb}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:rn},{componentName:"agGroupColumnFloatingFilter",componentClass:l0}],dependantModules:[Wi]};var c0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class mu extends Mi{constructor(e){super(e,"aggregation")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),i=e("values","Values");super.init({dragAndDropIcon:De.ICON_AGGREGATE,icon:A.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){const e=super.getTooltipParams();return e.location="valueColumnsList",e}getIconName(){return this.isPotentialDndColumns()?De.ICON_AGGREGATE:De.ICON_NOT_ALLOWED}isColumnDroppable(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowValue()&&!e.isValueActive()}updateColumns(e){if(this.gridOptionsService.is("functionsPassive")){const t={type:E.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setValueColumns(e,"toolPanelUi")}getExistingColumns(){return this.columnModel.getValueColumns()}}c0([S("columnModel")],mu.prototype,"columnModel",void 0);c0([S("loggerFactory")],mu.prototype,"loggerFactory",void 0);c0([S("dragAndDropService")],mu.prototype,"dragAndDropService",void 0);c0([U],mu.prototype,"passBeansUp",null);var GA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Jl extends Q{constructor(){super(Jl.TEMPLATE)}init(e,t,i){this.allowDragging=e,this.params=t,this.eventType=i,this.primaryColsHeaderPanel.init(this.params);const s=this.params.suppressColumnFilter,n=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&s&&n&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new bd(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}onFilterChanged(e){this.primaryColsListPanel.setFilterText(e.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(e){this.primaryColsHeaderPanel.setExpandState(e.state)}onSelectionChange(e){this.primaryColsHeaderPanel.setSelectionState(e.state)}}Jl.TEMPLATE=`<div class="ag-column-select">
            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`;GA([G("primaryColsHeaderPanel")],Jl.prototype,"primaryColsHeaderPanel",void 0);GA([G("primaryColsListPanel")],Jl.prototype,"primaryColsListPanel",void 0);var kA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class qu extends Q{constructor(){super(qu.TEMPLATE),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const t={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=Object.assign(Object.assign(Object.assign({},t),e),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Nf),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel)),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Jl),this.childDestroyFuncs.push(()=>this.destroyBean(this.primaryColsPanel)),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new td(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.rowGroupDropZonePanel)),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new mu(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.valuesDropZonePanel)),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new id(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotDropZonePanel)),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();const i=this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.resetChildrenHeight(),this.setLastVisible()});this.childDestroyFuncs.push(()=>i())}this.initialised=!0}setPivotModeSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new Nf),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel))),this.setLastVisible())}setRowGroupsSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new td(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new mu(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new id(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(e=>{if(!e)return;const t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))})}setLastVisible(){const e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(n=>n.classList.remove("ag-last-column-drop"));const i=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),s=A.last(i);s&&s.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const t=this.getGui().children;for(let i=0;i<t.length;i++){const s=t[i];s.style.removeProperty("height"),s.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return ie.assertRegistered(te.RowGroupingModule,"Row Grouping",this.context.getGridId())}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach(e=>e()),this.childDestroyFuncs.length=0,A.clearElement(this.getGui())}refresh(){this.destroyChildren(),this.init(this.params)}destroy(){this.destroyChildren(),super.destroy()}}qu.TEMPLATE='<div class="ag-column-panel"></div>';kA([S("gridApi")],qu.prototype,"gridApi",void 0);kA([S("columnApi")],qu.prototype,"columnApi",void 0);var VA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class d0 extends Q{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}setElementToResize(e){this.elementToResize=e}postConstruct(){const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsService.is("enableRtl"))}dispatchResizeEvent(e,t,i){const s={type:E.EVENT_TOOL_PANEL_SIZE_CHANGED,width:i,started:e,ended:t};this.eventService.dispatchEvent(s)}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e,t=!1){const i=this.inverted?-1:1;let s=Math.max(this.minWidth,Math.floor(this.startingWidth-e*i));this.maxWidth!=null&&(s=Math.min(this.maxWidth,s)),this.elementToResize.style.width=`${s}px`,this.dispatchResizeEvent(!1,t,s)}setInverted(e){this.inverted=e}setMaxWidth(e){this.maxWidth=e}setMinWidth(e){e!=null?this.minWidth=e:this.minWidth=100}}VA([S("horizontalResizeService")],d0.prototype,"horizontalResizeService",void 0);VA([U],d0.prototype,"postConstruct",null);var h0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class wa extends Q{constructor(e){super(),this.toolPanelDef=e}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}createTemplate(){return`<div class="ag-side-button" role="presentation">
                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">
                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
                    <span ref ="eLabel" class="ag-side-button-label"></span>
                </button>
            </div>`}setLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.toolPanelDef,i=e(t.labelKey,t.labelDefault);this.eLabel.innerText=i}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",A.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))}onButtonPressed(){this.dispatchEvent({type:wa.EVENT_TOGGLE_BUTTON_CLICKED})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),A.setAriaExpanded(this.eToggleButton,e)}getButtonElement(){return this.eToggleButton}}wa.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked";h0([G("eToggleButton")],wa.prototype,"eToggleButton",void 0);h0([G("eIconWrapper")],wa.prototype,"eIconWrapper",void 0);h0([G("eLabel")],wa.prototype,"eLabel",void 0);h0([U],wa.prototype,"postConstruct",null);var u0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class bo extends Q{constructor(){super(bo.TEMPLATE),this.buttonComps=[]}postConstruct(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){if(e.key!==W.TAB||!e.shiftKey)return;const t=A.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(t,!0)&&e.preventDefault()}setActiveButton(e){this.buttonComps.forEach(t=>{t.setSelected(e===t.getToolPanelId())})}addButtonComp(e){const t=this.createBean(new wa(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener(wa.EVENT_TOGGLE_BUTTON_CLICKED,()=>{this.dispatchEvent({type:bo.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),A.clearElement(this.getGui())}}bo.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked";bo.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>';u0([S("focusService")],bo.prototype,"focusService",void 0);u0([S("columnModel")],bo.prototype,"columnModel",void 0);u0([U],bo.prototype,"postConstruct",null);u0([ft],bo.prototype,"clearButtons",null);class ms{static parse(e){if(!e)return;if(e===!0)return{toolPanels:[ms.DEFAULT_COLUMN_COMP,ms.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof e=="string")return ms.parse([e]);if(Array.isArray(e)){const i=[];return e.forEach(s=>{const n=ms.DEFAULT_BY_KEY[s];if(!n){console.warn(`AG Grid: the key ${s} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(ms.DEFAULT_BY_KEY).join(",")}`);return}i.push(n)}),i.length===0?void 0:{toolPanels:i,defaultToolPanel:i[0].id}}return{toolPanels:ms.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}static parseComponents(e){const t=[];return e&&e.forEach(i=>{let s=null;if(typeof i=="string"){const n=ms.DEFAULT_BY_KEY[i];if(!n){console.warn(`AG Grid: the key ${i} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(ms.DEFAULT_BY_KEY).join(",")}`);return}s=n}else s=i;t.push(s)}),t}}ms.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"};ms.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"};ms.DEFAULT_BY_KEY={columns:ms.DEFAULT_COLUMN_COMP,filters:ms.DEFAULT_FILTER_COMP};var HA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Zu extends Q{constructor(){super(Zu.TEMPLATE)}setupResize(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new d0);e.setAttribute("id",`ag-${this.getCompId()}`),t.setElementToResize(e),this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e){const{id:t,minWidth:i,maxWidth:s,width:n}=e;this.toolPanelId=t,this.width=n;const o={},l=this.userComponentFactory.getToolPanelCompDetails(e,o).newAgStackInstance();if(l==null){console.warn(`AG Grid: error processing tool panel component ${t}. You need to specify 'toolPanel'`);return}l.then(this.setToolPanelComponent.bind(this)),i!=null&&this.resizeBar.setMinWidth(i),s!=null&&this.resizeBar.setMaxWidth(s)}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)}),this.width&&(this.getGui().style.width=`${this.width}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t=this.gridOptionsService.is("enableRtl"),i=e==="left",s=t?i:!i;this.resizeBar.setInverted(s)}refresh(){this.toolPanelCompInstance.refresh()}}Zu.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>';HA([S("userComponentFactory")],Zu.prototype,"userComponentFactory",void 0);HA([U],Zu.prototype,"setupResize",null);var p0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ql extends Q{constructor(){super(Ql.TEMPLATE),this.toolPanelWrappers=[]}postConstruct(){this.sideBarButtonsComp.addEventListener(bo.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.addManagedPropertyListener("sideBar",()=>{this.clearDownUi(),this.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new bs(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,sideBarButtonsComp:i}=this,s=this.getGui(),n=i.getGui(),a=this.gridOptionsService.getDocument().activeElement,l=s.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),c=e.target;if(!l)return;if(n.contains(a)){t.focusInto(l,e.shiftKey)&&e.preventDefault();return}if(!e.shiftKey)return;let d=null;l.contains(a)?d=this.focusService.findNextFocusableElement(l,void 0,!0):t.isTargetUnderManagedComponent(l,c)&&e.shiftKey&&(d=this.focusService.findFocusableElementBeforeTabGuard(l,c)),d||(d=n.querySelector(".ag-selected button")),d&&(e.preventDefault(),d.focus())}handleKeyDown(e){const t=this.gridOptionsService.getDocument();if(!this.sideBarButtonsComp.getGui().contains(t.activeElement))return;const i=this.sideBarButtonsComp.getGui(),s=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),n=t.activeElement,o=s.findIndex(c=>c.contains(n));let a=null;switch(e.key){case W.LEFT:case W.UP:a=Math.max(0,o-1);break;case W.RIGHT:case W.DOWN:a=Math.min(o+1,s.length-1);break}if(a===null)return;const l=s[a].querySelector("button");l&&(l.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef(){this.setDisplayed(!1);const e=this.gridOptionsService.get("sideBar");if(this.sideBar=ms.parse(e),this.sideBar&&this.sideBar.toolPanels){const t=!this.sideBar.hiddenByDefault;this.setDisplayed(t);const i=this.sideBar.toolPanels;this.createToolPanelsAndSideButtons(i),this.setSideBarPosition(this.sideBar.position),this.sideBar.hiddenByDefault||this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right");const t=e==="left",i=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach(s=>{s.setResizerSizerSide(i)}),this}createToolPanelsAndSideButtons(e){for(const t of e)this.createToolPanelAndSideButton(t)}validateDef(e){return e.id==null?(console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1):!(e.toolPanel==="agColumnsToolPanel"&&!ie.assertRegistered(te.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId())||e.toolPanel==="agFiltersToolPanel"&&!ie.assertRegistered(te.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))}createToolPanelAndSideButton(e){if(!this.validateDef(e))return;const t=this.sideBarButtonsComp.addButtonComp(e),i=this.getContext().createBean(new Zu);i.setToolPanelDef(e),i.setDisplayed(!1);const s=i.getGui();this.appendChild(s),this.toolPanelWrappers.push(i),A.setAriaControls(t.getButtonElement(),s)}refresh(){this.toolPanelWrappers.forEach(e=>e.refresh())}openToolPanel(e,t="api"){const i=this.openedItem();if(i===e)return;this.toolPanelWrappers.forEach(o=>{const a=e===o.getToolPanelId();o.setDisplayed(a)});const s=this.openedItem();i!==s&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,i??void 0,t))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter(i=>i.getToolPanelId()===e)[0];if(!t){console.warn(`AG Grid: unable to lookup Tool Panel as invalid key supplied: ${e}`);return}return t.getToolPanelInstance()}raiseToolPanelVisibleEvent(e,t,i){const s=!!e&&!!t;if(t){const n={type:E.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:t,visible:!1,switchingToolPanel:s};this.eventService.dispatchEvent(n)}if(e){const n={type:E.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:e,visible:!0,switchingToolPanel:s};this.eventService.dispatchEvent(n)}}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach(t=>{t.isDisplayed()&&(e=t.getToolPanelId())}),e}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}}Ql.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
        </div>`;p0([S("gridApi")],Ql.prototype,"gridApi",void 0);p0([S("focusService")],Ql.prototype,"focusService",void 0);p0([G("sideBarButtons")],Ql.prototype,"sideBarButtonsComp",void 0);p0([U],Ql.prototype,"postConstruct",null);var BA=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Pv=class extends j{constructor(){super(...arguments),this.isColGroupDef=e=>e&&typeof e.children<"u",this.getId=e=>this.isColGroupDef(e)?e.groupId:e.colId}createColumnTree(e){const t=[],i=(n,o)=>{if(this.isColGroupDef(n)){const a=n,l=typeof a.groupId<"u"?a.groupId:a.headerName,c=new Ge(a,l,!1,o),d=[];return a.children.forEach(h=>{const u=i(h,o+1);u&&d.push(u)}),c.setChildren(d),c}else{const a=n,l=a.colId?a.colId:a.field,c=this.columnModel.getPrimaryColumn(l);return c||t.push(a),c}},s=[];return e.forEach(n=>{const o=i(n,0);o&&s.push(o)}),t.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",t),s}syncLayoutWithGrid(e){const t=this.getLeafPathTrees(),i=this.mergeLeafPathTrees(t);e(i)}getLeafPathTrees(){const e=(s,n)=>{let o;if(s instanceof Ge)if(s.isPadding())o=n;else{const l=Object.assign({},s.getColGroupDef());l.groupId=s.getGroupId(),l.children=[n],o=l}else{const l=Object.assign({},s.getColDef());l.colId=s.getColId(),o=l}const a=s.getOriginalParent();return a?e(a,o):o};return this.columnModel.getAllGridColumns().filter(s=>{const n=s.getColDef();return s.isPrimary()&&!n.showRowGroup}).map(s=>e(s,s.getColDef()))}mergeLeafPathTrees(e){const t=(n,o)=>this.isColGroupDef(n)&&this.isColGroupDef(o)&&this.getId(n)===this.getId(o),i=(n,o)=>{if(!this.isColGroupDef(o))return n;const a=n,l=o;return l.children&&l.groupId&&this.addChildrenToGroup(a,l.groupId,l.children[0])||l.children.forEach(c=>i(a,c)),a},s=[];for(let n=1;n<=e.length;n++){const o=e[n-1],a=e[n];t(o,a)?e[n]=i(o,a):s.push(o)}return s}addChildrenToGroup(e,t,i){const s=(a,l)=>{const c=a.children.map(this.getId),d=A.includes(c,this.getId(l)),h=A.last(a.children),u=h&&this.getId(h)!==this.getId(l);return d&&u};if(!this.isColGroupDef(e))return!0;const n=e,o=i;if(s(n,o))return n.children.push(o),!0;if(n.groupId===t){const a=n.children.map(this.getId);if(!A.includes(a,this.getId(o)))return n.children.push(o),!0}return n.children.forEach(a=>this.addChildrenToGroup(a,t,i)),!1}};BA([S("columnModel")],Pv.prototype,"columnModel",void 0);Pv=BA([ee("toolPanelColDefService")],Pv);const ok="30.0.2",Ub={version:ok,moduleName:te.SideBarModule,beans:[Pv],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:d0},{componentName:"AgSideBar",componentClass:Ql},{componentName:"AgSideBarButtons",componentClass:bo}],dependantModules:[Wi]};var Bg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let sd=class{selectAllChildren(e,t,i){const s=this.extractAllLeafColumns(e);this.setAllColumns(s,t,i)}setColumn(e,t,i){this.setAllColumns([e],t,i)}setAllColumns(e,t,i){this.columnModel.isPivotMode()?this.setAllPivot(e,t,i):this.setAllVisible(e,t,i)}extractAllLeafColumns(e){const t=[],i=s=>{s.forEach(n=>{n.isPassesFilter()&&(n.isGroup()?i(n.getChildren()):t.push(n.getColumn()))})};return i(e),t}setAllVisible(e,t,i){const s=[];e.forEach(n=>{n.getColDef().lockVisible||n.isVisible()!=t&&s.push({colId:n.getId(),hide:!t})}),s.length>0&&this.columnModel.applyColumnState({state:s},i)}setAllPivot(e,t,i){this.gridOptionsService.is("functionsPassive")?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,i)}setAllPivotPassive(e,t){const i=this.columnModel.getPivotColumns().slice(),s=this.columnModel.getValueColumns().slice(),n=this.columnModel.getRowGroupColumns().slice();let o=!1,a=!1,l=!1;const h=t?u=>{u.isAnyFunctionActive()||(u.isAllowValue()?(s.push(u),a=!0):u.isAllowRowGroup()?(n.push(u),o=!0):u.isAllowPivot()&&(i.push(u),l=!0))}:u=>{u.isAnyFunctionActive()&&(i.indexOf(u)>=0&&(A.removeFromArray(i,u),o=!0),s.indexOf(u)>=0&&(A.removeFromArray(s,u),a=!0),n.indexOf(u)>=0&&(A.removeFromArray(n,u),l=!0))};if(e.forEach(h),o){const u={type:E.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(u)}if(l){const u={type:E.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:n};this.eventService.dispatchEvent(u)}if(a){const u={type:E.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:n};this.eventService.dispatchEvent(u)}}setAllPivotActive(e,t,i){const s=[],a=t?l=>{if(!l.isAnyFunctionActive())if(l.isAllowValue()){const c=typeof l.getAggFunc()=="string"?l.getAggFunc():this.aggFuncService.getDefaultAggFunc(l);s.push({colId:l.getId(),aggFunc:c})}else l.isAllowRowGroup()?s.push({colId:l.getId(),rowGroup:!0}):l.isAllowPivot()&&s.push({colId:l.getId(),pivot:!0})}:l=>{(l.isPivotActive()||l.isRowGroupActive()||l.isValueActive())&&s.push({colId:l.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};e.forEach(a),s.length>0&&this.columnModel.applyColumnState({state:s},i)}};Bg([S("aggFuncService")],sd.prototype,"aggFuncService",void 0);Bg([S("columnModel")],sd.prototype,"columnModel",void 0);Bg([S("gridOptionsService")],sd.prototype,"gridOptionsService",void 0);Bg([S("eventService")],sd.prototype,"eventService",void 0);sd=Bg([ee("modelItemUtils")],sd);const rk="30.0.2",ak={version:rk,moduleName:te.ColumnsToolPanelModule,beans:[sd],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:Bn},{componentName:"AgPrimaryColsList",componentClass:Zl},{componentName:"AgPrimaryCols",componentClass:Jl}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:qu}],dependantModules:[Wi,NA,Ub]},lk={getTemplate(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}}},ck={getTemplate(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}}},dk={getTemplate(r){const{width:e}=r;return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:e}}]}}}},hk={getTemplate(r){const{mergeAcross:e,styleId:t,data:i}=r,s={};return e&&(s.MergeAcross=e),t&&(s.StyleID=t),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:s}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:i==null?void 0:i.type}}]},textNode:i==null?void 0:i.value}]}}},uk={getTemplate(r){const{cells:e}=r;return{name:"Row",children:e.map(t=>hk.getTemplate(t))}}},pk={getTemplate(r){const{table:e,name:t}=r,{columns:i,rows:s}=e,n=i.map(a=>dk.getTemplate(a)),o=s.map(a=>uk.getTemplate(a));return{name:"Worksheet",children:[{name:"Table",children:n.concat(o)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:t}}]}}}},fk={getTemplate(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}}},gk={getTemplate(r){const{vertical:e,horizontal:t,indent:i,readingOrder:s,rotate:n,shrinkToFit:o,verticalText:a,wrapText:l}=r.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:e,Horizontal:t,Indent:i,ReadingOrder:s,Rotate:n,ShrinkToFit:o,VerticalText:a,WrapText:l}}]}}}},mk={getTemplate(r){const{borderBottom:e,borderLeft:t,borderRight:i,borderTop:s}=r.borders;return{name:"Borders",children:[e,t,i,s].map((n,o)=>({name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:o==0?"Bottom":o==1?"Left":o==2?"Right":"Top",LineStyle:n.lineStyle,Weight:n.weight,Color:n.color}}]}}))}}},vk={getTemplate(r){const{bold:e,fontName:t,italic:i,color:s,outline:n,shadow:o,size:a,strikeThrough:l,underline:c,verticalAlign:d,charSet:h,family:u}=r.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:e,FontName:t,Italic:i,Color:s,Outline:n,Shadow:o,Size:a,StrikeThrough:l,Underline:c,VerticalAlign:d}},{prefix:"x:",map:{CharSet:h,Family:u}}]}}}},Ck={getTemplate(r){const{color:e,pattern:t,patternColor:i}=r.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:e,Pattern:t,PatternColor:i}}]}}}},yk={getTemplate(r){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:r.protection.protected,HideFormula:r.protection.hideFormula}}]}}}},Sk={getTemplate(r){const{format:e}=r.numberFormat;return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:e}}]}}}},wk={getTemplate(r){const{id:e,name:t}=r;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:e,Name:t||e}}]}}}};class Mv{static createExcel(e,t){const i=this.excelXmlHeader(),s=fk.getTemplate(),n=ck.getTemplate(),o=this.workbook(s,n,e,t);return`${i}${PS.createXml(o,a=>a?"1":"0")}`}static workbook(e,t,i,s){const n=[e,t,this.stylesXmlElement(i)].concat(pk.getTemplate(s));return Object.assign({},lk.getTemplate(),{children:n})}static excelXmlHeader(){return`<?xml version="1.0" ?>
        <?mso-application progid="Excel.Sheet" ?>
        `}static stylesXmlElement(e){return{name:"Styles",children:e?e.map(t=>this.styleXmlElement(t)):[]}}static styleXmlElement(e){const t=A.compose(this.addProperty("alignment",e),this.addProperty("borders",e),this.addProperty("font",e),this.addProperty("interior",e),this.addProperty("protection",e),this.addProperty("numberFormat",e))([]);return Object.assign({},wk.getTemplate(e),{children:t})}static addProperty(e,t){return i=>{if(!t[e])return i;const s={alignment:gk,borders:mk,font:vk,interior:Ck,numberFormat:Sk,protection:yk};return i.concat(s[e].getTemplate(t))}}}Mv.factoryMode=Xc.SINGLE_SHEET;const bk=9525,jx={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},Ek=r=>Math.round(r*72/96),xk=r=>Math.round(r*96/72),hh=r=>Math.ceil(r*bk),Rk=r=>{if(r===void 0)return;const t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(r||"Automatic");return Math.max(t,0)},Jm=(r,e)=>{if(!e)return;let t;return typeof e=="number"?t=e:t=e({rowIndex:r}),Ek(t)},Tk=(r,e)=>{const{colSpan:t,column:i}=r.position;if(r.width)if(t){const s=e.slice(i-1,i+t-1);let n=0;for(let o=0;o<s.length;o++){const a=s[o].getActualWidth();if(r.width<n+a){r.position.colSpan=o+1,r.totalWidth=r.width,r.width=r.totalWidth-n;break}n+=a}}else r.totalWidth=r.width},Dk=(r,e)=>{const{rowSpan:t,row:i}=r.position;if(r.height)if(t){let s=0,n=0;for(let o=i;o<i+t;o++){const a=xk(Jm(o,e)||20);if(r.height<s+a){r.position.rowSpan=n+1,r.totalHeight=r.height,r.height=r.totalHeight-s;break}s+=a,n++}}else r.totalHeight=r.height},xn=r=>{const e=PS.createHeader({encoding:"UTF-8",standalone:"yes"}),t=PS.createXml(r);return`${e}${t}`},Vf=r=>{const i=String.fromCharCode,s=Math.floor(r/26),n=r%26;return!s||r===26?i(65+r-1):n?s<26?i(65+s-1)+i(65+n-1):Vf(s)+i(65+n-1):Vf(s-1)+"Z"};class WA extends AA{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach(t=>{this.stylesByIds[t.id]=t}),this.excelStyles=[...this.config.baseExcelStyles]}addCustomContent(e){e.forEach(t=>{const i=this.rows.length+1;let s;!this.config.suppressRowOutline&&t.outlineLevel!=null&&(s=t.outlineLevel);const n={height:Jm(i,t.height||this.config.rowHeight),cells:(t.cells||[]).map((o,a)=>{var l,c,d;const h=this.addImage(i,this.columnsToExport[a],(l=o.data)===null||l===void 0?void 0:l.value);let u=null;o.styleId&&(u=typeof o.styleId=="string"?[o.styleId]:o.styleId);const p=this.getStyleId(u);if(h)return this.createCell(p,this.getDataTypeForValue(h.value),h.value==null?"":h.value);const f=(d=(c=o.data)===null||c===void 0?void 0:c.value)!==null&&d!==void 0?d:"",g=this.getDataTypeForValue(f);return o.mergeAcross?this.createMergedCell(p,g,f,o.mergeAcross):this.createCell(p,g,f)}),outlineLevel:s};t.collapsed!=null&&(n.collapsed=t.collapsed),t.hidden!=null&&(n.hidden=t.hidden),this.rows.push(n)})}onNewHeaderGroupingRow(){const e=[];return this.rows.push({cells:e,height:Jm(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:(t,i,s,n,o)=>{const a=this.config.styleLinker({rowType:Wc.HEADER_GROUPING,rowIndex:1,value:`grouping-${i}`,columnGroup:t});e.push(Object.assign(Object.assign({},this.createMergedCell(this.getStyleId(a),this.getDataTypeForValue("string"),i,n)),{collapsibleRanges:o}))}}}onNewHeaderRow(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)}onNewBodyRow(e){const t=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return e&&this.addRowOutlineIfNecessary(e),t}addRowOutlineIfNecessary(e){const{gridOptionsService:t,suppressRowOutline:i,rowGroupExpandState:s="expanded"}=this.config;if(t.is("groupHideOpenParents")||i||e.level==null)return;const o=e.footer?1:0,a=A.last(this.rows);if(a.outlineLevel=e.level+o,s==="expanded")return;const l=s==="collapsed";if(e.isExpandable()){const c=!l&&e.expanded;a.collapsed=!c}a.hidden=!!e.parent&&e.parent.level!==-1&&(l||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((t,i)=>this.convertColumnToExcel(t,i))}parse(){const e=this.rows.reduce((i,s)=>Math.max(i,s.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const t={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(t)}isFormula(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")}isNumerical(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))}getStyleById(e){return e==null?null:this.stylesByIds[e]||null}convertColumnToExcel(e,t){const i=this.config.columnWidth;return i?typeof i=="number"?{width:i}:{width:i({column:e,index:t})}:e?{width:Math.max(e.getActualWidth(),75)}:{}}onNewHeaderColumn(e,t){return(i,s)=>{const n=this.extractHeaderValue(i),o=this.config.styleLinker({rowType:Wc.HEADER,rowIndex:e,value:n,column:i});t.push(this.createCell(this.getStyleId(o),this.getDataTypeForValue("string"),n))}}onNewRow(e,t){const i=[];return this.rows.push({cells:i,height:Jm(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,i)()}}onNewBodyColumn(e,t){let i=0;return(s,n,o)=>{if(i>0){i-=1;return}const{value:a,valueFormatted:l}=this.extractRowCellValue(s,n,e,"excel",o),c=this.config.styleLinker({rowType:Wc.BODY,rowIndex:e,value:a,column:s,node:o}),d=this.getStyleId(c),h=s.getColSpan(o),u=this.addImage(e,s,a);u?t.push(this.createCell(d,this.getDataTypeForValue(u.value),u.value==null?"":u.value)):h>1?(i=h-1,t.push(this.createMergedCell(d,this.getDataTypeForValue(a),a,h-1))):t.push(this.createCell(d,this.getDataTypeForValue(a),a,l))}}getStyleId(e){if(!e||!e.length)return null;if(e.length===1)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t=`mixedStyle${this.mixedStyleCounter}`,i={};e.forEach(n=>{this.excelStyles.forEach(o=>{o.id===n&&A.mergeDeep(i,A.deepCloneObject(o))})}),i.id=t,i.name=t;const s=e.join("-");this.mixedStyles[s]={excelID:t,key:s,result:i},this.excelStyles.push(i),this.stylesByIds[t]=i}}class Ok extends WA{createExcel(e){return Mv.createExcel(this.excelStyles,e)}getDataTypeForValue(e){return this.isNumerical(e)?"Number":"String"}getType(e,t,i){if(this.isFormula(i))return"Formula";if(t&&t.dataType)switch(t.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn(`AG Grid: Unrecognized data type for excel export [${t.id}.dataType=${t.dataType}]`)}return e}addImage(){}createCell(e,t,i,s){const n=this.getStyleById(e);!(n!=null&&n.dataType)&&t==="String"&&s&&(i=s);const o=this.getType(t,n,i)||t;return{styleId:n?e:void 0,data:{type:o,value:this.getValueTransformed(o,i)}}}getValueTransformed(e,t){const i=n=>{if(this.config.suppressTextAsCDATA)return A.escapeString(n);const o="<![CDATA[",a="]]>",l=new RegExp(a,"g");return o+String(n).replace(l,"]]"+a+o+">")+a},s=n=>!n||n==="0"||n==="false"?"0":"1";switch(e){case"String":return i(t);case"Number":return Number(t).valueOf()+"";case"Boolean":return s(t);default:return t}}createMergedCell(e,t,i,s){return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:i},mergeAcross:s}}}const Ak={getTemplate(r){const t=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:r},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},Pk={getTemplate(r){const{name:e,ContentType:t,Extension:i,PartName:s}=r;return{name:e,properties:{rawMap:{Extension:i,PartName:s,ContentType:t}}}}},Mk={getTemplate(r){const e=new Array(r).fill(void 0).map((a,l)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${l+1}.xml`})),t=Je.worksheetImages.size,i={};Je.workbookImageIds.forEach(a=>{i[a.type]=!0});const s=new Array(t).fill(void 0).map((a,l)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${l+1}.xml`})),o=[...Object.keys(i).map(a=>({name:"Default",ContentType:`image/${a}`,Extension:a})),{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...e,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...s,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(a=>Pk.getTemplate(a));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:o}}},zx=(r,e)=>({name:`xdr:${r}`,children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}),_k=r=>{const e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(r.recolor&&r.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},Ik=(r,e)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:r.id,descr:r.altText!=null?r.altText:void 0}},children:[_k(r)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),$x=r=>{if(!r.saturation&&!r.tint)return;const e=[];return r.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:r.saturation*1e3}}}),r.tint&&e.push({name:"a:tint",properties:{rawMap:{val:r.tint*1e3}}}),e},Lk=(r,e)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:r.color}},children:$x(r)},{name:"a:srgbClr",properties:{rawMap:{val:e.color}},children:$x(e)}]}),Fk=(r,e)=>{let t;if(r.transparency){const i=Math.min(Math.max(r.transparency,0),100);t=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(i*1e3)}}}]}if(r.recolor)switch(t||(t=[]),r.recolor.toLocaleLowerCase()){case"grayscale":t.push({name:"a:grayscl"});break;case"sepia":t.push(Lk({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":t.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${e}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:t},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},Nk=(r,e)=>{const t={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(r.rotation){const n=r.rotation;t.properties={rawMap:{rot:Math.min(Math.max(n,0),360)*6e4}}}return{name:"xdr:spPr",children:[t,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},Gk=r=>{r.fitCell=!!r.fitCell||!r.width||!r.height;const{position:e={},fitCell:t,width:i=0,height:s=0,totalHeight:n,totalWidth:o}=r,{offsetX:a=0,offsetY:l=0,row:c=1,rowSpan:d=1,column:h=1,colSpan:u=1}=e;return{from:{row:c-1,col:h-1,offsetX:hh(a),offsetY:hh(l)},to:{row:c-1+(t?1:d-1),col:h-1+(t?1:u-1),offsetX:hh(i+a),offsetY:hh(s+l)},height:hh(n||s),width:hh(o||i)}},kk=(r,e,t,i)=>({name:"xdr:pic",children:[Ik(r,e+1),Fk(r,t+1),Nk(r,i)]}),Vk={getTemplate(r){const{sheetIndex:e}=r,t=Je.worksheetImages.get(e),i=Je.worksheetImageIds.get(e),s=t.map((n,o)=>{const a=Gk(n);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[zx("from",a.from),zx("to",a.to),kk(n,o,i.get(n.id).index,a),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:s}}},Rn=r=>{const[e,t,i,s]=r;return{name:`a:${e}`,children:[{name:`a:${t}`,properties:{rawMap:{val:i,lastClr:s}}}]}},Hk={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Rn(["dk1","sysClr","windowText","000000"]),Rn(["lt1","sysClr","window","FFFFFF"]),Rn(["dk2","srgbClr","44546A"]),Rn(["lt2","srgbClr","E7E6E6"]),Rn(["accent1","srgbClr","4472C4"]),Rn(["accent2","srgbClr","ED7D31"]),Rn(["accent3","srgbClr","A5A5A5"]),Rn(["accent4","srgbClr","FFC000"]),Rn(["accent5","srgbClr","5B9BD5"]),Rn(["accent6","srgbClr","70AD47"]),Rn(["hlink","srgbClr","0563C1"]),Rn(["folHlink","srgbClr","954F72"])]}}},ne=r=>{const[e,t,i,s]=r;return{name:`a:${e}`,properties:{rawMap:{script:i,typeface:t,panose:s}}}},Bk={getTemplate(){const{utf8_encode:r}=A;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[ne(["latin","Calibri Light",void 0,"020F0302020204030204"]),ne(["ea",""]),ne(["cs",""]),ne(["font",r("æ¸¸ã´ã·ãã¯ Light"),"Jpan"]),ne(["font",r("ë§ì ê³ ë"),"Hang"]),ne(["font",r("ç­çº¿ Light"),"Hans"]),ne(["font",r("æ°ç´°æé«"),"Hant"]),ne(["font","Times New Roman","Arab"]),ne(["font","Times New Roman","Hebr"]),ne(["font","Tahoma","Thai"]),ne(["font","Nyala","Ethi"]),ne(["font","Vrinda","Beng"]),ne(["font","Shruti","Gujr"]),ne(["font","MoolBoran","Khmr"]),ne(["font","Tunga","Knda"]),ne(["font","Raavi","Guru"]),ne(["font","Euphemia","Cans"]),ne(["font","Plantagenet Cherokee","Cher"]),ne(["font","Microsoft Yi Baiti","Yiii"]),ne(["font","Microsoft Himalaya","Tibt"]),ne(["font","MV Boli","Thaa"]),ne(["font","Mangal","Deva"]),ne(["font","Gautami","Telu"]),ne(["font","Latha","Taml"]),ne(["font","Estrangelo Edessa","Syrc"]),ne(["font","Kalinga","Orya"]),ne(["font","Kartika","Mlym"]),ne(["font","DokChampa","Laoo"]),ne(["font","Iskoola Pota","Sinh"]),ne(["font","Mongolian Baiti","Mong"]),ne(["font","Times New Roman","Viet"]),ne(["font","Microsoft Uighur","Uigh"]),ne(["font","Sylfaen","Geor"]),ne(["font","Arial","Armn"]),ne(["font","Leelawadee UI","Bugi"]),ne(["font","Microsoft JhengHei","Bopo"]),ne(["font","Javanese Text","Java"]),ne(["font","Segoe UI","Lisu"]),ne(["font","Myanmar Text","Mymr"]),ne(["font","Ebrima","Nkoo"]),ne(["font","Nirmala UI","Olck"]),ne(["font","Ebrima","Osma"]),ne(["font","Phagspa","Phag"]),ne(["font","Estrangelo Edessa","Syrn"]),ne(["font","Estrangelo Edessa","Syrj"]),ne(["font","Estrangelo Edessa","Syre"]),ne(["font","Nirmala UI","Sora"]),ne(["font","Microsoft Tai Le","Tale"]),ne(["font","Microsoft New Tai Lue","Talu"]),ne(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[ne(["latin","Calibri",void 0,"020F0502020204030204"]),ne(["ea",""]),ne(["cs",""]),ne(["font",r("æ¸¸ã´ã·ãã¯"),"Jpan"]),ne(["font",r("ë§ì ê³ ë"),"Hang"]),ne(["font",r("ç­çº¿"),"Hans"]),ne(["font",r("æ°ç´°æé«"),"Hant"]),ne(["font","Arial","Arab"]),ne(["font","Arial","Hebr"]),ne(["font","Tahoma","Thai"]),ne(["font","Nyala","Ethi"]),ne(["font","Vrinda","Beng"]),ne(["font","Shruti","Gujr"]),ne(["font","DaunPenh","Khmr"]),ne(["font","Tunga","Knda"]),ne(["font","Raavi","Guru"]),ne(["font","Euphemia","Cans"]),ne(["font","Plantagenet Cherokee","Cher"]),ne(["font","Microsoft Yi Baiti","Yiii"]),ne(["font","Microsoft Himalaya","Tibt"]),ne(["font","MV Boli","Thaa"]),ne(["font","Mangal","Deva"]),ne(["font","Gautami","Telu"]),ne(["font","Latha","Taml"]),ne(["font","Estrangelo Edessa","Syrc"]),ne(["font","Kalinga","Orya"]),ne(["font","Kartika","Mlym"]),ne(["font","DokChampa","Laoo"]),ne(["font","Iskoola Pota","Sinh"]),ne(["font","Mongolian Baiti","Mong"]),ne(["font","Arial","Viet"]),ne(["font","Microsoft Uighur","Uigh"]),ne(["font","Sylfaen","Geor"]),ne(["font","Arial","Armn"]),ne(["font","Leelawadee UI","Bugi"]),ne(["font","Microsoft JhengHei","Bopo"]),ne(["font","Javanese Text","Java"]),ne(["font","Segoe UI","Lisu"]),ne(["font","Myanmar Text","Mymr"]),ne(["font","Ebrima","Nkoo"]),ne(["font","Nirmala UI","Olck"]),ne(["font","Ebrima","Osma"]),ne(["font","Phagspa","Phag"]),ne(["font","Estrangelo Edessa","Syrn"]),ne(["font","Estrangelo Edessa","Syrj"]),ne(["font","Estrangelo Edessa","Syre"]),ne(["font","Nirmala UI","Sora"]),ne(["font","Microsoft Tai Le","Tale"]),ne(["font","Microsoft New Tai Lue","Talu"]),ne(["font","Ebrima","Tfng"])]}]}}},rr=(r,e,t)=>({name:`a:${r}`,properties:{rawMap:{val:e}},children:t}),wy=r=>{const[e,t,i,s,n,o]=r,a=[];return a.push(rr("satMod",i)),s&&a.push(rr("lumMod",s)),n&&a.push(rr("tint",n)),o&&a.push(rr("shade",o)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:t}},children:a}]}},_v=(r,e)=>({name:"a:solidFill",children:[rr("schemeClr",r,e)]}),_S=r=>{const[e,t,i,s,n]=r,[o,a]=n;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[wy(t),wy(i),wy(s)]},{name:"a:lin",properties:{rawMap:{ang:o,scaled:a}}}]}},by=r=>{const[e,t,i,s]=r;return{name:"a:ln",properties:{rawMap:{w:e,cap:t,cmpd:i,algn:s}},children:[_v("phClr"),rr("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Ey=r=>{const e=[];if(r){const[t,i,s,n,o]=r;e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:t,dist:i,dir:s,algn:n,rotWithShape:o}},children:[rr("srgbClr","000000",[rr("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},Wk=()=>({name:"a:fillStyleLst",children:[_v("phClr"),_S(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),_S(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),Uk=()=>({name:"a:lnStyleLst",children:[by(["6350","flat","sng","ctr"]),by(["12700","flat","sng","ctr"]),by(["19050","flat","sng","ctr"])]}),jk=()=>({name:"a:effectStyleLst",children:[Ey(),Ey(),Ey(["57150","19050","5400000","ctr","0"])]}),zk=()=>({name:"a:bgFillStyleLst",children:[_v("phClr"),_v("phClr",[rr("tint","95000"),rr("satMod","170000")]),_S(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),$k={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[Wk(),Uk(),jk(),zk()]}}},Kk={getTemplate(){return{name:"a:themeElements",children:[Hk.getTemplate(),Bk.getTemplate(),$k.getTemplate()]}}},Yk={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Kk.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},Xk=r=>{const e=[];return r.forEach((t,i)=>{const s=i.toString(),n={name:"t",textNode:A.utf8_encode(A.escapeString(s))};s.trim().length!==s.length&&(n.properties={rawMap:{"xml:space":"preserve"}}),e.push({name:"si",children:[n]})}),e},qk={getTemplate(r){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:r.size,uniqueCount:r.size}},children:Xk(r)}}},Zk={getTemplate(r){let{formatCode:e,numFmtId:t}=r;return e.length&&(e=A.escapeString(e.replace(/\$/g,'"$"'))),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:t}}}}},Jk={getTemplate(r){return{name:"numFmts",properties:{rawMap:{count:r.length}},children:r.map(e=>Zk.getTemplate(e))}}},Qk={getTemplate(r){const{size:e,colorTheme:t,color:i="FF000000",fontName:s="Calibri",family:n,scheme:o,italic:a,bold:l,strikeThrough:c,outline:d,shadow:h,underline:u,verticalAlign:p}=r,f=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:t,rgb:i}}},{name:"name",properties:{rawMap:{val:s}}}];return n&&f.push({name:"family",properties:{rawMap:{val:n}}}),o&&f.push({name:"scheme",properties:{rawMap:{val:o}}}),a&&f.push({name:"i"}),l&&f.push({name:"b"}),c&&f.push({name:"strike"}),d&&f.push({name:"outline"}),h&&f.push({name:"shadow"}),u&&f.push({name:"u",properties:{rawMap:{val:u}}}),p&&f.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:f}}},eV={getTemplate(r){return{name:"fonts",properties:{rawMap:{count:r.length}},children:r.map(e=>Qk.getTemplate(e))}}},tV={getTemplate(r){const{patternType:e,fgTheme:t,fgTint:i,fgRgb:s,bgRgb:n,bgIndexed:o}=r,a={name:"patternFill",properties:{rawMap:{patternType:e}}};return(t||i||s)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:t,tint:i,rgb:s}}}]),(o||n)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:o,rgb:n}}})),{name:"fill",children:[a]}}},iV={getTemplate(r){return{name:"fills",properties:{rawMap:{count:r.length}},children:r.map(e=>tV.getTemplate(e))}}},sV=r=>{switch(r){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},nV={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},oV=["Dashed","DashDot","DashDotDot"],rV={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},aV={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},lV={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},cV=r=>r?rV[r]||r:"none",ol=r=>r==null?r:(r.charAt(0)==="#"&&(r=r.substr(1)),r.length===6?"FF"+r:r),Pm=(r,e)=>{if(!r)return"thin";const t=sV(e),i=nV[r];return r==="Continuous"?t:t==="medium"&&oV.indexOf(i)!==-1?`medium${i}`:i.charAt(0).toLowerCase()+i.substr(1)},dV=r=>aV[r]||"general",hV=r=>lV[r]||void 0,_p=r=>({name:"color",properties:{rawMap:{rgb:ol(r||"#000000")}}}),uV={getTemplate(r){const{left:e,right:t,top:i,bottom:s,diagonal:n}=r,o=e?[_p(e.color)]:void 0,a=t?[_p(t.color)]:void 0,l=i?[_p(i.color)]:void 0,c=s?[_p(s.color)]:void 0,d=n?[_p(n.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:o},{name:"right",properties:{rawMap:{style:t&&t.style}},children:a},{name:"top",properties:{rawMap:{style:i&&i.style}},children:l},{name:"bottom",properties:{rawMap:{style:s&&s.style}},children:c},{name:"diagonal",properties:{rawMap:{style:n&&n.style}},children:d}]}}},pV={getTemplate(r){return{name:"borders",properties:{rawMap:{count:r.length}},children:r.map(e=>uV.getTemplate(e))}}},fV=r=>{const t=["Context","LeftToRight","RightToLeft"].indexOf(r);return Math.max(t,0)},gV={getTemplate(r){const{horizontal:e,indent:t,readingOrder:i,rotate:s,shrinkToFit:n,vertical:o,wrapText:a}=r;return{name:"alignment",properties:{rawMap:{horizontal:e&&dV(e),indent:t,readingOrder:i&&fV(i),textRotation:s,shrinkToFit:n,vertical:o&&hV(o),wrapText:a}}}}},mV={getTemplate(r){const e=r.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:r.hideFormula===!0?1:0,locked:e}}}}},UA={getTemplate(r){const{alignment:e,borderId:t,fillId:i,fontId:s,numFmtId:n,protection:o,xfId:a}=r,l=[];return e&&l.push(gV.getTemplate(e)),o&&l.push(mV.getTemplate(o)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:o?1:void 0,applyBorder:t?1:void 0,applyFill:i?1:void 0,borderId:t,fillId:i,applyFont:s?1:void 0,fontId:s,applyNumberFormat:n?1:void 0,numFmtId:n,xfId:a}},children:l.length?l:void 0}}},vV={getTemplate(r){return{name:"cellStyleXfs",properties:{rawMap:{count:r.length}},children:r.map(e=>UA.getTemplate(e))}}},CV={getTemplate(r){return{name:"cellXfs",properties:{rawMap:{count:r.length}},children:r.map(e=>UA.getTemplate(e))}}},yV={getTemplate(r){const{builtinId:e,name:t,xfId:i}=r;return{name:"cellStyle",properties:{rawMap:{builtinId:e,name:t,xfId:i}}}}},SV={getTemplate(r){return{name:"cellStyles",properties:{rawMap:{count:r.length}},children:r.map(e=>yV.getTemplate(e))}}};let Iv,Fh,Qp,ef,tf,jA,Lv,zA,IS;const $A=(r,e)=>(r.indexOf("mixedStyle")!==-1&&e>1&&(r+=`_${e}`),r),KA=()=>{Iv={base:0},Fh=[],Qp=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],ef=[{patternType:"none"},{patternType:"gray125"}],tf=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],jA=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Lv=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],zA=[{builtinId:0,name:"Normal",xfId:0}]},wV=r=>{const e=cV(r.pattern),t=ol(r.color),i=ol(r.patternColor);let s=ef.findIndex(n=>{const{patternType:o,fgRgb:a,bgRgb:l}=n;return!(o!=e||a!=t||l!=i)});return s===-1&&(s=ef.length,ef.push({patternType:e,fgRgb:t,bgRgb:i})),s},bV=r=>{if(r=A.utf8_encode(r),jx[r])return jx[r];let e=Fh.findIndex(t=>t.formatCode===r);return e===-1?(e=Fh.length+164,Fh.push({formatCode:r,numFmtId:e})):e=Fh[e].numFmtId,e},EV=r=>{const{borderBottom:e,borderTop:t,borderLeft:i,borderRight:s}=r;let n,o,a,l,c,d,h,u;i&&(a=Pm(i.lineStyle,i.weight),h=ol(i.color)),s&&(l=Pm(s.lineStyle,s.weight),u=ol(s.color)),e&&(n=Pm(e.lineStyle,e.weight),c=ol(e.color)),t&&(o=Pm(t.lineStyle,t.weight),d=ol(t.color));let p=tf.findIndex(f=>{const{left:g,right:m,top:v,bottom:C}=f;if(!g&&(a||h)||!m&&(l||u)||!v&&(o||d)||!C&&(n||c))return!1;const{style:y,color:R}=g||{},{style:b,color:w}=m||{},{style:x,color:O}=v||{},{style:M,color:N}=C||{};return!(y!=a||R!=h||b!=l||w!=u||x!=o||O!=d||M!=n||N!=c)});return p===-1&&(p=tf.length,tf.push({left:{style:a,color:h},right:{style:l,color:u},top:{style:o,color:d},bottom:{style:n,color:c},diagonal:{style:void 0,color:void 0}})),p},xV=r=>{const{fontName:e="Calibri",color:t,size:i,bold:s,italic:n,outline:o,shadow:a,strikeThrough:l,underline:c,family:d,verticalAlign:h}=r,u=e&&A.utf8_encode(e),p=ol(t),f=Rk(d),g=c?c.toLocaleLowerCase():void 0,m=h?h.toLocaleLowerCase():void 0;let v=Qp.findIndex(C=>!(C.fontName!=u||C.color!=p||C.size!=i||C.bold!=s||C.italic!=n||C.outline!=o||C.shadow!=a||C.strikeThrough!=l||C.underline!=g||C.verticalAlign!=m||C.family!=f));return v===-1&&(v=Qp.length,Qp.push({fontName:u,color:p,size:i,bold:s,italic:n,outline:o,shadow:a,strikeThrough:l,underline:g,verticalAlign:m,family:f!=null?f.toString():void 0})),v},RV=r=>{const{alignment:e,borders:t,font:i,interior:s,numberFormat:n,protection:o}=r;let{id:a}=r,l=0,c=0,d=0,h=0;a&&(a=$A(a,IS),Iv[a]==null&&(s&&(l=wV(s)),t&&(c=EV(t)),i&&(d=xV(i)),n&&(h=bV(n.format)),Iv[a]=Lv.length,Lv.push({alignment:e,borderId:c||0,fillId:l||0,fontId:d||0,numFmtId:h||0,protection:o,xfId:0})))},TV={getTemplate(r){const e=Jk.getTemplate(Fh),t=eV.getTemplate(Qp.map(l=>Object.assign(Object.assign({},l),{size:l.size!=null?l.size:r}))),i=iV.getTemplate(ef),s=pV.getTemplate(tf),n=vV.getTemplate(jA),o=CV.getTemplate(Lv),a=SV.getTemplate(zA);return KA(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,t,i,s,n,o,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},DV=(r,e)=>Iv[$A(r,e)]||0,OV=(r,e)=>{IS=e,IS===1&&KA(),r.forEach(RV)},AV={getTemplate(r,e){const t=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:r,sheetId:t,"r:id":`rId${t}`}}}}},PV={getTemplate(r){return{name:"sheets",children:r.map((e,t)=>AV.getTemplate(e,t))}}},MV={getTemplate(r){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[PV.getTemplate(r)]}}},_V=r=>Math.ceil((r-12)/7+1),IV={getTemplate(r){const{min:e,max:t,outlineLevel:i,s,width:n,hidden:o,bestFit:a}=r;let l=1,c="0";return n>1&&(l=_V(n),c="1"),{name:"col",properties:{rawMap:{min:e,max:t,outlineLevel:i??void 0,width:l,style:s,hidden:o?"1":"0",bestFit:a?"1":"0",customWidth:c}}}}},LV=r=>{const e=r.charAt(0).toLowerCase();return e==="s"?"inlineStr":e},FV={getTemplate(r,e,t){const{ref:i,data:s,styleId:n}=r,{type:o,value:a}=s||{type:"empty",value:null};let l=o;o==="f"?l="str":o.charAt(0)===o.charAt(0).toUpperCase()&&(l=LV(o));const c={name:"c",properties:{rawMap:{r:i,t:l==="empty"?void 0:l,s:n?DV(n,t):void 0}}};if(l==="empty")return c;let d;return l==="str"&&o==="f"?d=[{name:"f",textNode:A.escapeString(A.utf8_encode(a))}]:l==="inlineStr"?d=[{name:"is",children:[{name:"t",textNode:A.escapeString(A.utf8_encode(a))}]}]:d=[{name:"v",textNode:a}],Object.assign({},c,{children:d})}},NV=(r,e)=>{const t=[];let i=0;for(let s=0;s<r.length;s++){const n=r[s];n.mergeAcross&&(t.push({pos:s,excelPos:i}),i+=n.mergeAcross),i++}if(t.length)for(let s=t.length-1;s>=0;s--){const n=[],o=r[t[s].pos];for(let a=1;a<=o.mergeAcross;a++)n.push({ref:`${Vf(t[s].excelPos+1+a)}${e+1}`,styleId:o.styleId,data:{type:"empty",value:null}});n.length&&r.splice(t[s].pos+1,0,...n)}},GV=r=>{var e;return((e=r.data)===null||e===void 0?void 0:e.value)!==""||r.styleId!==void 0},kV={getTemplate(r,e,t){const{collapsed:i,hidden:s,height:n,outlineLevel:o,cells:a=[]}=r;NV(a,e);const l=a.filter(GV).map((c,d)=>FV.getTemplate(c,d,t));return{name:"row",properties:{rawMap:{r:e+1,collapsed:i?"1":"0",hidden:s?"1":"0",ht:n,customHeight:n!=null?"1":"0",spans:"1:1",outlineLevel:o||void 0}},children:l}}},VV={getTemplate(r){return{name:"mergeCell",properties:{rawMap:{ref:r}}}}},HV=(r,e,t)=>{const i=[],s=[];r.forEach((a,l)=>{const c=a.cells;let d=0,h;c.forEach((u,p)=>{const f=p+d+1,g=Vf(f),m=l+1;if(u.mergeAcross){d+=u.mergeAcross;const C=Vf(p+d+1);i.push(`${g}${m}:${C}${m}`)}e[f-1]||(e[f-1]={});const{collapsibleRanges:v}=u;v&&v.forEach(C=>{s.push([f+C[0],f+C[1]])}),h=e[f-1],h.min=f,h.max=f,u.ref=`${g}${m}`})}),s.sort((a,l)=>a[0]!==l[0]?a[0]-l[0]:l[1]-a[1]);const n=new Map,o=new Map;return s.filter(a=>{const l=a.toString();return n.get(l)?!1:(n.set(l,!0),!0)}).forEach(a=>{const l=e.find(d=>d.min==a[0]&&d.max==a[1]),c=o.get(a[0]);e.push({min:a[0],max:a[1],outlineLevel:t?void 0:c||1,width:(l||{width:100}).width}),o.set(a[0],(c||0)+1)}),i},BV=r=>!r||r!=="Portrait"&&r!=="Landscape"?"portrait":r.toLocaleLowerCase(),WV=r=>{if(r==null)return 1;const t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(r);return t===-1?1:t+1},UV=r=>e=>(r.length&&e.push({name:"cols",children:r.map(t=>IV.getTemplate(t))}),e),jV=(r,e)=>t=>(r.length&&t.push({name:"sheetData",children:r.map((i,s)=>kV.getTemplate(i,s,e))}),t),zV=r=>e=>(r.length&&e.push({name:"mergeCells",properties:{rawMap:{count:r.length}},children:r.map(t=>VV.getTemplate(t))}),e),$V=r=>e=>{const{top:t=.75,right:i=.7,bottom:s=.75,left:n=.7,header:o=.3,footer:a=.3}=r;return e.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:a,header:o,left:n,right:i,top:t}}}),e},KV=r=>e=>(r&&e.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:BV(r.orientation),paperSize:WV(r.pageSize)}}}),e),YV=r=>{const e={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"};return A.iterateObject(e,(t,i)=>{r=r.replace(t,i)}),r},XV=r=>r==="Center"?"C":r==="Right"?"R":"L",qV=(r,e)=>(e&&(r+="&amp;&quot;",r+=e.fontName||"Calibri",e.bold!==e.italic?r+=e.bold?",Bold":",Italic":e.bold?r+=",Bold Italic":r+=",Regular",r+="&quot;",e.size&&(r+=`&amp;${e.size}`),e.strikeThrough&&(r+="&amp;S"),e.underline&&(r+=`&amp;${e.underline==="Double"?"E":"U"}`),e.color&&(r+=`&amp;K${e.color.replace("#","").toUpperCase()}`)),r),ZV=r=>r.reduce((e,t)=>{const i=XV(t.position);return`${qV(`${e}&amp;${i}`,t.font)}${A.escapeString(YV(t.value))}`},""),JV=r=>{const e=["all","first","even"],t=[];return e.forEach(i=>{const s=r[i],n=i==="all"?"odd":i;!s||!s.header&&!s.footer||A.iterateObject(s,(o,a)=>{const l=`${o.charAt(0).toUpperCase()}${o.slice(1)}`;a&&t.push({name:`${n}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:ZV(a)})})}),t},QV=r=>e=>{if(!r)return e;const t=r.first!=null?1:0,i=r.even!=null?1:0;return e.push({name:"headerFooter",properties:{rawMap:{differentFirst:t,differentOddEven:i}},children:JV(r)}),e},eH=r=>e=>(Je.worksheetImages.get(r)&&e.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),e),tH=()=>r=>(r.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),r),iH=r=>e=>{const t=r.reduce((i,s)=>s.outlineLevel&&s.outlineLevel>i?s.outlineLevel:i,0);return e.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:t||void 0}}}),e},sH={getTemplate(r){const{worksheet:e,currentSheet:t,config:i}=r,{margins:s={},pageSetup:n,headerFooterConfig:o,suppressColumnOutline:a}=i,{table:l}=e,{rows:c,columns:d}=l,h=d&&d.length?HV(c,d,!!a):[],p=A.compose(tH(),iH(c),UV(d),jV(c,t+1),zV(h),$V(s),KV(n),QV(o),eH(t))([]);return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:p}}},nH={getTemplate(r){const{Id:e,Type:t,Target:i}=r;return{name:"Relationship",properties:{rawMap:{Id:e,Type:t,Target:i}}}}},Mm={getTemplate(r){const e=r.map(t=>nH.getTemplate(t));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e}}};class Je{static createExcel(e,t,i){return this.addSheetName(t),OV(e,this.sheetNames.length),this.createWorksheet(t,i)}static buildImageMap(e,t,i,s,n){const o=this.sheetNames.length,a=this.images.get(e.id);(!e.position||!e.position.row||!e.position.column)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:s.indexOf(i)+1}));const l=e;if(Tk(l,s),Dk(l,n),a){const c=a.find(d=>d.sheetId===o);c?c.image.push(l):a.push({sheetId:o,image:[l]})}else this.images.set(l.id,[{sheetId:o,image:[l]}]),this.workbookImageIds.set(l.id,{type:l.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(o,l)}static buildSheetImageMap(e,t){let i=this.worksheetImageIds.get(e);i||(i=new Map,this.worksheetImageIds.set(e,i));const s=this.worksheetImages.get(e);s?(s.push(t),i.get(t.id)||i.set(t.id,{index:i.size,type:t.imageType})):(this.worksheetImages.set(e,[t]),i.set(t.id,{index:0,type:t.imageType}))}static addSheetName(e){const t=A.escapeString(e.name)||"";let i="";for(;this.sheetNames.indexOf(`${t}${i}`)!==-1;)i===""?i="_1":i=`_${parseInt(i.slice(1),10)+1}`;e.name=`${t}${i}`,this.sheetNames.push(e.name)}static getStringPosition(e){return this.sharedStrings.has(e)?this.sharedStrings.get(e):(this.sharedStrings.set(e,this.sharedStrings.size),this.sharedStrings.size-1)}static resetFactory(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=Xc.SINGLE_SHEET}static createWorkbook(){return xn(MV.getTemplate(this.sheetNames))}static createStylesheet(e){return xn(TV.getTemplate(e))}static createSharedStrings(){return xn(qk.getTemplate(this.sharedStrings))}static createCore(e){return xn(Ak.getTemplate(e))}static createContentTypes(e){return xn(Mk.getTemplate(e))}static createRels(){const e=Mm.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return xn(e)}static createTheme(){return xn(Yk.getTemplate())}static createWorkbookRels(e){const t=new Array(e).fill(void 0).map((s,n)=>({Id:`rId${n+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${n+1}.xml`})),i=Mm.getTemplate([...t,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return xn(i)}static createDrawing(e){return xn(Vk.getTemplate({sheetIndex:e}))}static createDrawingRel(e){const t=this.worksheetImageIds.get(e),i=[];return t.forEach((s,n)=>{i.push({Id:`rId${s.index+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${this.workbookImageIds.get(n).index+1}.${s.type}`})}),xn(Mm.getTemplate(i))}static createWorksheetDrawingRel(e){const t=Mm.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}]);return xn(t)}static createWorksheet(e,t){return xn(sH.getTemplate({worksheet:e,currentSheet:this.sheetNames.length-1,config:t}))}}Je.sharedStrings=new Map;Je.sheetNames=[];Je.images=new Map;Je.worksheetImages=new Map;Je.workbookImageIds=new Map;Je.worksheetImageIds=new Map;Je.factoryMode=Xc.SINGLE_SHEET;class oH extends WA{createExcel(e){const{excelStyles:t,config:i}=this;return Je.createExcel(t,e,i)}getDataTypeForValue(e){return e===void 0?"empty":this.isNumerical(e)?"n":"s"}getType(e,t,i){if(this.isFormula(i))return"f";if(t&&t.dataType)switch(t.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn(`AG Grid: Unrecognized data type for excel export [${t.id}.dataType=${t.dataType}]`)}return e}addImage(e,t,i){if(!this.config.addImageToCell)return;const s=this.config.addImageToCell(e,t,i);if(s)return Je.buildImageMap(s.image,e,t,this.columnsToExport,this.config.rowHeight),s}createCell(e,t,i,s){const n=this.getStyleById(e);!(n!=null&&n.dataType)&&t==="s"&&s&&(i=s);const o=this.getType(t,n,i)||t;return{styleId:n?e:void 0,data:{type:o,value:this.getCellValue(o,i)}}}createMergedCell(e,t,i,s){const n=i??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:t==="s"?Je.getStringPosition(n).toString():i},mergeAcross:s}}getCellValue(e,t){if(t==null)return Je.getStringPosition("").toString();switch(e){case"s":return t===""?"":Je.getStringPosition(t).toString();case"f":return t.slice(1);case"n":return Number(t).toString();default:return t}}}var Ia=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const LS=r=>{const{data:e,fontSize:t=11,author:i="AG Grid"}=r,s=Je.images.size>0;if(pi.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),s){pi.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let l=0;Je.images.forEach(c=>{const d=c[0].image[0],h=d.imageType;pi.addFile(`xl/media/image${++l}.${h}`,d.base64,!0)})}if(!e||e.length===0){console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),Je.resetFactory();return}const n=e.length;let o=0;e.forEach((l,c)=>{pi.addFile(`xl/worksheets/sheet${c+1}.xml`,l),s&&Je.worksheetImages.get(c)&&aH(c,o++)}),pi.addFile("xl/workbook.xml",Je.createWorkbook()),pi.addFile("xl/styles.xml",Je.createStylesheet(t)),pi.addFile("xl/sharedStrings.xml",Je.createSharedStrings()),pi.addFile("xl/theme/theme1.xml",Je.createTheme()),pi.addFile("xl/_rels/workbook.xml.rels",Je.createWorkbookRels(n)),pi.addFile("docProps/core.xml",Je.createCore(i)),pi.addFile("[Content_Types].xml",Je.createContentTypes(n)),pi.addFile("_rels/.rels",Je.createRels()),Je.resetFactory();const a=r.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return pi.getContent(a)},rH=r=>{const{fileName:e="export.xlsx"}=r,t=LS(r);t&&Fb.download(e,t)},aH=(r,e)=>{const t="xl/drawings",i=`${t}/drawing${e+1}.xml`,s=`${t}/_rels/drawing${e+1}.xml.rels`,n=`xl/worksheets/_rels/sheet${r+1}.xml.rels`;pi.addFile(s,Je.createDrawingRel(r)),pi.addFile(i,Je.createDrawing(r)),pi.addFile(n,Je.createWorksheetDrawingRel(e))};let Eo=class extends OA{constructor(){super(...arguments),this.exportMode="xlsx"}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})}getMergedParams(e){const t=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},t,e)}getData(e){return this.setExportMode(e.exportMode||"xlsx"),super.getData(e)}export(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";const t=this.getMergedParams(e),i=this.getData(t),s={data:[i],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType},n=this.packageFile(s);return n&&Fb.download(this.getFileName(t.fileName),n),i}exportDataAsExcel(e){return this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),i=this.getData(t);if(e&&e.exportMode==="xml")return i;const s={data:[i],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(s)}setFactoryMode(e,t="xlsx"){const i=t==="xlsx"?Je:Mv;i.factoryMode=e}getFactoryMode(e){return(e==="xlsx"?Je:Mv).factoryMode}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return LS(e)}exportMultipleSheetsAsExcel(e){return rH(e)}getDefaultFileName(){return`export.${this.getExportMode()}`}getDefaultFileExtension(){return this.getExportMode()}createSerializingSession(e){const{columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:o}=this,a=this.getExportMode()==="xlsx";let l="ag-grid";e.sheetName!=null&&(l=A.utf8_encode(e.sheetName.toString().substr(0,31)));const c=Object.assign(Object.assign({},e),{sheetName:l,columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:o,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(a?oH:Ok)(c)}styleLinker(e){const{rowType:t,rowIndex:i,value:s,column:n,columnGroup:o,node:a}=e,l=t===Wc.HEADER,c=t===Wc.HEADER_GROUPING,d=l?n:o;let h=[];if(l||c)return h.push("header"),c&&h.push("headerGroup"),d&&(h=h.concat(Cg.getHeaderClassesFromColDef(d.getDefinition(),this.gridOptionsService,n||null,o||null))),h;const u=this.gridOptionsService.get("excelStyles"),p=["cell"];if(!u||!u.length)return p;const f=u.map(g=>g.id);return this.stylingService.processAllCellClasses(n.getDefinition(),{value:s,data:a.data,node:a,colDef:n.getDefinition(),column:n,rowIndex:i,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},g=>{f.indexOf(g)>-1&&p.push(g)}),p.sort((g,m)=>f.indexOf(g)<f.indexOf(m)?-1:1)}isExportSuppressed(){return this.gridOptionsService.is("suppressExcelExport")}setExportMode(e){this.exportMode=e}getExportMode(){return this.exportMode}packageFile(e){if(this.getExportMode()==="xml"){const t=e.mimeType||"application/vnd.ms-excel";return new Blob(["\uFEFF",e.data[0]],{type:t})}return LS(e)}};Ia([S("columnModel")],Eo.prototype,"columnModel",void 0);Ia([S("valueService")],Eo.prototype,"valueService",void 0);Ia([S("stylingService")],Eo.prototype,"stylingService",void 0);Ia([S("gridSerializer")],Eo.prototype,"gridSerializer",void 0);Ia([S("gridOptionsService")],Eo.prototype,"gridOptionsService",void 0);Ia([S("valueFormatterService")],Eo.prototype,"valueFormatterService",void 0);Ia([S("valueParserService")],Eo.prototype,"valueParserService",void 0);Ia([U],Eo.prototype,"postConstruct",null);Eo=Ia([ee("excelCreator")],Eo);const lH="30.0.2",cH={version:lH,moduleName:te.ExcelExportModule,beans:[Eo,So,yo],dependantModules:[Nb,Wi]};var Wg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},nr;(function(r){r[r.EXPANDED=0]="EXPANDED",r[r.COLLAPSED=1]="COLLAPSED",r[r.INDETERMINATE=2]="INDETERMINATE"})(nr||(nr={}));class Ju extends Q{preConstruct(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)}postConstruct(){const e=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(nr.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=A.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=A.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=A.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))}showOrHideOptions(){const e=!this.params.suppressFilterSearch,t=!this.params.suppressExpandAll,i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));const s=o=>o.getOriginalParent()&&o.isFilterAllowed(),n=this.columnModel.getAllGridColumns().some(s);A.setDisplayed(this.eFilterTextField.getGui(),e),A.setDisplayed(this.eExpand,t&&n)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=A.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const e=this.currentExpandState===nr.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(e)}setExpandState(e){this.currentExpandState=e,A.setDisplayed(this.eExpandChecked,this.currentExpandState===nr.EXPANDED),A.setDisplayed(this.eExpandUnchecked,this.currentExpandState===nr.COLLAPSED),A.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===nr.INDETERMINATE)}}Wg([S("columnModel")],Ju.prototype,"columnModel",void 0);Wg([G("eExpand")],Ju.prototype,"eExpand",void 0);Wg([G("eFilterTextField")],Ju.prototype,"eFilterTextField",void 0);Wg([Ou],Ju.prototype,"preConstruct",null);Wg([U],Ju.prototype,"postConstruct",null);var ec=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class gn extends Q{constructor(e=!1){super(gn.TEMPLATE),this.expanded=!1,this.hideHeader=e}postConstruct(){this.eExpandChecked=A.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=A.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(e){this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",t=>{t.key===W.ENTER&&this.toggleExpanded()}),this.addManagedListener(this.eventService,E.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),A.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),A.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(A.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,me.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,i){if(t==null)return;const s=A.createIconNoSpan(e,this.gridOptionsService,i);t.appendChild(s)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){A.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:me.EVENT_FILTER_CHANGED})}onFilterDestroyed(e){this.expanded&&e.source==="api"&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,A.setAriaExpanded(this.eFilterToolPanelHeader,!0),A.setDisplayed(this.eExpandChecked,!0),A.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement())}addFilterElement(){const e=A.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),t=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(!t)return;const{filterPromise:i,guiPromise:s}=t;i==null||i.then(n=>{this.underlyingFilter=n,n&&s.then(o=>{o&&e.appendChild(o),this.agFilterToolPanelBody.appendChild(e),n.afterGuiAttached&&n.afterGuiAttached({container:"toolPanel"})})})}collapse(){var e,t;this.expanded&&(this.expanded=!1,A.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),A.setDisplayed(this.eExpandChecked,!1),A.setDisplayed(this.eExpandUnchecked,!0),(t=(e=this.underlyingFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||t===void 0||t.call(e))}removeFilterElement(){A.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){var t;if(!this.expanded)return;const i=this.underlyingFilter;i&&(e?typeof i.refreshVirtualList=="function"&&i.refreshVirtualList():(t=i.afterGuiDetached)===null||t===void 0||t.call(i))}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()}}gn.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`;ec([G("eFilterToolPanelHeader")],gn.prototype,"eFilterToolPanelHeader",void 0);ec([G("eFilterName")],gn.prototype,"eFilterName",void 0);ec([G("agFilterToolPanelBody")],gn.prototype,"agFilterToolPanelBody",void 0);ec([G("eFilterIcon")],gn.prototype,"eFilterIcon",void 0);ec([G("eExpand")],gn.prototype,"eExpand",void 0);ec([S("filterManager")],gn.prototype,"filterManager",void 0);ec([S("columnModel")],gn.prototype,"columnModel",void 0);ec([U],gn.prototype,"postConstruct",null);var f0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class vs extends Q{constructor(e,t,i,s,n){super(),this.columnGroup=e,this.childFilterComps=t,this.depth=s,this.expandedCallback=i,this.showingColumn=n}preConstruct(){const e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(vs.TEMPLATE,{filterGroupComp:e})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(e=>{this.filterGroupComp.addItem(e),e.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()}setupTooltip(){if(!this.showingColumn)return;const e=()=>{const t=this.columnGroup.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,e)}getTooltipParams(){const e=super.getTooltipParams();return e.location="filterToolPanelColumnGroup",e}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(e){this.childFilterComps.forEach(t=>{t instanceof vs?t.refreshFilters(e):t.refreshFilter(e)})}isColumnGroup(){return this.columnGroup instanceof Ge}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach(t=>{t instanceof gn&&e(t)})}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(i=>i.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(i=>i.collapse());this.addManagedListener(this.filterGroupComp,At.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,At.EVENT_COLLAPSED,t)}getColumns(){return this.columnGroup instanceof Ge?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(e=>{this.addManagedListener(e,me.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof Ge||this.addManagedListener(this.eventService,E.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){const e=this.getColumns(),t=()=>e.some(i=>i.isFilterActive());this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t())}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof Ge?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),A.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}vs.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`;f0([G("filterGroupComp")],vs.prototype,"filterGroupComp",void 0);f0([S("columnModel")],vs.prototype,"columnModel",void 0);f0([Ou],vs.prototype,"preConstruct",null);f0([U],vs.prototype,"init",null);var g0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class tc extends Q{constructor(){super(tc.TEMPLATE),this.initialised=!1,this.filterGroupComps=[]}init(e){this.initialised=!0;const t={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};A.mergeDeep(t,e),this.params=t,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,E.EVENT_TOOL_PANEL_VISIBLE_CHANGED,i=>{i.key==="filters"&&this.refreshFilters(i.visible)}),this.columnModel.isReady()&&this.onColumnsChanged()}onColumnsChanged(){const e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))}buildTreeFromProvidedColumnDefs(){const e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)}setFiltersLayout(e){const t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)}recreateFilters(e){const t=this.gridOptionsService.getDocument().activeElement,i=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,i);const s=this.filterGroupComps.length;s&&(this.filterGroupComps.forEach(n=>this.appendChild(n)),this.setFirstAndLastVisible(0,s-1)),A.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus()}recursivelyAddComps(e,t,i){return A.flatten(e.map(s=>{if(s instanceof Ge)return A.flatten(this.recursivelyAddFilterGroupComps(s,t,i));const n=s;if(!this.shouldDisplayFilter(n))return[];const o=t===0,a=new gn(o);if(this.createBean(a),a.setColumn(n),i.get(n.getId())&&a.expand(),t>0)return a;const l=this.createBean(new vs(n,[a],this.onGroupExpanded.bind(this),t,!0));return l.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(l.getFilterGroupId())||l.collapse(),l}))}recursivelyAddFilterGroupComps(e,t,i){if(!this.filtersExistInChildren(e.getChildren()))return;const s=e.getColGroupDef();if(s&&s.suppressFiltersToolPanel)return[];const n=e.isPadding()?t:t+1,o=A.flatten(this.recursivelyAddComps(e.getChildren(),n,i));if(e.isPadding())return o;const a=new vs(e,o,this.onGroupExpanded.bind(this),t,!1);return this.createBean(a),a.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(a.getFilterGroupId())===!1&&a.collapse(),[a]}filtersExistInChildren(e){return e.some(t=>t instanceof Ge?this.filtersExistInChildren(t.getChildren()):this.shouldDisplayFilter(t))}shouldDisplayFilter(e){const t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){const e=new Map,t=i=>{e.set(i.getFilterGroupId(),i.isExpanded()),i.getChildren().forEach(s=>{s instanceof vs?t(s):e.set(s.getColumn().getId(),s.isExpanded())})};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const i=[],s=n=>{const o=n.getFilterGroupId();(!t||A.includes(t,o))&&(e&&n.isColumnGroup()?n.expand():n.collapse(),i.push(o)),n.getChildren().forEach(l=>{l instanceof vs&&s(l)})};if(this.filterGroupComps.forEach(s),this.onGroupExpanded(),t){const n=t.filter(o=>i.indexOf(o)<0);n.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",n)}}expandFilters(e,t){const i=[],s=n=>{if(n instanceof vs){let l=!1;return n.getChildren().forEach(c=>{s(c)&&(e?(n.expand(),l=!0):n.isColumnGroup()||n.collapse())}),l}const o=n.getColumn().getColId(),a=!t||A.includes(t,o);return a&&(e?n.expand():n.collapse(),i.push(o)),a};if(this.filterGroupComps.forEach(s),this.onGroupExpanded(),t){const n=t.filter(o=>i.indexOf(o)<0);n.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",n)}}onGroupExpanded(){this.fireExpandedEvent()}fireExpandedEvent(){let e=0,t=0;const i=n=>{n.isColumnGroup()&&(n.isExpanded()?e++:t++,n.getChildren().forEach(o=>{o instanceof vs&&i(o)}))};this.filterGroupComps.forEach(i);let s;e>0&&t>0?s=nr.INDETERMINATE:t>0?s=nr.COLLAPSED:s=nr.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:s})}performFilterSearch(e){this.searchFilterText=A.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=o=>!A.exists(e)||o.toLowerCase().indexOf(e)!==-1,i=(o,a)=>{if(!(o instanceof vs))return t(o.getColumnFilterName()||"");const l=o.getChildren(),c=t(o.getFilterGroupName()),d=a||c;if(d){o.hideGroup(!1);for(let u=0;u<l.length;u++)i(l[u],d),o.hideGroupItem(!1,u);return!0}let h=!1;return l.forEach((u,p)=>{const f=i(u,a);o.hideGroupItem(!f,p),f&&(h=!0)}),o.hideGroup(!h),h};let s,n;this.filterGroupComps.forEach((o,a)=>{i(o,!1),s===void 0?o.containsCssClass("ag-hidden")||(s=a,n=a):!o.containsCssClass("ag-hidden")&&n!==a&&(n=a)}),this.setFirstAndLastVisible(s,n)}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((i,s)=>{i.removeCssClass("ag-first-group-visible"),i.removeCssClass("ag-last-group-visible"),s===e&&i.addCssClass("ag-first-group-visible"),s===t&&i.addCssClass("ag-last-group-visible")})}refreshFilters(e){this.filterGroupComps.forEach(t=>t.refreshFilters(e))}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),A.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}tc.TEMPLATE='<div class="ag-filter-list-panel"></div>';g0([S("gridApi")],tc.prototype,"gridApi",void 0);g0([S("columnApi")],tc.prototype,"columnApi",void 0);g0([S("toolPanelColDefService")],tc.prototype,"toolPanelColDefService",void 0);g0([S("columnModel")],tc.prototype,"columnModel",void 0);var m0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ic extends Q{constructor(){super(ic.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach(n=>n()),this.listenerDestroyFuncs=[]),this.initialised=!0;const t={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};this.params=Object.assign(Object.assign(Object.assign({},t),e),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);const i=this.params.suppressExpandAll,s=this.params.suppressFilterSearch;i&&s&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}onGroupExpanded(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(){this.init(this.params)}destroy(){super.destroy()}}ic.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`;m0([G("filtersToolPanelHeaderPanel")],ic.prototype,"filtersToolPanelHeaderPanel",void 0);m0([G("filtersToolPanelListPanel")],ic.prototype,"filtersToolPanelListPanel",void 0);m0([S("gridApi")],ic.prototype,"gridApi",void 0);m0([S("columnApi")],ic.prototype,"columnApi",void 0);const dH="30.0.2",hH={version:dH,moduleName:te.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:Ju},{componentName:"AgFiltersToolPanelList",componentClass:tc}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:ic}],dependantModules:[Ub,Wi]};class vu{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){var s;const n=(s=this._rangeCallback)===null||s===void 0?void 0:s.call(this,e,t),o=this._encode(i?this.floor(e):this.ceil(e)),a=this._encode(i?this.ceil(t):this.floor(t));if(a<o)return[];const l=[];for(let c=o;c<=a;c++){const d=this._decode(c);l.push(d)}return n==null||n(),l}}class sc extends vu{getOffset(e,t){const i=typeof e=="number"||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(i)%t}every(e,t){let i=0,s;const{snapTo:n="start"}=t??{};if(typeof n=="string"){const c=i;s=(d,h)=>{const u=n==="start"?d:h;return i=this.getOffset(u,e),()=>i=c}}else typeof n=="number"?i=this.getOffset(new Date(n),e):n instanceof Date&&(i=this.getOffset(n,e));const o=c=>{const d=this._encode(c);return Math.floor((d-i)/e)},a=c=>this._decode(c*e+i);return new vu(o,a,s)}}function uH(r){return r.getTime()}function pH(r){return new Date(r)}const fH=new sc(uH,pH);new Date(0).getFullYear();const Dc=1e3,uo=Dc*60,tl=uo*60,fl=tl*24,zp=fl*7,Ip=fl*30,_m=fl*365,YA=new Date().getTimezoneOffset()*uo;function gH(r){return Math.floor((r.getTime()-YA)/Dc)}function mH(r){return new Date(YA+r*Dc)}const vH=new sc(gH,mH),XA=new Date().getTimezoneOffset()*uo;function CH(r){return Math.floor((r.getTime()-XA)/uo)}function yH(r){return new Date(XA+r*uo)}const SH=new sc(CH,yH),qA=new Date().getTimezoneOffset()*uo;function wH(r){return Math.floor((r.getTime()-qA)/tl)}function bH(r){return new Date(qA+r*tl)}const EH=new sc(wH,bH);function xH(r){const e=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());return Math.floor(e/fl)}function RH(r){const e=new Date(0);return e.setDate(e.getDate()+r),e.setHours(0,0,0,0),e}const TH=new sc(xH,RH),xy=new Date(2023,0,1);function Ld(r){const e=Date.UTC(xy.getFullYear(),xy.getMonth(),xy.getDate())+r*fl;function t(s){const n=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate());return Math.floor((n-e)/zp)}function i(s){const n=new Date(e);return n.setDate(n.getDate()+s*7),n}return new sc(t,i)}const DH=Ld(0);Ld(1);Ld(2);Ld(3);Ld(4);Ld(5);Ld(6);function OH(r){return r.getFullYear()*12+r.getMonth()}function AH(r){const e=Math.floor(r/12),t=r-e*12;return new Date(e,t,1)}const PH=new sc(OH,AH);function MH(r){return r.getFullYear()}function _H(r){const e=new Date;return e.setFullYear(r),e.setMonth(0,1),e.setHours(0,0,0,0),e}const IH=new sc(MH,_H),LH=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function ZA(){const r=navigator.userAgent;return!LH.some(e=>e.test(r))}class Rt{constructor({document:e=window.document,width:t=600,height:i=300,domLayer:s=!1,zIndex:n=0,name:o=void 0,overrideDevicePixelRatio:a=void 0}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=e,this.element=e.createElement("canvas"),this.element.width=t,this.element.height=i,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:l}=this.element;l.userSelect="none",l.display="block",s&&(l.position="absolute",l.zIndex=String(n),l.top="0",l.left="0",l.pointerEvents="none",l.opacity="1",o&&(this.element.id=o)),this.setPixelRatio(a),this.resize(t,i)}set container(e){this._container!==e&&(this.remove(),e&&e.appendChild(this.element),this._container=e)}get container(){return this._container}set enabled(e){this.element.style.display=e?"block":"none",this._enabled=!!e}get enabled(){return this._enabled}remove(){const{parentNode:e}=this.element;e!=null&&e.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const e=this.document.createElement("img");return e.src=this.getDataURL(),e}getDataURL(e){return this.element.toDataURL(e)}download(e,t="image/png"){e=(e??"").trim()||"image";const i=this.getDataURL(t),s=this.document,n=s.createElement("a");n.href=i,n.download=e,n.style.display="none",s.body.appendChild(n),n.click(),s.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=e??window.devicePixelRatio;ZA()||(t=1),Rt.overrideScale(this.context,t),this._pixelRatio=t}set pixelated(e){this.element.style.imageRendering=e?"pixelated":"auto"}get pixelated(){return this.element.style.imageRendering==="pixelated"}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),i.style.width=e+"px",i.style.height=t+"px",s.resetTransform(),this._width=e,this._height=t}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const e=document.createElement("canvas");return this._textMeasuringContext=e.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width","100"),t.setAttribute("height","100"),t.classList?t.classList.add("text-measuring-svg"):t.setAttribute("class","text-measuring-svg"),t.style.position="absolute",t.style.top="-1000px",t.style.visibility="hidden";const i=document.createElementNS(e,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),t.appendChild(i),document.body.appendChild(t),this._svgText=i,i}static get has(){if(this._has)return this._has;const e=navigator.userAgent.indexOf("Chrome")>-1,t=navigator.userAgent.indexOf("Firefox")>-1,i=!e&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!t&&!i,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has}static measureText(e,t,i,s){const n=this.textMeasuringContext;return n.font=t,n.textBaseline=i,n.textAlign=s,n.measureText(e)}static getTextSize(e,t){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=t;const s=i.measureText(e);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}}else return this.measureSvgText(e,t)}static measureSvgText(e,t){const i=this.textSizeCache,s=i[t];if(s){const l=s[e];if(l)return l}else i[t]={};const n=this.svgText;n.style.font=t,n.textContent=e;const o=n.getBBox(),a={width:o.width,height:o.height};return i[t][e]=a,a}static overrideScale(e,t){let i=0;const s={save(){this.$save(),i++},restore(){if(i>0)this.$restore(),i--;else throw new Error("AG Charts - Unable to restore() past depth 0")},setTransform(n,o,a,l,c,d){typeof n=="object"?this.$setTransform(n):this.$setTransform(n*t,o*t,a*t,l*t,c*t,d*t)},resetTransform(){this.$setTransform(t,0,0,t,0,0)},verifyDepthZero(){if(i!==0)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e["$"+n]||(e["$"+n]=e[n]),e[n]=s[n])}}Rt.textSizeCache={};class qe{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}clone(){const{x:e,y:t,width:i,height:s}=this;return new qe(e,t,i,s)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(e,t){const i=(s,n)=>{switch(s){case"top":this.y+=n;case"bottom":this.height-=n;break;case"left":this.x+=n;case"right":this.width-=n;break;case"vertical":this.y+=n,this.height-=n*2;break;case"horizontal":this.x+=n,this.width-=n*2;break;default:this.x+=n,this.width-=n*2,this.y+=n,this.height-=n*2}};return typeof e=="number"?i(t,e):Object.entries(e).forEach(([s,n])=>i(s,n)),this}grow(e,t){if(typeof e=="number")this.shrink(-e,t);else{const i=Object.assign({},e);for(const s in i)i[s]*=-1;this.shrink(i)}return this}static merge(e){let t=1/0,i=1/0,s=-1/0,n=-1/0;return e.forEach(o=>{o.x<t&&(t=o.x),o.y<i&&(i=o.y),o.x+o.width>s&&(s=o.x+o.width),o.y+o.height>n&&(n=o.y+o.height)}),new qe(t,i,s-t,n-i)}}class As{constructor(e=[1,0,0,1,0,0]){this.elements=e}get e(){return[...this.elements]}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,t,i){const s=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],l=e[0]*t[4]+e[2]*t[5]+e[4],c=e[1]*t[4]+e[3]*t[5]+e[5];i=i??e,i[0]=s,i[1]=n,i[2]=o,i[3]=a,i[4]=l,i[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const t=new Array(6);return this.AxB(this.elements,e.elements,t),new As(t)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let t=e[0],i=e[1],s=e[2],n=e[3];const o=e[4],a=e[5],l=1/(t*n-i*s);return t*=l,i*=l,s*=l,n*=l,new As([n,-i,-s,t,s*a-n*o,i*o-t*a])}inverseTo(e){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const a=t[4],l=t[5],c=1/(i*o-s*n);return i*=c,s*=c,n*=c,o*=c,e.setElements([o,-s,-n,i,n*l-o*a,s*a-i*l]),this}invertSelf(){const e=this.elements;let t=e[0],i=e[1],s=e[2],n=e[3];const o=e[4],a=e[5],l=1/(t*n-i*s);return t*=l,i*=l,s*=l,n*=l,e[0]=n,e[1]=-i,e[2]=-s,e[3]=t,e[4]=s*a-n*o,e[5]=i*o-t*a,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){const i=this.elements,s=i[0],n=i[1],o=i[2],a=i[3],l=e.width*.5,c=e.height*.5,d=e.x+l,h=e.y+c,u=Math.abs(l*s)+Math.abs(c*o),p=Math.abs(l*n)+Math.abs(c*a);return t||(t=new qe(0,0,0,0)),t.x=d*s+h*o+i[4]-u,t.y=d*n+h*a+i[5]-p,t.width=u+u,t.height=p+p,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(e){return As.instance.setElements(e.elements)}static updateTransformMatrix(e,t,i,s,n,o,a){const[l,c]=[0,0],d=t,h=i;let u,p;d===1&&h===1?(u=0,p=0):(u=(a==null?void 0:a.scalingCenterX)==null?l:a==null?void 0:a.scalingCenterX,p=(a==null?void 0:a.scalingCenterY)==null?c:a==null?void 0:a.scalingCenterY);const f=s,g=Math.cos(f),m=Math.sin(f);let v,C;f===0?(v=0,C=0):(v=(a==null?void 0:a.rotationCenterX)==null?l:a==null?void 0:a.rotationCenterX,C=(a==null?void 0:a.rotationCenterY)==null?c:a==null?void 0:a.rotationCenterY);const y=n,R=o,b=u*(1-d)-v,w=p*(1-h)-C;return e.setElements([g*d,m*d,-m*h,g*h,g*b-m*w+v+y,m*b+g*w+C+R]),e}static fromContext(e){const t=e.getTransform();return new As([t.a,t.b,t.c,t.d,t.e,t.f])}}As.instance=new As;const Fv={};function FH(){for(const r in Fv)delete Fv[r]}function La(r){var e;const t=r.constructor,i=Object.prototype.hasOwnProperty.call(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const s=((e=Fv[i])!==null&&e!==void 0?e:0)+1;return Fv[i]=s,i+"-"+s}var le;(function(r){r[r.NONE=0]="NONE",r[r.TRIVIAL=1]="TRIVIAL",r[r.MINOR=2]="MINOR",r[r.MAJOR=3]="MAJOR"})(le||(le={}));function NH(){try{return new Function("return true"),!0}catch{return!1}}const GH=NH();function fe(r){const{changeCb:e,convertor:t}=r??{};return function(i,s){const n=`__${s}`;i[s]||(GH&&e==null&&t==null?kH(i,s,n,r):VH(i,s,n,r))}}function kH(r,e,t,i){const{redraw:s=le.TRIVIAL,type:n="normal",checkDirtyOnAssignment:o=!1}=i??{},a=new Function("value",`
        const oldValue = this.${t};
        if (value !== oldValue) {
            this.${t} = value;
            ${n==="normal"?`this.markDirty(this, ${s});`:""}
            ${n==="transform"?`this.markDirtyTransform(${s});`:""}
            ${n==="path"?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${s}); }`:""}
            ${n==="font"?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${s}); }`:""}
        }
        ${o?`if (value != null && value._dirty > ${le.NONE}) { this.markDirty(value, value._dirty); }`:""}
`),l=new Function(`return this.${t};`);Object.defineProperty(r,e,{set:a,get:l,enumerable:!0,configurable:!0})}function VH(r,e,t,i){const{redraw:s=le.TRIVIAL,type:n="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=i??{};Object.defineProperty(r,e,{set:function(h){const u=this[t];h=a?a(h):h,h!==u&&(this[t]=h,n==="normal"&&this.markDirty(this,s),n==="transform"&&this.markDirtyTransform(s),n==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,s)),n==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,s)),o&&o(this)),l&&h!=null&&h._dirty>le.NONE&&this.markDirty(h,h._dirty)},get:function(){return this[t]},enumerable:!0,configurable:!0})}class jb{constructor(){this._dirty=le.MAJOR}markDirty(e,t=le.TRIVIAL){this._dirty>t||(this._dirty=t)}markClean(e){this._dirty=le.NONE}isDirty(){return this._dirty>le.NONE}}var Zn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},rs;(function(r){r[r.All=0]="All",r[r.None=1]="None"})(rs||(rs={}));const JA=r=>{r.parent&&(r.parent.dirtyZIndex=!0),r.zIndexChanged()};let ji=class QA extends jb{constructor(){super(...arguments),this.serialNumber=QA._nextSerialNumber++,this.id=La(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new As,this.inverseMatrix=new As,this._dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=rs.All}get datum(){var e;return this._datum!==void 0?this._datum:(e=this._parent)===null||e===void 0?void 0:e.datum}set datum(e){this._datum=e}_setLayerManager(e){this._layerManager=e,this._debug=e==null?void 0:e.debug;for(const t of this.children)t._setLayerManager(e)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){return this._children}append(e){Array.isArray(e)||(e=[e]);for(const t of e){if(t.parent)throw new Error(`${t} already belongs to another parent: ${t.parent}.`);if(t.layerManager)throw new Error(`${t} already belongs to a scene: ${t.layerManager}.`);if(this.childSet[t.id])throw new Error(`Duplicate ${t.constructor.name} node: ${t}`);this._children.push(t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,le.MAJOR)}appendChild(e){return this.append(e),e}removeChild(e){if(e.parent===this){const t=this.children.indexOf(e);if(t>=0)return this._children.splice(t,1),delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,le.MAJOR),e}throw new Error("The node to be removed is not a child of this node.")}insertBefore(e,t){const i=e.parent;if(e.parent&&e.parent.removeChild(e),t&&t.parent===this){const s=this.children.indexOf(t);if(s>=0)this._children.splice(s,0,e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager);else throw new Error(`${t} has ${i} as the parent, but is not in its list of children.`);this.dirtyZIndex=!0,this.markDirty(e,le.MAJOR)}else this.append(e);return e}calculateCumulativeMatrix(){this.computeTransformMatrix();const e=As.flyweight(this.matrix);let t=this.parent;for(;t;)t.computeTransformMatrix(),e.preMultiplySelf(t.matrix),t=t.parent;return e}transformPoint(e,t){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,t)}inverseTransformPoint(e,t){return this.calculateCumulativeMatrix().transformPoint(e,t)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this._dirtyTransform=!0,this.markDirty(this,le.MAJOR)}containsPoint(e,t){return!1}pickNode(e,t){var i;if(!this.visible||this.pointerEvents===rs.None||!this.containsPoint(e,t))return;const s=this.children;if(s.length>1e3)for(let n=s.length-1;n>=0;n--){const o=s[n],l=((i=o.computeTransformedBBox())===null||i===void 0?void 0:i.containsPoint(e,t))?o.pickNode(e,t):void 0;if(l)return l}else if(s.length)for(let n=s.length-1;n>=0;n--){const o=s[n].pickNode(e,t);if(o)return o}else if(!this.isContainerNode)return this}findNodes(e){const t=e(this)?[this]:[];for(const i of this.children){const s=i.findNodes(e);s&&t.push(...s)}return t}computeBBox(){}computeTransformedBBox(){const e=this.computeBBox();if(!e)return;this.computeTransformMatrix();const t=As.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),t.preMultiplySelf(i.matrix),i=i.parent;return t.transformBBox(e,e),e}computeTransformMatrix(){if(!this._dirtyTransform)return;const{matrix:e,scalingX:t,scalingY:i,rotation:s,translationX:n,translationY:o,scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}=this;As.updateTransformMatrix(e,t,i,s,n,o,{scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}),e.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}render(e){const{stats:t}=e;this._dirty=le.NONE,t&&t.nodesRendered++}clearBBox(e){const t=this.computeBBox();if(t==null)return;const{x:i,y:s,width:n,height:o}=t,a=this.transformPoint(i,s),l=this.transformPoint(i+n,s+o);e.clearRect(a.x,a.y,l.x-a.x,l.y-a.y)}markDirty(e,t=le.TRIVIAL,i=t){this._dirty>t||this._dirty===t&&t===i||(this._dirty=t,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){const{force:t=!1,recursive:i=!0}=e??{};if(!(this._dirty===le.NONE&&!t)&&(this._dirty=le.NONE,i))for(const s of this.children)s.markClean()}visibilityChanged(){}get nodeCount(){let e=1,t=this._dirty>=le.NONE||this._dirtyTransform?1:0,i=this.visible?1:0;for(const s of this._children){const{count:n,visibleCount:o,dirtyCount:a}=s.nodeCount;e+=n,i+=o,t+=a}return{count:e,visibleCount:i,dirtyCount:t}}zIndexChanged(){}};ji._nextSerialNumber=0;Zn([fe({type:"transform"})],ji.prototype,"scalingX",void 0);Zn([fe({type:"transform"})],ji.prototype,"scalingY",void 0);Zn([fe({type:"transform"})],ji.prototype,"scalingCenterX",void 0);Zn([fe({type:"transform"})],ji.prototype,"scalingCenterY",void 0);Zn([fe({type:"transform"})],ji.prototype,"rotationCenterX",void 0);Zn([fe({type:"transform"})],ji.prototype,"rotationCenterY",void 0);Zn([fe({type:"transform"})],ji.prototype,"rotation",void 0);Zn([fe({type:"transform"})],ji.prototype,"translationX",void 0);Zn([fe({type:"transform"})],ji.prototype,"translationY",void 0);Zn([fe({redraw:le.MAJOR,changeCb:r=>r.visibilityChanged()})],ji.prototype,"visible",void 0);Zn([fe({redraw:le.TRIVIAL,changeCb:JA})],ji.prototype,"zIndex",void 0);Zn([fe({redraw:le.TRIVIAL,changeCb:JA})],ji.prototype,"zIndexSubOrder",void 0);function eP(r,e){let t=0;return typeof r=="number"&&typeof e=="number"?t=r-e:typeof r=="string"&&typeof e=="string"?t=r.localeCompare(e):r==null&&e==null||(r==null?t=-1:e==null?t=1:t=String(r).localeCompare(String(e))),t}function tP(r,e,t){const i=s=>typeof s=="function"?s():s;for(const s in r){const n=t(i(r[s]),i(e[s]));if(n!==0)return n}return 0}const Kx={};function Yx(r,e){Kx[e]||(r(),Kx[e]=!0)}const ge={debug(...r){console.log(...r)},warn(r,...e){console.warn(`AG Charts - ${r}`,...e)},error(r,...e){typeof r=="object"?console.error("AG Charts error",r,...e):console.error(`AG Charts - ${r}`,...e)},warnOnce(r,...e){Yx(()=>ge.warn(r,...e),`Logger.warn: ${r}`)},errorOnce(r,...e){Yx(()=>ge.error(r,...e),`Logger.warn: ${r}`)}};var HH=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ve extends ji{constructor(e){var t;super(),this.opts=e,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:s}=e??{};this.isContainerNode=!0,i!==void 0&&(this.zIndex=i),s!==void 0&&(this.zIndexSubOrder=s),this.name=(t=this.opts)===null||t===void 0?void 0:t.name}zIndexChanged(){var e;this.layer&&((e=this._layerManager)===null||e===void 0||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(e){var t,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(e),e&&(!((t=this.opts)===null||t===void 0)&&t.layer)){const{zIndex:s,zIndexSubOrder:n,name:o}=(i=this.opts)!==null&&i!==void 0?i:{},a=()=>this.getComputedOpacity(),l=()=>this.getVisibility();this.layer=e.addLayer({zIndex:s,zIndexSubOrder:n,name:o,getComputedOpacity:a,getVisibility:l})}}getComputedOpacity(){let e=1,t=this;do t instanceof ve&&(e*=t.opacity);while(t=t.parent);return e}getVisibility(){let e=this,t=this.visible;for(;e=e.parent;)e.visible||(t=e.visible);return t}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,t=le.TRIVIAL){const i=t<=le.MINOR?le.TRIVIAL:t;super.markDirty(e,t,i)}containsPoint(e,t){return!0}computeBBox(){return this.computeTransformMatrix(),ve.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(e){var t,i;const{opts:{name:s=void 0}={}}=this,{_debug:{consoleLog:n=!1}={}}=this,{dirty:o,dirtyZIndex:a,layer:l,children:c,clipRect:d}=this;let{ctx:h,forceRender:u,clipBBox:p}=e;const{resized:f,stats:g}=e,m=h.getTransform(),v=o>=le.MINOR||a||f,C=v||c.some(x=>x.dirty>=le.TRIVIAL);if(s&&n&&ge.debug({name:s,group:this,isDirty:v,isChildDirty:C,renderCtx:e,forceRender:u}),l){const x=this.computeBBox();this.lastBBox===void 0||!this.lastBBox.equals(x)?(u=!0,this.lastBBox=x):x.isInfinite()||(u=!1)}if(!v&&!C&&!u){if(s&&n&&g){const x=this.nodeCount;ge.debug({name:s,result:"skipping",renderCtx:e,counts:x,group:this})}l&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}const y=this.visible;if(l){if(h=l.context,h.save(),h.resetTransform(),u=!0,l.clear(),p){const{width:x,height:O,x:M,y:N}=p;n&&ge.debug({name:s,clipBBox:p,ctxTransform:h.getTransform(),renderCtx:e,group:this}),this.clipCtx(h,M,N,x,O)}h.setTransform(m)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),d){const{x,y:O,width:M,height:N}=d;h.save(),n&&ge.debug({name:s,clipRect:d,ctxTransform:h.getTransform(),renderCtx:e,group:this}),this.clipCtx(h,x,O,M,N),p=this.matrix.inverse().transformBBox(d)}a&&(this.sortChildren(),u=!0);const b=u!==e.forceRender||p!==e.clipBBox||h!==e.ctx?Object.assign(Object.assign({},e),{ctx:h,forceRender:u,clipBBox:p}):e;let w=0;for(const x of c){if(!x.visible||!y){x.markClean(),g&&(w+=x.nodeCount.count);continue}if(!u&&x.dirty===le.NONE){g&&(w+=x.nodeCount.count);continue}h.save(),x.render(b),h.restore()}if(g&&(g.nodesSkipped+=w),super.render(e),d&&h.restore(),l&&(g&&g.layersRendered++,h.restore(),l.snapshot(),(i=(t=l.context).verifyDepthZero)===null||i===void 0||i.call(t)),s&&n&&g){const x=this.nodeCount;ge.debug({name:s,result:"rendered",skipped:w,renderCtx:e,counts:x,group:this})}}sortChildren(){this.dirtyZIndex=!1,this.children.sort((e,t)=>{var i,s;return tP([e.zIndex,...(i=e.zIndexSubOrder)!==null&&i!==void 0?i:[void 0,void 0],e.serialNumber],[t.zIndex,...(s=t.zIndexSubOrder)!==null&&s!==void 0?s:[void 0,void 0],t.serialNumber],eP)})}clipCtx(e,t,i,s,n){e.beginPath(),e.moveTo(t,i),e.lineTo(t+s,i),e.lineTo(t+s,i+n),e.lineTo(t,i+n),e.closePath(),e.clip()}static computeBBox(e){let t=1/0,i=-1/0,s=1/0,n=-1/0;return e.forEach(o=>{if(!o.visible)return;const a=o.computeTransformedBBox();if(!a)return;const l=a.x,c=a.y;l<t&&(t=l),c<s&&(s=c),l+a.width>i&&(i=l+a.width),c+a.height>n&&(n=c+a.height)}),new qe(t,s,i-t,n-s)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}}ve.className="Group";HH([fe({convertor:r=>Math.min(1,Math.max(0,r))})],ve.prototype,"opacity",void 0);class Xx{constructor({width:e=600,height:t=300,overrideDevicePixelRatio:i=void 0}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(e,t),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(e,t)}static isSupported(){return window.OffscreenCanvas!=null}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=e??window.devicePixelRatio;ZA()||(t=1),Rt.overrideScale(this.context,t),this._pixelRatio=t}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.resetTransform(),this._width=e,this._height=t}}function Oc(r){const e=typeof window<"u"?window:void 0;return e==null?void 0:e[r]}var BH=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function WH(){var r;let e=(r=Oc("agChartsSceneDebug"))!==null&&r!==void 0?r:[];typeof e=="string"&&(e=[e]);const t=[];return e.forEach(i=>{i==="layout"?t.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):t.push(i)}),t}class v0{constructor(e){var t,i,s;this.id=La(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,sceneNodeHighlight:[]};const{document:n=window.document,mode:o=(t=Oc("agChartsSceneRenderModel"))!==null&&t!==void 0?t:"adv-composite",width:a,height:l,overrideDevicePixelRatio:c=void 0}=e;this.overrideDevicePixelRatio=c,this.opts={document:n,mode:o},this.debug.consoleLog=Oc("agChartsDebug")===!0,this.debug.stats=(i=Oc("agChartsSceneStats"))!==null&&i!==void 0?i:!1,this.debug.dirtyTree=(s=Oc("agChartsSceneDirtyTree"))!==null&&s!==void 0?s:!1,this.debug.sceneNodeHighlight=WH(),this.canvas=new Rt({document:n,width:a,height:l,overrideDevicePixelRatio:c})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,t){this.canvas.download(e,t)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,t){e=Math.round(e),t=Math.round(t);const i=e<=0||t<=0,s=isNaN(e)||isNaN(t);return e===this.width&&t===this.height||s||i?!1:(this.pendingSize=[e,t],this.markDirty(),!0)}addLayer(e){var t;const{mode:i}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(i))return;const{zIndex:n=this._nextZIndex++,name:o,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c}=e,{width:d,height:h,overrideDevicePixelRatio:u}=this,p=i==="dom-composite",g=!(i==="adv-composite")||!Xx.isSupported()?new Rt({document:this.opts.document,width:d,height:h,domLayer:p,zIndex:n,name:o,overrideDevicePixelRatio:u}):new Xx({width:d,height:h,overrideDevicePixelRatio:u}),m={id:this._nextLayerId++,name:o,zIndex:n,zIndexSubOrder:a,canvas:g,getComputedOpacity:l,getVisibility:c};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(m),this.sortLayers(),p){const v=this.layers.map(R=>R.canvas).filter(R=>R instanceof Rt),C=v.findIndex(R=>R===g);((t=v[C-1])!==null&&t!==void 0?t:this.canvas).element.insertAdjacentElement("afterend",g.element)}return this.debug.consoleLog&&ge.debug({layers:this.layers}),m.canvas}removeLayer(e){const t=this.layers.findIndex(i=>i.canvas===e);t>=0&&(this.layers.splice(t,1),e.destroy(),this.markDirty(),this.debug.consoleLog&&ge.debug({layers:this.layers}))}moveLayer(e,t,i){const s=this.layers.find(n=>n.canvas===e);s&&(s.zIndex=t,s.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&ge.debug({layers:this.layers}))}sortLayers(){this.layers.sort((e,t)=>{var i,s;return tP([e.zIndex,...(i=e.zIndexSubOrder)!==null&&i!==void 0?i:[void 0,void 0],e.id],[t.zIndex,...(s=t.zIndexSubOrder)!==null&&s!==void 0?s:[void 0,void 0],t.id],eP)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){e!==this._root&&(this._root&&this._root._setLayerManager(),this._root=e,e&&(e.parent===null&&e.layerManager&&e.layerManager!==this&&(e.layerManager.root=null),e._setLayerManager(this)),this.markDirty())}get root(){return this._root}strip(){const{layers:e}=this;for(const t of e)t.canvas.destroy(),delete t.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){var t;return BH(this,void 0,void 0,function*(){const{debugSplitTimes:i=[performance.now()],extraDebugStats:s={}}=e??{},{canvas:n,canvas:{context:o},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(p=>p.canvas.resize(...c)),this.pendingSize=void 0),a&&!a.visible){this._dirty=!1;return}if(a&&!this.dirty){this.debug.consoleLog&&ge.debug("no-op",{redrawType:le[a.dirty],tree:this.buildTree(a)}),this.debugStats(i,o,void 0,s);return}const h={ctx:o,forceRender:!0,resized:!!c,debugNodes:{}};this.debug.stats==="detailed"&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let u=!1;if((!a||a.dirty>=le.TRIVIAL)&&(u=!0,n.clear()),a&&this.debug.dirtyTree){const{dirtyTree:p,paths:f}=this.buildDirtyTree(a);ge.debug({dirtyTree:p,paths:f})}a&&u&&(this.debug.consoleLog&&ge.debug("before",{redrawType:le[a.dirty],canvasCleared:u,tree:this.buildTree(a)}),a.visible&&(o.save(),a.render(h),o.restore())),d!=="dom-composite"&&l.length>0&&u&&(this.sortLayers(),o.save(),o.setTransform(1/n.pixelRatio,0,0,1/n.pixelRatio,0,0),l.forEach(({canvas:{imageSource:p,enabled:f},getComputedOpacity:g,getVisibility:m})=>{!f||!m()||(o.globalAlpha=g(),o.drawImage(p,0,0))}),o.restore()),(t=o.verifyDepthZero)===null||t===void 0||t.call(o),this._dirty=!1,this.debugStats(i,o,h.stats,s),this.debugSceneNodeHighlight(o,this.debug.sceneNodeHighlight,h.debugNodes),a&&this.debug.consoleLog&&ge.debug("after",{redrawType:le[a.dirty],canvasCleared:u,tree:this.buildTree(a)})})}debugStats(e,t,i,s={}){const n=performance.now();if(this.debug.stats){const o=e[0];e.push(n);const a=(R,b)=>{const w=R+b;return`${R} / ${w} (${Math.round(100*R/w)}%)`},l=(R,b)=>`${Math.round((b-R)*100)/100}ms`,{layersRendered:c=0,layersSkipped:d=0,nodesRendered:h=0,nodesSkipped:u=0}=i??{},p=e.map((R,b)=>b>0?l(e[b-1],R):null).filter(R=>R!=null).join(" + "),f=Object.entries(s).map(([R,b])=>`${R}: ${b}`).join(" ; "),m=[`${l(o,n)} (${p})`,`${f}`,this.debug.stats==="detailed"?`Layers: ${a(c,d)}`:null,this.debug.stats==="detailed"?`Nodes: ${a(h,u)}`:null].filter(R=>R!=null).map(R=>[R,Rt.getTextSize(R,t.font)]),v=Math.max(...m.map(([,{width:R}])=>R)),C=m.reduce((R,[,{height:b}])=>R+b,0);t.save(),t.fillStyle="white",t.fillRect(0,0,v,C),t.fillStyle="black";let y=0;for(const[R,b]of m)y+=b.height,t.fillText(R,2,y);t.restore()}}debugSceneNodeHighlight(e,t,i){var s;const n=a=>l=>a.test(l.id)?!0:l instanceof ve&&l.name!=null&&a.test(l.name),o=a=>l=>a===l.id?!0:l instanceof ve&&l.name!=null&&a===l.name;for(const a of t){if(typeof a=="string"&&i[a]!=null)continue;const l=typeof a=="string"?o(a):n(a),c=(s=this.root)===null||s===void 0?void 0:s.findNodes(l);if(!c||c.length===0){ge.debug(`no debugging node with id [${a}] in scene graph.`);continue}for(const d of c)d instanceof ve&&d.name?i[d.name]=d:i[d.id]=d}e.save();for(const[a,l]of Object.entries(i)){const c=l.computeTransformedBBox();if(!c){ge.debug(`no bbox for debugged node [${a}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(c.x,c.y,c.width,c.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(a,c.x,c.y,c.width),e.fillText(a,c.x,c.y,c.width)}e.restore()}buildTree(e){var t;const i=(t=e instanceof ve?e.name:null)!==null&&t!==void 0?t:e.id;return Object.assign({name:i,node:e,dirty:le[e.dirty]},e.children.map(s=>this.buildTree(s)).reduce((s,n)=>{let{name:o}=n;const{node:{visible:a,opacity:l,zIndex:c,zIndexSubOrder:d},node:h}=n;(!a||l<=0)&&(o=`(${o})`),h instanceof ve&&h.isLayer()&&(o=`*${o}*`);const u=[`${o??"<unknown>"}`,`z: ${c}`,d&&`zo: ${d.join(" / ")}`].filter(p=>!!p).join(" ");return s[u]=n,s},{}))}buildDirtyTree(e){var t;if(e.dirty===le.NONE)return{dirtyTree:{},paths:[]};const i=e.children.map(o=>this.buildDirtyTree(o)).filter(o=>o.paths.length>0),s=(t=e instanceof ve?e.name:null)!==null&&t!==void 0?t:e.id,n=i.length===0?[s]:i.map(o=>o.paths).reduce((o,a)=>o.concat(a),[]).map(o=>`${s}.${o}`);return{dirtyTree:Object.assign({name:s,node:e,dirty:le[e.dirty]},i.map(o=>o.dirtyTree).filter(o=>o.dirty!==void 0).reduce((o,a)=>{var l;return o[(l=a.name)!==null&&l!==void 0?l:"<unknown>"]=a,o},{})),paths:n}}}v0.className="Scene";class UH{constructor(){this.stops=[]}}const ar=Math.PI*2;function as(r){return r%=ar,r+=ar,r%=ar,r}function iP(r){return r%=ar,r+=ar,r!==ar&&(r%=ar),r}function sP(r){return r%=ar,r<-Math.PI?r+=ar:r>=Math.PI&&(r-=ar),r}function Zs(r){return r/180*Math.PI}function jH(r){return r/Math.PI*180}class zH extends UH{constructor(){super(...arguments),this.angle=0}createGradient(e,t){const{stops:s,angle:n}=this,o=as(Zs(n+90)),a=Math.cos(o),l=Math.sin(o),c=t.width,d=t.height,h=t.x+c*.5,u=t.y+d*.5;if(c>0&&d>0){const p=Math.sqrt(d*d+c*c)/2,f=Math.atan2(d,c);let g;o<Math.PI/2?g=o:o<Math.PI?g=Math.PI-o:o<3*Math.PI/2?g=o-Math.PI:g=2*Math.PI-o;const m=p*Math.abs(Math.cos(g-f)),v=e.createLinearGradient(h+a*m,u+l*m,h-a*m,u-l*m);return s.forEach(C=>{v.addColorStop(C.offset,C.color)}),v}return"black"}}var Mo=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const $H=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class rt extends ji{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=rt.defaultStyles.fill,this.stroke=rt.defaultStyles.stroke,this.strokeWidth=rt.defaultStyles.strokeWidth,this.lineDash=rt.defaultStyles.lineDash,this.lineDashOffset=rt.defaultStyles.lineDashOffset,this.lineCap=rt.defaultStyles.lineCap,this.lineJoin=rt.defaultStyles.lineJoin,this.opacity=rt.defaultStyles.opacity,this.fillShadow=rt.defaultStyles.fillShadow}static createInstance(e){const t=Object.create(e);return t._setParent(void 0),t.id=e.id+"-Instance-"+String(++e.lastInstanceId),t}restoreOwnStyles(){const e=this.constructor.defaultStyles,t=Object.getOwnPropertyNames(e);for(let i=0,s=t.length;i<s;i++){const n=t[i];this[n]=e[n]}}restoreAllStyles(){const e=this.constructor.defaultStyles;for(const t in e)this[t]=e[t]}restoreOverriddenStyles(){const e=this.constructor.defaultStyles,t=Object.getPrototypeOf(e);for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&Object.prototype.hasOwnProperty.call(t,i)&&(this[i]=e[i])}updateGradient(){const{fill:e}=this;let t;if(e!=null&&e.startsWith("linear-gradient")&&(t=$H.exec(e))){const i=parseFloat(t[1]),s=[],n=t[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=o.exec(n);)s.push(a[0]);this.gradient=new zH,this.gradient.angle=i,this.gradient.stops=s.map((l,c)=>({offset:c/(s.length-1),color:l}))}else this.gradient=void 0}align(e,t){var i,s,n;const o=(n=(s=(i=this.layerManager)===null||i===void 0?void 0:i.canvas)===null||s===void 0?void 0:s.pixelRatio)!==null&&n!==void 0?n:1,a=Math.round(e*o)/o;return t==null?a:t===0?0:t<1?Math.ceil(t*o)/o:Math.round((t+e)*o)/o-a}fillStroke(e){this.renderFill(e),this.renderStroke(e)}renderFill(e){if(this.fill){const{globalAlpha:t}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=t}e.shadowColor="rgba(0, 0, 0, 0)"}applyFill(e){this.gradient?e.fillStyle=this.gradient.createGradient(e,this.computeBBox()):e.fillStyle=this.fill}applyFillAlpha(e){const{globalAlpha:t}=e;e.globalAlpha=t*this.opacity*this.fillOpacity}applyShadow(e){var t,i;const s=(i=(t=this.layerManager)===null||t===void 0?void 0:t.canvas.pixelRatio)!==null&&i!==void 0?i:1,n=this.fillShadow;n!=null&&n.enabled&&(e.shadowColor=n.color,e.shadowOffsetX=n.xOffset*s,e.shadowOffsetY=n.yOffset*s,e.shadowBlur=n.blur*s)}renderStroke(e){if(this.stroke&&this.strokeWidth){const{globalAlpha:t}=e;e.strokeStyle=this.stroke,e.globalAlpha=t*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=t}}containsPoint(e,t){return this.isPointInPath(e,t)}}rt.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0});Mo([fe({redraw:le.MINOR})],rt.prototype,"fillOpacity",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"strokeOpacity",void 0);Mo([fe({redraw:le.MINOR,changeCb:r=>r.updateGradient()})],rt.prototype,"fill",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"stroke",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"strokeWidth",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"lineDash",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"lineDashOffset",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"lineCap",void 0);Mo([fe({redraw:le.MINOR})],rt.prototype,"lineJoin",void 0);Mo([fe({redraw:le.MINOR,convertor:r=>Math.min(1,Math.max(0,r))})],rt.prototype,"opacity",void 0);Mo([fe({redraw:le.MINOR,checkDirtyOnAssignment:!0})],rt.prototype,"fillShadow",void 0);var Ar=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const Ry="â¦";function C0(r){const{redraw:e=le.MAJOR,changeCb:t}=r??{};return fe({redraw:e,type:"font",changeCb:t})}class be extends rt{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=be.defaultStyles.textAlign,this.textBaseline=be.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=aP(this.text)}get font(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=nd(this)),this._font}computeBBox(){return Rt.has.textMetrics?nP(this.lines,this.x,this.y,this):oP(this.lines,this.x,this.y,this)}getLineHeight(e){var t,i;if(this.lineHeight)return this.lineHeight;if(Rt.has.textMetrics){const s=Rt.measureText(e,this.font,this.textBaseline,this.textAlign);return((t=s.fontBoundingBoxAscent)!==null&&t!==void 0?t:s.emHeightAscent)+((i=s.fontBoundingBoxDescent)!==null&&i!==void 0?i:s.emHeightDescent)}return Rt.getTextSize(e,this.font).height}isPointInPath(e,t){const i=this.transformPoint(e,t),s=this.computeBBox();return s?s.containsPoint(i.x,i.y):!1}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===le.NONE&&!i){s&&(s.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){s&&(s.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);const{fill:n,stroke:o,strokeWidth:a}=this;t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=t;if(n){t.fillStyle=n,t.globalAlpha=c*this.opacity*this.fillOpacity;const{fillShadow:d}=this;d!=null&&d.enabled&&(t.shadowColor=d.color,t.shadowOffsetX=d.xOffset*l,t.shadowOffsetY=d.yOffset*l,t.shadowBlur=d.blur*l),this.renderLines((h,u,p)=>t.fillText(h,u,p))}if(o&&a){t.strokeStyle=o,t.lineWidth=a,t.globalAlpha=c*this.opacity*this.strokeOpacity;const{lineDash:d,lineDashOffset:h,lineCap:u,lineJoin:p}=this;d&&t.setLineDash(d),h&&(t.lineDashOffset=h),u&&(t.lineCap=u),p&&(t.lineJoin=p),this.renderLines((f,g,m)=>t.strokeText(f,g,m))}super.render(e)}renderLines(e){const{lines:t,x:i,y:s}=this,n=this.lines.map(l=>this.getLineHeight(l));let a=-(n.reduce((l,c)=>l+c,0)-n[0])*rP(this.textBaseline);for(let l=0;l<t.length;l++)e(t[l],i,s+a),a+=n[l]}static wrap(e,t,i,s,n){const o=nd(s),a=KH(o),l=e.split(/\r?\n/g);if(l.length===0)return"";if(n==="never")return be.truncateLine(l[0],t,a,!1);const c=[];let d=0;for(const h of l){const u=be.wrapLine(h,t,i,a,s,n,d);if(c.push(u.result),d=u.cumulativeHeight,u.truncated)break}return c.join(`
`).trim()}static wrapLine(e,t,i,s,n,o,a){if(e=e.trim(),!e)return{result:"",truncated:!1,cumulativeHeight:a};const l=s.size(e);if(l.width<=t)return{result:e,truncated:!1,cumulativeHeight:a+l.height};if(l.height>i||s.width("W")>t)return{result:"",truncated:!0,cumulativeHeight:a};const c=e.split(/\s+/g),d=be.wrapLineSequentially(c,t,i,s,n,o,a);a=d.cumulativeHeight;let{lines:h}=d;if(!(d.wordsBrokenOrTruncated||d.linesTruncated)){const p=d.lines.length,f=be.wrapLineBalanced(c,t,s,p);f.length===h.length&&(h=f)}return{result:h.map(p=>p.join(" ")).join(`
`),truncated:d.linesTruncated,cumulativeHeight:a}}static breakWord(e,t,i,s,n){const o=p=>be.punctuationMarks.includes(e[p]),a=s?n.width("-"):0,l=[];let c=0,d=0;for(let p=0;p<e.length;p++){const f=e[p],g=n.width(f),m=d===0?t:i;c+g+a>m&&(l.push(p),c=0,d++),c+=g}const h=[];let u=0;for(const p of l){let f=e.substring(u,p);s&&f.length>0&&!o(p-1)&&!o(p)&&(f+="-"),h.push(f),u=p}return h.push(e.substring(u)),h}static truncateLine(e,t,i,s){const n=i.width(e);if(n<t&&!s)return e;const o=i.width(Ry);if(n+o<=t)return`${e}${Ry}`;let a=Math.floor(e.length*t/n)+1,l,c;do l=e.substring(0,a),c=i.width(l);while(--a>=0&&c+o>t);return`${l}${Ry}`}static wrapLineSequentially(e,t,i,s,n,o,a){const{fontSize:l,lineHeight:c=l*be.defaultLineHeightRatio}=n,d=o==="always"||o==="hyphenate",h=o==="hyphenate",u=s.width(" ");let p=!1,f=!1;const g=[];let m=[],v=0;const C=()=>{const y=a+c;if(y>=i){const R=m.join(" "),b=be.truncateLine(R,t,s,!0);return m.splice(0,m.length,b),f=!0,!1}return m=[],v=0,a=y,g.push(m),!0};if(!C())return{lines:g,linesTruncated:!0,wordsBrokenOrTruncated:p,cumulativeHeight:a};for(let y=0;y<e.length;y++){const R=e[y],b=s.width(R),w=m.length===0?0:u,x=v+w+b;if(x<=t){m.push(R),v=x;continue}if(b<=t){if(!C())break;m.push(R),v=b;continue}if(p=!0,d){const O=t-v-w,M=be.breakWord(R,O,t,h,s);let N=!1;for(let V=0;V<M.length;V++){const I=M[V];if(I&&m.push(I),V===M.length-1)v=s.width(I);else if(!C()){N=!0;break}}if(N)break}else{if(!C())break;const O=be.truncateLine(R,t,s,!0);m.push(O),y<e.length-1&&(f=!0);break}}return{lines:g,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:a}}static wrapLineBalanced(e,t,i,s){const n=e.reduce((p,f)=>p+i.width(f),0),o=i.width(" "),a=o*(e.length-s-2),l=(n+a)/s,c=[];let d=[],h=i.width(e[0]),u=!0;for(const p of e){const f=i.width(p);if(u){d=[],d.push(p),h=f,u=!1,c.push(d);continue}const g=h+o+f;g<=l?(d.push(p),h=g):g<=t?(d.push(p),u=!0):(d=[p],h=f,c.push(d))}return c}}be.className="Text";be.defaultLineHeightRatio=1.15;be.defaultStyles=Object.assign({},rt.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});be.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"];Ar([fe({redraw:le.MAJOR})],be.prototype,"x",void 0);Ar([fe({redraw:le.MAJOR})],be.prototype,"y",void 0);Ar([fe({redraw:le.MAJOR,changeCb:r=>r._setLines()})],be.prototype,"text",void 0);Ar([C0()],be.prototype,"fontStyle",void 0);Ar([C0()],be.prototype,"fontWeight",void 0);Ar([C0()],be.prototype,"fontSize",void 0);Ar([C0()],be.prototype,"fontFamily",void 0);Ar([fe({redraw:le.MAJOR})],be.prototype,"textAlign",void 0);Ar([fe({redraw:le.MAJOR})],be.prototype,"textBaseline",void 0);Ar([fe({redraw:le.MAJOR})],be.prototype,"lineHeight",void 0);function KH(r){const e=new Map,t=s=>Rt.getTextSize(s,r);return{size:t,width:s=>{if(e.has(s))return e.get(s);const{width:n}=t(s);return e.set(s,n),n}}}function nd(r){const{fontFamily:e,fontSize:t,fontStyle:i,fontWeight:s}=r;return[i??"",s??"",t+"px",e].join(" ").trim()}function YH(r,e,t,i){return Rt.has.textMetrics?nP(r,e,t,i):oP(r,e,t,i)}function nP(r,e,t,i){var s,n;let o=0,a=0,l=0,c=0,d=0;const h=nd(i),{lineHeight:u,textBaseline:p=be.defaultStyles.textBaseline,textAlign:f=be.defaultStyles.textAlign}=i;for(let g=0;g<r.length;g++){const m=Rt.measureText(r[g],h,p,f);o=Math.max(o,m.actualBoundingBoxLeft),l=Math.max(l,m.width),g==0?(a+=m.actualBoundingBoxAscent,c+=m.actualBoundingBoxAscent):d+=(s=m.fontBoundingBoxAscent)!==null&&s!==void 0?s:m.emHeightAscent,g==r.length-1?c+=m.actualBoundingBoxDescent:d+=(n=m.fontBoundingBoxDescent)!==null&&n!==void 0?n:m.emHeightDescent}return u!==void 0&&(d=(r.length-1)*u),c+=d,a+=d*rP(p),new qe(e-o,t-a,l,c)}function oP(r,e,t,i){let s=0,n=0,o=0;const a=nd(i),{lineHeight:l,textBaseline:c=be.defaultStyles.textBaseline,textAlign:d=be.defaultStyles.textAlign}=i;if(r.length>0){const h=Rt.getTextSize(r[0],a);s=h.width,n=h.height}for(let h=1;h<r.length;h++){const u=Rt.getTextSize(r[h],a);s=Math.max(s,u.width),o+=l??u.height}switch(d){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(c){case"alphabetic":t-=n*.7+o*.5;break;case"middle":t-=n*.45+o*.5;break;case"ideographic":t-=n+o;break;case"hanging":t-=n*.2+o*.5;break;case"bottom":t-=n+o;break}return new qe(e,t,s,n+o)}function rP(r){switch(r){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}function aP(r){return typeof r=="string"?r.split(/\r?\n/g):[]}class lP{constructor(){this.allEventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let s=i.get(e);s||(s=new Set,i.set(e,s)),s.has(t)||s.add(t)}removeEventListener(e,t){const{allEventListeners:i}=this,s=i.get(e);s&&(s.delete(t),s.size===0&&i.delete(e))}hasEventListener(e){return this.allEventListeners.has(e)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(e){const t=this.allEventListeners.get(e.type);t==null||t.forEach(i=>i(e))}}const zb=r=>typeof r=="string",cP=r=>!!r&&Object.prototype.hasOwnProperty.call(r,"toString")&&zb(r.toString()),XH=r=>r instanceof Date&&!isNaN(+r);function Nv(r){return zb(r)||cP(r)}function Hf(r){const e=i=>!!i&&Object.prototype.hasOwnProperty.call(i,"valueOf")&&Js(i.valueOf()),t=i=>i instanceof Date&&!isNaN(+i);return Js(r)||e(r)||t(r)}function Cu(r,e){if(e&&Hf(r))return r;if(!e)return Nv(r)?r:String(r)}const Js=r=>typeof r=="number"&&Number.isFinite(r);class Re{constructor(e,t,i,s=1){this.r=Math.min(1,Math.max(0,e||0)),this.g=Math.min(1,Math.max(0,t||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,s||0))}static validColorString(e){return e.indexOf("#")>=0?!!Re.parseHex(e):e.indexOf("rgb")>=0?!!Re.stringToRgba(e):!!Re.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return Re.fromHexString(e);const t=Re.nameToHex[e.toLowerCase()];if(t)return Re.fromHexString(t);if(e.indexOf("rgb")>=0)return Re.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return Re.fromString(e)}catch{return ge.warnOnce(`invalid color string: '${e}'.`),Re.fromArray([0,0,0])}}static parseHex(e){e=e.replace(/ /g,"").slice(1);let t;switch(e.length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map(i=>parseInt(i,16)).map(i=>i+i*16);break}if((t==null?void 0:t.length)>=3&&t.every(i=>i>=0))return t.length===3&&t.push(255),t}static fromHexString(e){const t=Re.parseHex(e);if(t){const[i,s,n,o]=t;return new Re(i/255,s/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[t,i]=[NaN,NaN];for(let a=0;a<e.length;a++){const l=e[a];if(!t&&l==="(")t=a;else if(l===")"){i=a;break}}const s=t&&i&&e.substring(t+1,i);if(!s)return;const n=s.split(","),o=[];for(let a=0;a<n.length;a++){const l=n[a];let c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):a===3?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),o.push(c)}return o}static fromRgbaString(e){const t=Re.stringToRgba(e);if(t){if(t.length===3)return new Re(t[0],t[1],t[2]);if(t.length===4)return new Re(t[0],t[1],t[2],t[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new Re(e[0],e[1],e[2],e[3]);if(e.length===3)return new Re(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,t,i,s=1){const n=Re.HSBtoRGB(e,t,i);return new Re(n[0],n[1],n[2],s)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+Re.padHex(Math.round(this.r*255).toString(16))+Re.padHex(Math.round(this.g*255).toString(16))+Re.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=Re.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){const t=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],i=Math.pow(10,e);return this.a!==1?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return Re.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(e,t,i){const s=Math.min(e,t,i),n=Math.max(e,t,i),o=n!==0?(n-s)/n:0;let a=NaN;if(s!==n){const l=n-s,c=(n-e)/l,d=(n-t)/l,h=(n-i)/l;e===n?a=h-d:t===n?a=2+c-h:a=4+d-c,a/=6,a<0&&(a=a+1)}return[a*360,o,n]}static HSBtoRGB(e,t,i){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let s=0,n=0,o=0;if(t===0)s=n=o=i;else{const a=(e-Math.floor(e))*6,l=a-Math.floor(a),c=i*(1-t),d=i*(1-t*l),h=i*(1-t*(1-l));switch(a>>0){case 0:s=i,n=h,o=c;break;case 1:s=d,n=i,o=c;break;case 2:s=c,n=i,o=h;break;case 3:s=c,n=d,o=i;break;case 4:s=h,n=c,o=i;break;case 5:s=i,n=c,o=d;break}}return[s,n,o]}derive(e,t,i,s){const n=Re.RGBtoHSB(this.r,this.g,this.b);let o=n[2];o==0&&i>1&&(o=.05);const a=((n[0]+e)%360+360)%360,l=Math.max(Math.min(n[1]*t,1),0);o=Math.max(Math.min(o*i,1),0);const c=Math.max(Math.min(this.a*s,1),0),d=Re.HSBtoRGB(a,l,o);return d.push(c),Re.fromArray(d)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,t){const i=Re.tryParseFromString(e),s=Re.tryParseFromString(t);return n=>{const o=(l,c)=>l*(1-n)+c*n;return new Re(o(i.r,s.r),o(i.g,s.g),o(i.b,s.b),o(i.a,s.a)).toString()}}}Re.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const Gv=Symbol("BREAK"),Ty="__decorator_config";function qH(r,e,t,i){Object.getOwnPropertyDescriptor(r,Ty)==null&&Object.defineProperty(r,Ty,{value:{}});const s=r[Ty];if(s[t]!=null)return s[t];s[t]={setters:[],getters:[]};const n=Object.getOwnPropertyDescriptor(r,e),o=n==null?void 0:n.set,a=n==null?void 0:n.get;return Object.defineProperty(r,e,{set:function(d){var h,u;const p=(u=(h=s[t])===null||h===void 0?void 0:h.setters)!==null&&u!==void 0?u:[];let f;p.some(g=>g.length>2)&&(f=a?a.call(this):this[i]);for(const g of p)if(d=g(this,e,d,f),d===Gv)return;o?o.call(this,d):this[i]=d},get:function(){var d,h;let u=a?a.call(this):this[i];for(const p of(h=(d=s[t])===null||d===void 0?void 0:d.getters)!==null&&h!==void 0?h:[])if(u=p(this,e,u),u===Gv)return;return u},enumerable:!0,configurable:!1}),s[t]}function Qu(r,e){return(t,i)=>{const s=i.toString(),n=`__${s}`,{getters:o,setters:a}=qH(t,i,s,n);a.push(r),e&&o.splice(0,0,e)}}function _(r){return Qu((e,t,i)=>{var s,n,o;if(r(i,{target:e}))return i;const a=t.toString().replace(/^_*/,"");let l=(n=(s=e.constructor)===null||s===void 0?void 0:s.className)!==null&&n!==void 0?n:(o=e.constructor)===null||o===void 0?void 0:o.name;(l==null?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return r.message?ge.warn(`Property [${a}] ${c}cannot be set to [${JSON.stringify(i)}]; ${r.message}, ignoring.`):ge.warn(`Property [${a}] ${c}cannot be set to [${JSON.stringify(i)}], ignoring.`),Gv})}function Ee(r,e){return r.message=e,r}const It=(r,e,t)=>r===void 0||t(r,e),nc=(r,e)=>Ee((t,i)=>Array.isArray(t)&&(r?t.length===r:!0)&&(e?t.every(s=>e(s,i)):!0),"expecting an Array"),$b=r=>Ee((e,t)=>It(e,t,nc(r)),"expecting an optional Array"),Fa=(...r)=>Ee((e,t)=>r.every(i=>i(e,t)),r.map(e=>e.message).filter(e=>e!=null).join(" AND ")),ZH=(...r)=>Ee((e,t)=>r.some(i=>i(e,t)),r.map(e=>e.message).filter(e=>e!=null).join(" OR ")),kv=r=>r!=null&&!isNaN(r),y0=r=>Ee((e,t)=>!kv(e)||!kv(t.target[r])||e<t.target[r],`expected to be less than ${r}`),Ug=r=>Ee((e,t)=>!kv(e)||!kv(t.target[r])||e>t.target[r],`expected to be greater than ${r}`),JH=Ee(r=>typeof r=="function","expecting a Function"),Lt=Ee((r,e)=>It(r,e,JH),"expecting an optional Function"),gt=Ee(r=>r===!0||r===!1,"expecting a Boolean"),Pr=Ee((r,e)=>It(r,e,gt),"expecting an optional Boolean"),zi=Ee(r=>typeof r=="string","expecting a String"),Le=Ee((r,e)=>It(r,e,zi),"expecting an optional String"),dP=Ee(r=>r instanceof Date&&!isNaN(+r),"expecting a Date object"),QH=Ee((r,e)=>It(r,e,dP),"expecting an optional Date");Ee(nc(void 0,dP),"expecting an Array of Date objects");const eB=ce(0),tB=Ee((r,e)=>It(r,e,eB),"expecting an optional number"),hP=ZH(QH,tB),S0="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",_o=Ee(r=>typeof r!="string"?!1:Re.validColorString(r),`expecting a color String. ${S0}`),Ft=Ee((r,e)=>It(r,e,_o),`expecting an optional color String. ${S0}`),Na=Ee(nc(void 0,_o),`expecting an Array of color strings. ${S0}`),iB=Ee((r,e)=>It(r,e,Na),`expecting an optional Array of color strings. ${S0}`);function ce(r,e){const t=`expecting a finite Number${(r!==void 0?", more than or equal to "+r:"")+(e!==void 0?", less than or equal to "+e:"")}`;return Ee(i=>typeof i=="number"&&Number.isFinite(i)&&(r!==void 0?i>=r:!0)&&(e!==void 0?i<=e:!0),t)}function ht(r,e){const t=`expecting an optional finite Number${(r!==void 0?", more than or equal to "+r:"")+(e!==void 0?", less than or equal to "+e:"")}`;return Ee((i,s)=>It(i,s,ce(r,e)),t)}function oc(r,e){const t=`expecting a finite Number${(r!==void 0?", more than or equal to "+r:"")+(e!==void 0?", less than or equal to "+e:"")}`;return Ee(i=>typeof i=="number"&&(isNaN(i)||Number.isFinite(i)&&(r!==void 0?i>=r:!0)&&(e!==void 0?i<=e:!0)),t)}const uP=Ee(nc(void 0,ce()),"expecting an Array of numbers"),pP=Ee((r,e)=>It(r,e,uP),"expecting an optional Array of numbers"),jg=Ee(nc(void 0,zi),"expecting an Array of strings");Ee((r,e)=>It(r,e,jg),"expecting an optional Array of strings");function fP(...r){const e=`expecting one of: ${r.join(", ")}`;return Ee(t=>typeof t=="string"&&r.indexOf(t)>=0,e)}const Kb=Ee(nc(void 0,gt),"expecting an Array of boolean values");Ee((r,e)=>It(r,e,Kb),"expecting an optional Array of boolean values");const sB=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],nB=Ee(r=>r==="normal"||r==="italic"||r==="oblique","expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Fd=Ee((r,e)=>It(r,e,nB),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),oB=Ee(r=>sB.includes(r),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Nd=Ee((r,e)=>It(r,e,oB),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),rB=Ee(nc(void 0,ce(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),ep=Ee((r,e)=>It(r,e,rB),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),aB=["butt","round","square"],Yb=Ee(r=>aB.includes(r),"expecting a line cap keyword such as 'butt', 'round' or 'square'");Ee((r,e)=>It(r,e,Yb),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const lB=["round","bevel","miter"],cB=Ee(r=>lB.includes(r),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");Ee((r,e)=>It(r,e,cB),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const dB=["top","right","bottom","left"],gP=Ee(r=>dB.includes(r),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),hB=["exact","nearest"],mP=Ee(r=>typeof r=="number"&&Number.isFinite(r)||hB.includes(r),"expecting an interaction range of 'exact', 'nearest' or a number"),uB=["never","always","hyphenate","on-space"],Xb=Ee(r=>uB.includes(r),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var Bt;(function(r){r[r.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",r[r.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",r[r.AXIS_ZINDEX=20]="AXIS_ZINDEX",r[r.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",r[r.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",r[r.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",r[r.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",r[r.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",r[r.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"})(Bt||(Bt={}));var ye;(function(r){r.X="x",r.Y="y"})(ye||(ye={}));function Dy(r,e=[1/0,-1/0]){for(const t of r)typeof t=="number"&&(t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t));return e}function pB(r){return r.map(e=>e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:typeof e=="object"?JSON.stringify(e):e).join("-")}function fB(r){return Number.isInteger(r)?r:Math.abs(r)>1e4?Math.trunc(r):Math.round(r*1e4)/1e4}function Qm(r){if(r===void 0)return[];let[e,t]=r;return e=+e,t=+t,e===0&&t===0?[0,1]:e===1/0&&t===-1/0?[]:(e===1/0&&(e=0),t===-1/0&&(t=0),Js(e)&&Js(t)?[e,t]:[])}const uh=Symbol("invalid");class Ga{constructor(e){var t;const{props:i}=e;let s=!0;for(const n of i){if(n.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");n.type==="value"&&s&&(s=!1)}this.opts=Object.assign({dataVisible:!0},e),this.keys=i.filter(n=>n.type==="key").map((n,o)=>Object.assign(Object.assign({},n),{index:o,missing:!1})),this.values=i.filter(n=>n.type==="value").map((n,o)=>Object.assign(Object.assign({},n),{index:o,missing:!1})),this.aggregates=i.filter(n=>n.type==="aggregate"),this.groupProcessors=i.filter(n=>n.type==="group-value-processor"),this.propertyProcessors=i.filter(n=>n.type==="property-value-processor"),this.reducers=i.filter(n=>n.type==="reducer"),this.processors=i.filter(n=>n.type==="processor");for(const{properties:n}of(t=this.aggregates)!==null&&t!==void 0?t:[])if(n.length!==0)for(const o of n){if(typeof o=="string"&&!this.values.some(a=>a.property===o))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${n}).`);if(typeof o!="string"&&!this.values.some(a=>a.id===o.id))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${n}).`)}}resolveProcessedDataIndexById(e){const{keys:t,values:i}=this,s=[...t,...i].find(({id:n})=>n===e);if(s&&((s==null?void 0:s.type)==="key"||(s==null?void 0:s.type)==="value"))return{type:s.type,index:s.index}}resolveProcessedDataDefById(e){const{keys:t,values:i}=this,s=[...t,...i].find(({id:n})=>n===e);if(s)return s}getDomain(e,t){const i=this.resolveProcessedDataIndexById(e);return i?t.domain[i.type==="key"?"keys":"values"][i.index]:[]}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:s,groupProcessors:n,reducers:o,processors:a,propertyProcessors:l}=this,c=performance.now();for(const u of[...this.keys,...this.values])u.missing=!1;if(t&&this.keys.length===0)return;let d=this.extractData(e);t?d=this.groupData(d):i&&(d=this.groupData(d,i(d))),n.length>0&&this.postProcessGroups(d),s.length>0&&this.aggregateData(d),l.length>0&&this.postProcessProperties(d),o.length>0&&this.reduceData(d),a.length>0&&this.postProcessData(d);for(const u of[...this.keys,...this.values])u.missing&&ge.warnOnce(`the key '${u.property}' was not found in at least one data element.`);const h=performance.now();return d.time=h-c,Ga.DEBUG()&&gB(d),d}valueIdxLookup(e){let t;if(typeof e=="string"?t=this.values.findIndex(i=>i.property===e):t=this.values.findIndex(i=>i.id===e.id),t>=0)return t;throw new Error("AG Charts - configuration error, unknown property: "+e)}extractData(e){const{keys:t,values:i,opts:{dataVisible:s}}=this,{dataDomain:n,processValue:o}=this.initDataDomainProcessor(),a=new Array(s?e.length:0);let l=0;for(const d of e){const h=s?new Array(t.length):void 0;let u=0,p;for(const v of t){if(p=o(v,d,p),p===uh)break;h&&(h[u++]=p)}if(p===uh)continue;const f=s&&i.length>0?new Array(i.length):void 0;let g=0,m;for(const v of i){if(m=o(v,d,m),m===uh)break;f&&(f[g++]=m)}m!==uh&&s&&(a[l++]={datum:d,keys:h,values:f})}a.length=l;const c=d=>{var h;const u=n.get((h=d.id)!==null&&h!==void 0?h:d.property).domain;return Array.isArray(u)&&u[0]>u[1]?[]:[...u]};return{type:"ungrouped",data:a,domain:{keys:t.map(d=>c(d)),values:i.map(d=>c(d))},indices:{keys:t.reduce((d,{property:h,index:u})=>(d[h]=u,d),{}),values:i.reduce((d,{property:h,index:u})=>(d[h]=u,d),{})},defs:{keys:t,values:i},time:0}}groupData(e,t){const i=new Map;for(const a of e.data){const{keys:l,values:c,datum:d}=a,h=t?t(a):l,u=pB(h);if(i.has(u)){const p=i.get(u);p.values.push(c),p.datum.push(d)}else i.set(u,{keys:h,values:[c],datum:[d]})}const s=new Array(i.size),n=new Array(i.size);let o=0;for(const[,{keys:a,values:l,datum:c}]of i.entries())n[o]=a,s[o++]={keys:a,values:l,datum:c};return Object.assign(Object.assign({},e),{type:"grouped",data:s,domain:Object.assign(Object.assign({},e.domain),{groups:n})})}aggregateData(e){var t,i,s,n,o,a,l;const{aggregates:c}=this;if(!c)return;const d=c.map(()=>[1/0,-1/0]),h=c.map(g=>g.properties.map(m=>this.valueIdxLookup(m))),u=c.map(g=>g.aggregateFunction),p=c.map(g=>g.groupAggregateFunction),f=c.map(g=>g.finalFunction);for(const g of e.data){let{values:m}=g;(t=g.aggValues)!==null&&t!==void 0||(g.aggValues=new Array(h.length)),e.type==="ungrouped"&&(m=[m]);let v=0;for(const C of h){let y=(s=(i=p[v])===null||i===void 0?void 0:i.call(p))!==null&&s!==void 0?s:Dy([]);for(const b of m){const w=C.map(O=>b[O]),x=u[v](w,g.keys);x&&(y=(o=(n=p[v])===null||n===void 0?void 0:n.call(p,x,y))!==null&&o!==void 0?o:Dy(x,y))}const R=((l=(a=f[v])===null||a===void 0?void 0:a.call(f,y))!==null&&l!==void 0?l:y).map(b=>fB(b));Dy(R,d[v]),g.aggValues[v++]=R}}e.domain.aggValues=d}postProcessGroups(e){const{groupProcessors:t}=this;if(t)for(const i of t){const s=i.properties.map(o=>this.valueIdxLookup(o)),n=i.adjust();if(e.type==="grouped")for(const o of e.data)for(const a of o.values)a&&n(a,s);else for(const o of e.data)o.values&&n(o.values,s)}}postProcessProperties(e){const{propertyProcessors:t}=this;if(t)for(const{adjust:i,property:s}of t)i()(e,this.valueIdxLookup(s))}reduceData(e){var t;const{reducers:i}=this,s=i.map(o=>o.reducer()),n=i.map(o=>o.initialValue);for(const o of e.data){let a=0;for(const l of s)n[a]=l(n[a],o),a++}for(let o=0;o<n.length;o++)(t=e.reduced)!==null&&t!==void 0||(e.reduced={}),e.reduced[i[o].property]=n[o]}postProcessData(e){var t;const{processors:i}=this;for(const s of i)(t=e.reduced)!==null&&t!==void 0||(e.reduced={}),e.reduced[s.property]=s.calculate(e)}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Map,s=new Map,n=(l,c,d)=>{c==="category"?d.set(l,{type:c,domain:new Set}):d.set(l,{type:c,domain:[1/0,-1/0]})},o=(l=i)=>(e.forEach(c=>{var d;return n((d=c.id)!==null&&d!==void 0?d:c.property,c.valueType,l)}),t.forEach(c=>{var d;return n((d=c.id)!==null&&d!==void 0?d:c.property,c.valueType,l)}),l);return o(),{dataDomain:i,processValue:(l,c,d)=>{var h,u,p,f,g;const m=l.property in c,v="missingValue"in l;!l.missing&&!m&&!v&&(l.missing=!0),i.has((h=l.id)!==null&&h!==void 0?h:l.property)||o(i);let C=m?c[l.property]:l.missingValue;if(m&&!((p=(u=l.validation)===null||u===void 0?void 0:u.call(l,C))!==null&&p!==void 0?p:!0))if("invalidValue"in l)C=l.invalidValue;else return uh;l.processor&&(s.has(l)||s.set(l,l.processor()),C=(f=s.get(l))===null||f===void 0?void 0:f(C,d!==uh?d:void 0));const y=i.get((g=l.id)!==null&&g!==void 0?g:l.property);return(y==null?void 0:y.type)==="category"?y.domain.add(C):(y==null?void 0:y.type)==="range"&&(y.domain[0]>C&&(y.domain[0]=C),y.domain[1]<C&&(y.domain[1]=C)),C},initDataDomain:o}}}Ga.DEBUG=()=>{var r;return(r=[!0,"data-model"].includes(Oc("agChartsDebug")))!==null&&r!==void 0?r:!1};function gB(r){var e,t;const i=(s,n)=>{n.length>0&&(console.log(s),console.table(n))};if(console.log({processedData:r}),i("Key Domains",r.domain.keys),i("Group Domains",(e=r.domain.groups)!==null&&e!==void 0?e:[]),i("Value Domains",r.domain.values),i("Aggregate Domains",(t=r.domain.aggValues)!==null&&t!==void 0?t:[]),r.type==="grouped"){const s=r.data.reduce((n,o)=>{var a,l;const c=(a=o.keys)!==null&&a!==void 0?a:[],d=(l=o.aggValues)!==null&&l!==void 0?l:[],h=o.keys.map(()=>{}),u=d==null?void 0:d.map(()=>{});return n.push(...o.values.map((p,f)=>[...f===0?c:h,...p??[],...f==0?d:u])),n},[]);i("Values",s)}else{const s=r.data.reduce((n,o)=>{var a;const l=(a=o.aggValues)!==null&&a!==void 0?a:[];return n.push([...o.keys,...o.values,...l]),n},[]);i("Values",s)}}function vP(){return(r,e)=>{const t=[`Property [${r}] is deprecated.`,e].filter(i=>i!=null).join(" ");ge.warnOnce(t)}}function mB(r,e){const t=e==null?void 0:e.default,i=vP();return Qu((s,n,o)=>(o!==t&&i(n.toString(),r),o))}function vB(r,e){const t=vP();return Qu((i,s,n)=>(n!==i[r]&&(t(s.toString(),`Use [${r}] instead.`),i[r]=e?e(n):n),Gv),(i,s)=>(t(s.toString(),`Use [${r}] instead.`),i[r]))}var ka=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const gs="ag-chart-tooltip",CB=`
.${gs} {
    transition: transform 0.1s ease;
    display: table;
    position: fixed;
    left: 0px;
    top: 0px;
    white-space: nowrap;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: black;
    background: rgb(244, 244, 244);
    border-radius: 5px;
    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);
}

.${gs}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${gs}-no-animation {
    transition: none !important;
}

.${gs}-hidden {
    visibility: hidden;
}

.${gs}-title {
    font-weight: bold;
    padding: 7px;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    color: white;
    background-color: #888888;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}

.${gs}-content {
    padding: 7px;
    line-height: 1.7em;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    overflow: hidden;
}

.${gs}-content:empty {
    padding: 0;
    height: 7px;
}

.${gs}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 6px solid #989898;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: #989898;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${gs}-arrow::after {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid black;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: rgb(244, 244, 244);
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function Gi(r,e){var t,i,s,n;if(typeof r=="string")return r;e=e??{};const{content:o=(t=e.content)!==null&&t!==void 0?t:"",title:a=(i=e.title)!==null&&i!==void 0?i:void 0,color:l=(s=e.color)!==null&&s!==void 0?s:"white",backgroundColor:c=(n=e.backgroundColor)!==null&&n!==void 0?n:"#888"}=r;return`${a?`<div class="${gs}-title"
        style="color: ${l}; background-color: ${c}">${a}</div>`:""}<div class="${gs}-content">${o}</div>`}const yB=["pointer","node"],SB=Ee(r=>yB.includes(r),"expecting a position type keyword such as 'pointer' or 'node'");class zg{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}ka([_(SB)],zg.prototype,"type",void 0);ka([_(ce())],zg.prototype,"xOffset",void 0);ka([_(ce())],zg.prototype,"yOffset",void 0);class xo{constructor(e,t,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new zg,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const s=t.createElement("div");if(this.element=this.tooltipRoot.appendChild(s),this.element.classList.add(gs),this.canvasElement=e,window.IntersectionObserver){const n=new IntersectionObserver(o=>{for(const a of o)a.target===this.canvasElement&&a.intersectionRatio===0&&this.toggle(!1)},{root:this.tooltipRoot});n.observe(this.canvasElement),this.observer=n}if(xo.tooltipDocuments.indexOf(t)<0){const n=t.createElement("style");n.innerHTML=CB,t.head.insertBefore(n,t.head.querySelector("style")),xo.tooltipDocuments.push(t)}}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:e}=this;return!e.classList.contains(gs+"-hidden")}updateClass(e,t){const{element:i,class:s,lastClass:n,enableInteraction:o}=this,a=this.isVisible(),l=(c,d)=>{const h=`${gs}-${c}`;d?i.classList.add(h):i.classList.remove(h)};l("no-animation",!a&&!!e),l("no-interaction",!o),l("hidden",!e),l("arrow",!!t),s!==n&&(n&&i.classList.remove(n),s&&i.classList.add(s),this.lastClass=s)}show(e,t,i=!1){var s,n,o,a,l,c,d;const{element:h,canvasElement:u}=this;if(t!==void 0)h.innerHTML=t;else if(!h.innerHTML)return;const p=(V,I,H)=>Math.max(Math.min(I,H),V),f=(n=(s=e.position)===null||s===void 0?void 0:s.xOffset)!==null&&n!==void 0?n:0,g=(a=(o=e.position)===null||o===void 0?void 0:o.yOffset)!==null&&a!==void 0?a:0,m=u.getBoundingClientRect(),v=m.left+e.offsetX-h.clientWidth/2+f,C=m.top+e.offsetY-h.clientHeight-8+g,y=this.getWindowBoundingBox(),R=y.x+y.width-h.clientWidth-1,b=y.y+y.height-h.clientHeight,w=p(y.x,v,R),x=p(y.y,C,b),M=!(w!==v||x!==C)&&!f&&!g,N=(c=(l=e.showArrow)!==null&&l!==void 0?l:this.showArrow)!==null&&c!==void 0?c:M;if(this.updateShowArrow(N),h.style.transform=`translate(${Math.round(w)}px, ${Math.round(x)}px)`,this.enableInteraction=(d=e.enableInteraction)!==null&&d!==void 0?d:!1,this.delay>0&&!i){this.toggle(!1),this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay);return}this.toggle(!0)}getWindowBoundingBox(){return new qe(0,0,window.innerWidth,window.innerHeight)}toggle(e){e||window.clearTimeout(this.showTimeout),this.updateClass(e,this._showArrow)}pointerLeftOntoTooltip(e){var t;if(!this.enableInteraction)return!1;const i=(t=e.sourceEvent.relatedTarget)===null||t===void 0?void 0:t.classList,n=!!["","-title","-content"].filter(o=>i==null?void 0:i.contains(`${gs}${o}`));return i!==void 0&&n}updateShowArrow(e){this._showArrow=e}}xo.tooltipDocuments=[];ka([_(gt)],xo.prototype,"enabled",void 0);ka([_(Pr)],xo.prototype,"showArrow",void 0);ka([_(Le)],xo.prototype,"class",void 0);ka([_(ce(0))],xo.prototype,"delay",void 0);ka([vB("range",r=>r?"nearest":"exact")],xo.prototype,"tracking",void 0);ka([_(mP)],xo.prototype,"range",void 0);function qb(r,e=[0,0]){for(const t of r)typeof t=="number"&&(t<0&&(e[0]+=t),t>0&&(e[1]+=t));return e}function CP(r){return{properties:r,type:"aggregate",aggregateFunction:t=>qb(t)}}function wB(r){return{type:"aggregate",properties:r,aggregateFunction:e=>qb(e),groupAggregateFunction:(e,t=[0,0])=>{var i,s;return t[0]+=(i=e==null?void 0:e[0])!==null&&i!==void 0?i:0,t[1]+=(s=e==null?void 0:e[1])!==null&&s!==void 0?s:0,t}}}function qx(){return{type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(r,e=[0,0])=>{var t,i;return e[0]+=(t=r==null?void 0:r[0])!==null&&t!==void 0?t:0,e[1]+=(i=r==null?void 0:r[1])!==null&&i!==void 0?i:0,e}}}function bB(r){return{properties:r,type:"aggregate",aggregateFunction:t=>qb(t),groupAggregateFunction:(t,i=[0,0,-1])=>{var s,n;return i[0]+=(s=t==null?void 0:t[0])!==null&&s!==void 0?s:0,i[1]+=(n=t==null?void 0:t[1])!==null&&n!==void 0?n:0,i[2]++,i},finalFunction:(t=[0,0,0])=>{const i=t[0]+t[1];return i>=0?[0,i/t[2]]:[i/t[2],0]}}}function Zx(r,e){const t={properties:r,type:"aggregate",aggregateFunction:(i,s=[])=>{const n=s[1]-s[0];return e.aggregateFunction(i).map(o=>o/n)}};return e.groupAggregateFunction&&(t.groupAggregateFunction=e.groupAggregateFunction),t}function EB(){return()=>{let r=0;return e=>typeof e!="number"||isNaN(e)?e:(r+=e,r)}}var hs=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},xB=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t},si;(function(r){r[r.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",r[r.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",r[r.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",r[r.NEAREST_NODE=3]="NEAREST_NODE"})(si||(si={}));function Zb(r,e,t={}){return Object.assign({property:r,type:"key",valueType:e?"range":"category",validation:s=>Cu(s,e)!=null},t)}function Fn(r,e,t={}){return Object.assign({property:r,type:"value",valueType:e?"range":"category",validation:s=>Cu(s,e)!=null},t)}function RB(r,e={}){const{min:t=-1/0,max:i=1/0}=e,s=xB(e,["min","max"]);return Object.assign({type:"value",property:r,valueType:"range",validation:n=>Cu(n,!0)!=null,processor:()=>n=>typeof n!="number"||isNaN(n)?n:Math.min(Math.max(n,t),i)},s)}function TB(r,e,t={}){return Object.assign(Object.assign({},Fn(r,e,t)),{processor:EB()})}class $g{constructor(e,t,i){this.type="nodeClick",this.event=e,this.datum=t.datum,this.seriesId=i.id}}class DB extends $g{}class OB extends $g{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Kg{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}hs([_(Ft)],Kg.prototype,"fill",void 0);hs([_(ht(0,1))],Kg.prototype,"fillOpacity",void 0);hs([_(Ft)],Kg.prototype,"stroke",void 0);hs([_(ht(0))],Kg.prototype,"strokeWidth",void 0);class w0{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}hs([_(ht(0))],w0.prototype,"strokeWidth",void 0);hs([_(ht(0,1))],w0.prototype,"dimOpacity",void 0);hs([_(Pr)],w0.prototype,"enabled",void 0);class yP{constructor(){this.color="black"}}hs([_(Ft)],yP.prototype,"color",void 0);class Jb{constructor(){this.item=new Kg,this.series=new w0,this.text=new yP}}class Va{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new SP,this.position=new zg}}hs([_(gt)],Va.prototype,"enabled",void 0);hs([_(Pr)],Va.prototype,"showArrow",void 0);class SP{constructor(){this.enabled=!1}}hs([_(gt)],SP.prototype,"enabled",void 0);class Mr extends lP{constructor(e){super(),this.id=La(this),this.rootGroup=new ve({name:"seriesRoot"}),this.directions=[ye.X,ye.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this._declarationOrder=-1,this.highlightStyle=new Jb,this.ctx=e.moduleCtx;const{useSeriesGroupLayer:t=!0,useLabelLayer:i=!1,pickModes:s=[si.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={}}=e,{rootGroup:a}=this;this.directionKeys=n,this.directionNames=o,this.contentGroup=a.appendChild(new ve({name:`${this.id}-content`,layer:t,zIndex:Bt.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,0]})),this.highlightGroup=a.appendChild(new ve({name:`${this.id}-highlight`,layer:!0,zIndex:Bt.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,15e3]})),this.highlightNode=this.highlightGroup.appendChild(new ve({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new ve({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=s,i&&(this.labelGroup=a.appendChild(new ve({name:`${this.id}-series-labels`,layer:!0,zIndex:Bt.SERIES_LABEL_ZINDEX})))}get type(){var e;return(e=this.constructor.type)!==null&&e!==void 0?e:""}set data(e){this._data=e,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:e}=this;return e&&(!Array.isArray(e)||e.length>0)}set visible(e){this._visible=e,this.visibleChanged()}get visible(){return this._visible}getBandScalePadding(){return{inner:1,outer:0}}addChartEventListeners(){}destroy(){}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),s=t==null?void 0:t[i],n=[],o=(...l)=>{for(const c of l)a(c)},a=l=>{Array.isArray(l)?o(...l):typeof l=="object"?o(Object.values(l)):n.push(l)};return s&&s.forEach(l=>{const c=this[l];a(c)}),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){}getOpacity(e){const{highlightStyle:{series:{dimOpacity:t=1,enabled:i=!0}}}=this,s=1;if(i===!1||t===s)return s;switch(this.isItemIdHighlighted(e)){case"no-highlight":case"highlighted":return s;case"peer-highlighted":case"other-highlighted":return t}}getStrokeWidth(e,t){const{highlightStyle:{series:{strokeWidth:i,enabled:s=!0}}}=this;if(s===!1||i===void 0)return e;switch(this.isItemIdHighlighted(t)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return e}}isItemIdHighlighted(e){var t;const i=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight(),{series:s,itemId:n}=i??{};return s!=null?s!==this?"other-highlighted":n===void 0?"highlighted":e&&i!==e&&n!==e.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(e,t){const{pickModes:i,visible:s,rootGroup:n}=this;if(!(!s||!n.visible))for(const o of i){if(t&&!t.includes(o))continue;let a;switch(o){case si.EXACT_SHAPE_MATCH:a=this.pickNodeExactShape(e);break;case si.NEAREST_BY_MAIN_AXIS_FIRST:case si.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:a=this.pickNodeMainAxisFirst(e,o===si.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case si.NEAREST_NODE:a=this.pickNodeClosestDatum(e);break}if(a)return{pickMode:o,match:a.datum,distance:a.distance}}}pickNodeExactShape(e){const t=this.contentGroup.pickNode(e.x,e.y);if(t)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,t){const i=this.getNodeClickEvent(e,t);this.fireEvent(i)}fireNodeDoubleClickEvent(e,t){const i=this.getNodeDoubleClickEvent(e,t);this.fireEvent(i)}getNodeClickEvent(e,t){return new DB(e,t,this)}getNodeDoubleClickEvent(e,t){return new OB(e,t,this)}toggleSeriesItem(e,t){this.visible=t,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(e,t){var i;const s=Qm(e);if(s.length===0)return s;let[n,o]=s;if(n===o){const a=(i=t==null?void 0:t.calculatePadding(n,o))!==null&&i!==void 0?i:1;n-=a,o+=a}return[n,o]}}Mr.highlightedZIndex=1e12;hs([_(zi)],Mr.prototype,"id",void 0);hs([_(gt)],Mr.prototype,"_visible",void 0);hs([_(gt)],Mr.prototype,"showInLegend",void 0);hs([_(zi)],Mr.prototype,"cursor",void 0);hs([_(mP)],Mr.prototype,"nodeClickRange",void 0);var b0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class El{constructor(e=0,t=e,i=e,s=t){this.top=e,this.right=t,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}}b0([_(ce(0))],El.prototype,"top",void 0);b0([_(ce(0))],El.prototype,"right",void 0);b0([_(ce(0))],El.prototype,"bottom",void 0);b0([_(ce(0))],El.prototype,"left",void 0);class Vv{static init(){const e=window.ResizeObserver;if(e)this.resizeObserver=new e(t=>{for(const i of t){const{width:s,height:n}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,s,n)}});else{const t=()=>{this.elements.forEach((i,s)=>{this.checkClientSize(s,i)})};window.setInterval(t,100)}this.ready=!0}static checkSize(e,t,i,s){e&&(!e.size||i!==e.size.width||s!==e.size.height)&&(e.size={width:i,height:s},e.cb(e.size,t))}static observe(e,t){this.ready||this.init(),this.unobserve(e),this.resizeObserver&&this.resizeObserver.observe(e),this.elements.set(e,{cb:t}),this.checkClientSize(e,{cb:t})}static unobserve(e){this.resizeObserver&&this.resizeObserver.unobserve(e),this.elements.delete(e)}static checkClientSize(e,t){const i=e.clientWidth?e.clientWidth:0,s=e.clientHeight?e.clientHeight:0;this.checkSize(t,e,i,s)}}Vv.elements=new Map;Vv.ready=!1;function AB(r,e,t,i,s){let n=r.x;r.x<e?n=e:r.x>e+i&&(n=e+i);let o=r.y;r.y<t?o=t:r.y>t+s&&(o=t+s);const a=r.x-n,l=r.y-o;return Math.sqrt(a*a+l*l)<=r.size*.5}function wP(r,e,t,i,s){const n=r.x+r.width>e&&r.x<e+i,o=r.y+r.height>t&&r.y<t+s;return n&&o}function PB(r,e,t,i,s){return e+i<r.x+r.width&&e>r.x&&t>r.y&&t+s<r.y+r.height}function MB(r){return r!=null&&typeof r.point=="object"&&typeof r.label=="object"}function _B(r,e,t=5){const i=[];r=r.map(s=>s.slice().sort((n,o)=>o.point.size-n.point.size));for(let s=0;s<r.length;s++){const n=i[s]=[],o=r[s];if(o!=null&&o.length&&o[0].label)for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c.label,h=c.point.size*.5,u=c.point.x-d.width*.5,p=c.point.y-h-d.height-t,{width:f,height:g}=d;!(!e||PB(e,u,p,f,g))||r.some(y=>y.some(R=>AB(R.point,u,p,f,g)))||i.some(y=>y.some(R=>wP(R,u,p,f,g)))||n.push({index:a,text:d.text,x:u,y:p,width:f,height:g,datum:c})}}return i}function IB(r,e){const t=[];for(let i=0;i<r.length;i++){const s=r[i],{point:{x:n,y:o},label:{text:a}}=s;let{label:{width:l,height:c}}=s;if(l+=e??0,c+=e??0,t.some(h=>wP(h,n,o,l,c)))return!0;t.push({index:i,text:a,x:n,y:o,width:l,height:c,datum:s})}return!1}var LB=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function FB(r){return bP(e=>requestAnimationFrame(e),r)}function NB(r){return bP(e=>setTimeout(e,0),r)}function bP(r,e){let t=0,i=!1,s,n;const o=()=>i,a=()=>{i=!1,n==null||n(),n=void 0,s=void 0,t>0&&r(l)},l=()=>{const c=t;t=0,i=!0;const d=e({count:c});if(!d){a();return}d.then(a).catch(a)};return{schedule(){t===0&&!o()&&r(l),t++},await(){return LB(this,void 0,void 0,function*(){if(o())for(s||(s=new Promise(c=>{n=c}));o();)yield s})}}}function GB(r,e){const t=-e/r;return r!==0&&t>=0&&t<=1?[t]:[]}function kB(r,e,t){if(r===0)return GB(e,t);const i=e*e-4*r*t,s=[];if(i===0){const n=-e/(2*r);n>=0&&n<=1&&s.push(n)}else if(i>0){const n=Math.sqrt(i),o=(-e-n)/(2*r),a=(-e+n)/(2*r);o>=0&&o<=1&&s.push(o),a>=0&&a<=1&&s.push(a)}return s}function VB(r,e,t,i){if(r===0)return kB(e,t,i);const s=e/r,n=t/r,o=i/r,a=(3*n-s*s)/9,l=(9*s*n-27*o-2*s*s*s)/54,c=a*a*a+l*l,d=1/3,h=[];if(c>=0){const u=Math.sqrt(c),p=Math.sign(l+u)*Math.pow(Math.abs(l+u),d),f=Math.sign(l-u)*Math.pow(Math.abs(l-u),d),g=Math.abs(Math.sqrt(3)*(p-f)/2),m=-d*s+(p+f);if(m>=0&&m<=1&&h.push(m),g===0){const v=-d*s-(p+f)/2;v>=0&&v<=1&&h.push(v)}}else{const u=Math.acos(l/Math.sqrt(-a*a*a)),p=d*s,f=2*Math.sqrt(-a),g=f*Math.cos(d*u)-p,m=f*Math.cos(d*(u+2*Math.PI))-p,v=f*Math.cos(d*(u+4*Math.PI))-p;g>=0&&g<=1&&h.push(g),m>=0&&m<=1&&h.push(m),v>=0&&v<=1&&h.push(v)}return h}function sf(r,e,t,i,s,n,o,a){const l=(t-r)*(a-n)-(i-e)*(o-s);if(l===0)return null;const c=((o-s)*(e-n)-(r-s)*(a-n))/l,d=((t-r)*(e-n)-(i-e)*(r-s))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:r+c*(t-r),y:e+c*(i-e)}:null}function HB(r,e,t,i,s,n,o,a,l,c,d,h){const u=[],p=c-h,f=d-l,g=l*(h-c)-c*(d-l),m=Jx(r,t,s,o),v=Jx(e,i,n,a),C=p*m[0]+f*v[0],y=p*m[1]+f*v[1],R=p*m[2]+f*v[2],b=p*m[3]+f*v[3]+g,w=VB(C,y,R,b);for(const x of w){const O=x*x,M=x*O,N=m[0]*M+m[1]*O+m[2]*x+m[3],V=v[0]*M+v[1]*O+v[2]*x+v[3];let I;l!==d?I=(N-l)/(d-l):I=(V-c)/(h-c),I>=0&&I<=1&&u.push({x:N,y:V})}return u}function Jx(r,e,t,i){return[-r+3*e-3*t+i,3*r-6*e+3*t,-3*r+3*e,r]}function EP(r,e,t,i,s,n,o,a,l,c){const d=(c-a)/(l-o),h=a-d*o,u=Math.pow(d,2)+1,p=2*(d*(h-e)-r),f=Math.pow(r,2)+Math.pow(h-e,2)-Math.pow(t,2),g=Math.pow(p,2)-4*u*f;if(g<0)return[];const m=(-p+Math.sqrt(g))/2/u,v=(-p-Math.sqrt(g))/2/u,C=[];return[m,v].forEach(y=>{if(!(y>=Math.min(o,l)&&y<=Math.max(o,l)))return;const b=d*y,w=as(n?s:i);let x=as(n?i:s),O=as(Math.atan2(b,y));x<=w&&(x+=2*Math.PI),O<w&&(O+=2*Math.PI),O>=w&&O<=x&&C.push({x:y,y:b})}),C}var Di;(function(r){r[r.Move=0]="Move",r[r.Line=1]="Line",r[r.Arc=2]="Arc",r[r.Curve=3]="Curve",r[r.ClosePath=4]="ClosePath"})(Di||(Di={}));class FS{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let e=0;e<this.commands.length;e++)if(this.commands[e]!==this.previousCommands[e])return!0;for(let e=0;e<this.params.length;e++)if(this.params[e]!==this.previousParams[e])return!0;return!1}draw(e){const t=this.commands,i=this.params;let s=0;e.beginPath();for(const n of t)switch(n){case Di.Move:e.moveTo(i[s++],i[s++]);break;case Di.Line:e.lineTo(i[s++],i[s++]);break;case Di.Curve:e.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case Di.Arc:e.arc(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]===1);break;case Di.ClosePath:e.closePath();break}t.length===0&&e.closePath()}moveTo(e,t){this.xy?(this.xy[0]=e,this.xy[1]=t):this.xy=[e,t],this.commands.push(Di.Move),this.params.push(e,t)}lineTo(e,t){this.xy?(this.commands.push(Di.Line),this.params.push(e,t),this.xy[0]=e,this.xy[1]=t):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}arc(e,t,i,s,n,o=!1){const a=e+i*Math.cos(n),l=t+i*Math.sin(n);this.xy?(this.xy[0]=a,this.xy[1]=l):this.xy=[a,l],this.commands.push(Di.Arc),this.params.push(e,t,i,s,n,o?1:0)}cubicCurveTo(e,t,i,s,n,o){this.xy||this.moveTo(e,t),this.commands.push(Di.Curve),this.params.push(e,t,i,s,n,o),this.xy[0]=n,this.xy[1]=o}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Di.ClosePath),this._closedPath=!0)}clear({trackChanges:e}={trackChanges:!1}){e?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,o=-1e4,a=-1e4;let l=NaN,c=NaN,d=0,h=0,u=0;for(let p=0,f=0;p<n;p++)switch(i[p]){case Di.Move:isNaN(l)||sf(l,c,d,h,o,a,e,t)&&u++,d=s[f++],l=d,h=s[f++],c=h;break;case Di.Line:sf(d,h,s[f++],s[f++],o,a,e,t)&&u++,d=s[f-2],h=s[f-1];break;case Di.Curve:u+=HB(d,h,s[f++],s[f++],s[f++],s[f++],s[f++],s[f++],o,a,e,t).length,d=s[f-2],h=s[f-1];break;case Di.Arc:u+=EP(s[f++],s[f++],s[f++],s[f++],s[f++],!!s[f++],o,a,e,t).length,d=s[f-2],h=s[f-1];break;case Di.ClosePath:isNaN(l)||sf(l,c,d,h,o,a,e,t)&&u++;break}return u%2===1}}var xP=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function Tt(r){const{redraw:e=le.MAJOR,changeCb:t,convertor:i}=r??{};return fe({redraw:e,type:"path",convertor:i,changeCb:t})}class Ei extends rt{constructor(){super(...arguments),this.path=new FS,this._dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,le.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((t=(e=this.fillShadow)===null||e===void 0?void 0:e.isDirty())!==null&&t!==void 0?t:!1))}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(e){var t,i;const{ctx:s,forceRender:n,stats:o}=e;if(this.dirty===le.NONE&&!n){o&&(o.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(s),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(s.save(),this.clipMode==="normal"&&(this.clipPath.draw(s),s.clip()),this.path.draw(s),this.fillStroke(s),this.clipMode==="punch-out"){this.clipPath.draw(s),s.clip();const{x:a=-1e4,y:l=-1e4,width:c=2e4,height:d=2e4}=(t=this.computeBBox())!==null&&t!==void 0?t:{};s.clearRect(a,l,c,d)}s.restore()}else this.path.draw(s),this.fillStroke(s);(i=this.fillShadow)===null||i===void 0||i.markClean(),super.render(e)}}Ei.className="Path";xP([Tt()],Ei.prototype,"clipPath",void 0);xP([Tt()],Ei.prototype,"clipMode",void 0);var Qb=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Io extends Ei{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:e,y:t,size:i}=this,s=i/2;return new qe(e-s,t-s,i,i)}applyPath(e,t){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:o,y:a,t:l}of t)s+=o*e,n+=a*e,l==="move"?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}}Qb([Tt()],Io.prototype,"x",void 0);Qb([Tt()],Io.prototype,"y",void 0);Qb([Tt({convertor:Math.abs})],Io.prototype,"size",void 0);class yu extends Io{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=s/2;i.clear(),i.arc(e,t,n,0,Math.PI*2),i.closePath()}}yu.className="Circle";var _r=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const BB=["circle","cross","diamond","heart","plus","square","triangle"],WB=Ee(r=>BB.includes(r)||Object.getPrototypeOf(r)===Io,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class Lo extends jb{constructor(){super(...arguments),this.enabled=!0,this.shape=yu,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}_r([_(gt),fe({redraw:le.MAJOR})],Lo.prototype,"enabled",void 0);_r([_(WB),fe({redraw:le.MAJOR})],Lo.prototype,"shape",void 0);_r([_(ce(0)),fe({redraw:le.MAJOR})],Lo.prototype,"size",void 0);_r([_(ce(0)),fe({redraw:le.MAJOR})],Lo.prototype,"maxSize",void 0);_r([_(pP),fe({redraw:le.MAJOR})],Lo.prototype,"domain",void 0);_r([_(Ft),fe({redraw:le.MAJOR})],Lo.prototype,"fill",void 0);_r([_(Ft),fe({redraw:le.MAJOR})],Lo.prototype,"stroke",void 0);_r([_(ht(0)),fe({redraw:le.MAJOR})],Lo.prototype,"strokeWidth",void 0);_r([_(ht(0,1)),fe({redraw:le.MAJOR})],Lo.prototype,"fillOpacity",void 0);_r([_(ht(0,1)),fe({redraw:le.MAJOR})],Lo.prototype,"strokeOpacity",void 0);class ut{constructor(e,t){this._nodes=[],this._data=[],this._parent=e,this._factory=Object.prototype.isPrototypeOf.call(ji,t)?()=>new t:t}static select(e,t){return new ut(e,t)}each(e){return this._nodes.forEach((t,i)=>e(t,t.datum,i)),this}update(e,t){const i=this._data,s=this._parent,n=this._factory;e.length>i.length?e.slice(i.length).forEach(o=>{const a=n(o);a.datum=o,t==null||t(a),s.appendChild(a),this._nodes.push(a)}):e.length<i.length&&this._nodes.splice(e.length).forEach(o=>{s.removeChild(o)}),this._data=e.slice(0);for(let o=0;o<e.length;o++)this._nodes[o].datum=this._data[o];return this}clear(){return this.update([]),this}static selectAll(e,t){const i=[],s=n=>{t(n)&&i.push(n),n.children.forEach(s)};return s(e),i}static selectByClass(e,t){return ut.selectAll(e,i=>i instanceof t)}static selectByTag(e,t){return ut.selectAll(e,i=>i.tag===t)}select(e){return ut.selectAll(this._parent,e)}selectByClass(e){return this.select(t=>t instanceof e)}selectByTag(e){return this.select(t=>t.tag===e)}nodes(){return this._nodes}}function Oy(r,e,t){return Math.max(e,Math.min(t,r))}class Ro{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:e}=this;return!e||this.cacheProps.some(i=>this[i]!==e[i])?(this.cache={},this.cacheProps.forEach(i=>this.cache[i]=this[i]),!0):!1}refresh(){this.didChange()&&this.update()}set domain(e){const t=[];this.index=new Map;const i=this.index;e.forEach(s=>{i.get(s)===void 0&&i.set(s,t.push(s)-1)}),this._domain=t}get domain(){return this._domain}ticks(){this.refresh();const{interval:e=1}=this,t=Math.abs(Math.round(e));return this._domain.filter((i,s)=>s%t===0)}convert(e){this.refresh();const t=this.index.get(e);if(t===void 0)return NaN;const i=this.ordinalRange[t];return i===void 0?NaN:i}invert(e){this.refresh();const t=this.ordinalRange.findIndex(i=>i===e);return this.domain[t]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=Oy(e,0,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=Oy(e,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=Oy(e,0,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(e===0)return;const t=this.round,i=this._paddingInner,s=this._paddingOuter,[n,o]=this.range,a=o-n,l=a/Math.max(1,e+2*s-i),c=t?Math.floor(l):l,d=c*(e-i),h=n+(a-d)/2,u=t?Math.round(h):h,p=c*(1-i),f=t?Math.round(p):p,g=l*(1-i),m=[];for(let v=0;v<e;v++)m.push(u+c*v);this._bandwidth=f,this._rawBandwidth=g,this.ordinalRange=m}}var E0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class xt extends rt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new qe(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;const{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===le.NONE&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let o=this.x1,a=this.y1,l=this.x2,c=this.y2;if(o===l){const d=Math.round(o)+Math.floor(this.strokeWidth)%2/2;o=d,l=d}else if(a===c){const d=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=d,c=d}i.beginPath(),i.moveTo(o,a),i.lineTo(l,c),this.fillStroke(i),(t=this.fillShadow)===null||t===void 0||t.markClean(),super.render(e)}}xt.className="Line";xt.defaultStyles=Object.assign({},rt.defaultStyles,{fill:void 0,strokeWidth:1});E0([fe({redraw:le.MAJOR})],xt.prototype,"x1",void 0);E0([fe({redraw:le.MAJOR})],xt.prototype,"y1",void 0);E0([fe({redraw:le.MAJOR})],xt.prototype,"x2",void 0);E0([fe({redraw:le.MAJOR})],xt.prototype,"y2",void 0);function x0(r,e,t=1e-10){return Math.abs(r-e)<t}function eE(r,e=2){const t=Math.floor(Math.log(Math.abs(r))/Math.LN10);return t>=0||!isFinite(t)?r.toFixed(e):r.toFixed(Math.abs(t)-1+e)}function UB(r,e){return r>=0?Math.floor(r%e):Math.floor(r%e+e)}var Gd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Nh;(function(r){r[r.Open=0]="Open",r[r.Chord=1]="Chord",r[r.Round=2]="Round"})(Nh||(Nh={}));class an extends Ei{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=Nh.Open,this.restoreOwnStyles()}get fullPie(){return x0(as(this.startAngle),as(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===Nh.Chord?e.closePath():this.type===Nh.Round&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new qe(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.transformPoint(e,t),s=this.computeBBox();return this.type!==Nh.Open&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}an.className="Arc";an.defaultStyles=Object.assign({},rt.defaultStyles,{lineWidth:1,fillStyle:null});Gd([Tt()],an.prototype,"centerX",void 0);Gd([Tt()],an.prototype,"centerY",void 0);Gd([Tt()],an.prototype,"radius",void 0);Gd([Tt()],an.prototype,"startAngle",void 0);Gd([Tt()],an.prototype,"endAngle",void 0);Gd([Tt()],an.prototype,"counterClockwise",void 0);Gd([Tt()],an.prototype,"type",void 0);function ci(r,e){return Qu((t,i,s)=>(t[r][e??i]=s,s))}function rc(r){const{newValue:e,oldValue:t,changeValue:i}=r;return Qu((s,n,o,a)=>(o!==a&&(a!==void 0&&(t==null||t.call(s,a)),o!==void 0&&(e==null||e.call(s,o)),i==null||i.call(s,o,a)),o))}var Jn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ut{constructor(){this.node=new be,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=Ut.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const e=this.node;e.textAlign="center",e.pointerEvents=rs.None}computeTextWrap(e,t){var i,s;const{text:n,wrapping:o}=this,a=Math.min((i=this.maxWidth)!==null&&i!==void 0?i:1/0,e),l=(s=this.maxHeight)!==null&&s!==void 0?s:t;if(!isFinite(a)&&!isFinite(l)){this.node.text=n;return}const c=be.wrap(n??"",a,l,this,o);this.node.text=c}}Ut.PADDING=10;Jn([_(gt)],Ut.prototype,"enabled",void 0);Jn([_(Le),ci("node")],Ut.prototype,"text",void 0);Jn([_(Fd),ci("node")],Ut.prototype,"fontStyle",void 0);Jn([_(Nd),ci("node")],Ut.prototype,"fontWeight",void 0);Jn([_(ce(0)),ci("node")],Ut.prototype,"fontSize",void 0);Jn([_(zi),ci("node")],Ut.prototype,"fontFamily",void 0);Jn([_(Ft),ci("node","fill")],Ut.prototype,"color",void 0);Jn([_(ht(0))],Ut.prototype,"spacing",void 0);Jn([_(ht(0))],Ut.prototype,"lineHeight",void 0);Jn([_(ht(0))],Ut.prototype,"maxWidth",void 0);Jn([_(ht(0))],Ut.prototype,"maxHeight",void 0);Jn([_(Xb)],Ut.prototype,"wrapping",void 0);function tE(r,e){return r.length===e.length&&r.every((t,i)=>{const s=e[i];return Array.isArray(t)&&Array.isArray(s)?tE(t,s):t===s})}function jB(r,e){return r.length===e.length&&r.every((t,i)=>Number(t)===Number(e[i]))}class ct{constructor(e,t){this.domain=e,this.range=t,this.nice=!1,this.tickCount=ct.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(e){return e}transformInvert(e){return e}fromDomain(e){return typeof e=="number"?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(e,t){var i;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=(i=t==null?void 0:t.strict)!==null&&i!==void 0?i:this.strictClampByDefault,n=this.getDomain().map(h=>this.transform(h)),[o,a]=n,{range:l}=this,[c,d]=l;return e=this.transform(e),e<o?s?NaN:c:e>a?s?NaN:d:o===a?(c+d)/2:e===o?c:e===a?d:c+(this.fromDomain(e)-this.fromDomain(o))/(this.fromDomain(a)-this.fromDomain(o))*(d-c)}invert(e){this.refresh();const t=this.getDomain().map(u=>this.transform(u)),[i,s]=t,{range:n}=this,[o,a]=n,l=o>a,c=l?a:o,d=l?o:a;let h;return e<c?l?s:i:e>d?l?i:s:(o===a?h=this.toDomain((this.fromDomain(i)+this.fromDomain(s))/2):h=this.toDomain(this.fromDomain(i)+(e-o)/(a-o)*(this.fromDomain(s)-this.fromDomain(i))),this.transformInvert(h))}didChange(){const{cache:e}=this;return!e||this.cacheProps.some(i=>this[i]!==e[i])?(this.cache={},this.cacheProps.forEach(i=>this.cache[i]=this[i]),!0):!1}refresh(){this.didChange()&&this.update()}isDenseInterval({start:e,stop:t,interval:i,count:s}){const{range:n}=this,o=t-e,a=Math.min(n[0],n[1]),c=Math.max(n[0],n[1])-a;return s??(s=o/(typeof i=="number"?i:1)),s>=c?(ge.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0):!1}}ct.defaultTickCount=5;ct.defaultMaxTickCount=6;function R0(r,e,t,i,s){if(t<2)return Hv(r,e,e-r);const n=Bf(r,e,t,i,s);return isNaN(n)?new iE(0):(r=Math.ceil(r/n)*n,e=Math.floor(e/n)*n,Hv(r,e,n))}const RP=[1,2,5,10];function Bf(r,e,t,i=0,s=1/0){const n=(e-r)/t,o=Math.floor(Math.log10(n)),a=Math.pow(10,o),l=RP.map(c=>{const d=c*a,h=Math.ceil((e-r)/d),u=h>=i&&h<=s,p=Math.abs(h-t);return{multiplier:c,isWithinBounds:u,diffCount:p}}).sort((c,d)=>c.isWithinBounds!==d.isWithinBounds?c.isWithinBounds?-1:1:c.diffCount-d.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}function zB(r,e){const t=Math.floor(Math.log10(e-r)),i=Math.pow(10,t);return RP.map(s=>{const n=s*i,o=Math.floor(r/n)*n,a=Math.ceil(e/n)*n;return{error:1-(e-r)/(a-o),domain:[o,a]}}).sort((s,n)=>s.error-n.error)[0].domain}class iE extends Array{constructor(e,t){if(super(),t)for(let i=0,s=t.length;i<s;i++)this[i]=t[i];this.fractionDigits=e}}function Hv(r,e,t){const s=(l=>{var c,d;const h=l.split("e");return Math.max(((d=(c=h[0].split(".")[1])===null||c===void 0?void 0:c.length)!==null&&d!==void 0?d:0)-Number(h[1]),0)})((t%1).toExponential()),n=Math.pow(10,s),o=Math.ceil((e-r)/t),a=new iE(s);for(let l=0;l<=o;l++){const c=r+t*l;a.push(Math.round(c*n)/n)}return a}const Im={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function sE(r,e=new Date(r.getFullYear(),0,1)){const t=r.getTimezoneOffset()-e.getTimezoneOffset(),i=r.getTime()-e.getTime()+t*6e4,s=36e5*24;return Math.floor(i/s)}function Qx(r,e){const i=new Date(r.getFullYear(),0,1).getDay(),s=(e-i+7)%7,n=new Date(r.getFullYear(),0,s+1);return n<=r?Math.floor(sE(r,n)/7)+1:0}const $B=0,TP=1,eR=4;function DP(r,e=r.getFullYear()){const i=new Date(e,0,1).getDay(),s=(eR-i+7)%7,n=new Date(e,0,s-(eR-TP)+1);return n<=r?Math.floor(sE(r,n)/7)+1:DP(r,e-1)}function KB(r){const e=r.getTimezoneOffset(),t=Math.abs(e);return`${e>0?"-":"+"}${Oi(Math.floor(t/60),2,"0")}${Oi(Math.floor(t%60),2,"0")}`}const YB={a:r=>Im.shortDays[r.getDay()],A:r=>Im.days[r.getDay()],b:r=>Im.shortMonths[r.getMonth()],B:r=>Im.months[r.getMonth()],c:"%x, %X",d:(r,e)=>Oi(r.getDate(),2,e??"0"),e:"%_d",f:(r,e)=>Oi(r.getMilliseconds()*1e3,6,e??"0"),H:(r,e)=>Oi(r.getHours(),2,e??"0"),I:(r,e)=>{const t=r.getHours()%12;return t===0?"12":Oi(t,2,e??"0")},j:(r,e)=>Oi(sE(r)+1,3,e??"0"),m:(r,e)=>Oi(r.getMonth()+1,2,e??"0"),M:(r,e)=>Oi(r.getMinutes(),2,e??"0"),L:(r,e)=>Oi(r.getMilliseconds(),3,e??"0"),p:r=>r.getHours()<12?"AM":"PM",Q:r=>String(r.getTime()),s:r=>String(Math.floor(r.getTime()/1e3)),S:(r,e)=>Oi(r.getSeconds(),2,e??"0"),u:r=>{let e=r.getDay();return e<1&&(e+=7),String(e%7)},U:(r,e)=>Oi(Qx(r,$B),2,e??"0"),V:(r,e)=>Oi(DP(r),2,e??"0"),w:(r,e)=>Oi(r.getDay(),2,e??"0"),W:(r,e)=>Oi(Qx(r,TP),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(r,e)=>Oi(r.getFullYear()%100,2,e??"0"),Y:(r,e)=>Oi(r.getFullYear(),4,e??"0"),Z:r=>KB(r),"%":()=>"%"},XB={_:" ",0:"0","-":""};function Oi(r,e,t){const i=String(Math.floor(r));return i.length>=e?i:`${t.repeat(e-i.length)}${i}`}function Bv(r){const e=[];for(;r.length>0;){let t=r.indexOf("%");if(t!==0){const a=t>0?r.substring(0,t):r;e.push(a)}if(t<0)break;const i=r[t+1],s=XB[i];s!=null&&t++;const n=r[t+1],o=YB[n];if(typeof o=="function")e.push([o,s]);else if(typeof o=="string"){const a=Bv(o);e.push([a,s])}else e.push(`${s??""}${n}`);r=r.substring(t+2)}return t=>{const i=typeof t=="number"?new Date(t):t;return e.map(s=>typeof s=="string"?s:s[0](i,s[1])).join("")}}var ot;(function(r){r[r.MILLISECOND=0]="MILLISECOND",r[r.SECOND=1]="SECOND",r[r.MINUTE=2]="MINUTE",r[r.HOUR=3]="HOUR",r[r.WEEK_DAY=4]="WEEK_DAY",r[r.SHORT_MONTH=5]="SHORT_MONTH",r[r.MONTH=6]="MONTH",r[r.SHORT_YEAR=7]="SHORT_YEAR",r[r.YEAR=8]="YEAR"})(ot||(ot={}));const Sc={[ot.MILLISECOND]:".%L",[ot.SECOND]:":%S",[ot.MINUTE]:"%I:%M",[ot.HOUR]:"%I %p",[ot.WEEK_DAY]:"%a",[ot.SHORT_MONTH]:"%b %d",[ot.MONTH]:"%B",[ot.SHORT_YEAR]:"%y",[ot.YEAR]:"%Y"};function so(r){return r instanceof Date?r.getTime():r}class nE extends ct{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=IH,this.month=PH,this.week=DH,this.day=TH,this.hour=EH,this.minute=SH,this.second=vH,this.millisecond=fH,this.tickIntervals=[[this.second,1,Dc],[this.second,5,5*Dc],[this.second,15,15*Dc],[this.second,30,30*Dc],[this.minute,1,uo],[this.minute,5,5*uo],[this.minute,15,15*uo],[this.minute,30,30*uo],[this.hour,1,tl],[this.hour,3,3*tl],[this.hour,6,6*tl],[this.hour,12,12*tl],[this.day,1,fl],[this.day,2,2*fl],[this.week,1,zp],[this.week,2,2*zp],[this.week,3,3*zp],[this.month,1,Ip],[this.month,2,2*Ip],[this.month,3,3*Ip],[this.month,4,4*Ip],[this.month,6,6*Ip],[this.year,1,_m]]}toDomain(e){return new Date(e)}calculateDefaultTickFormat(e=[]){let t=ot.YEAR;const i=c=>{c<t&&(t=c)};for(const c of e){const d=this.getLowestGranularityFormat(c);i(d)}const s=so(e[0]),n=so(e[e.length-1]),o=new Date(s).getFullYear(),l=new Date(n).getFullYear()-o>0;return this.buildFormatString(t,l)}buildFormatString(e,t){let i=[Sc[e]],s=0;const n=this.getDomain(),o=Math.min(...n.map(so)),l=Math.max(...n.map(so))-o;switch(e){case ot.SECOND:l/uo>1&&i.push(Sc[ot.MINUTE]);case ot.MINUTE:l/tl>1&&i.push(Sc[ot.HOUR]);case ot.HOUR:s=i.length,l/fl>1&&i.push(Sc[ot.WEEK_DAY]);case ot.WEEK_DAY:if(l/zp>1||t){const c=i.indexOf(Sc[ot.WEEK_DAY]);c>-1&&i.splice(c,1,Sc[ot.SHORT_MONTH])}case ot.SHORT_MONTH:case ot.MONTH:(l/_m>1||t)&&i.push(Sc[ot.YEAR])}return s<i.length&&(i=[...i.slice(0,s),i.slice(s).join(" ")]),s>0&&(i=[...i.slice(0,s).reverse(),...i.slice(s)],s<i.length&&i.splice(s,0," ")),i.join("")}getLowestGranularityFormat(e){return this.second.floor(e)<e?ot.MILLISECOND:this.minute.floor(e)<e?ot.SECOND:this.hour.floor(e)<e?ot.MINUTE:this.day.floor(e)<e?ot.HOUR:this.month.floor(e)<e?this.week.floor(e)<e?ot.WEEK_DAY:ot.SHORT_MONTH:this.year.floor(e)<e?ot.MONTH:ot.YEAR}defaultTickFormat(e){const t=this.calculateDefaultTickFormat(e);return i=>Bv(t)(i)}getTickInterval({start:e,stop:t,count:i,minCount:s,maxCount:n}){const{tickIntervals:o}=this;let a,l;const c=i??ct.defaultTickCount,d=Math.abs(t-e)/Math.max(c,1);let h=0;for(;h<o.length&&d>o[h][2];)h++;if(h===0)l=Math.max(Bf(e,t,c,s,n),1),a=this.millisecond;else if(h===o.length){const u=e/_m,p=t/_m;l=Bf(u,p,c,s,n),a=this.year}else{const u=d-o[h-1][2],p=o[h][2]-d,f=u<p?h-1:h;[a,l]=o[f]}return a.every(l)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[e,t]=this.getDomain().map(so);if(this.interval!==void 0)return this.getTicksForInterval({start:e,stop:t});if(this.nice){const{tickCount:i}=this;if(i===2)return this.niceDomain;if(i===1)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:e,stop:t})}getDefaultTicks({start:e,stop:t}){const i=this.getTickInterval({start:e,stop:t,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(e),new Date(t)):[]}getTicksForInterval({start:e,stop:t}){const{interval:i,tickIntervals:s}=this;if(!i)return[];if(i instanceof vu){const h=i.range(new Date(e),new Date(t));return this.isDenseInterval({start:e,stop:t,interval:i,count:h.length})?this.getDefaultTicks({start:e,stop:t}):h}const n=Math.abs(i);if(this.isDenseInterval({start:e,stop:t,interval:n}))return this.getDefaultTicks({start:e,stop:t});const o=[...s];o.reverse();const a=o.find(h=>n%h[2]===0);if(a)return a[0].every(n/(a[2]/a[1])).range(new Date(e),new Date(t));let l=new Date(e);const c=new Date(t),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+n);return d}tickFormat({ticks:e,specifier:t}){return t==null?this.defaultTickFormat(e):Bv(t)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,i]=this.domain;for(let s=0;s<4;s++){this.updateNiceDomainIteration(t,i);const[n,o]=this.niceDomain;if(so(t)===so(n)&&so(i)===so(o))break;t=n,i=o}}updateNiceDomainIteration(e,t){const i=so(e),s=so(t),{interval:n}=this;let o;if(n instanceof vu)o=n;else{const a=typeof n=="number"?(s-i)/Math.max(n,1):this.tickCount;o=this.getTickInterval({start:i,stop:s,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){const a=o.range(e,t,!0),l=a[0],c=a[a.length-1];this.niceDomain=[l,c]}}}const Uh=r=>`(${r})`,Jr=r=>`${Uh(r)}?`,tR=r=>Jr(`?:${r}`),qB=(()=>{const r=".",e="[<>=^]",t="[+\\-( ]",i="[$â¬Â£Â¥â£â¹#]",s="0",n="\\d+",o=",",a="\\d+",l="~",c="[%a-z]";return new RegExp(["^",tR(`${Jr(r)}${Uh(e)}`),Jr(t),Jr(i),Jr(s),Jr(n),Jr(o),tR(`\\.${Uh(a)}`),Jr(l),Jr(c),"$"].join(""),"i")})(),ZB=(()=>{const r=".*?",e=".+?",t=".*?";return new RegExp(["^",Uh(r),`#\\{${Uh(e)}\\}`,Uh(t),"$"].join(""))})();function OP(r){let e,t;const i=ZB.exec(r);i&&([,e,r,t]=i);const s=qB.exec(r);if(!s)throw new Error(`The number formatter is invalid: ${r}`);const[,n,o,a,l,c,d,h,u,p,f]=s;return{fill:n,align:o,sign:a,symbol:l,zero:c,width:parseInt(d),comma:h,precision:parseInt(u),trim:!!p,type:f,prefix:e,suffix:t}}function AP(r){const e=typeof r=="string"?OP(r):r,{fill:t,align:i,sign:s="-",symbol:n,zero:o,width:a,comma:l,type:c,prefix:d="",suffix:h=""}=e;let{precision:u,trim:p}=e,f;if(!c)f=Ks.g,p=!0;else if(c in Ks&&c in Gh)f=isNaN(u)?Gh[c]:Ks[c];else if(c in Ks)f=Ks[c];else if(c in Gh)f=Gh[c];else throw new Error(`The number formatter type is invalid: ${c}`);return isNaN(u)&&(u=c?6:12),g=>{let m=f(g,u);return p&&(m=JB(m)),l&&(m=QB(m,l)),m=s2(g,m,s),n&&n!=="#"&&(m=`${n}${m}`),n==="#"&&c==="x"&&(m=`0x${m}`),c==="s"&&(m=`${m}${e2(g)}`),(c==="%"||c==="p")&&(m=`${m}%`),isNaN(a)||(m=n2(m,a,t??o,i)),m=`${d}${m}${h}`,m}}const Lm=r=>Math.floor(Math.abs(r)),Gh={b:r=>Lm(r).toString(2),c:r=>String.fromCharCode(r),d:r=>Math.round(Math.abs(r)).toFixed(0),o:r=>Lm(r).toString(8),x:r=>Lm(r).toString(16),X:r=>Gh.x(r).toUpperCase(),n:r=>Gh.d(r),"%":r=>`${Lm(r*100).toFixed(0)}`},Ks={e:(r,e)=>Math.abs(r).toExponential(e),E:(r,e)=>Ks.e(r,e).toUpperCase(),f:(r,e)=>Math.abs(r).toFixed(e),F:(r,e)=>Ks.f(r,e).toUpperCase(),g:(r,e)=>{if(r===0)return"0";const t=Math.abs(r),i=Math.floor(Math.log10(t));return i>=-4&&i<e?t.toFixed(e-1-i):t.toExponential(e-1)},G:(r,e)=>Ks.g(r,e).toUpperCase(),n:(r,e)=>Ks.g(r,e),p:(r,e)=>Ks.r(r*100,e),r:(r,e)=>{if(r===0)return"0";const t=Math.abs(r),s=Math.floor(Math.log10(t))-(e-1);if(s<=0)return t.toFixed(-s);const n=Math.pow(10,s);return(Math.round(t/n)*n).toFixed()},s:(r,e)=>{const t=PP(r);return Ks.r(r/Math.pow(10,t),e)},"%":(r,e)=>Ks.f(r*100,e)};function JB(r){return r.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function QB(r,e){let t=r.indexOf(".");t<0&&(t=r.length);const i=r.substring(0,t).split(""),s=r.substring(t);for(let n=i.length-3;n>0;n-=3)i.splice(n,0,e);return`${i.join("")}${s}`}function e2(r){return t2[PP(r)]}function PP(r){const e=Math.log10(Math.abs(r)),t=Math.floor(e/3)*3;return Math.max(MP,Math.min(_P,t))}const MP=-24,_P=24,t2={[MP]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"Âµ",[-3]:"m",[0]:"",[3]:"k",[6]:"M",[9]:"G",[12]:"T",[15]:"P",[18]:"E",[21]:"Z",[_P]:"Y"},i2="â";function s2(r,e,t=""){if(t==="(")return r>=0?e:`(${e})`;const i=t==="+"?"+":"";return`${r>=0?i:i2}${e}`}function n2(r,e,t=" ",i=">"){let s=r;if(i===">"||!i)s=s.padStart(e,t);else if(i==="<")s=s.padEnd(e,t);else if(i==="^"){const n=Math.max(0,e-s.length),o=Math.ceil(n/2),a=Math.floor(n/2);s=s.padStart(o+s.length,t),s=s.padEnd(a+s.length,t)}return s}function IP(r,e){const t=OP(e??",f");isNaN(t.precision)&&(t.type==="f"||t.type==="%"?t.precision=Math.max(...r.map(s=>{if(typeof s!="number"||s===0)return 0;const n=Math.floor(Math.log10(Math.abs(s))),o=t.type?6:12,a=s.toExponential(o-1).replace(/\.?0+e/,"e"),l=a.indexOf(".");if(l<0)return n>=0?0:-n;const c=a.indexOf("e")-l;return Math.max(0,c-n-1)})):(!t.type||t.type in Ks)&&(t.precision=Math.max(...r.map(s=>{if(typeof s!="number")return 0;const n=s.toExponential((t.type?6:12)-1).replace(/\.?0+e/,"e");return n.substring(0,n.indexOf("e")).replace(".","").length}))));const i=AP(t);return s=>i(Number(s))}var o2=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const iR=r=>r;class Yg extends ct{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=iR,this.basePow=iR,this.log=e=>this.domain[0]>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>this.domain[0]>=0?this.basePow(e):-this.basePow(-e)}toDomain(e){return e}transform(e){return this.domain[0]>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return this.domain[0]>=0?Math.exp(e):-Math.exp(-e)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:e}=this;let t;if(e===10)t=Math.log10;else if(e===Math.E)t=Math.log;else if(e===2)t=Math.log2;else{const i=Math.log(e);t=s=>Math.log(s)/i}this.baseLog=t}updatePowFn(){const{base:e}=this;let t;e===10?t=Yg.pow10:e===Math.E?t=Math.exp:t=i=>Math.pow(e,i),this.basePow=t}updateNiceDomain(){const[e,t]=this.domain,i=this.pow(Math.floor(this.log(e))),s=this.pow(Math.ceil(this.log(t)));this.niceDomain=[i,s]}static pow10(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)}ticks(){var e;const t=(e=this.tickCount)!==null&&e!==void 0?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();const i=this.base,[s,n]=this.getDomain();let o=this.log(s),a=this.log(n);if(this.interval){const m=Math.abs(this.interval),v=Math.abs(a-o),C=Hv(o,a,Math.min(v,m)).map(y=>this.pow(y)).filter(y=>y>=s&&y<=n);if(!this.isDenseInterval({start:s,stop:n,interval:m,count:C.length}))return C}const l=i%1===0,c=a-o>=t;if(!l||c)return R0(o,a,Math.min(a-o,t)).map(m=>this.pow(m));const d=[],h=s>0;o=Math.floor(o)-1,a=Math.round(a)+1;const u=Math.min(...this.range),f=(Math.max(...this.range)-u)/t;let g=1/0;for(let m=o;m<=a;m++){const v=this.convert(this.pow(m+1));for(let C=1;C<i;C++){const y=h?C:i-C+1,R=this.pow(m)*y,b=this.convert(R),w=Math.abs(g-b),x=Math.abs(b-v),O=w>=f&&x>=f;R>=s&&R<=n&&(C===1||O)&&(d.push(R),g=b)}}return d}tickFormat({count:e,ticks:t,specifier:i}){const{base:s}=this;return i==null&&(i=s===10?".0e":","),typeof i!="function"&&(i=AP(i)),e===1/0?i:(t==null&&this.ticks(),n=>i(n))}}o2([_(ce(0))],Yg.prototype,"base",void 0);function ac(r,e=[void 0]){return Qu((t,i,s)=>e.includes(s)?r:s)}function Ir(r){const{length:e}=r;if(e===0)return;let t=1/0,i=-1/0;for(let n=0;n<e;n++){let o=r[n];o instanceof Date&&(o=o.getTime()),typeof o=="number"&&(o<t&&(t=o),o>i&&(i=o))}const s=[t,i];if(!s.some(n=>!isFinite(n)))return s}var tp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class $i{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return nd(this)}}tp([_(gt)],$i.prototype,"enabled",void 0);tp([_(ce(0))],$i.prototype,"fontSize",void 0);tp([_(zi)],$i.prototype,"fontFamily",void 0);tp([_(Fd)],$i.prototype,"fontStyle",void 0);tp([_(Nd)],$i.prototype,"fontWeight",void 0);tp([_(_o)],$i.prototype,"color",void 0);function oE(r){const{parallelFlipRotation:e=0,regularFlipRotation:t=0}=r,i=r.rotation?as(Zs(r.rotation)):0,s=!i&&e>=0&&e<=Math.PI?-1:1,n=!i&&t>=0&&t<=Math.PI?-1:1;let o=0;return r.parallel?o=s*Math.PI/2:n===-1&&(o=Math.PI),{configuredRotation:i,defaultRotation:o,parallelFlipFlag:s,regularFlipFlag:n}}function r2(r,e){return isNaN(r)?e?0:10:r}function a2(r,e,t,i){return r&&!e?t*i===-1?"hanging":"bottom":"middle"}function Ay(r,e,t,i,s){const n=e>0&&e<=Math.PI,o=t>0&&t<=Math.PI,a=n||o?-1:1;if(r)if(e||t){if(i*a===-1)return"end"}else return"center";else if(i*s===-1)return"end";return"start"}function l2(r,e,t,i,s){const{width:n,height:o}=e,a=new qe(t,i,0,0);s.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=n,e.height=o,{point:{x:l,y:c,size:0},label:{width:n,height:o,text:r}}}var Ve=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},c2=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};const d2=Ee((r,e)=>ce(0)(r,e)||r instanceof vu,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),h2=Ee((r,e)=>It(r,e,d2),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),u2=Ee((r,e)=>It(r,e,(t,i)=>t!==0&&ce(0)(t,i)||t instanceof vu),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),p2=["stroke","lineDash"],f2=Ee(nc(void 0,r=>{for(const e in r)if(!p2.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var kh;(function(r){r[r.TickLine=0]="TickLine",r[r.TickLabel=1]="TickLabel",r[r.GridLine=2]="GridLine",r[r.GridArc=3]="GridArc",r[r.AxisLine=4]="AxisLine"})(kh||(kh={}));var ao;(function(r){r[r.CREATE=0]="CREATE",r[r.CREATE_SECONDARY=1]="CREATE_SECONDARY",r[r.FILTER=2]="FILTER",r[r.VALUES=3]="VALUES"})(ao||(ao={}));class T0{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}Ve([_(ce(0))],T0.prototype,"width",void 0);Ve([_(Ft)],T0.prototype,"color",void 0);class Fo{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}Ve([_(gt)],Fo.prototype,"enabled",void 0);Ve([_(ce(0))],Fo.prototype,"width",void 0);Ve([_(ce(0))],Fo.prototype,"size",void 0);Ve([_(Ft)],Fo.prototype,"color",void 0);Ve([_(h2),mB("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],Fo.prototype,"count",void 0);Ve([_(u2)],Fo.prototype,"interval",void 0);Ve([_($b())],Fo.prototype,"values",void 0);Ve([_(Fa(oc(1),y0("maxSpacing"))),ac(NaN)],Fo.prototype,"minSpacing",void 0);class qt{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return nd(this)}}Ve([_(gt)],qt.prototype,"enabled",void 0);Ve([_(Pr)],qt.prototype,"autoWrap",void 0);Ve([_(ht(0))],qt.prototype,"maxWidth",void 0);Ve([_(ht(0))],qt.prototype,"maxHeight",void 0);Ve([_(Fd)],qt.prototype,"fontStyle",void 0);Ve([_(Nd)],qt.prototype,"fontWeight",void 0);Ve([_(ce(1))],qt.prototype,"fontSize",void 0);Ve([_(zi)],qt.prototype,"fontFamily",void 0);Ve([_(ce(0))],qt.prototype,"padding",void 0);Ve([_(oc()),ac(NaN)],qt.prototype,"minSpacing",void 0);Ve([_(Ft)],qt.prototype,"color",void 0);Ve([_(ht(-360,360))],qt.prototype,"rotation",void 0);Ve([_(Pr)],qt.prototype,"autoRotate",void 0);Ve([_(ce(-360,360))],qt.prototype,"autoRotateAngle",void 0);Ve([_(gt)],qt.prototype,"avoidCollisions",void 0);Ve([_(gt)],qt.prototype,"mirrored",void 0);Ve([_(gt)],qt.prototype,"parallel",void 0);Ve([_(Le)],qt.prototype,"format",void 0);class Lr{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}Ve([_(gt)],Lr.prototype,"enabled",void 0);Ve([_(Le)],Lr.prototype,"text",void 0);Ve([_(Fd)],Lr.prototype,"fontStyle",void 0);Ve([_(Nd)],Lr.prototype,"fontWeight",void 0);Ve([_(ce(0))],Lr.prototype,"fontSize",void 0);Ve([_(zi)],Lr.prototype,"fontFamily",void 0);Ve([_(Ft)],Lr.prototype,"color",void 0);Ve([_(Xb)],Lr.prototype,"wrapping",void 0);Ve([_(Lt)],Lr.prototype,"formatter",void 0);class kd{constructor(e,t){this.moduleCtx=e,this.id=La(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new ve({name:`${this.id}-axis`,zIndex:Bt.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new xt),this.tickLineGroup=this.axisGroup.appendChild(new ve({name:`${this.id}-Axis-tick-lines`,zIndex:Bt.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new ve({name:`${this.id}-Axis-tick-labels`,zIndex:Bt.AXIS_ZINDEX})),this.crossLineGroup=new ve({name:`${this.id}-CrossLines`}),this.gridGroup=new ve({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ve({name:`${this.id}-gridLines`,zIndex:Bt.AXIS_GRID_ZINDEX})),this.gridArcGroup=this.gridGroup.appendChild(new ve({name:`${this.id}-gridArcs`,zIndex:Bt.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=ut.select(this.tickLineGroup,xt),this.tickLabelGroupSelection=ut.select(this.tickLabelGroup,be),this.gridLineGroupSelection=ut.select(this.gridLineGroup,xt),this.gridArcGroupSelection=ut.select(this.gridArcGroup,an),this._crossLines=[],this.line=new T0,this.tick=this.createTick(),this.label=new qt,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Ut,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.thickness=0,this.maxThickness=1/0,this._scale=t,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node)}get scale(){return this._scale}set crossLines(e){var t,i;(t=this._crossLines)===null||t===void 0||t.forEach(s=>this.detachCrossLine(s)),this._crossLines=e,(i=this._crossLines)===null||i===void 0||i.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}attachCrossLine(e){this.crossLineGroup.appendChild(e.group)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group)}destroy(){}refreshScale(){var e;this.range=this.scale.range.slice(),(e=this.crossLines)===null||e===void 0||e.forEach(t=>{this.initCrossLine(t)})}updateRange(){var e;const{range:t,visibleRange:i,scale:s}=this,n=(t[1]-t[0])/(i[1]-i[0]),o=n*i[0],a=t[0]-o;s.range=[a,a+n],(e=this.crossLines)===null||e===void 0||e.forEach(l=>{l.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,t){e.insertBefore(this.gridGroup,t),e.insertBefore(this.axisGroup,t),e.insertBefore(this.crossLineGroup,t)}detachAxis(e){e.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup)}inRange(e,t=0,i=0){return this.inRangeEx(e,t,i)===0}inRangeEx(e,t=0,i=0){const{range:s}=this,n=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return e+t<n-i?-1:e>o+i?1:0}onLabelFormatChange(e,t){const{scale:i,fractionDigits:s}=this,o=!(i instanceof Yg)&&s>0?a=>typeof a=="number"?a.toFixed(s):String(a):a=>String(a);if(t&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:e,specifier:t})}catch{this.labelFormatter=o,ge.warnOnce(`the axis label format string ${t} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setDomain(){var e;const{scale:t,dataDomain:i,tick:{values:s}}=this;if(s&&t instanceof ct){const[n,o]=(e=Ir(s))!==null&&e!==void 0?e:[1/0,-1/0],a=Math.min(t.fromDomain(i[0]),n),l=Math.max(t.fromDomain(i[1]),o);t.domain=[t.toDomain(a),t.toDomain(l)]}else t.domain=i}setTickInterval(e){var t;this.scale.interval=(t=this.tick.interval)!==null&&t!==void 0?t:e}setTickCount(e,t,i){const{scale:s}=this;if(e&&s instanceof ct){if(typeof e=="number"){s.tickCount=e,s.minTickCount=t??0,s.maxTickCount=i??1/0;return}s instanceof nE&&this.setTickInterval(e)}}set gridLength(e){var t;(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear()),this._gridLength=e,(t=this.crossLines)===null||t===void 0||t.forEach(i=>{this.initCrossLine(i)})}get gridLength(){return this._gridLength}set radialGrid(e){this._radialGrid!==e&&(this._radialGrid=e,this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear())}get radialGrid(){return this._radialGrid}createTick(){return new Fo}update(e){const{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}=this.calculateRotations(),n=this.label.getSideFlag(),o=n*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:t,sideFlag:n}),this.updateLine();const a=this.generateTicks({primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:o,sideFlag:n}),{tickData:l,combinedRotation:c,textBaseline:d,textAlign:h}=a,u=c2(a,["tickData","combinedRotation","textBaseline","textAlign"]);return this.updateSelections(l.ticks),this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:c,textBaseline:d,textAlign:h,labelX:o}),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(n),this.updateTitle({anyTickVisible:l.ticks.length>0,sideFlag:n}),this.updateCrossLines({rotation:t,parallelFlipRotation:i,regularFlipRotation:s,sideFlag:n}),this.updateLayoutState(),e=u.primaryTickCount,e}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:e,nice:t}=this;e instanceof ct&&(this.setTickCount(this.tick.count),e.nice=t,e.update())}calculateRotations(){const e=Zs(this.rotation),t=as(e),i=as(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}generateTicks({primaryTickCount:e,parallelFlipRotation:t,regularFlipRotation:i,labelX:s,sideFlag:n}){var o;const{scale:a,tick:l,label:{parallel:c,rotation:d,fontFamily:h,fontSize:u,fontStyle:p,fontWeight:f}}=this,g=e!==void 0,{defaultRotation:m,configuredRotation:v,parallelFlipFlag:C,regularFlipFlag:y}=oE({rotation:d,parallel:c,regularFlipRotation:i,parallelFlipRotation:t}),R=v+m,b=new As,{maxTickCount:w}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(o=l.maxSpacing)!==null&&o!==void 0?o:NaN}),x=a instanceof ct,O=l.count||!x||isNaN(w)?10:w;let M=Ay(c,v,0,n,y);const N=a2(c,v,n,C),V={fontFamily:h,fontSize:u,fontStyle:p,fontWeight:f,textBaseline:N,textAlign:M};let I={rawTicks:[],ticks:[],labelCount:0},H=0,B=0,X=!0,J=!1;for(;X&&H<=O&&!J;){B=0,M=Ay(c,v,0,n,y);const ae=this.getTickStrategies({secondaryAxis:g,index:H});for(const re of ae){({tickData:I,index:H,autoRotation:B,terminate:J}=re({index:H,tickData:I,textProps:V,labelOverlap:X,terminate:J,primaryTickCount:e}));const K=I.ticks;M=Ay(c,v,B,n,y);const D=v!==0||B!==0,T=R+B;X=this.checkLabelOverlap(T,D,b,K,s,Object.assign(Object.assign({},V),{textAlign:M}))}}const Y=m+v+B;return!g&&I.rawTicks.length>0&&(e=I.rawTicks.length),{tickData:I,primaryTickCount:e,combinedRotation:Y,textBaseline:N,textAlign:M}}getTickStrategies({index:e,secondaryAxis:t}){const{scale:i,label:s,tick:n}=this,o=i instanceof ct,a=s.enabled&&s.avoidCollisions,l=!(o&&this.tick.count===void 0)&&e!==0&&a,c=s.autoRotate===!0&&s.rotation===void 0,d=[];let h;this.tick.values?h=ao.VALUES:t?h=ao.CREATE_SECONDARY:l?h=ao.FILTER:h=ao.CREATE;const u=({index:p,tickData:f,primaryTickCount:g,terminate:m})=>this.createTickData(h,p,f,m,g);if(d.push(u),!o&&!isNaN(n.minSpacing)){const p=({index:f,tickData:g,primaryTickCount:m,terminate:v})=>this.createTickData(ao.FILTER,f,g,v,m);d.push(p)}if(!a)return d;if(s.autoWrap){const p=({index:f,tickData:g,textProps:m})=>this.wrapLabels(g,f,m);d.push(p)}else if(c){const p=({index:f,tickData:g,labelOverlap:m,terminate:v})=>({index:f,tickData:g,autoRotation:this.getAutoRotation(m),terminate:v});d.push(p)}return d}createTickData(e,t,i,s,n){var o,a,l;const{scale:c,tick:d}=this,{maxTickCount:h,minTickCount:u,defaultTickCount:p}=this.estimateTickCount({minSpacing:d.minSpacing,maxSpacing:(o=d.maxSpacing)!==null&&o!==void 0?o:NaN}),f=c instanceof ct,g=d.count||!f||isNaN(h)?10:h;let m=(a=d.count)!==null&&a!==void 0?a:f?Math.max(p-t,u):h;const v=d.interval===void 0&&d.values===void 0&&d.count===void 0&&m>u&&(f||e===ao.FILTER);let C=!0;for(;C&&t<=g;){const R=i.rawTicks;m=(l=d.count)!==null&&l!==void 0?l:f?Math.max(p-t,u):h;const{rawTicks:b,ticks:w,labelCount:x}=this.getTicks({tickGenerationType:e,previousTicks:R,tickCount:m,minTickCount:u,maxTickCount:h,primaryTickCount:n});i.rawTicks=b,i.ticks=w,i.labelCount=x,C=v?jB(b,R):!1,t++}const y=d.interval!==void 0||d.values!==void 0;return s||(s=y),{tickData:i,index:t,autoRotation:0,terminate:s}}checkLabelOverlap(e,t,i,s,n,o){As.updateTransformMatrix(i,1,1,e,0,0);const a=this.createLabelData(s,n,o,i),l=r2(this.label.minSpacing,t);return IB(a,l)}createLabelData(e,t,i,s){const n=[];for(const o of e){const{tickLabel:a,translationY:l}=o;if(a===""||a==null)continue;const c=aP(a),{width:d,height:h}=YH(c,t,l,i),u=new qe(t,l,d,h),p=l2(a,u,t,l,s);n.push(p)}return n}getAutoRotation(e){return e?as(Zs(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:e,previousTicks:t,tickCount:i,minTickCount:s,maxTickCount:n,primaryTickCount:o}){var a;const{scale:l}=this;let c=[];switch(e){case ao.VALUES:c=this.tick.values;break;case ao.CREATE_SECONDARY:c=this.updateSecondaryAxisTicks(o);break;case ao.FILTER:c=this.filterTicks(t,i);break;default:c=this.createTicks(i,s,n);break}this.onLabelFormatChange(c,this.label.format),this.fractionDigits=c.fractionDigits>=0?c.fractionDigits:0;const d=((a=this.scale.bandwidth)!==null&&a!==void 0?a:0)/2,h=[];let u=0;for(let p=0;p<c.length;p++){const f=c[p],g=l.convert(f)+d,m=this.formatTick(f,p);h.push({tick:f,tickLabel:m,translationY:g}),!(m===""||m==null)&&u++}return{rawTicks:c,ticks:h,labelCount:u}}filterTicks(e,t){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN((i=this.tick.maxSpacing)!==null&&i!==void 0?i:NaN)?Math.ceil(e.length/t):2;return e.filter((o,a)=>a%n===0)}createTicks(e,t,i){return this.setTickCount(e,t,i),this.scale.ticks()}estimateTickCount({minSpacing:e,maxSpacing:t}){const i=this.calculateAvailableRange(),s=Math.max(kd.defaultTickMinSpacing,i/ct.defaultMaxTickCount);isNaN(e)&&isNaN(t)?(e=s,t=i,e>t&&(t=e)):isNaN(e)?(e=s,e>t&&(e=t)):isNaN(t)&&(t=i,e>t&&(t=e));const n=Math.max(1,Math.floor(i/e)),o=Math.min(n,Math.ceil(i/t));let a=ct.defaultTickCount;return a>n?a=n:a<o&&(a=o),{minTickCount:o,maxTickCount:n,defaultTickCount:a}}updateVisibility(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),s=c=>{const d=Math.floor(t),h=Math.ceil(i);if(d===h){c.visible=!1;return}c.translationY>=d-1&&c.translationY<d&&(c.translationY=d),c.translationY>h&&c.translationY<=h+1&&(c.translationY=h);const u=c.translationY>=d&&c.translationY<=h;c.visible=u},{gridLineGroupSelection:n,gridArcGroupSelection:o,tickLineGroupSelection:a,tickLabelGroupSelection:l}=this;n.each(s),o.each(s),a.each(s),l.each(s),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:t,regularFlipRotation:i,sideFlag:s}){var n;const o=this.isAnySeriesActive();(n=this.crossLines)===null||n===void 0||n.forEach(a=>{var l;a.sideFlag=-s,a.direction=e===-Math.PI/2?ye.X:ye.Y,a.label.parallel=(l=a.label.parallel)!==null&&l!==void 0?l:this.label.parallel,a.parallelFlipRotation=t,a.regularFlipRotation=i,a.update(o)})}updateTickLines(e){const{tick:t}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=t.width,i.stroke=t.color,i.x1=e*t.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:e}=this,t=Math.min(...e);return Math.max(...e)-t}calculateDomain(){}updatePosition({rotation:e,sideFlag:t}){const{crossLineGroup:i,axisGroup:s,gridGroup:n,translation:o,gridLineGroupSelection:a,gridPadding:l,gridLength:c}=this,d=Math.floor(o.x),h=Math.floor(o.y);i.translationX=d,i.translationY=h,i.rotation=e,s.translationX=d,s.translationY=h,s.rotation=e,n.translationX=d,n.translationY=h,n.rotation=e,a.each(u=>{u.x1=l,u.x2=-t*c+l,u.y1=0,u.y2=0})}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e){const t=this.gridLength?e:[],i=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(t,l=>{const c=new xt;c.tag=kh.GridLine,l.append(c)}),s=this.radialGrid?this.gridArcGroupSelection.update(t,l=>{const c=new an;c.tag=kh.GridArc,l.append(c)}):this.gridArcGroupSelection,n=this.tickLineGroupSelection.update(e,l=>{const c=new xt;c.tag=kh.TickLine,l.appendChild(c)}),o=this.tickLabelGroupSelection.update(e,l=>{const c=new be;c.tag=kh.TickLabel,l.appendChild(c)}),a=l=>l.translationY=Math.round(l.datum.translationY);i.each(a),s.each(a),n.each(a),o.each(a),this.tickLineGroupSelection=n,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=i,this.gridArcGroupSelection=s}updateGridLines(e){var t;const{gridStyle:i,scale:s,tick:n,gridPadding:o,gridLength:a}=this;if(a&&i.length){const l=i.length;let c;if(this.radialGrid){const d=iP(Zs(a)),h=((t=this.scale.bandwidth)!==null&&t!==void 0?t:0)/2;c=this.gridArcGroupSelection.each((u,p)=>{const f=Math.round(s.convert(p)+h);u.centerX=0,u.centerY=s.range[0]-f,u.endAngle=d,u.radius=f})}else c=this.gridLineGroupSelection.each(d=>{d.x1=o,d.x2=-e*a+o,d.y1=0,d.y2=0});c.each((d,h,u)=>{const p=i[u%l];d.stroke=p.stroke,d.strokeWidth=n.width,d.lineDash=p.lineDash,d.fill=void 0})}}updateLabels({tickLabelGroupSelection:e,combinedRotation:t,textBaseline:i,textAlign:s,labelX:n}){const{label:o,label:{enabled:a}}=this;if(!a)return{labelData:[],rotated:!1};e.each((l,c)=>{const{tickLabel:d}=c;if(l.fontStyle=o.fontStyle,l.fontWeight=o.fontWeight,l.fontSize=o.fontSize,l.fontFamily=o.fontFamily,l.fill=o.color,l.text=d,l.text===""||l.text==null){l.visible=!1;return}l.textBaseline=i,l.textAlign=s,l.x=n,l.rotationCenterX=n,l.rotation=t,l.visible=!0})}wrapLabels(e,t,i){const{label:{parallel:s,maxWidth:n,maxHeight:o}}=this,a=s?Math.round(this.calculateAvailableRange()/e.labelCount):this.maxThickness,l=n??a,c=s?this.maxThickness:Math.round(this.calculateAvailableRange()/e.labelCount),d=o??c;return e.ticks.forEach(h=>{const{tickLabel:u}=h,p="hyphenate",f=be.wrap(u,l,d,i,p);h.tickLabel=f}),{tickData:e,index:t,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:e,range:t}=this;e.x1=0,e.x2=0,e.y1=t[0],e.y2=t[1],e.strokeWidth=this.line.width,e.stroke=this.line.color,e.visible=!0}updateTitle({anyTickVisible:e,sideFlag:t}){var i;const s=m=>m.defaultValue,{rotation:n,title:o,_titleCaption:a,lineNode:l,range:c,tickLineGroup:d,tickLabelGroup:h,moduleCtx:{callbackCache:u}}=this,{formatter:p=s}=(i=this.title)!==null&&i!==void 0?i:{};if(!o){a.enabled=!1;return}a.enabled=o.enabled,a.fontFamily=o.fontFamily,a.fontSize=o.fontSize,a.fontStyle=o.fontStyle,a.fontWeight=o.fontWeight,a.color=o.color,a.wrapping=o.wrapping;let f=!1;const g=a.node;if(o.enabled&&l.visible){f=!0;const m=as(n),v=Ut.PADDING,C=t===-1&&m>Math.PI&&m<Math.PI*2?-1:1;g.rotation=C*t*Math.PI/2,g.x=Math.floor(C*t*(c[0]+c[1])/2);let y=0;if(e){const R=ve.computeBBox([d,h]),b=n===0?R.width:R.height;Math.abs(b)<1/0&&(y+=b)}t===-1?g.y=Math.floor(C*(-v-y)):g.y=Math.floor(-v-y),g.textBaseline=C===1?"bottom":"top",g.text=u.call(p,this.getTitleFormatterParams())}g.visible=f}formatTick(e,t){var i,s;const{label:n,labelFormatter:o,fractionDigits:a,moduleCtx:{callbackCache:l}}=this;if(n.formatter){const c=a>0?e:String(e);return(i=l.call(n.formatter,{value:c,index:t,fractionDigits:a,formatter:o}))!==null&&i!==void 0?i:c}else if(o)return(s=l.call(o,e))!==null&&s!==void 0?s:String(e);return String(e)}formatDatum(e){return String(e)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return!1}clipTickLines(e,t,i,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new qe(e,t,i,s))}clipGrid(e,t,i,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new qe(e,t,i,s))}calculatePadding(e,t){return Math.abs(e*.01)}}kd.defaultTickMinSpacing=50;Ve([_(gt)],kd.prototype,"nice",void 0);Ve([_(f2)],kd.prototype,"gridStyle",void 0);Ve([_(ce(0))],kd.prototype,"thickness",void 0);class Xt extends ct{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(e){return e}ticks(){var e;const t=(e=this.tickCount)!==null&&e!==void 0?e:ct.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||this.domain.some(o=>!isFinite(o)))return[];this.refresh();const[i,s]=this.getDomain(),{interval:n}=this;if(n){const o=Math.abs(n);if(!this.isDenseInterval({start:i,stop:s,interval:o}))return Hv(i,s,o)}return R0(i,s,t,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var e,t;const i=(e=this.tickCount)!==null&&e!==void 0?e:ct.defaultTickCount;let[s,n]=this.domain;if(i<1){this.niceDomain=[s,n];return}if(i===1){this.niceDomain=zB(s,n);return}const o=4;let a=s,l=n;for(let c=0;c<o;c++){const d=(t=this.interval)!==null&&t!==void 0?t:Bf(s,n,i,this.minTickCount,this.maxTickCount),[h,u]=this.domain;if(d>=1)s=Math.floor(h/d)*d,n=Math.ceil(u/d)*d;else{const p=1/d;s=Math.floor(h*p)/p,n=Math.ceil(u*p)/p}if(s===a&&n===l)break;a=s,l=n}this.niceDomain=[s,n]}tickFormat({ticks:e,specifier:t}){return IP(e??this.ticks(),t)}}var LP=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ip extends kd{constructor(e,t){super(e,t),this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.modules={},this.position="left"}get type(){var e;return(e=this.constructor.type)!==null&&e!==void 0?e:""}get direction(){return["top","bottom"].includes(this.position)?ye.X:ye.Y}useCalculatedTickCount(){return this.scale instanceof Xt}update(e){return this.updateDirection(),super.update(e)}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateDomain(){const{direction:e,boundSeries:t,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const s=[],n=t.filter(a=>i||a.isEnabled());for(const a of n)s.push(a.getDomain(e));const o=new Array().concat(...s);this.dataDomain=this.normaliseDataDomain(o)}}normaliseDataDomain(e){return e}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}addModule(e){if(this.modules[e.optionsKey]!=null)throw new Error("AG Charts - module already initialised: "+e.optionsKey);if(this.axisContext==null){const i=()=>this.boundSeries.map(s=>s.getKeys(this.direction)).reduce((s,n)=>(s.push(...n),s),[]);this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof ct,keys:i,scaleValueFormatter:s=>{var n,o,a;return(a=(o=(n=this.scale).tickFormat)===null||o===void 0?void 0:o.call(n,{specifier:s}))!==null&&a!==void 0?a:void 0},scaleBandwidth:()=>{var s;return(s=this.scale.bandwidth)!==null&&s!==void 0?s:0},scaleConvert:s=>this.scale.convert(s),scaleInvert:s=>{var n,o,a;return(a=(o=(n=this.scale).invert)===null||o===void 0?void 0:o.call(n,s))!==null&&a!==void 0?a:void 0}}}const t=new e.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[e.optionsKey]={instance:t},this[e.optionsKey]=t}removeModule(e){var t,i;(i=(t=this.modules[e.optionsKey])===null||t===void 0?void 0:t.instance)===null||i===void 0||i.destroy(),delete this.modules[e.optionsKey],delete this[e.optionsKey]}isModuleEnabled(e){return this.modules[e.optionsKey]!=null}destroy(){super.destroy();for(const[e,t]of Object.entries(this.modules))t.instance.destroy(),delete this.modules[e],delete this[e]}getTitleFormatterParams(){var e;const t=this.boundSeries.reduce((i,s)=>{const n=s.getKeys(this.direction),o=s.getNames(this.direction);for(let a=0;a<n.length;a++)i.push({key:n[a],name:o[a]});return i},[]);return{direction:this.direction,boundSeries:t,defaultValue:(e=this.title)===null||e===void 0?void 0:e.text}}}LP([_(jg)],ip.prototype,"keys",void 0);LP([_(gP)],ip.prototype,"position",void 0);var g2=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ba extends ip{constructor(e){super(e,new Ro),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(e){this.scale.paddingOuter=e}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(e){const t=new Set(e);return new Array(...t.values())}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:e}=this,t=e.map(i=>{var s;return(s=i.getBandScalePadding)===null||s===void 0?void 0:s.call(i)}).filter(i=>i!=null);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(i=>i.inner)),this.scale.paddingOuter=Math.max(...t.map(i=>i.outer)))}return super.calculateDomain()}}ba.className="CategoryAxis";ba.type="category";g2([_(ce(0,1))],ba.prototype,"groupPaddingInner",void 0);function od(r,e){const t=Nn(r),i=Nn(e);if(i==="array"){const c=e;return t!=="array"||r.length!==c.length?[...c]:c.some((d,h)=>{var u;return od((u=r)===null||u===void 0?void 0:u[h],d)!=null})?[...c]:null}if(i==="primitive")return t!=="primitive"?Object.assign({},e):r!==e?e:null;const s=r||{},n=e||{},o=new Set([...Object.keys(s),...Object.keys(n)]);let a=0;const l={};for(const c of o){if(s[c]===n[c])continue;const d=f=>{l[c]=f,a++},h=Nn(s[c]),u=Nn(n[c]);if(h!==u){d(n[c]);continue}if(u==="primitive"||u===null){d(n[c]);continue}if(u==="array"&&s[c].length!==n[c].length){d(n[c]);continue}if(u==="class-instance"){d(n[c]);continue}if(u==="function"&&s[c]!==n[c]){d(n[c]);continue}const p=od(s[c],n[c]);p!==null&&d(p)}return a===0?null:l}const po=Symbol("<delete-property>"),sR=Symbol("<unspecified-property>");function Gt(r,e){var t;const i=(t=e==null?void 0:e.avoidDeepClone)!==null&&t!==void 0?t:[];if(r.map(a=>Nn(a)).some(a=>a==="array")){const a=r[r.length-1];return a instanceof Array?a.map(l=>{const c=Nn(l);return c==="array"?Gt([[],l],e):c==="object"?Gt([{},l],e):l}):a}const n={},o=new Set(r.map(a=>a!=null?Object.keys(a):[]).reduce((a,l)=>a.concat(l),[]));for(const a of o){const l=r.map(u=>u!=null&&a in u?u[a]:sR).filter(u=>u!==sR);if(l.length===0)continue;const c=l[l.length-1];if(c===po)continue;const d=l.map(u=>Nn(u)),h=d[0];if(d.some(u=>u!==h)){n[a]=c;continue}(h==="array"||h==="object")&&!i.includes(a)?n[a]=Gt(l,e):h==="array"?n[a]=[...c]:n[a]=c}return n}function jh(r,e,t={}){var i,s;const{path:n=void 0,matcherPath:o=n?n.replace(/(\[[0-9+]+\])/i,"[]"):void 0,skip:a=[],constructors:l={},allowedTypes:c={},idx:d}=t;if(r==null)throw new Error(`AG Charts - target is uninitialised: ${n??"<root>"}`);if(e==null)return r;const h=r;d!=null&&"_declarationOrder"in h&&(h._declarationOrder=d);const u=Nn(r);for(const p in e){const f=`${o?o+".":""}${p}`;if(a.indexOf(f)>=0)continue;const g=e[p],m=`${n?n+".":""}${p}`,v=h.constructor,C=h[p];let y=(i=l[f])!==null&&i!==void 0?i:l[p];try{const R=Nn(C),b=Nn(g);if(u==="class-instance"&&!(p in r||Object.prototype.hasOwnProperty.call(h,p))){ge.warn(`unable to set [${m}] in ${v==null?void 0:v.name} - property is unknown`);continue}const w=(s=c[f])!==null&&s!==void 0?s:[R];if(!(R==="class-instance"&&b==="object")){if(R!=null&&b!=null&&!w.includes(b)){ge.warn(`unable to set [${m}] in ${v==null?void 0:v.name} - can't apply type of [${b}], allowed types are: [${w}]`);continue}}if(b==="array")if(y=y??l[`${f}[]`],y!=null){const x=g;h[p]=x.map((O,M)=>jh(new y,O,Object.assign(Object.assign({},t),{path:m,matcherPath:f+"[]",idx:M})))}else h[p]=g;else b==="class-instance"?h[p]=g:b==="object"?C!=null?jh(C,g,Object.assign(Object.assign({},t),{path:m,matcherPath:f,idx:void 0})):y!=null?h[p]=jh(new y,g,Object.assign(Object.assign({},t),{path:m,matcherPath:f,idx:void 0})):h[p]=g:h[p]=g}catch(R){const b=R;ge.warn(`unable to set [${m}] in [${v==null?void 0:v.name}]; nested error is: ${b.message}`);continue}}return r}function rd(r,e,t,...i){var s;const n=Nn(r),o=(s=t.skip)!==null&&s!==void 0?s:[];if(n==="array"){r.forEach((a,l)=>{rd(a,e,t,...(i??[]).map(c=>c==null?void 0:c[l]))});return}else if(n!=="object")return;e(n,r,...i);for(const a in r){if(o.indexOf(a)>=0)continue;const l=r[a],c=i==null?void 0:i.map(h=>h==null?void 0:h[a]),d=Nn(l);(d==="object"||d==="array")&&rd(l,e,t,...c)}}const m2=typeof window<"u";function Nn(r){return r==null?null:m2&&r instanceof HTMLElement?"primitive":r instanceof Array?"array":r instanceof Date?"primitive":typeof r=="object"&&r.constructor===Object?"object":typeof r=="function"?"function":typeof r=="object"&&r.constructor!=null?"class-instance":"primitive"}class zh extends Io{updatePath(){const{path:e,x:t,y:i}=this,s=this.size/2;e.clear(),e.moveTo(this.align(t-s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i+s)),e.lineTo(this.align(t-s),this.align(i+s)),e.closePath()}}zh.className="Square";class Xg extends Io{updatePath(){const e=this.size/4.2;super.applyPath(e,Xg.moves)}}Xg.className="Cross";Xg.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class sp extends Io{updatePath(){const e=this.size/2;super.applyPath(e,sp.moves)}}sp.className="Diamond";sp.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class FP extends Io{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:t,size:i,rad:s}=this,n=i/4,o=this.y+n/2;t.clear(),t.arc(e-n,o-n,n,s(130),s(330)),t.arc(e+n,o-n,n,s(220),s(50)),t.lineTo(e,o+n),t.closePath()}}FP.className="Heart";class qg extends Io{updatePath(){const e=this.size/3;super.applyPath(e,qg.moves)}}qg.className="Plus";qg.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class da extends Io{updatePath(){const e=this.size*1.1;super.applyPath(e,da.moves)}}da.className="Triangle";da.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];function np(r=zh){if(typeof r=="string")switch(r){case"circle":return yu;case"cross":return Xg;case"diamond":return sp;case"heart":return FP;case"plus":return qg;case"triangle":return da;default:return zh}return typeof r=="function"?r:zh}class NP{constructor(e,t){this.debug=!1,this.state=e,this.states=t,this.debug&&ge.debug(`%c${this.constructor.name} | init -> ${e}`,"color: green")}transition(e,t){var i,s,n,o,a;const l=this.states[this.state],c=(i=l==null?void 0:l.on)===null||i===void 0?void 0:i[e];if(!c){this.debug&&ge.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey");return}const d=c.target,h=this.states[d];return this.debug&&ge.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${d}`,"color: green"),c.action(t),(n=(s=l==null?void 0:l.actions)===null||s===void 0?void 0:s.onExit)===null||n===void 0||n.call(s),(a=(o=h==null?void 0:h.actions)===null||o===void 0?void 0:o.onEnter)===null||a===void 0||a.call(o),this.state=d,this.state}}var v2=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Ws=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};const C2={[ye.X]:["xKey"],[ye.Y]:["yKey"]},y2={[ye.X]:["xName"],[ye.Y]:["yName"]};class rE extends $g{constructor(e,t,i,s,n){super(i,s,n),this.xKey=e,this.yKey=t}}class D0 extends rE{constructor(){super(...arguments),this.type="nodeClick"}}class O0 extends rE{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class S2 extends NP{}class op extends Mr{constructor(e){var t,i;super(Object.assign(Object.assign({},e),{useSeriesGroupLayer:!0,directionKeys:(t=e.directionKeys)!==null&&t!==void 0?t:C2,directionNames:(i=e.directionNames)!==null&&i!==void 0?i:y2})),this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=ut.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=ut.select(this.highlightLabel,be),this.subGroups=[],this.subGroupId=0,this.seriesItemEnabled=new Map;const{pathsPerSeries:s=1,hasMarkers:n=!1,pathsZIndexSubOrderOffset:o=[]}=e;this.opts={pathsPerSeries:s,hasMarkers:n,pathsZIndexSubOrderOffset:o},this.animationState=new S2("empty",{empty:{on:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)}}},ready:{on:{update:{target:"ready",action:a=>this.animateReadyUpdate(a)},highlight:{target:"ready",action:a=>this.animateReadyHighlight(a)},highlightMarkers:{target:"ready",action:a=>this.animateReadyHighlightMarkers(a)},resize:{target:"ready",action:a=>this.animateReadyResize(a)}}}})}get contextNodeData(){var e;return(e=this._contextNodeData)===null||e===void 0?void 0:e.slice()}addChartEventListeners(){var e,t;(e=this.chartEventManager)===null||e===void 0||e.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(t=this.chartEventManager)===null||t===void 0||t.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(e,t,i,s){return(i&&Hf(e)||!i&&Nv(e))&&(s&&Hf(t)||!s&&Nv(t))?[e,t]:void 0}checkRangeXY(e,t,i,s){return!isNaN(e)&&!isNaN(t)&&i.inRange(e)&&s.inRange(t)}update({seriesRect:e}){var t,i;return Ws(this,void 0,void 0,function*(){const{seriesItemEnabled:s,visible:n}=this,{series:o}=(i=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight())!==null&&i!==void 0?i:{},a=o?o===this:void 0,l=n&&s.size===0||[...s.values()].some(d=>d===!0),c={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height};od(this.nodeDataDependencies,c)!=null&&(this.nodeDataDependencies=c,this.markNodeDataDirty(),this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:d})=>d),markerSelections:this.subGroups.map(({markerSelection:d})=>d),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:d})=>d)})),yield this.updateSelections(a,l),yield this.updateNodes(a,l),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:d})=>d),markerSelections:this.subGroups.map(({markerSelection:d})=>d),labelSelections:this.subGroups.map(({labelSelection:d})=>d),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:d})=>d),seriesRect:e})})}updateSelections(e,t){return Ws(this,void 0,void 0,function*(){yield this.updateHighlightSelection(e),t&&(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty()||(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((i,s)=>this.updateSeriesGroupSelections(i,s)))))})}updateSeriesGroupSelections(e,t){return Ws(this,void 0,void 0,function*(){const{datumSelection:i,labelSelection:s,markerSelection:n}=e,o=this._contextNodeData[t],{nodeData:a,labelData:l}=o;e.datumSelection=yield this.updateDatumSelection({nodeData:a,datumSelection:i,seriesIdx:t}),e.labelSelection=yield this.updateLabelSelection({labelData:l,labelSelection:s,seriesIdx:t}),n&&(e.markerSelection=yield this.updateMarkerSelection({nodeData:a,markerSelection:n,seriesIdx:t}))})}nodeFactory(){return new ve}markerFactory(){const e=np();return new e}updateSeriesGroups(){var e;return Ws(this,void 0,void 0,function*(){const{_contextNodeData:t,contentGroup:i,subGroups:s,opts:{pathsPerSeries:n,hasMarkers:o,pathsZIndexSubOrderOffset:a}}=this;if(t.length===s.length)return;t.length<s.length&&s.splice(t.length).forEach(({dataNodeGroup:c,markerGroup:d,labelGroup:h,paths:u})=>{i.removeChild(c),d&&i.removeChild(d),h&&i.removeChild(h);for(const p of u)i.removeChild(p)});const l=t.length;for(;l>s.length;){const d=this.subGroupId++,h=d,u=new ve({name:`${this.id}-series-sub${d}-dataNodes`,layer:!1,zIndex:Bt.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,h]}),p=o?new ve({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:Bt.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,1e4+d]}):void 0,f=new ve({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:Bt.SERIES_LABEL_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,d]});i.appendChild(u),i.appendChild(f),p&&i.appendChild(p);const g=[];for(let m=0;m<n;m++)g[m]=new Ei,g[m].zIndex=Bt.SERIES_LAYER_ZINDEX,g[m].zIndexSubOrder=[()=>this._declarationOrder,((e=a[m])!==null&&e!==void 0?e:0)+h],i.appendChild(g[m]);s.push({paths:g,dataNodeGroup:u,markerGroup:p,labelGroup:f,labelSelection:ut.select(f,be),datumSelection:ut.select(u,()=>this.nodeFactory()),markerSelection:p?ut.select(p,()=>this.markerFactory()):void 0})}})}updateNodes(e,t){var i;return Ws(this,void 0,void 0,function*(){const{highlightSelection:s,highlightLabelSelection:n,_contextNodeData:o,seriesItemEnabled:a,opts:{hasMarkers:l}}=this,c=this.visible&&((i=this._contextNodeData)===null||i===void 0?void 0:i.length)>0&&t;this.rootGroup.visible=c,this.contentGroup.visible=c,this.highlightGroup.visible=c&&!!e;const d=this.getOpacity(),h=this.subGroups.map((p,f)=>{const{itemId:g}=o[f];return this.getOpacity({itemId:g})}),u=h.some(p=>p!==d);this.contentGroup.opacity=u?1:d,l?(yield this.updateMarkerNodes({markerSelection:s,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",s)):(yield this.updateDatumNodes({datumSelection:s,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",s)),yield this.updateLabelNodes({labelSelection:n,seriesIdx:-1}),yield Promise.all(this.subGroups.map((p,f)=>Ws(this,void 0,void 0,function*(){var g;const{dataNodeGroup:m,markerGroup:v,datumSelection:C,labelSelection:y,markerSelection:R,paths:b,labelGroup:w}=p,{itemId:x}=o[f],O=c&&((g=a.get(x))!==null&&g!==void 0?g:!0),M=u?h[f]:1;m.opacity=M,m.visible=O,w.visible=O,v&&(v.opacity=M,v.zIndex=m.zIndex>=Bt.SERIES_LAYER_ZINDEX?m.zIndex:m.zIndex+1,v.visible=O),w&&(w.opacity=M);for(const N of b)N.opacity=M,N.visible=O;m.visible&&(yield this.updateDatumNodes({datumSelection:C,isHighlight:!1,seriesIdx:f}),yield this.updateLabelNodes({labelSelection:y,seriesIdx:f}),l&&R&&(yield this.updateMarkerNodes({markerSelection:R,isHighlight:!1,seriesIdx:f})))})))})}updateHighlightSelection(e){var t;return Ws(this,void 0,void 0,function*(){const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this,o=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight(),a=e&&(o!=null&&o.datum)?o:void 0;this.highlightSelection=yield this.updateHighlightSelectionItem({item:a,highlightSelection:i});let l;if(this.isLabelEnabled()&&a!=null){const{itemId:c=void 0}=a;for(const{labelData:d}of n)if(l=d.find(h=>h.datum===a.datum&&h.itemId===c),l!=null)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:l,highlightLabelSelection:s})})}pickNodeExactShape(e){const t=super.pickNodeExactShape(e);if(t)return t;const{x:i,y:s}=e,{opts:{hasMarkers:n}}=this;for(const{dataNodeGroup:o,markerGroup:a}of this.subGroups){let l=o.pickNode(i,s);if(!l&&n&&(l=a==null?void 0:a.pickNode(i,s)),l)return{datum:l.datum,distance:0}}}pickNodeClosestDatum(e){var t,i;const{x:s,y:n}=e,{xAxis:o,yAxis:a,rootGroup:l,_contextNodeData:c}=this,d=l.transformPoint(s,n);let h=1/0,u;for(const p of c)for(const f of p.nodeData){const{point:{x:g=NaN,y:m=NaN}={}}=f;if(isNaN(g)||isNaN(m)||!((o==null?void 0:o.inRange(g))&&(a==null?void 0:a.inRange(m))))continue;const C=Math.max(Math.pow(d.x-g,2)+Math.pow(d.y-m,2),0);C<h&&(h=C,u=f)}if(u){const p=Math.max(Math.sqrt(h)-((i=(t=u.point)===null||t===void 0?void 0:t.size)!==null&&i!==void 0?i:0),0);return{datum:u,distance:p}}}pickNodeMainAxisFirst(e,t){var i,s;const{x:n,y:o}=e,{xAxis:a,yAxis:l,rootGroup:c,_contextNodeData:d}=this,h=[a,l].filter(v=>v instanceof ba).map(v=>v.direction);if(t&&h.length===0)return;const[u=ye.X]=h,p=c.transformPoint(n,o),f=u===ye.X?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0];let m;for(const v of d)for(const C of v.nodeData){const{point:{x:y=NaN,y:R=NaN}={}}=C;if(isNaN(y)||isNaN(R)||!((a==null?void 0:a.inRange(y))&&(l==null?void 0:l.inRange(R))))continue;const w=u===ye.X?[y,R]:[R,y];let x=!0;for(let O=0;O<w.length;O++){const M=Math.abs(w[O]-f[O]);if(M>g[O]){x=!1;break}M<g[O]&&(g[O]=M,g.fill(1/0,O+1,g.length))}x&&(m=C)}if(m){const v=Math.max(Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))-((s=(i=m.point)===null||i===void 0?void 0:i.size)!==null&&s!==void 0?s:0),0);return{datum:m,distance:v}}}onLegendItemClick(e){const{enabled:t,itemId:i,series:s}=e;s.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,o=Object.values(n).reduce((c,d)=>c+d,0),l=s.id===this.id||t&&o===1;this.toggleSeriesItem(i,l)}toggleSeriesItem(e,t){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(e,t),this.nodeDataRefresh=!0):super.toggleSeriesItem(e,t)}isEnabled(){if(this.seriesItemEnabled.size>0){for(const[,e]of this.seriesItemEnabled)if(e)return!0;return!1}return super.isEnabled()}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}isAnySeriesVisible(){for(const e of this.seriesItemEnabled.values())if(e)return!0;return!1}updateHighlightSelectionItem(e){return Ws(this,void 0,void 0,function*(){const{opts:{hasMarkers:t}}=this,{item:i,highlightSelection:s}=e,n=i?[i]:[];if(t){const o=s;return this.updateMarkerSelection({nodeData:n,markerSelection:o,seriesIdx:-1})}else return this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})})}updateHighlightSelectionLabel(e){return Ws(this,void 0,void 0,function*(){const{item:t,highlightLabelSelection:i}=e,s=t?[t]:[];return this.updateLabelSelection({labelData:s,labelSelection:i,seriesIdx:-1})})}updateDatumSelection(e){return Ws(this,void 0,void 0,function*(){return e.datumSelection})}updateDatumNodes(e){return Ws(this,void 0,void 0,function*(){})}updateMarkerSelection(e){return Ws(this,void 0,void 0,function*(){return e.markerSelection})}updateMarkerNodes(e){return Ws(this,void 0,void 0,function*(){})}animateEmptyUpdateReady(e){}animateReadyUpdate(e){}animateReadyHighlight(e){}animateReadyHighlightMarkers(e){}animateReadyResize(e){}}class A0 extends Lo{constructor(){super(...arguments),this.formatter=void 0}}v2([_(Lt),fe({redraw:le.MAJOR})],A0.prototype,"formatter",void 0);function nR(r){return new Promise(e=>{setTimeout(()=>e(void 0),r)})}var GP=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class aE{constructor(e,t){this.renderer=void 0,this.text=void 0,this.className=e,this.parentElement=t}show(e){var t,i;let s=this.element;if(this.element||(s=document.createElement("div"),s.className=this.className,this.element=s),s.style.position="absolute",s.style.left=`${e.x}px`,s.style.top=`${e.y}px`,s.style.width=`${e.width}px`,s.style.height=`${e.height}px`,this.renderer)this.element.innerHTML=this.renderer();else{const n=document.createElement("div");n.style.alignItems="center",n.style.boxSizing="border-box",n.style.display="flex",n.style.justifyContent="center",n.style.margin="8px",n.style.height="100%",n.style.font="12px Verdana, sans-serif",n.innerText=(t=this.text)!==null&&t!==void 0?t:"No data to display",s.append(n)}(i=this.parentElement)===null||i===void 0||i.append(s)}hide(){var e;(e=this.element)===null||e===void 0||e.remove(),this.element=void 0}}GP([_(Lt)],aE.prototype,"renderer",void 0);GP([_(Le)],aE.prototype,"text",void 0);class w2{constructor(e){this.noData=new aE("ag-chart-no-data-overlay",e)}}class NS{constructor(){this.registeredListeners={}}addListener(e,t){var i;const s=Symbol(e);return this.registeredListeners[e]||(this.registeredListeners[e]=[]),(i=this.registeredListeners[e])===null||i===void 0||i.push({symbol:s,handler:t}),s}dispatch(e,...t){var i;const s=(i=this.registeredListeners[e])!==null&&i!==void 0?i:[],n=[];for(const o of s)try{n.push(o.handler(...t))}catch(a){ge.errorOnce(a),n.push(void 0)}return n}cancellableDispatch(e,t,...i){var s;const n=(s=this.registeredListeners[e])!==null&&s!==void 0?s:[],o=[];for(const a of n){if(t())break;o.push(a.handler(...i))}return o}reduceDispatch(e,t,...i){var s;const n=(s=this.registeredListeners[e])!==null&&s!==void 0?s:[];let o;for(const a of n)o=a.handler(...i),i=t(o,...i);return o}removeListener(e){for(const t in this.registeredListeners){const i=this.registeredListeners[t],s=i==null?void 0:i.findIndex(n=>n.symbol===e);s!=null&&s>=0&&(i==null||i.splice(s,1)),s!=null&&(i==null?void 0:i.length)===0&&delete this.registeredListeners[t]}}}class Zg{constructor(){this.listeners=new NS}addListener(e,t){return this.listeners.addListener(e,t)}removeListener(e){this.listeners.removeListener(e)}}function $p(r,e){return r=+r,e=+e,t=>r*(1-t)+e*t}function kP(r,e){if(typeof r=="string")try{r=Re.fromString(r)}catch{r=Re.fromArray([0,0,0])}if(typeof e=="string")try{e=Re.fromString(e)}catch{e=Re.fromArray([0,0,0])}const t=$p(r.r,e.r),i=$p(r.g,e.g),s=$p(r.b,e.b),n=$p(r.a,e.a);return function(o){return Re.fromArray([t(o),i(o),s(o),n(o)]).toRgbaString()}}function VP(r,e){const t=typeof e;let i;if(t==="number")return $p(r,e);if(t==="string")try{return i=Re.fromString(e),e=i,kP(r,e)}catch{}throw new Error("Unable to interpolate values")}function b2(r){return({from:e,to:t})=>{const i=VP(e,t);return s=>i(r(s))}}function To({from:r,to:e}){return VP(r,e)}const P0=b2(r=>Math.sin(r*Math.PI/2));var Wv;(function(r){r.Loop="loop",r.Reverse="reverse"})(Wv||(Wv={}));function HP({driver:r,duration:e,from:t,to:i,autoplay:s=!0,delay:n=0,ease:o=To,repeat:a=1/0,repeatType:l=Wv.Loop,onComplete:c,onPlay:d,onRepeat:h,onStop:u,onUpdate:p}){let f,g=0,m=0,v=0,C=!0,y=!1;const R=o({from:t,to:i}),b={isPlaying:!1,play:x,pause:O,stop:M,reset:N},w=r(H);function x(){return b.isPlaying=!0,w.start(),d==null||d(),b}function O(){return b.isPlaying=!1,b}function M(){return b.isPlaying=!1,w.stop(),u==null||u(),b}function N(){return y=!1,m=0,v=0,w.reset(),b}function V(){v++,l===Wv.Reverse?(C=v%2===0,m=C?m%e:e-m%e):m=m%e,y=!1,h==null||h()}function I(){M(),c==null||c()}function H(B){if(C||(B=-B),g>=n)m+=B;else{g+=B;return}y||(f=R(Math.min(1,Math.max(0,m/e))),y=C?m>=e:m<=0),p==null||p(f),y&&(v<a?V():I())}return s&&x(),b}function E2(r){let e;const t=Object.assign(Object.assign({},r),{repeat:0,autoplay:!1,onUpdate:n=>{e==null||e(n)}}),i=HP(t),s={start:n=>(i.stop(),i.reset(),i.play(),e=n,s),stop:()=>(i.stop(),s)};return s}const x2=300;class R2 extends Zg{constructor(e){super(),this.controllers={},this.debouncers={},this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.skipAnimations=!1,this.interactionManager=e,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0;for(const e in this.controllers)this.controllers[e].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame();for(const e in this.controllers)this.controllers[e].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame();for(const e in this.controllers)this.controllers[e].stop()}animate(e,t){var i,s;const n=Object.assign(Object.assign({},t),{autoplay:this.isPlaying?t.autoplay:!1,driver:this.createDriver(e,t.disableInteractions)}),o=HP(n);return this.controllers[e]&&(this.controllers[e].stop(),delete this.controllers[e]),this.controllers[e]=o,this.skipAnimations?((i=t.onUpdate)===null||i===void 0||i.call(t,t.to),o.stop()):(s=t.onUpdate)===null||s===void 0||s.call(t,t.from),o}animateMany(e,t,i){const s=t.map(h=>h.from);let n=0,o=0;const a=h=>u=>{var p;s[h]=u,++n>=t.length&&((p=i.onUpdate)===null||p===void 0||p.call(i,s),n=0)},l=()=>{var h;++o>=t.length&&((h=i.onComplete)===null||h===void 0||h.call(i))},c=t.map((h,u)=>{const p=`${e}-${u}`;return this.animate(p,Object.assign(Object.assign(Object.assign({},i),h),{onUpdate:a(u),onComplete:l}))}),d={get isPlaying(){return c.some(h=>h.isPlaying)},play(){return c.forEach(h=>h.play()),d},pause(){return c.forEach(h=>h.pause()),d},stop(){return c.forEach(h=>h.stop()),d},reset(){return c.forEach(h=>h.reset()),d}};return d}debouncedAnimate(e,t){var i;return this.debouncers[e]&&Date.now()-this.debouncers[e]<((i=t.duration)!==null&&i!==void 0?i:x2)?this.controllers[e]:(this.debouncers[e]=Date.now(),this.animate(e,t))}tween(e){const t=`tween-${btoa(JSON.stringify(e))}`,i=Object.assign(Object.assign({},e),{driver:this.createDriver(t)});return E2(i)}createDriver(e,t){return i=>({start:()=>{this.updaters.push([e,i]),this.requestId==null&&this.startAnimationCycle(),t&&this.interactionManager.pause(`animation_${e}`)},stop:()=>{this.updaters=this.updaters.filter(([s])=>s!==e),this.updaters.length<=0&&this.cancelAnimationFrame(),t&&this.interactionManager.resume(`animation_${e}`)},reset:()=>{}})}startAnimationCycle(){const e=t=>{if(this.requestId=requestAnimationFrame(e),!this.readyToPlay)return;this.lastTime===void 0&&(this.lastTime=t);const i=t-this.lastTime;this.lastTime=t,this.updaters.forEach(([s,n])=>{n(i)}),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(e)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0)}}class T2{constructor(e){this.states={},this.element=e}updateCursor(e,t){delete this.states[e],t!=null&&(this.states[e]={style:t}),this.applyStates()}applyStates(){let e="default";Object.entries(this.states).reverse().slice(0,1).forEach(([t,{style:i}])=>e=i),this.element.style.cursor=e}}class D2 extends Zg{legendItemClick(e,t,i){const s={type:"legend-item-click",series:e,itemId:t,enabled:i};this.listeners.dispatch("legend-item-click",s)}legendItemDoubleClick(e,t,i,s){const n={type:"legend-item-double-click",series:e,itemId:t,enabled:i,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",n)}}function O2(r,e){return r===e?!0:!((r==null?void 0:r.series)!==(e==null?void 0:e.series)||(r==null?void 0:r.itemId)!==(e==null?void 0:e.itemId)||(r==null?void 0:r.datum)!==(e==null?void 0:e.datum))}class A2 extends Zg{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(e,t){delete this.states[e],t!=null&&(this.states[e]={highlightedDatum:t}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const e=this.activeHighlight;let t;if(Object.entries(this.states).reverse().slice(0,1).forEach(([s,{highlightedDatum:n}])=>t=n),this.activeHighlight=t,!O2(e,this.activeHighlight)){const s={type:"highlight-change",previousHighlight:e,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",s)}}}var P2=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};const oR=["pagehide","mousemove","mouseup","wheel"],rR=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"],M2=`
.ag-chart-wrapper {
    touch-action: none;
}
`;class rl extends Zg{constructor(e,t=document){super(),this.eventHandler=i=>this.processEvent(i),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=t.body,this.element=e;for(const i of rR)i.startsWith("touch")?e.addEventListener(i,this.eventHandler,{passive:!0}):e.addEventListener(i,this.eventHandler);for(const i of oR)i==="wheel"?window.addEventListener(i,this.eventHandler,{passive:!1}):window.addEventListener(i,this.eventHandler);if(rl.interactionDocuments.indexOf(t)<0){const i=document.createElement("style");i.innerHTML=M2,document.head.insertBefore(i,document.head.querySelector("style")),rl.interactionDocuments.push(t)}}destroy(){for(const e of oR)window.removeEventListener(e,this.eventHandler);for(const e of rR)this.element.removeEventListener(e,this.eventHandler)}resume(e){return this.pausers=this.pausers.filter(t=>t!==e),this.enabled=this.pausers.length<=0,this.enabled}pause(e){this.enabled=!1,this.pausers.push(e)}processEvent(e){const t=this.decideInteractionEventTypes(e);t.length>0&&this.enabled&&this.dispatchEvent(e,t).catch(i=>ge.errorOnce(i))}dispatchEvent(e,t){return P2(this,void 0,void 0,function*(){const i=this.calculateCoordinates(e);if(i!=null)for(const s of t){const n=this.buildEvent(Object.assign(Object.assign({event:e},i),{type:s}));this.listeners.cancellableDispatch(s,()=>n.consumed,n)}})}decideInteractionEventTypes(e){switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const t=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==t?(this.mouseDown=t,[t?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(e){var t;return e.target===this.element||((t=e.target)===null||t===void 0?void 0:t.parentElement)===this.element}calculateCoordinates(e){var t;if(e instanceof MouseEvent){const{clientX:i,clientY:s,pageX:n,pageY:o,offsetX:a,offsetY:l}=e;return this.fixOffsets(e,{clientX:i,clientY:s,pageX:n,pageY:o,offsetX:a,offsetY:l})}else if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const i=(t=e.touches[0])!==null&&t!==void 0?t:e.changedTouches[0],{clientX:s,clientY:n,pageX:o,pageY:a}=i;return Object.assign(Object.assign({},rl.NULL_COORDS),{clientX:s,clientY:n,pageX:o,pageY:a})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:rl.NULL_COORDS}fixOffsets(e,t){const i=s=>{let n=0,o=0;for(;s;)n+=s.offsetLeft,o+=s.offsetTop,s=s.offsetParent;return{x:n,y:o}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){const s=i(this.dragStartElement),n=i(e.target);t.offsetX-=s.x-n.x,t.offsetY-=s.y-n.y}return t}buildEvent(e){const{type:t,event:i,clientX:s,clientY:n}=e;let{offsetX:o,offsetY:a,pageX:l,pageY:c}=e;if(!Js(o)||!Js(a)){const h=this.element.getBoundingClientRect();o=s-h.left,a=n-h.top}if(!Js(l)||!Js(c)){const h=this.rootElement.getBoundingClientRect();l=s-h.left,c=n-h.top}const d={type:t,offsetX:o,offsetY:a,pageX:l,pageY:c,sourceEvent:i,consumed:!1,consume:()=>d.consumed=!0};return d}}rl.interactionDocuments=[];rl.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class _2{constructor(e,t){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=e;const i=t.addListener("hover",s=>this.checkExclusiveRects(s));this.destroyFns.push(()=>t.removeListener(i))}updateTooltip(e,t,i){var s;i==null&&(i=(s=this.states[e])===null||s===void 0?void 0:s.content),i?this.states[e]={content:i,meta:t}:delete this.states[e],this.applyStates()}updateExclusiveRect(e,t){t?this.exclusiveAreas[e]=t:delete this.exclusiveAreas[e]}removeTooltip(e){delete this.states[e],this.applyStates()}getTooltipMeta(e){var t;return(t=this.states[e])===null||t===void 0?void 0:t.meta}destroy(){for(const e of this.destroyFns)e()}checkExclusiveRects(e){let t;for(const[i,s]of Object.entries(this.exclusiveAreas))if(s.containsPoint(e.offsetX,e.offsetY)){t=i;break}t!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=t,this.applyStates())}applyStates(){var e;const t=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,s;if(t.reverse(),t.slice(0,1).forEach(n=>{var o;const{content:a,meta:l}=(o=this.states[n])!==null&&o!==void 0?o:{};i=a,s=l}),s===void 0||i===void 0){this.appliedState=void 0,this.tooltip.toggle(!1);return}if(((e=this.appliedState)===null||e===void 0?void 0:e.content)===i){const n=this.tooltip.isVisible();this.tooltip.show(s,void 0,n)}else this.tooltip.show(s,i);this.appliedState={content:i,meta:s}}}function I2(r,e){var t,i,s,n,o,a,l,c;return r===e?!0:!(((t=r==null?void 0:r.x)===null||t===void 0?void 0:t.min)!==((i=e==null?void 0:e.x)===null||i===void 0?void 0:i.min)||((s=r==null?void 0:r.x)===null||s===void 0?void 0:s.max)!==((n=e==null?void 0:e.x)===null||n===void 0?void 0:n.max)||((o=r==null?void 0:r.y)===null||o===void 0?void 0:o.max)!==((a=e==null?void 0:e.y)===null||a===void 0?void 0:a.max)||((l=r==null?void 0:r.y)===null||l===void 0?void 0:l.min)!==((c=e==null?void 0:e.y)===null||c===void 0?void 0:c.min))}class L2 extends Zg{constructor(){super(),this.states={},this.currentZoom=void 0}updateZoom(e,t){delete this.states[e],t!=null&&(this.states[e]=Object.assign({},t)),this.applyStates()}getZoom(){return this.currentZoom}applyStates(){const e=this.currentZoom,t={};for(const[n,{x:o,y:a}]of Object.entries(this.states))t.x=o??t.x,t.y=a??t.y;if(this.currentZoom=t.x!=null||t.y!=null?t:void 0,!!I2(e,this.currentZoom))return;const s=Object.assign({type:"zoom-change"},e??{});this.listeners.dispatch("zoom-change",s)}}function F2(r){return r!=="layout-complete"}function N2(r){return r==="layout-complete"}class G2{constructor(){this.layoutProcessors=new NS,this.listeners=new NS}addListener(e,t){if(F2(e))return this.layoutProcessors.addListener(e,t);if(N2(e))return this.listeners.addListener(e,t);throw new Error("AG Charts - unsupported listener type: "+e)}removeListener(e){this.listeners.removeListener(e),this.layoutProcessors.removeListener(e)}dispatchPerformLayout(e,t){const i=this.layoutProcessors.reduceDispatch(e,({shrinkRect:s},n)=>[Object.assign(Object.assign({},n),{shrinkRect:s})],t);return i??t}dispatchLayoutComplete(e){this.listeners.dispatch("layout-complete",e)}}class k2{constructor(e){this.getSeries=e}}var Ze;(function(r){r[r.FULL=0]="FULL",r[r.PROCESS_DATA=1]="PROCESS_DATA",r[r.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",r[r.SERIES_UPDATE=3]="SERIES_UPDATE",r[r.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",r[r.SCENE_RENDER=5]="SCENE_RENDER",r[r.NONE=6]="NONE"})(Ze||(Ze={}));class V2{constructor(e){this.updateCallback=e}update(e=Ze.FULL,{forceNodeDataRefresh:t=!1}={}){this.updateCallback(e,{forceNodeDataRefresh:t})}}var H2=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class BP{constructor(){this.range="tooltip"}}H2([_(fP("tooltip","node"))],BP.prototype,"range",void 0);var No=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Is extends ve{constructor(){super({name:"markerLabelGroup"}),this.label=new be,this._marker=new zh,this._markerSize=15,this._spacing=8;const e=this.label;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=Rt.has.textMetrics?1:0,this.append([this.marker,e]),this.update()}set marker(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())}get marker(){return this._marker}set markerSize(e){this._markerSize!==e&&(this._markerSize=e,this.update())}get markerSize(){return this._markerSize}set spacing(e){this._spacing!==e&&(this._spacing=e,this.update())}get spacing(){return this._spacing}update(){const e=this.marker,t=this.markerSize;e.size=t,this.label.x=t/2+this.spacing}render(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(e)}}Is.className="MarkerLabel";No([ci("label")],Is.prototype,"text",void 0);No([ci("label")],Is.prototype,"fontStyle",void 0);No([ci("label")],Is.prototype,"fontWeight",void 0);No([ci("label")],Is.prototype,"fontSize",void 0);No([ci("label")],Is.prototype,"fontFamily",void 0);No([ci("label","fill")],Is.prototype,"color",void 0);No([ci("marker","fill")],Is.prototype,"markerFill",void 0);No([ci("marker","stroke")],Is.prototype,"markerStroke",void 0);No([ci("marker","strokeWidth")],Is.prototype,"markerStrokeWidth",void 0);No([ci("marker","fillOpacity")],Is.prototype,"markerFillOpacity",void 0);No([ci("marker","strokeOpacity")],Is.prototype,"markerStrokeOpacity",void 0);function B2({orientation:r,bboxes:e,maxHeight:t,maxWidth:i,itemPaddingY:s=0,itemPaddingX:n=0,forceResult:o=!1}){const a=r==="horizontal",l={max:a?i:t,fn:a?u=>u.width:u=>u.height,padding:a?n:s},c={max:a?t:i,fn:a?u=>u.height:u=>u.width,padding:a?s:n};let d=0;const h=[];for(;d<e.length;){const u=e.slice(d),p=W2(u,d,l,c,o);if(!p)return;d+=p.processedBBoxCount,h.push(p.pageIndices)}return j2(h,r,e,s,n)}function W2(r,e,t,i,s){let o=$2(r,t);if(o<1){if(!s)return;o=1}for(let a=o;a>=1;a--){const l=U2(r,e,a,t,i,s);if(l==null&&a<=1)return;if(l==null)continue;if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function U2(r,e,t,i,s,n){var o;const a=[];let l=0,c=0,d=[];const h=[];for(let u=0;u<r.length;u++){const p=(u+t)%t;p===0&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=i.fn(r[u])+i.padding;h[p]=Math.max((o=h[p])!==null&&o!==void 0?o:0,f),c=Math.max(c,s.fn(r[u])+s.padding);const g=l+c,m=!n||a.length>0;if(g>s.max&&m){d=[];break}if(h.reduce((C,y)=>C+y,0)>i.max&&!n)return h.length<t?h.length:void 0;d.push(u+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}function j2(r,e,t,i,s){let n=0,o=0;return{pages:r.map(l=>{e==="horizontal"&&(l=z2(l));let c=0;const d=l.map(p=>{const f=p.map(v=>(c=Math.max(v,c),t[v]));let g=0,m=0;return f.forEach(v=>{g+=v.height+i,m=Math.max(m,v.width+s)}),{indices:p,bboxes:f,columnHeight:g,columnWidth:m}});let h=0,u=0;return d.forEach(p=>{h+=p.columnWidth,u=Math.max(u,p.columnHeight)}),n=Math.max(h,n),o=Math.max(u,o),{columns:d,startIndex:l[0][0],endIndex:c,pageWidth:h,pageHeight:u}}),maxPageWidth:n,maxPageHeight:o}}function z2(r){const e=[];for(const t of r[0])e.push([]);return r.forEach((t,i)=>{t.forEach((s,n)=>{e[n][i]=s})}),e}function $2(r,e){const t=r.length;let i=0;for(let s=0;s<t;s++)if(i+=e.fn(r[s])+e.padding,i>e.max)return t/s<2?Math.ceil(t/2):s;return t}var mn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class rp{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}mn([_(_o)],rp.prototype,"color",void 0);mn([_(Fd)],rp.prototype,"fontStyle",void 0);mn([_(Nd)],rp.prototype,"fontWeight",void 0);mn([_(ce(0))],rp.prototype,"fontSize",void 0);mn([_(zi)],rp.prototype,"fontFamily",void 0);class ha{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}mn([_(ce(0))],ha.prototype,"size",void 0);mn([_(Ft)],ha.prototype,"fill",void 0);mn([_(ht(0,1))],ha.prototype,"fillOpacity",void 0);mn([_(Ft)],ha.prototype,"stroke",void 0);mn([_(ce(0))],ha.prototype,"strokeWidth",void 0);mn([_(ce(0,1))],ha.prototype,"strokeOpacity",void 0);class lE{constructor(){this.size=15,this._shape=da,this.padding=8}set shape(e){var t;this._shape=e,(t=this.parent)===null||t===void 0||t.onMarkerShapeChange()}get shape(){return this._shape}}mn([_(ce(0))],lE.prototype,"size",void 0);mn([_(ce(0))],lE.prototype,"padding",void 0);class WP{constructor(e,t,i,s){this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.interactionManager=i,this.cursorManager=s,this.id=La(this),this.group=new ve({name:"pagination"}),this.labelNode=new be,this.marker=new lE,this.activeStyle=new ha,this.inactiveStyle=new ha,this.highlightStyle=new ha,this.label=new rp,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new da,this._previousButton=new da;const{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=Rt.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",o=>this.onPaginationClick(o)),this.interactionManager.addListener("hover",o=>this.onPaginationMouseMove(o)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:o,fontSize:a,fontFamily:l}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=o,i.fontSize=a,i.fontFamily=l}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:o,highlightStyle:a,highlightActive:l}=this,c=(d,h)=>h?o:d===l?a:n;this.updateMarker(e,c("next",i)),this.updateMarker(t,c("previous",s))}updateMarker(e,t){var i;const{size:s}=this.marker;e.size=s,e.fill=t.fill,e.fillOpacity=(i=t.fillOpacity)!==null&&i!==void 0?i:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,s=e===t-1,n=e===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(e,t){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,t)}previousButtonContainsPoint(e,t){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,t)}onPaginationClick(e){const{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(t,i)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){const{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Ze.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=np(this.marker.shape||da);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Ze.SCENE_RENDER)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}}WP.className="Pagination";var kt=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const K2=["horizontal","vertical"],Y2=Ee((r,e)=>It(r,e,t=>K2.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class lc{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}kt([_(ht(0))],lc.prototype,"maxLength",void 0);kt([_(_o)],lc.prototype,"color",void 0);kt([_(Fd)],lc.prototype,"fontStyle",void 0);kt([_(Nd)],lc.prototype,"fontWeight",void 0);kt([_(ce(0))],lc.prototype,"fontSize",void 0);kt([_(zi)],lc.prototype,"fontFamily",void 0);kt([_(Lt)],lc.prototype,"formatter",void 0);class M0{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(e){var t;this._shape=e,(t=this.parent)===null||t===void 0||t.onMarkerShapeChange()}get shape(){return this._shape}}kt([_(ce(0))],M0.prototype,"size",void 0);kt([_(ce(0))],M0.prototype,"padding",void 0);kt([_(ce(0))],M0.prototype,"strokeWidth",void 0);class Jg{constructor(){this.marker=new M0,this.label=new lc,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}kt([_(ht(0))],Jg.prototype,"maxWidth",void 0);kt([_(ce(0))],Jg.prototype,"paddingX",void 0);kt([_(ce(0))],Jg.prototype,"paddingY",void 0);kt([_(gt)],Jg.prototype,"toggleSeriesVisible",void 0);class UP{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}kt([_(Lt)],UP.prototype,"legendItemClick",void 0);class Ha{constructor(e){this.ctx=e,this.id=La(this),this.group=new ve({name:"legend",layer:!0,zIndex:Bt.LEGEND_ZINDEX}),this.itemSelection=ut.select(this.group,Is),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new Jg,this.listeners=new UP,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new WP(s=>e.updateService.update(s),s=>this.updatePageNumber(s),e.interactionManager,e.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const t=[e.interactionManager.addListener("click",s=>this.checkLegendClick(s)),e.interactionManager.addListener("dblclick",s=>this.checkLegendDoubleClick(s)),e.interactionManager.addListener("hover",s=>this.handleLegendMouseMove(s))],i=[e.layoutService.addListener("start-layout",s=>this.positionLegend(s.shrinkRect))];this.destroyFns.push(...t.map(s=>()=>e.interactionManager.removeListener(s)),...i.map(s=>()=>e.layoutService.removeListener(s)),()=>this.detachLegend())}set data(e){this._data=e,this.updateGroupVisibility()}get data(){return this._data}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(e=>e())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,le.MINOR)}getCharacterWidths(e){const{characterWidths:t}=this;if(t.has(e))return t.get(e);const i={"...":Rt.getTextSize("...",e).width};return t.set(e,i),i}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.append(this.group)}detachLegend(){var e;(e=this.group.parent)===null||e===void 0||e.removeChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;return i?t.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}performLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:o,marker:{size:a,padding:l,shape:c},label:{maxLength:d=1/0,fontStyle:h,fontWeight:u,fontSize:p,fontFamily:f}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const m=[],v=nd(n),y=o??e*.8,R=a+l+i;if(this.itemSelection.each((I,H)=>{var B;const X=np(c??H.marker.shape);I.marker&&I.marker instanceof X||(I.marker=new X),I.markerSize=a,I.spacing=l,I.fontStyle=h,I.fontWeight=u,I.fontSize=p,I.fontFamily=f;const J=(B=H.itemId)!==null&&B!==void 0?B:H.id,Y=this.getItemLabel(H),ae=(Y??"<unknown>").replace(/\r?\n/g," ");I.text=this.truncate(ae,d,y,R,v,J),m.push(I.computeBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return!1;const b=this.size,w=this.oldSize;b[0]=e,b[1]=t,(b[0]!==w[0]||b[1]!==w[1])&&(w[0]=b[0],w[1]=b[1]);const{pages:x,maxPageHeight:O,maxPageWidth:M}=this.updatePagination(m,e,t);this.pages=x,this.maxPageSize=[M-i,O-s];const N=this.pagination.currentPage,V=this.pages[N];if(this.pages.length<1||!V){this.visible=!1;return}this.visible=!0,this.updatePositions(N),this.update()}truncate(e,t,i,s,n,o){const a="...",l=e.split("");let c=!1;if(e.length>t&&(e=`${e.substring(0,t)}`,c=!0),Math.floor(s+Rt.getTextSize(e,n).width)>i){let h="";const u=this.getCharacterWidths(n);let p=s+u[a];for(const f of l){if(u[f]||(u[f]=Rt.getTextSize(f,n).width),p+=u[f],p>i)break;h+=f}e=h,c=!0}return c?(e+=a,this.truncatedItems.add(o)):this.truncatedItems.delete(o),e}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:a,maxPageWidth:l,paginationBBox:c,paginationVertical:d}=this.calculatePagination(e,t,i),h=o.findIndex(y=>y.endIndex>=n);this.pagination.currentPage=Math.min(Math.max(h,0),o.length-1);const{paddingX:u,paddingY:p}=this.item,f=8,g=l-u,m=a-p;let v=0,C=-c.y-this.item.marker.size/2;return d?C+=m+f:(v+=-c.x+g+f,C+=(m-c.height)/2),this.pagination.translationX=v,this.pagination.translationY=C,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:a,maxPageWidth:l,pages:o}}calculatePagination(e,t,i){var s,n,o;const{paddingX:a,paddingY:l}=this.item,c=this.getOrientation(),d=["left","right"].includes(this.position);let h=this.pagination.computeBBox(),u=new qe(0,0,0,0),p=[],f=0,g=0,m=0;const v=y=>{const{width:R,height:b}=y;return R===h.width&&b===h.height},C=this.maxWidth!==void 0||this.maxHeight!==void 0;do{if(m++>10){ge.warn("unable to find stable legend layout.");break}h=u;const y=t-(d?0:h.width),R=i-(d?h.height:0),b=B2({orientation:c,bboxes:e,maxHeight:R,maxWidth:y,itemPaddingY:l,itemPaddingX:a,forceResult:C});p=(s=b==null?void 0:b.pages)!==null&&s!==void 0?s:[],f=(n=b==null?void 0:b.maxPageWidth)!==null&&n!==void 0?n:0,g=(o=b==null?void 0:b.maxPageHeight)!==null&&o!==void 0?o:0;const w=p.length;if(this.pagination.visible=w>1,this.pagination.totalPages=w,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:f,maxPageHeight:g,pages:p,paginationBBox:h,paginationVertical:d}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:o,endIndex:a}=s[e];let l=0,c=0;const d=n.length,h=n[0].indices.length,u=this.getOrientation()==="horizontal",p=n[0].bboxes[0].height+t,f=[];i.each((g,m,v)=>{var C,y;if(v<o||v>a){g.visible=!1;return}const R=v-o;let b=0,w=0;u?(b=R%d,w=Math.floor(R/d)):(b=Math.floor(R/h),w=R%h),g.visible=!0;const x=n[b];x&&(c=p*w,l=(C=f[w])!==null&&C!==void 0?C:0,f[w]=((y=f[w])!==null&&y!==void 0?y:0)+x.columnWidth,g.translationX=Math.floor(l),g.translationY=Math.floor(c))})}updatePageNumber(e){const{pages:t}=this,{startIndex:i,endIndex:s}=t[e];i===0?this.paginationTrackingIndex=0:e===t.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.ctx.updateService.update(Ze.SCENE_RENDER)}update(){const{marker:{strokeWidth:e},label:{color:t}}=this.item;this.itemSelection.each((i,s)=>{const n=s.marker;i.markerFill=n.fill,i.markerStroke=n.stroke,i.markerStrokeWidth=e,i.markerFillOpacity=n.fillOpacity,i.markerStrokeOpacity=n.strokeOpacity,i.opacity=s.enabled?1:.5,i.color=t})}getDatumForPoint(e,t){const i=[],s={dist:1/0,datum:void 0};for(const o of this.group.children){if(!o.visible||!(o instanceof Is))continue;const a=o.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(e,t))return o.datum;const l=e-a.x-this.item.paddingX/2,c=t-a.y-this.item.paddingY/2,d=Math.pow(l,2)+Math.pow(c,2);l>=0&&c>=0&&d<s.dist&&(s.dist=d,s.datum=o.datum),i.push(a)}if(qe.merge(i).containsPoint(e,t))return s.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const e=this.group.computeBBox();if(this.pages.length<=1)return e;const[t,i]=this.maxPageSize;return e.height=Math.max(i,e.height),e.width=Math.max(t,e.width),e}checkLegendClick(e){const{listeners:{legendItemClick:t},ctx:{dataService:i,highlightManager:s},item:{toggleSeriesVisible:n}}=this,{offsetX:o,offsetY:a}=e,l=this.computeBBox(),c=this.group.visible&&l.containsPoint(o,a),d=this.getDatumForPoint(o,a);if(!c||!d)return;const{id:h,itemId:u,enabled:p}=d,g=i.getSeries().find(v=>v.id===h);if(!g)return;e.consume();let m=p;n&&(m=!p,this.ctx.chartEventManager.legendItemClick(g,u,m)),m?s.updateHighlight(this.id,{series:g,itemId:u,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(Ze.PROCESS_DATA,{forceNodeDataRefresh:!0}),t==null||t({type:"click",enabled:m,itemId:u,seriesId:g.id})}checkLegendDoubleClick(e){var t;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:s},item:{toggleSeriesVisible:n}}=this,{offsetX:o,offsetY:a}=e;if(this.ctx.mode==="integrated")return;const l=this.computeBBox(),c=this.group.visible&&l.containsPoint(o,a),d=this.getDatumForPoint(o,a);if(!c||!d)return;const{id:h,itemId:u,seriesId:p}=d,f=s.getSeries(),g=f.find(m=>m.id===h);if(g){if(e.consume(),n){const m=f.reduce((y,R)=>[...y,...R.getLegendData().filter(b=>b.legendType==="category")],[]),v={};m.forEach(y=>{var R,b;(R=v[b=y.seriesId])!==null&&R!==void 0||(v[b]=0),y.enabled&&v[y.seriesId]++});const C=m.find(y=>y.itemId===u&&y.seriesId===p);this.ctx.chartEventManager.legendItemDoubleClick(g,u,(t=C==null?void 0:C.enabled)!==null&&t!==void 0?t:!1,v)}this.ctx.updateService.update(Ze.PROCESS_DATA,{forceNodeDataRefresh:!0}),i==null||i({type:"dblclick",enabled:!0,itemId:u,seriesId:g.id})}}handleLegendMouseMove(e){var t;const{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;const o=this.computeBBox(),{pageX:a,pageY:l,offsetX:c,offsetY:d}=e,h=this.group.visible&&o.containsPoint(c,d);if(!h){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id);return}e.consume();const u=this.getDatumForPoint(c,d);if(!(h&&u!==void 0)){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}const f=u?this.ctx.dataService.getSeries().find(g=>g.id===(u==null?void 0:u.id)):void 0;if(u&&this.truncatedItems.has((t=u.itemId)!==null&&t!==void 0?t:u.id)){const g=this.getItemLabel(u);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:l,offsetX:c,offsetY:d,event:e,showArrow:!1},Gi({content:g}))}else this.ctx.tooltipManager.removeTooltip(this.id);(s||n.legendItemClick!=null||n.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),u!=null&&u.enabled&&f?this.ctx.highlightManager.updateHighlight(this.id,{series:f,itemId:u==null?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(e){const t=e.clone();if(!this.enabled||!this.data.length)return{shrinkRect:t};const[i,s]=this.calculateLegendDimensions(e);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,s);const n=this.computePagedBBox(),o=()=>{switch(this.position){case"top":return 0;case"bottom":return e.height-n.height;case"left":return 0;case"right":default:return e.width-n.width}};if(this.visible){let a,l;switch(this.position){case"top":case"bottom":a=(e.width-n.width)/2,l=o(),t.shrink(n.height,this.position);break;case"left":case"right":default:a=o(),l=(e.height-n.height)/2,t.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+e.x+a),this.group.translationY=Math.floor(-n.y+e.y+l)}if(this.visible&&this.enabled&&this.data.length){const a=this.spacing;t.shrink(a,this.position);const l=n.clone();l.x+=this.group.translationX,l.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,l)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:t}}calculateLegendDimensions(e){const{width:t,height:i}=e,s=t/i,n=.5,o=.2,a=.25;let l=0,c=0;switch(this.position){case"top":case"bottom":const d=s<1?Math.min(n,o*(1/s)):o;l=this.maxWidth?Math.min(this.maxWidth,t):t,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*d);break;case"left":case"right":default:const h=s>1?Math.min(n,a*s):a;l=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*h),c=this.maxHeight?Math.min(this.maxHeight,i):i}return[l,c]}}Ha.className="Legend";kt([_(gt)],Ha.prototype,"_enabled",void 0);kt([_(gP)],Ha.prototype,"position",void 0);kt([_(ht(0))],Ha.prototype,"maxWidth",void 0);kt([_(ht(0))],Ha.prototype,"maxHeight",void 0);kt([_(Pr)],Ha.prototype,"reverseOrder",void 0);kt([_(Y2)],Ha.prototype,"orientation",void 0);kt([_(ce(0))],Ha.prototype,"spacing",void 0);const Uv={category:Ha};function X2(r,e){if(Uv[r])throw new Error(`AG Charts - already registered legend type: ${r}`);Uv[r]=e}function q2(r,e){if(Uv[r])return new Uv[r](e);throw new Error(`AG Charts - unknown legend type: ${r}`)}class Z2{constructor(){this.cache=new Map}call(e,...t){let i,s=this.cache.get(e);const n=()=>{try{const o=e(...t);return s&&i!=null&&s.set(i,o),o}catch(o){ge.warnOnce("User callback errored, ignoring",o);return}};try{i=JSON.stringify(t)}catch{return n()}return s==null&&(s=new Map,this.cache.set(e,s)),s.has(i)?s.get(i):n()}invalidateCache(){this.cache=new Map}}var Ba=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Xa=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class Qn extends lP{constructor(e=window.document,t,i){var s;super(),this.id=La(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new ve({name:`${this.id}-Series-root`}),this.extraDebugStats={},this._container=void 0,this.data=[],this.padding=new El(20),this.seriesAreaPadding=new El(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=Ze.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=NB(({count:c})=>Xa(this,void 0,void 0,function*(){if(!this._destroyed)try{yield this.performUpdate(c)}catch(d){this._lastPerformUpdateError=d,ge.error("update error",d)}})),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=FB(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=c=>{const d=Object.assign(Object.assign({},c),{type:"seriesNodeClick"});Object.defineProperty(d,"series",{enumerable:!1,get:()=>c.series}),this.fireEvent(d)},this.onSeriesNodeDoubleClick=c=>{const d=Object.assign(Object.assign({},c),{type:"seriesNodeDoubleClick"});this.fireEvent(d)};const n=i==null?void 0:i.scene,o=(s=i==null?void 0:i.element)!==null&&s!==void 0?s:e.createElement("div"),a=i==null?void 0:i.container,l=new ve({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGroup=new ve({name:"Axes",layer:!0,zIndex:Bt.AXIS_ZINDEX}),l.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=n??new v0({document:e,overrideDevicePixelRatio:t}),this.debug=!1,this.scene.debug.consoleLog=!1,this.scene.root=l,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new D2,this.cursorManager=new T2(o),this.highlightManager=new A2,this.interactionManager=new rl(o),this.zoomManager=new L2,this.dataService=new k2(()=>this.series),this.layoutService=new G2,this.updateService=new V2((c=Ze.FULL,{forceNodeDataRefresh:d})=>this.update(c,{forceNodeDataRefresh:d})),this.callbackCache=new Z2,this.animationManager=new R2(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new xo(this.scene.canvas.element,e,e.body),this.tooltipManager=new _2(this.tooltip,this.interactionManager),this.overlays=new w2(this.element),this.highlight=new BP,this.container=a,Vv.observe(this.element,c=>{var d;const{width:h,height:u}=c;if(!this.autoSize||h===0&&u===0)return;const[p=0,f=0]=(d=this._lastAutoSize)!==null&&d!==void 0?d:[];p===h&&f===u||(this._lastAutoSize=[h,u],this.resize())}),this.layoutService.addListener("start-layout",c=>this.positionPadding(c.shrinkRect)),this.layoutService.addListener("start-layout",c=>this.positionCaptions(c.shrinkRect)),this.interactionManager.addListener("click",c=>this.onClick(c)),this.interactionManager.addListener("dblclick",c=>this.onDoubleClick(c)),this.interactionManager.addListener("hover",c=>this.onMouseMove(c)),this.interactionManager.addListener("leave",c=>this.onLeave(c)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",c=>{this.update(Ze.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",c=>this.changeHighlightDatum(c)),this.zoomManager.addListener("zoom-change",c=>this.update(Ze.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var e;const{queuedUserOptions:t}=this,i=(e=t[t.length-1])!==null&&e!==void 0?e:this.userOptions;return Gt([i])}set container(e){if(this._container!==e){const{parentNode:t}=this.element;t!=null&&t.removeChild(this.element),e&&!this.destroyed&&e.appendChild(this.element),this._container=e}}get container(){return this._container}autoSizeChanged(e){const{style:t}=this.element;if(e){if(t.display="block",t.width="100%",t.height="100%",!this._lastAutoSize)return;this.resize()}else t.display="inline-block",t.width="auto",t.height="auto"}download(e,t){this.scene.download(e,t)}get destroyed(){return this._destroyed}addModule(e){if(this.modules[e.optionsKey]!=null)throw new Error("AG Charts - module already initialised: "+e.optionsKey);const t=new e.instanceConstructor(this.getModuleContext());this.modules[e.optionsKey]={instance:t},this[e.optionsKey]=t}removeModule(e){var t,i;(i=(t=this.modules[e.optionsKey])===null||t===void 0?void 0:t.instance)===null||i===void 0||i.destroy(),delete this.modules[e.optionsKey],delete this[e.optionsKey]}isModuleEnabled(e){return this.modules[e.optionsKey]!=null}getModuleContext(){const{scene:e,animationManager:t,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:o,tooltipManager:a,zoomManager:l,dataService:c,layoutService:d,updateService:h,mode:u,callbackCache:p}=this;return{scene:e,animationManager:t,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:o,tooltipManager:a,zoomManager:l,dataService:c,layoutService:d,updateService:h,mode:u,callbackCache:p}}destroy(e){var t;if(this._destroyed)return;const i=e==null?void 0:e.keepTransferableResources;let s;this._performUpdateType=Ze.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),(t=this.legend)===null||t===void 0||t.destroy(),this.overlays.noData.hide(),Vv.unobserve(this.element);for(const[n,o]of Object.entries(this.modules))o.instance.destroy(),delete this.modules[n],delete this[n];return this.interactionManager.destroy(),i?(this.scene.strip(),s={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.series.forEach(n=>n.destroy()),this.series=[],this.axes.forEach(n=>n.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,s}log(e){this.debug&&ge.debug(e)}disablePointer(e=!1){e||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(e){const t=this._pendingFactoryUpdates,i=t.length;i===0?(t.push(e),this._processCallbacks().catch(s=>ge.errorOnce(s))):t.splice(1,i-1,e)}_processCallbacks(){return Xa(this,void 0,void 0,function*(){const e=this._pendingFactoryUpdates;for(;e.length>0;){if(this.updatePending){yield nR(1);continue}try{yield e[0](),this.callbackCache.invalidateCache()}catch(t){ge.error("update error",t)}e.shift()}})}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==Ze.NONE||this.lastInteractionEvent!=null}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return Xa(this,void 0,void 0,function*(){yield this.performUpdateTrigger.await()})}update(e=Ze.FULL,t){const{forceNodeDataRefresh:i=!1,seriesToUpdate:s=this.series}=t??{};i&&this.series.forEach(n=>n.markNodeDataDirty());for(const n of s)this.seriesToUpdate.add(n);e<this._performUpdateType&&(this._performUpdateType=e,this.performUpdateTrigger.schedule())}performUpdate(e){var t;return Xa(this,void 0,void 0,function*(){const{_performUpdateType:i,extraDebugStats:s}=this,n=[performance.now()];switch(i){case Ze.FULL:case Ze.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),n.push(performance.now());case Ze.PERFORM_LAYOUT:if(this.autoSize&&!this._lastAutoSize&&this._performUpdateNoRenderCount++<5){this._performUpdateType=Ze.PERFORM_LAYOUT,this.performUpdateTrigger.schedule();break}this._performUpdateNoRenderCount=0,yield this.performLayout(),this.handleOverlays(),n.push(performance.now());case Ze.SERIES_UPDATE:const{seriesRect:a}=this,l=[...this.seriesToUpdate].map(d=>d.update({seriesRect:a}));this.seriesToUpdate.clear(),yield Promise.all(l),n.push(performance.now());case Ze.TOOLTIP_RECALCULATION:const c=this.tooltipManager.getTooltipMeta(this.id);i<Ze.SERIES_UPDATE&&((t=c==null?void 0:c.event)===null||t===void 0?void 0:t.type)==="hover"&&this.handlePointer(c.event);case Ze.SCENE_RENDER:yield this.scene.render({debugSplitTimes:n,extraDebugStats:s}),this.extraDebugStats={};case Ze.NONE:this._performUpdateType=Ze.NONE}const o=performance.now();this.log({chart:this,durationMs:Math.round((o-n[0])*100)/100,count:e,performUpdateType:Ze[i]})})}set axes(e){const t=new Set;this._axes.forEach(i=>{i.detachAxis(this.axisGroup),t.add(i)}),this._axes=e.filter(i=>!i.linkedTo).concat(e.filter(i=>i.linkedTo)),this._axes.forEach(i=>{i.attachAxis(this.axisGroup),t.delete(i)}),t.forEach(i=>i.destroy())}get axes(){return this._axes}set series(e){this.removeAllSeries(),e.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(e,t){const{series:i,seriesRoot:s}=this;if(i.indexOf(e)<0){const o=t?i.indexOf(t):-1;return o>=0?(i.splice(o,0,e),s.insertBefore(e.rootGroup,t.rootGroup)):(i.push(e),s.append(e.rootGroup)),this.initSeries(e),!0}return!1}initSeries(e){e.chart=this,e.highlightManager=this.highlightManager,e.animationManager=this.animationManager,e.data||(e.data=this.data),this.addSeriesListeners(e),e.chartEventManager=this.chartEventManager,e.addChartEventListeners()}freeSeries(e){e.chart=void 0,e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}removeAllSeries(){this.series.forEach(e=>{this.freeSeries(e),this.seriesRoot.removeChild(e.rootGroup)}),this._series=[]}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(e)})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(t=>(e.direction===ye.X?t.xAxis:t.yAxis)===e)})}assignAxesToSeries(e=!1){const t={};this.axes.forEach(i=>{var s;const n=i.direction;((s=t[n])!==null&&s!==void 0?s:t[n]=[]).push(i)}),this.series.forEach(i=>{i.directions.forEach(s=>{if((s===ye.X?i.xAxis:i.yAxis)&&!e)return;const o=t[s];if(!o){ge.warn(`no available axis for direction [${s}]; check series and axes configuration.`);return}const a=i.getKeys(s),l=this.findMatchingAxis(o,i.getKeys(s));if(!l){ge.warn(`no matching axis for direction [${s}] and keys [${a}]; check series and axes configuration.`);return}s===ye.X?i.xAxis=l:i.yAxis=l})})}findMatchingAxis(e,t){for(const i of e){const s=i.keys;if(!s.length)return i;if(t){for(const n of t)if(s.indexOf(n)>=0)return i}}}resize(e,t){var i,s,n,o;e??(e=(i=this.width)!==null&&i!==void 0?i:this.autoSize?(s=this._lastAutoSize)===null||s===void 0?void 0:s[0]:this.scene.canvas.width),t??(t=(n=this.height)!==null&&n!==void 0?n:this.autoSize?(o=this._lastAutoSize)===null||o===void 0?void 0:o[1]:this.scene.canvas.height),!(!e||!t||!Number.isFinite(e)||!Number.isFinite(t))&&this.scene.resize(e,t)&&(this.disablePointer(),this.update(Ze.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return Xa(this,void 0,void 0,function*(){(this.axes.length>0||this.series.some(e=>e instanceof op))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),yield Promise.all(this.series.map(e=>e.processData())),yield this.updateLegend()})}placeLabels(){const e=[],t=[];for(const n of this.series){if(!n.visible)continue;const o=n.getLabelData();o&&MB(o[0])&&(t.push(o),e.push(n))}const{seriesRect:i}=this,s=i&&t.length>0?_B(t,{x:0,y:0,width:i.width,height:i.height}):[];return new Map(s.map((n,o)=>[e[o],n]))}attachLegend(e){var t;if(this.legendType===e)return;(t=this.legend)===null||t===void 0||t.destroy(),this.legend=void 0;const i=this.getModuleContext();this.legend=q2(e,i),this.legend.attachLegend(this.scene.root),this.legendType=e}setLegendInit(e){this.applyLegendOptions=e}updateLegend(){var e;return Xa(this,void 0,void 0,function*(){const t=[];this.series.filter(s=>s.showInLegend).forEach(s=>{const n=s.getLegendData();t.push(...n)});const i=t.length>0?t[0].legendType:"category";this.attachLegend(i),(e=this.applyLegendOptions)===null||e===void 0||e.call(this,this.legend),i==="category"&&this.validateLegendData(t),this.legend.data=t})}validateLegendData(e){const t={};e.forEach(i=>{var s,n,o,a,l;const c=(s=this.series.find(h=>h.id===i.seriesId))===null||s===void 0?void 0:s.type;if(!c)return;const d=i;(n=t[c])!==null&&n!==void 0||(t[c]={[d.label.text]:new Set}),(o=(a=t[c])[l=d.label.text])!==null&&o!==void 0||(a[l]=new Set),d.marker.fill!=null&&t[c][d.label.text].add(d.marker.fill)}),Object.keys(t).forEach(i=>{Object.keys(t[i]).forEach(s=>{t[i][s].size>1&&ge.warnOnce(`legend item '${s}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return Xa(this,void 0,void 0,function*(){this.scene.root.visible=!0;const{scene:{width:e,height:t}}=this;let i=new qe(0,0,e,t);return{shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i}),{shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i}),i})}positionPadding(e){const{padding:t}=this;return e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),{shrinkRect:e}}positionCaptions(e){var t;const{title:i,subtitle:s,footnote:n}=this,o=e.clone(),a=d=>{var h;const u=e.height/10,p=(h=d.lineHeight)!==null&&h!==void 0?h:d.fontSize*be.defaultLineHeightRatio,f=e.width,g=Math.max(p,u);d.computeTextWrap(f,g)},l=d=>{var h;const u=o.y;d.node.x=o.x+o.width/2,d.node.y=u,d.node.textBaseline="top",a(d);const p=d.node.computeBBox(),f=Math.ceil(p.y-u+p.height+((h=d.spacing)!==null&&h!==void 0?h:0));o.shrink(f,"top")},c=d=>{var h;const u=o.y+o.height;d.node.x=o.x+o.width/2,d.node.y=u,d.node.textBaseline="bottom",a(d);const p=d.node.computeBBox(),f=Math.ceil(u-p.y+((h=d.spacing)!==null&&h!==void 0?h:0));o.shrink(f,"bottom")};return i&&(i.node.visible=i.enabled,i.node.visible&&l(i)),s&&(s.node.visible=(t=(i==null?void 0:i.enabled)&&s.enabled)!==null&&t!==void 0?t:!1,s.node.visible&&l(s)),n&&(n.node.visible=n.enabled,n.node.visible&&c(n)),{shrinkRect:o}}getSeriesRect(){return this.seriesRect}pickSeriesNode(e,t,i){var s,n;const o=performance.now(),a=t?[si.EXACT_SHAPE_MATCH]:void 0,l=[...this.series].reverse();let c;for(const d of l){if(!d.visible||!d.rootGroup.visible)continue;const{match:h,distance:u}=(s=d.pickNode(e,a))!==null&&s!==void 0?s:{};if(!(!h||u==null)&&((!c||c.distance>u)&&u<=(i??1/0)&&(c={series:d,distance:u,datum:h}),u===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((n=this.extraDebugStats.pickSeriesNode)!==null&&n!==void 0?n:0)+(performance.now()-o)),c}onMouseMove(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(Ze.SCENE_RENDER)}onLeave(e){this.tooltip.pointerLeftOntoTooltip(e)||this.disablePointer()}handlePointer(e){const{lastPick:t,hoverRect:i}=this,{offsetX:s,offsetY:n}=e,o=(a=!1)=>{t&&this.disablePointer(a)};if(!(i!=null&&i.containsPoint(s,n))){o();return}this.handlePointerTooltip(e,o),this.handlePointerNode(e)}handlePointerTooltip(e,t){var i,s;const{lastPick:n,tooltip:o}=this,{range:a}=o,{pageX:l,pageY:c,offsetX:d,offsetY:h}=e;let u;typeof a=="number"&&Number.isFinite(a)&&(u=a);const p=this.pickSeriesNode({x:d,y:h},a==="exact",u);if(!p){this.tooltipManager.updateTooltip(this.id),this.highlight.range==="tooltip"&&t(!0);return}const f=this.highlight.range==="node"||!n||n.datum!==p.datum;let g;f?(g=p.series.getTooltipHtml(p.datum),this.highlight.range==="tooltip"&&this.highlightManager.updateHighlight(this.id,p.datum)):n&&(n.event=e.sourceEvent);const m=u!=null,v=this.tooltip.enabled&&p.series.tooltip.enabled,C=a==="exact"&&p.distance===0,R=v&&(a==="nearest"||m||C)&&(!f||g!==void 0),b={xOffset:p.datum.series.tooltip.position.xOffset,yOffset:p.datum.series.tooltip.position.yOffset},w=this.mergePointerDatum({pageX:l,pageY:c,offsetX:d,offsetY:h,event:e,showArrow:p.series.tooltip.showArrow,position:b},p.datum);w.enableInteraction=(s=(i=p.series.tooltip.interaction)===null||i===void 0?void 0:i.enabled)!==null&&s!==void 0?s:!1,R&&this.tooltipManager.updateTooltip(this.id,w,g)}handlePointerNode(e){this.checkSeriesNodeRange(e,(i,s)=>{(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id,s)})||(this.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id))}onClick(e){if(this.checkSeriesNodeClick(e)){this.update(Ze.SERIES_UPDATE);return}this.fireEvent({type:"click",event:e.sourceEvent})}onDoubleClick(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(Ze.SERIES_UPDATE);return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})}checkSeriesNodeClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeClickEvent(e.sourceEvent,i))}checkSeriesNodeDoubleClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeDoubleClickEvent(e.sourceEvent,i))}checkSeriesNodeRange(e,t){const i=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),s=i==null?void 0:i.datum,n=s==null?void 0:s.series.nodeClickRange;if(s&&n==="nearest")return t(s.series,s),!0;let o;typeof n=="number"&&Number.isFinite(n)&&(o=n);const a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},n==="exact",o);if(!a)return!1;const l=o!=null,c=n==="exact"&&a.distance===0;return l||c?(t(a.series,a.datum),!0):!1}mergePointerDatum(e,t){const{type:i}=t.series.tooltip.position;if(i==="node"&&t.nodeMidPoint){const{x:s,y:n}=t.nodeMidPoint,{canvas:o}=this.scene,a=t.series.rootGroup.inverseTransformPoint(s,n),l=o.element.getBoundingClientRect();return Object.assign(Object.assign({},e),{pageX:Math.round(l.left+window.scrollX+a.x),pageY:Math.round(l.top+window.scrollY+a.y),offsetX:Math.round(a.x),offsetY:Math.round(a.y)})}return e}changeHighlightDatum(e){var t,i;const s=new Set,{series:n=void 0,datum:o}=(t=e.currentHighlight)!==null&&t!==void 0?t:{},{series:a=void 0,datum:l}=(i=e.previousHighlight)!==null&&i!==void 0?i:{};a&&s.add(a),n&&s.add(n),a!=null&&a.cursor&&l&&this.cursorManager.updateCursor(a.id),n!=null&&n.cursor&&o&&this.cursorManager.updateCursor(n.id,n.cursor),this.lastPick=e.currentHighlight?{datum:e.currentHighlight}:void 0,n==null||a==null?this.update(Ze.SERIES_UPDATE):this.update(Ze.SERIES_UPDATE,{seriesToUpdate:s})}waitForUpdate(e=5e3){return Xa(this,void 0,void 0,function*(){const t=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-t>e)throw new Error("waitForUpdate() timeout reached.");yield nR(5)}yield this.awaitUpdateCompletion()})}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const e=!this.series.some(i=>i.hasData()),t=this.getSeriesRect();e&&t?this.overlays.noData.show(t):this.overlays.noData.hide()}}Ba([rc({newValue(r){this.scene.debug.consoleLog=r}})],Qn.prototype,"debug",void 0);Ba([rc({newValue(r){var e;(e=this.series)===null||e===void 0||e.forEach(t=>t.data=r)}})],Qn.prototype,"data",void 0);Ba([rc({newValue(r){this.resize(r)}})],Qn.prototype,"width",void 0);Ba([rc({newValue(r){this.resize(void 0,r)}})],Qn.prototype,"height",void 0);Ba([rc({changeValue(r){this.autoSizeChanged(r)}}),_(gt)],Qn.prototype,"autoSize",void 0);Ba([rc({newValue(r){var e;(e=this.scene.root)===null||e===void 0||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)===null||e===void 0||e.removeChild(r.node)}})],Qn.prototype,"title",void 0);Ba([rc({newValue(r){var e;(e=this.scene.root)===null||e===void 0||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)===null||e===void 0||e.removeChild(r.node)}})],Qn.prototype,"subtitle",void 0);Ba([rc({newValue(r){var e;(e=this.scene.root)===null||e===void 0||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)===null||e===void 0||e.removeChild(r.node)}})],Qn.prototype,"footnote",void 0);Ba([_(fP("standalone","integrated"))],Qn.prototype,"mode",void 0);class jP{constructor(e="",t,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=e,this.parent=t,this.depth=t?t.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((e,t)=>t!==this.number):[]}}function J2(r,e=!0){const t=new jP;let i=0;return e&&r.forEach(s=>i=Math.max(i,s.labels.length)),r.forEach(s=>{if(e)for(;s.labels.length<i;)s.labels.unshift("");Q2(t,s)}),t}function Q2(r,e){const t=e.labels.slice().reverse(),i=t.length-1;t.forEach((s,n)=>{const o=r.children,a=o.find(c=>c.label===s),l=n!==i;if(a&&l)r=a;else{const c=new jP(s,r);c.number=o.length,o.push(c),l&&(r=c)}})}function e3(r,e,t){const i=e.number-r.number,s=t/i;e.change-=s,e.shift+=t,r.change+=s,e.prelim+=t,e.mod+=t}function t3(r,e,t){return e.getSiblings().indexOf(r.ancestor)>=0?r.ancestor:t}function i3(r){const e=r.children;if(e){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}function s3(r,e,t){const i=r.getLeftSibling();if(i){let s=r,n=r,o=i,a=n.getLeftmostSibling(),l=n.mod,c=s.mod,d=o.mod,h=a.mod;for(;o.nextRight()&&n.nextLeft();){o=o.nextRight(),n=n.nextLeft(),a=a.nextLeft(),s=s.nextRight(),s.ancestor=r;const u=o.prelim+d-(n.prelim+l)+t;u>0&&(e3(t3(o,r,e),r,u),l+=u,c+=u),d+=o.mod,l+=n.mod,h+=a.mod,c+=s.mod}o.nextRight()&&!s.nextRight()?(s.thread=o.nextRight(),s.mod+=d-c):(n.nextLeft()&&!a.nextLeft()&&(a.thread=n.nextLeft(),a.mod+=l-h),e=r)}return e}function zP(r,e){const t=r.children;if(t.length){let i=t[0];t.forEach(o=>{zP(o,e),i=s3(o,i,e)}),i3(r);const s=(t[0].prelim+t[t.length-1].prelim)/2,n=r.getLeftSibling();n?(r.prelim=n.prelim+e,r.mod=r.prelim-s):r.prelim=s}else{const i=r.getLeftSibling();r.prelim=i?i.prelim+e:0}}class aR{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){const{x:i,y:s}=t(e);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}}function $P(r,e,t){r.x=r.prelim+e,r.y=r.depth,t.update(r),r.children.forEach(i=>$P(i,e+r.mod,t))}function KP(r){const e=r.children;let t=0;e.forEach(i=>{KP(i),i.children.length?t+=i.leafCount:t++}),r.leafCount=t,e.length?(r.subtreeLeft=e[0].subtreeLeft,r.subtreeRight=e[r.children.length-1].subtreeRight,r.x=(r.subtreeLeft+r.subtreeRight)/2):(r.subtreeLeft=r.x,r.subtreeRight=r.x)}function n3(r){const e=new o3;return zP(r,1),$P(r,-r.prelim,e),KP(r),e}class o3{constructor(){this.dimensions=new aR,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(e){this.dimensions.update(e,t=>({x:t.x,y:t.y})),e.children.length?this.nonLeafNodes.push(e):(this.leafCount++,this.leafNodes.push(e)),e.depth>this.depth&&(this.depth=e.depth),this.nodes.push(e)}resize(e,t,i=0,s=0,n=!1){const o=this.leafCount-1,a=this.depth,l=this.dimensions;let c=1,d=1;if(e>0&&o){const f=(l.right-l.left)/o;c=e/o/f,n&&(c=-c)}if(t>0&&a){const f=(l.bottom-l.top)/a;d=t/a/f}const h=new aR;this.nodes.forEach(f=>{f.screenX=f.x*c,f.screenY=f.y*d,h.update(f,g=>({x:g.screenX,y:g.screenY}))});const u=-h.left,p=-h.top;this.nodes.forEach(f=>{f.screenX+=u+i,f.screenY+=p+s})}}var YP=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class XP extends qt{constructor(){super(...arguments),this.grid=!1}}YP([_(gt)],XP.prototype,"grid",void 0);class ad extends ip{constructor(e){super(e,new Ro),this.tickScale=new Ro,this.translation={x:0,y:0},this.line=new T0,this.label=new XP,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:t,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:o}=this;o.paddingOuter=.1,o.paddingInner=o.paddingOuter*2,this.range=o.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=ut.select(s,xt),this.axisLineSelection=ut.select(t,xt),this.separatorSelection=ut.select(t,xt),this.labelSelection=ut.select(i,be)}updateRange(){const{range:e,visibleRange:t,scale:i}=this,s=(e[1]-e[0])/(t[1]-t[0]),n=s*t[0],o=e[0]-n;this.tickScale.range=i.range=[o,o+s],this.resizeTickTree()}resizeTickTree(){var e;const t=this.scale,i=t.domain.length?[t.convert(t.domain[0]),t.convert(t.domain[t.domain.length-1])]:t.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+((e=t.bandwidth)!==null&&e!==void 0?e:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return this.label.fontSize*1.5}set gridLength(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=e}get gridLength(){return this._gridLength}calculateDomain(){var e;const{direction:t,boundSeries:i}=this,s=[];let n;i.filter(l=>l.visible).forEach(l=>{if(t===ye.X)if(n===void 0){const c=l.getDomain(t);s.push(c),n=typeof c[0]=="number"}else n&&s.push(l.getDomain(t));else s.push(l.getDomain(t))});const o=new Array().concat(...s),a=(e=Ir(o))!==null&&e!==void 0?e:o;this.dataDomain=this.normaliseDataDomain(a),this.scale.domain=this.dataDomain}normaliseDataDomain(e){const t=e.filter((n,o,a)=>a.indexOf(n)===o),i=J2(t);this.tickTreeLayout=n3(i);const s=t.slice();return s.push(""),this.tickScale.domain=s,this.resizeTickTree(),t}update(e){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:i,label:{parallel:s},moduleCtx:{callbackCache:n},tickScale:o,range:a,title:l,title:{formatter:c=L=>L.defaultValue}={},_titleCaption:d}=this,h=t.range[0],u=t.range[1],f=Math.abs(u-h)/t.domain.length||0,g=Zs(this.rotation),m=Math.abs(Math.cos(g))<1e-8,v=i.getSideFlag();this.updatePosition({rotation:g,sideFlag:v}),d.node.visible=!1;const C=this.lineHeight,y=this.tickTreeLayout,R=t.ticks(),b=y?y.nodes:[],w=y?y.depth>1:!1,x=o.ticks(),{defaultRotation:O,configuredRotation:M,parallelFlipFlag:N}=oE({rotation:i.rotation,parallel:s,regularFlipRotation:as(g-Math.PI/2),parallelFlipRotation:as(g)}),V=this.gridLineSelection.update(this.gridLength?x:[]),I=this.labelSelection.update(b),H=i.formatter,B=new Map;let X=0;I.each((L,k,z)=>{var Z;L.fontStyle=i.fontStyle,L.fontWeight=i.fontWeight,L.fontSize=i.fontSize,L.fontFamily=i.fontFamily,L.fill=i.color,L.textBaseline=N===-1?"bottom":"hanging",L.textAlign="center",L.translationX=k.screenY-i.fontSize*.25,L.translationY=k.screenX,z===0?l!=null&&l.enabled&&R.length>0?(L.visible=!0,L.text=n.call(c,this.getTitleFormatterParams()),L.fontSize=l.fontSize,L.fontStyle=l.fontStyle,L.fontWeight=l.fontWeight,L.fontFamily=l.fontFamily,L.textBaseline="hanging"):L.visible=!1:H?(L.text=(Z=n.call(H,{value:String(k.label),index:z}))!==null&&Z!==void 0?Z:String(k.label),L.visible=k.screenX>=a[0]&&k.screenX<=a[1]):(L.text=String(k.label),L.visible=k.screenX>=a[0]&&k.screenX<=a[1]);const he=L.computeBBox();B.set(L.id,he),he.width>X&&(X=he.width)});const J=v*i.padding,Y=this.label.grid,ae=[];I.each((L,k,z)=>{if(L.x=J,L.rotationCenterX=J,k.children.length){L.translationX-=X-C+this.label.padding;const Z=k.leafCount*f,he=B.get(L.id);he&&he.width>Z?L.visible=!1:m?L.rotation=O:L.rotation=-Math.PI/2}else{L.rotation=M,L.textAlign="end",L.textBaseline="middle";const Z=B.get(L.id);Z&&Z.height>f&&(L.visible=!1)}if(k.parent&&w){const Z=k.children.length?k.screenX-k.leafCount*f/2:k.screenX-f/2;if(!k.children.length)(k.number!==k.children.length-1||Y)&&ae.push({y:Z,x1:0,x2:-X-this.label.padding*2,toString:()=>String(z)});else{const he=-X-this.label.padding*2+k.screenY;ae.push({y:Z,x1:he+C,x2:he,toString:()=>String(z)})}}});let re=0;ae.forEach(L=>re=Math.min(re,L.x2)),ae.push({y:Math.max(h,u),x1:0,x2:re,toString:()=>String(ae.length)});const K=this.separatorSelection.update(ae),D=1e-7;K.each((L,k)=>{L.x1=k.x1,L.x2=k.x2,L.y1=k.y,L.y2=k.y,L.visible=k.y>=a[0]-D&&k.y<=a[1]+D,L.stroke=this.tick.color,L.fill=void 0,L.strokeWidth=1}),this.gridLineSelection=V,this.labelSelection=I;const T=y?y.depth+1:1,P=[];for(let L=0;L<T;L++)P.push(L);if(this.axisLineSelection.update(P).each((L,k,z)=>{const Z=z>0?-X-this.label.padding*2-(z-1)*C:0;L.x1=Z,L.x2=Z,L.y1=a[0],L.y2=a[1],L.strokeWidth=this.line.width,L.stroke=this.line.color,L.visible=R.length>0&&(z===0||Y&&w)}),this.gridLength){const L=this.gridStyle,k=L.length;V.each((z,Z,he)=>{const xe=Math.round(o.convert(Z));z.x1=0,z.x2=-v*this.gridLength,z.y1=xe,z.y2=xe,z.visible=xe>=a[0]&&xe<=a[1];const we=L[he%k];z.stroke=we.stroke,z.strokeWidth=this.tick.width,z.lineDash=we.lineDash,z.fill=void 0})}return e}}ad.className="GroupedCategoryAxis";ad.type="groupedCategory";YP([_(Ft)],ad.prototype,"labelColor",void 0);var r3=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};const a3=["top","right","bottom","left"];class _0 extends Qn{constructor(e=window.document,t,i){super(e,t,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return r3(this,void 0,void 0,function*(){const t=yield e.performLayout.call(this),{seriesRect:i,visibility:s,clipSeries:n}=this.updateAxes(t);this.seriesRoot.visible=s.series,this.seriesRect=i,this.series.forEach(h=>{h.rootGroup.translationX=Math.floor(i.x),h.rootGroup.translationY=Math.floor(i.y)});const{seriesRoot:o,seriesAreaPadding:a}=this,l=i.clone().grow(a),c=20,d=l.clone().grow(c);return this.hoverRect=d,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:l,hoverRect:d,visible:s.series},axes:this.axes.map(h=>Object.assign({id:h.id},h.getLayoutState()))}),n?o.setClipRectInGroupCoordinateSpace(l):o.setClipRectInGroupCoordinateSpace(),t})}updateAxes(e){var t;const i=Object.assign({},this._lastAxisWidths),s=Object.assign({},this._lastVisibility),n=new Set(this._axes.map(f=>f.position));for(const f of Object.keys(i))n.has(f)||delete i[f];const o=(f,g)=>Object.keys(f).some(m=>i[m]==null)?!1:s.crossLines===g.crossLines&&s.series===g.series&&Object.entries(i).every(([m,v])=>{const C=f[m];return v!=null||C!=null?v===C:!0}),a=f=>Object.entries(f).reduce((g,[m,v])=>(v&&Math.abs(v)===1/0&&(v=0),g[m]=v!=null?Math.ceil(v):v,g),{});let l={},c={},d=!1,h=(t=this.seriesRect)===null||t===void 0?void 0:t.clone(),u=0;do{Object.assign(i,l),Object.assign(s,c);const f=this.updateAxesPass(i,e.clone(),h);if(l=a(f.axisWidths),c=f.visibility,d=f.clipSeries,h=f.seriesRect,u++>10){ge.warn("unable to find stable axis layout.");break}}while(!o(l,c));const p=5;return this.axes.forEach(f=>{if(f.setCrossLinesVisible(s.crossLines),!!h)switch(f.clipGrid(h.x,h.y,h.width+p,h.height+p),f.position){case"left":case"right":f.clipTickLines(e.x,h.y,e.width+p,h.height+p);break;case"top":case"bottom":f.clipTickLines(h.x,e.y,h.width+p,e.height+p);break}}),this._lastAxisWidths=i,this._lastVisibility=s,{seriesRect:h,visibility:s,clipSeries:d}}updateAxesPass(e,t,i){const{axes:s}=this,n={},o={},a={series:!0,crossLines:!0};let l=!1;const c={},d=this.applySeriesPadding(t),h=i?this.buildCrossLinePadding(e):{},u=this.buildAxisBound(d,e,h,a),p=this.buildSeriesRect(u,e);return s.forEach(f=>{var g,m;const{position:v}=f,{clipSeries:C,axisThickness:y,axisOffset:R}=this.calculateAxisDimensions({axis:f,seriesRect:p,paddedBounds:d,axisWidths:e,newAxisWidths:o,primaryTickCounts:c,clipSeries:l,addInterAxisPadding:((g=n[v])!==null&&g!==void 0?g:0)>0});n[v]=((m=n[v])!==null&&m!==void 0?m:0)+1,l=l||C,this.positionAxis({axis:f,axisBound:u,axisOffset:R,axisThickness:y,axisWidths:e,primaryTickCounts:c,seriesRect:p})}),{clipSeries:l,seriesRect:p,axisWidths:o,visibility:a}}buildCrossLinePadding(e){var t;const i={};this.axes.forEach(s=>{s.crossLines&&s.crossLines.forEach(n=>{n.calculatePadding(i)})});for(const[s,n=0]of Object.entries(i))i[s]=Math.max(n-((t=e[s])!==null&&t!==void 0?t:0),0);return i}applySeriesPadding(e){const t=e.clone(),i=this.axes.slice().reverse();return a3.forEach(s=>{const n=this.seriesAreaPadding[s],o=i.find(a=>a.position===s);o?o.seriesAreaPadding=n:t.shrink(n,s)}),t}buildAxisBound(e,t,i,s){var n,o,a,l;const c=e.clone(),{top:d=0,right:h=0,bottom:u=0,left:p=0}=i,f=p+h,g=d+u,m=((n=t.left)!==null&&n!==void 0?n:0)+((o=t.right)!==null&&o!==void 0?o:0)+f,v=((a=t.top)!==null&&a!==void 0?a:0)+((l=t.bottom)!==null&&l!==void 0?l:0)+g;return c.width<=m||c.height<=v?(s.crossLines=!1,s.series=!1,c):(c.x+=p,c.y+=d,c.width-=f,c.height-=g,c)}buildSeriesRect(e,t){const i=e.clone(),{top:s,bottom:n,left:o,right:a}=t;return i.x+=o??0,i.y+=s??0,i.width-=(o??0)+(a??0),i.height-=(s??0)+(n??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(e,t,i,s){const{x:n,y:o,width:a,height:l}=e,c=[n,o,n+a,o+l],d=s===1?Math.min:Math.max,h=c[(i==="x"?0:1)+(s===1?0:2)];return d(t,h)}calculateAxisDimensions(e){var t,i,s,n,o,a;const{axis:l,seriesRect:c,paddedBounds:d,axisWidths:h,newAxisWidths:u,primaryTickCounts:p,addInterAxisPadding:f}=e;let{clipSeries:g}=e;const{position:m,direction:v}=l,C=V=>V instanceof ba||V instanceof ad?[0,c.height]:[c.height,0],y=(t=u[m])!==null&&t!==void 0?t:0;switch(m){case"top":case"bottom":l.range=[0,c.width],l.gridLength=c.height;break;case"right":case"left":l.range=C(l),l.gridLength=c.width;break}const R=(i=this.zoomManager.getZoom())===null||i===void 0?void 0:i[l.direction],{min:b=0,max:w=1}=R??{};l.visibleRange=[b,w],!g&&(l.visibleRange[0]>0||l.visibleRange[1]<1)&&(g=!0);let x=l.nice?p[v]:void 0;const O=.3;l.thickness>0?l.maxThickness=l.thickness:v===ye.Y?l.maxThickness=d.width*O:l.maxThickness=d.height*O,x=l.update(x),p[v]=(s=p[v])!==null&&s!==void 0?s:x;let M=0;if(l.thickness)M=l.thickness;else{const V=l.computeBBox();M=v===ye.X?V.height:V.width}return f&&(M+=15),M=Math.ceil(M),u[m]=((n=u[m])!==null&&n!==void 0?n:0)+M,l.gridPadding=((o=h[m])!==null&&o!==void 0?o:0)-((a=u[m])!==null&&a!==void 0?a:0),{clipSeries:g,axisThickness:M,axisOffset:y}}positionAxis(e){var t,i,s,n;const{axis:o,axisBound:a,axisWidths:l,seriesRect:c,axisOffset:d,axisThickness:h}=e,{position:u}=o;switch(u){case"top":o.translation.x=a.x+((t=l.left)!==null&&t!==void 0?t:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+1+d+h,"y",1);break;case"bottom":o.translation.x=a.x+((i=l.left)!==null&&i!==void 0?i:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+a.height+1-h-d,"y",-1);break;case"left":o.translation.y=a.y+((s=l.top)!==null&&s!==void 0?s:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+d+h,"x",1);break;case"right":o.translation.y=a.y+((n=l.top)!==null&&n!==void 0?n:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+a.width-h-d,"x",-1);break}o.updatePosition({rotation:Zs(o.rotation),sideFlag:o.label.getSideFlag()})}}_0.className="CartesianChart";_0.type="cartesian";class qP extends Mr{constructor({moduleCtx:e,useLabelLayer:t=!1,pickModes:i=[si.EXACT_SHAPE_MATCH]}){super({moduleCtx:e,useLabelLayer:t,pickModes:i,directionKeys:{[ye.X]:["angleKey"],[ye.Y]:["radiusKey"]},directionNames:{[ye.X]:["angleName"],[ye.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(e,t){return null}}function ZP(r,e,t){const i=Math.sqrt(Math.pow(r,2)+Math.pow(e,2)),{innerRadius:s,outerRadius:n}=t;if(i<Math.min(s,n)||i>Math.max(s,n))return!1;let o=Math.atan2(e,r);o<-Math.PI/2&&(o+=2*Math.PI);const{startAngle:a,endAngle:l}=t;return l===-Math.PI/2?o<a:a===3*Math.PI/2?o>l:o<=l&&o>=a}function lR(r,e){const{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=e,o={x:n*Math.cos(t),y:n*Math.sin(t)},a={x:n*Math.cos(i),y:n*Math.sin(i)},l=s===0?{x:0,y:0}:{x:s*Math.cos(t),y:s*Math.sin(t)},c=s===0?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)};return sf(r.start.x,r.start.y,r.end.x,r.end.y,o.x,o.y,l.x,l.y)!=null||sf(r.start.x,r.start.y,r.end.x,r.end.y,a.x,a.y,c.x,c.y)!=null||EP(0,0,n,t,i,!0,r.start.x,r.start.y,r.end.x,r.end.y).length>0}function l3(r,e){const t={x:r.x,y:r.y},i={x:r.x+r.width,y:r.y},s={x:r.x,y:r.y+r.height},n={x:r.x+r.width,y:r.y+r.height};return lR({start:t,end:i},e)||lR({start:s,end:n},e)}var Vd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Fr extends Ei{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.angleOffset=0}computeBBox(){const e=this.outerRadius;return new qe(this.centerX-e,this.centerY-e,e*2,e*2)}updatePath(){const e=this.path,t=this.angleOffset,i=Math.min(this.startAngle,this.endAngle)+t,s=Math.max(this.startAngle,this.endAngle)+t,n=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),a=x0(as(this.startAngle),as(this.endAngle)),l=this.centerX,c=this.centerY;e.clear(),a?(e.arc(l,c,o,i,s),n>0&&(e.moveTo(l+n*Math.cos(s),c+n*Math.sin(s)),e.arc(l,c,n,s,i,!0))):(e.moveTo(l+n*Math.cos(i),c+n*Math.sin(i)),e.arc(l,c,o,i,s),n>0?e.arc(l,c,n,s,i,!0):e.lineTo(l,c)),e.closePath(),this.dirtyPath=!1}isPointInPath(e,t){const{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,o=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),l=this.transformPoint(e,t);return ZP(l.x,l.y,{startAngle:s,endAngle:n,innerRadius:o,outerRadius:a})}}Fr.className="Sector";Vd([Tt()],Fr.prototype,"centerX",void 0);Vd([Tt()],Fr.prototype,"centerY",void 0);Vd([Tt()],Fr.prototype,"innerRadius",void 0);Vd([Tt()],Fr.prototype,"outerRadius",void 0);Vd([Tt()],Fr.prototype,"startAngle",void 0);Vd([Tt()],Fr.prototype,"endAngle",void 0);Vd([Tt()],Fr.prototype,"angleOffset",void 0);const Py={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let r=NaN;return(e,t)=>{const i=t.keys[0],s=Math.abs(i-r);return r=i,!isNaN(s)&&s>0&&s<e?s:e}}},cR={type:"processor",property:"aggValuesExtent",calculate:r=>{var e,t,i,s;const n=[...(t=(e=r.domain.aggValues)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:[0,0]];for(const[o,a]of(s=(i=r.domain.aggValues)===null||i===void 0?void 0:i.slice(1))!==null&&s!==void 0?s:[])o<n[0]&&(n[0]=o),a>n[1]&&(n[1]=a);return n}},c3={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:r}})=>{if(r!=null)return[...r].sort((e,t)=>{for(let i=0;i<e.length;i++){const s=e[i]-t[i];if(s!==0)return s}return 0})}};function JP(r,e,t="sum"){const i=(s,n)=>{const o=s*e/n;return o>=0?Math.min(e,o):Math.max(-e,o)};return{type:"group-value-processor",properties:r,adjust:()=>(s,n)=>{const o=[0,0];for(const l of n){const c=s[l],d=c<0?0:1;t==="sum"?o[d]+=c:d===0?o[d]=Math.min(o[d],c):o[d]=Math.max(o[d],c)}const a=Math.max(Math.abs(o[0]),o[1]);for(const l of n)s[l]=i(s[l],a)}}}function dR(r,e,t,i){const s=e[1]-e[0],n=(o,a,l)=>{const c=e[0]+(o-a)/l*s;return l===0||c>=e[1]?e[1]:c<e[0]?e[0]:c};return{type:"property-value-processor",property:r,adjust:()=>(o,a)=>{let[l,c]=o.domain.values[a];t!=null&&(l=t),i!=null&&(c=i);const d=c-l;o.domain.values[a]=[e[0],e[1]];for(const h of o.data){let u=h.values;o.type==="ungrouped"&&(u=[u]);for(const p of u)p[a]=n(p[a],l,d)}}}}var ke=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},ph=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class QP extends $g{constructor(e,t,i,s,n,o,a){super(n,o,a),this.angleKey=e,this.calloutLabelKey=t,this.sectorLabelKey=i,this.radiusKey=s}}class d3 extends QP{constructor(){super(...arguments),this.type="nodeClick"}}class h3 extends QP{constructor(){super(...arguments),this.type="nodeDoubleClick"}}var lo;(function(r){r[r.Sector=0]="Sector",r[r.Callout=1]="Callout",r[r.Label=2]="Label"})(lo||(lo={}));class ap extends $i{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50}}ke([_(ce(0))],ap.prototype,"offset",void 0);ke([_(ce(0))],ap.prototype,"minAngle",void 0);ke([_(Lt)],ap.prototype,"formatter",void 0);ke([_(ce(0))],ap.prototype,"minSpacing",void 0);ke([_(ce(0))],ap.prototype,"maxCollisionOffset",void 0);class I0 extends $i{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}ke([_(ce())],I0.prototype,"positionOffset",void 0);ke([_(ce(0,1))],I0.prototype,"positionRatio",void 0);ke([_(Lt)],I0.prototype,"formatter",void 0);class L0{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}ke([_(iB)],L0.prototype,"colors",void 0);ke([_(ce(0))],L0.prototype,"length",void 0);ke([_(ce(0))],L0.prototype,"strokeWidth",void 0);class eM extends Va{constructor(){super(...arguments),this.renderer=void 0}}ke([_(Lt)],eM.prototype,"renderer",void 0);class tM extends Ut{constructor(){super(...arguments),this.showInLegend=!1}}ke([_(gt)],tM.prototype,"showInLegend",void 0);class cE extends $i{constructor(){super(...arguments),this.text="",this.margin=2}}ke([_(zi)],cE.prototype,"text",void 0);ke([_(ce())],cE.prototype,"margin",void 0);class dE{constructor(){this.fill="transparent",this.fillOpacity=1}}ke([_(_o)],dE.prototype,"fill",void 0);ke([_(ht(0,1))],dE.prototype,"fillOpacity",void 0);class u3 extends NP{}class mt extends qP{constructor(e){super({moduleCtx:e,useLabelLayer:!0}),this.radiusScale=new Xt,this.groupSelection=ut.select(this.contentGroup,ve),this.highlightSelection=ut.select(this.highlightGroup,ve),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new ap,this.sectorLabel=new I0,this.calloutLine=new L0,this.tooltip=new eM,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Jb,this.surroundingRadius=void 0,this.angleScale=new Xt,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new ve({name:`${this.id}-background`,layer:!0,zIndex:Bt.SERIES_BACKGROUND_ZINDEX}));const t=new ve({name:"pieCalloutLabels"}),i=new ve({name:"pieSectorLabels"}),s=new ve({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=ut.select(t,ve),this.sectorLabelSelection=ut.select(i,be),this.innerLabelsSelection=ut.select(s,be),this.animationState=new u3("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(e){this._data=e,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var e;(e=this.chartEventManager)===null||e===void 0||e.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var e;const{data:t,visible:i}=this;this.seriesItemEnabled=(e=t==null?void 0:t.map(()=>i))!==null&&e!==void 0?e:[]}getDomain(e){return e===ye.X?this.angleScale.domain:this.radiusScale.domain}processData(){var e,t;return ph(this,void 0,void 0,function*(){let{data:i=[]}=this;const{angleKey:s,radiusKey:n,seriesItemEnabled:o}=this;if(!s)return;const a=[];n&&(a.push(RB(n,{id:"radiusValue",min:(e=this.radiusMin)!==null&&e!==void 0?e:0,max:this.radiusMax}),Fn(n,!0,{id:"radiusRaw"}),dR({id:"radiusValue"},[0,1],(t=this.radiusMin)!==null&&t!==void 0?t:0,this.radiusMax)),a.push()),i=i.map((l,c)=>o[c]?l:Object.assign(Object.assign({},l),{[s]:0})),this.dataModel=new Ga({props:[TB(s,!0,{id:"angleValue"}),Fn(s,!0,{id:"angleRaw"}),dR({id:"angleValue"},[0,1],0),...a]}),this.processedData=this.dataModel.processData(i)})}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=this._createNodeData();this.nodeData=e,this.nodeDataRefresh=!1}createNodeData(){return ph(this,void 0,void 0,function*(){return this._createNodeData()})}_createNodeData(){var e,t,i,s;const{id:n,processedData:o,dataModel:a,rotation:l,angleScale:c}=this;if(!o||!a||o.type!=="ungrouped")return[];const d=(t=(e=a.resolveProcessedDataIndexById("angleValue"))===null||e===void 0?void 0:e.index)!==null&&t!==void 0?t:-1,h=(s=(i=a.resolveProcessedDataIndexById("radiusValue"))===null||i===void 0?void 0:i.index)!==null&&s!==void 0?s:-1;if(d<0)return[];let u=0;const p=o.data.map((f,g)=>{var m;const{datum:v,values:C}=f,y=C[d],R=c.convert(u)+Zs(l);u=y;const b=c.convert(u)+Zs(l),w=Math.abs(b-R),x=R+w/2,O=C[d+1],M=h>=0&&(m=C[h])!==null&&m!==void 0?m:1,N=h>=0?C[h+1]:void 0,V=this.getLabels(v,x,w,!0),I=this.getSectorFormat(v,g,g,!1);return Object.assign({itemId:g,series:this,datum:v,index:g,angleValue:O,midAngle:x,midCos:Math.cos(x),midSin:Math.sin(x),startAngle:R,endAngle:b,sectorFormat:I,radius:M,radiusValue:N},V)});return[{itemId:n,nodeData:p,labelData:p}]}getLabels(e,t,i,s){const{calloutLabel:n,sectorLabel:o,legendItemKey:a,ctx:{callbackCache:l}}=this,c=!s||n.enabled?this.calloutLabelKey:void 0,d=!s||o.enabled?this.sectorLabelKey:void 0;if(!c&&!d&&!a)return{};const h=this.getLabelFormatterParams(e);let u;if(c){const g=Zs(n.minAngle);i>g?n.formatter?u=l.call(n.formatter,h):u=String(e[c]):u=void 0}let p;d&&(o.formatter?p=l.call(o.formatter,h):p=String(e[d]));let f;return a&&(f=String(e[a])),Object.assign(Object.assign(Object.assign({},u!=null?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(t)),{text:u,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),p!=null?{sectorLabel:{text:p}}:{}),a!=null&&f!=null?{legendItem:{key:a,text:f}}:{})}getLabelFormatterParams(e){const{id:t,radiusKey:i,radiusName:s,angleKey:n,angleName:o,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:d}=this;return{datum:e,angleKey:n,angleValue:e[n],angleName:o,radiusKey:i,radiusValue:i?e[i]:void 0,radiusName:s,calloutLabelKey:a,calloutLabelValue:a?e[a]:void 0,calloutLabelName:l,sectorLabelKey:c,sectorLabelValue:c?e[c]:void 0,sectorLabelName:d,seriesId:t}}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=sP(e),s=-3*Math.PI/4,n=i-s,o=Math.floor(n/(Math.PI/2)),a=UB(o,t.length);return t[a]}getSectorFormat(e,t,i,s){var n,o,a,l,c,d,h,u,p;const{angleKey:f,radiusKey:g,fills:m,strokes:v,fillOpacity:C,formatter:y,id:R,ctx:{callbackCache:b}}=this,w=(n=this.highlightManager)===null||n===void 0?void 0:n.getActiveHighlight(),x=s&&(w==null?void 0:w.series)===this&&t===w.itemId,O=x?this.highlightStyle.item:null,M=(o=O==null?void 0:O.fill)!==null&&o!==void 0?o:m[i%m.length],N=(a=O==null?void 0:O.fillOpacity)!==null&&a!==void 0?a:C,V=(l=O==null?void 0:O.stroke)!==null&&l!==void 0?l:v[i%v.length],I=(c=O==null?void 0:O.strokeWidth)!==null&&c!==void 0?c:this.getStrokeWidth(this.strokeWidth);let H;return y&&(H=b.call(y,{datum:e,angleKey:f,radiusKey:g,fill:M,stroke:V,strokeWidth:I,highlighted:x,seriesId:R})),{fill:(d=H==null?void 0:H.fill)!==null&&d!==void 0?d:M,fillOpacity:(h=H==null?void 0:H.fillOpacity)!==null&&h!==void 0?h:N,stroke:(u=H==null?void 0:H.stroke)!==null&&u!==void 0?u:V,strokeWidth:(p=H==null?void 0:H.strokeWidth)!==null&&p!==void 0?p:I}}getInnerRadius(){const{radius:e,innerRadiusRatio:t,innerRadiusOffset:i}=this,s=e*(t??1)+(i||0);return s===e||s<0?0:s}getOuterRadius(){const{radius:e,outerRadiusRatio:t,outerRadiusOffset:i}=this,s=e*(t??1)+(i||0);return s<0?0:s}updateRadiusScale(){const e=this.getInnerRadius(),t=this.getOuterRadius();this.radiusScale.range=[e,t]}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const n=2+((t=(e=this.title)===null||e===void 0?void 0:e.spacing)!==null&&t!==void 0?t:0),o=Math.max(0,-i);return-i-n-o}update({seriesRect:e}){return ph(this,void 0,void 0,function*(){const{title:t}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.rootGroup.translationX=this.centerX,this.rootGroup.translationY=this.centerY,t){const i=this.getTitleTranslationY(),s=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(i)&&!this.bboxIntersectsSurroundingSeries(s,0,i),t.node.translationY=isFinite(i)?i:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var e,t;const{title:i,oldTitle:s}=this;s!==i&&(s&&((e=this.labelGroup)===null||e===void 0||e.removeChild(s.node)),i&&(i.node.textBaseline="bottom",(t=this.labelGroup)===null||t===void 0||t.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var e;const{innerCircle:t,oldInnerCircle:i,innerCircleNode:s}=this;if(i!==t){let n;s&&this.backgroundGroup.removeChild(s),t&&(n=new yu,n.fill=t.fill,n.fillOpacity=(e=t.fillOpacity)!==null&&e!==void 0?e:1,this.backgroundGroup.appendChild(n)),this.oldInnerCircle=t,this.innerCircleNode=n}}updateNodeMidPoint(){this.nodeData.forEach(e=>{const t=this.radiusScale.convert(e.radius);e.nodeMidPoint={x:e.midCos*Math.max(0,t/2),y:e.midSin*Math.max(0,t/2)}})}updateSelections(){return ph(this,void 0,void 0,function*(){yield this.updateGroupSelection()})}updateGroupSelection(){return ph(this,void 0,void 0,function*(){const{groupSelection:e,highlightSelection:t,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,o=a=>a.update(this.nodeData,l=>{const c=new Fr;c.tag=lo.Sector,l.appendChild(c)});this.groupSelection=o(e),this.highlightSelection=o(t),i.update(this.nodeData,a=>{const l=new xt;l.tag=lo.Callout,l.pointerEvents=rs.None,a.appendChild(l);const c=new be;c.tag=lo.Label,c.pointerEvents=rs.None,a.appendChild(c)}),s.update(this.nodeData,a=>{a.pointerEvents=rs.None}),n.update(this.innerLabels,a=>{a.pointerEvents=rs.None})})}updateNodes(e){var t;return ph(this,void 0,void 0,function*(){const i=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight(),s=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=s,this.backgroundGroup.visible=s,this.contentGroup.visible=s,this.highlightGroup.visible=s&&(i==null?void 0:i.series)===this,this.labelGroup.visible=s,this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:n}=this,o=n.convert(0),a=(l,c,d,h)=>{const u=n.convert(c.radius),p=l.parent,f=p==null?void 0:p.parent;h&&p&&f&&(f.removeChild(p),f.appendChild(p)),l.innerRadius=Math.max(0,o),l.outerRadius=Math.max(0,u),h&&(l.startAngle=c.startAngle,l.endAngle=c.endAngle);const g=this.getSectorFormat(c.datum,c.itemId,d,h);l.fill=g.fill,l.stroke=g.stroke,l.strokeWidth=g.strokeWidth,l.fillOpacity=g.fillOpacity,l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset,l.fillShadow=this.shadow,l.lineJoin="round",l.visible=this.seriesItemEnabled[d]};this.groupSelection.selectByTag(lo.Sector).forEach((l,c)=>a(l,l.datum,c,!1)),this.highlightSelection.selectByTag(lo.Sector).forEach((l,c)=>{const d=(i==null?void 0:i.series)===this&&l.datum.itemId===i.itemId;l.visible=d,l.visible&&a(l,l.datum,c,d)}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()})}updateCalloutLineNodes(){var e;const{radiusScale:t,calloutLine:i}=this,s=i.length,n=i.strokeWidth,o=(e=i.colors)!==null&&e!==void 0?e:this.strokes,{offset:a}=this.calloutLabel;this.calloutLabelSelection.selectByTag(lo.Callout).forEach((l,c)=>{const d=l.datum,h=t.convert(d.radius),u=Math.max(0,h),p=d.calloutLabel;if(p!=null&&p.text&&!p.hidden&&u!==0){l.visible=!0,l.strokeWidth=n,l.stroke=o[c%o.length],l.fill=void 0;const f=d.midCos*u,g=d.midSin*u;let m=d.midCos*(u+s),v=d.midSin*(u+s);if(p.collisionTextAlign||p.collisionOffsetY!==0){const C=p.box;let y=m,R=v;m<C.x?y=C.x:m>C.x+C.width&&(y=C.x+C.width),v<C.y?R=C.y:v>C.y+C.height&&(R=C.y+C.height);const b=y-m,w=R-v,x=Math.sqrt(Math.pow(b,2)+Math.pow(w,2)),O=x-a;O>0&&(m=m+b*O/x,v=v+w*O/x)}l.x1=f,l.y1=g,l.x2=m,l.y2=v}else l.visible=!1})}getLabelOverflow(e,t,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,o=i.y-this.centerY,a=i.y+i.height-this.centerY,l=1;let c=1;t.x+l<s?c=(t.x+t.width-s)/t.width:t.x+t.width-l>n&&(c=(n-t.x)/t.width);const d=t.y+l<o||t.y+t.height-l>a,h=Math.floor(e.length*c)-1,u=this.bboxIntersectsSurroundingSeries(t);return{visibleTextPart:c,textLength:h,hasVerticalOverflow:d,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(e,t=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const n=[{x:e.x+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+e.height+i},{x:e.x+t,y:e.y+e.height+i}],o=Math.pow(s,2);return n.some(a=>Math.pow(a.x,2)+Math.pow(a.y,2)>o)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e,calloutLabel:t,calloutLine:i}=this,{offset:s,minSpacing:n}=t,o=e.convert(0),a=y=>{const R=y.calloutLabel,b=e.convert(y.radius),w=Math.max(0,b);return!R||w===0},l=this.nodeData,c=this.nodeData.filter(y=>!a(y));if(c.forEach(y=>{const R=y.calloutLabel;R.hidden=!1,R.collisionTextAlign=void 0,R.collisionOffsetY=0}),c.length<=1)return;const d=c.filter(y=>y.midCos<0).sort((y,R)=>y.midSin-R.midSin),h=c.filter(y=>y.midCos>=0).sort((y,R)=>y.midSin-R.midSin),u=c.filter(y=>y.midSin<0&&y.calloutLabel.textAlign==="center").sort((y,R)=>y.midCos-R.midCos),p=c.filter(y=>y.midSin>=0&&y.calloutLabel.textAlign==="center").sort((y,R)=>y.midCos-R.midCos),f=new be,g=y=>{const R=y.calloutLabel,b=e.convert(y.radius),x=Math.max(0,b)+i.length+s,O=y.midCos*x,M=y.midSin*x+R.collisionOffsetY;return this.setTextDimensionalProps(f,O,M,this.calloutLabel,R),f.computeBBox()},m=(y,R,b)=>{const w=g(y).grow(n/2),x=g(R).grow(n/2);if(w.x<x.x+x.width&&w.x+w.width>x.x&&(b==="to-top"?w.y<x.y+x.height:w.y+w.height>x.y)){const M=b==="to-top"?w.y-x.y-x.height:w.y+w.height-x.y;R.calloutLabel.collisionOffsetY=M}},v=y=>{const R=y.slice().sort((w,x)=>Math.abs(w.midSin)-Math.abs(x.midSin))[0],b=y.indexOf(R);for(let w=b-1;w>=0;w--){const x=y[w+1],O=y[w];m(x,O,"to-top")}for(let w=b+1;w<y.length;w++){const x=y[w-1],O=y[w];m(x,O,"to-bottom")}},C=y=>{const R=c.some(N=>N.calloutLabel.collisionOffsetY!==0),b=y.map(N=>g(N)),w=b.map(N=>N.clone().grow(n/2));let x=!1;for(let N=0;N<w.length&&!x;N++){const V=w[N];for(let I=N+1;I<y.length;I++){const H=w[I];if(V.collidesBBox(H)){x=!0;break}}}const O=l.map(N=>{const{startAngle:V,endAngle:I}=N,H=e.convert(N.radius),B=Math.max(0,H);return{startAngle:V,endAngle:I,innerRadius:o,outerRadius:B}}),M=b.some(N=>O.some(V=>l3(N,V)));!x&&!R&&!M||y.filter(N=>N.calloutLabel.textAlign==="center").forEach(N=>{const V=N.calloutLabel;N.midCos<0?V.collisionTextAlign="right":N.midCos>0?V.collisionTextAlign="left":V.collisionTextAlign="center"})};v(d),v(h),C(u),C(p)}updateCalloutLabelNodes(e){const{radiusScale:t,calloutLabel:i,calloutLine:s}=this,n=s.length,{offset:o,color:a}=i,l=new be;this.calloutLabelSelection.selectByTag(lo.Label).forEach(c=>{const{datum:d}=c,h=d.calloutLabel,u=t.convert(d.radius),p=Math.max(0,u);if(!(h!=null&&h.text)||p===0||h.hidden){c.visible=!1;return}const f=p+n+o,g=d.midCos*f,m=d.midSin*f+h.collisionOffsetY;this.setTextDimensionalProps(l,g,m,this.calloutLabel,h);const v=l.computeBBox(),{visibleTextPart:C,textLength:y,hasVerticalOverflow:R}=this.getLabelOverflow(h.text,v,e),b=C===1?h.text:`${h.text.substring(0,y)}â¦`;this.setTextDimensionalProps(c,g,m,this.calloutLabel,Object.assign(Object.assign({},h),{text:b})),c.fill=a,c.visible=!R})}computeLabelsBBox(e,t){var i;const{radiusScale:s,calloutLabel:n,calloutLine:o}=this,a=o.length,{offset:l,maxCollisionOffset:c,minSpacing:d}=n;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const h=[],u=new be;let p;if(!((i=this.title)===null||i===void 0)&&i.text&&this.title.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(this.setTextDimensionalProps(u,0,f,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0}),p=u.computeBBox(),h.push(p))}return this.nodeData.forEach(f=>{const g=f.calloutLabel,m=s.convert(f.radius),v=Math.max(0,m);if(!g||v===0)return null;const C=v+a+l,y=f.midCos*C,R=f.midSin*C+g.collisionOffsetY;this.setTextDimensionalProps(u,y,R,this.calloutLabel,g);const b=u.computeBBox();if(g.box=b,Math.abs(g.collisionOffsetY)>c){g.hidden=!0;return}if(p){const w=t.y-this.centerY,x=new qe(p.x-d,w,p.width+2*d,p.y+p.height+d-w);if(b.collidesBBox(x)){g.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:w,hasVerticalOverflow:x,hasSurroundingSeriesOverflow:O}=this.getLabelOverflow(g.text,b,t),M=g.text.length>2&&w<2;if(x||M||O){g.hidden=!0;return}}g.hidden=!1,h.push(b)}),h.length===0?null:qe.merge(h)}setTextDimensionalProps(e,t,i,s,n){var o,a;const{fontStyle:l,fontWeight:c,fontSize:d,fontFamily:h}=s;e.fontStyle=l,e.fontWeight=c,e.fontSize=d,e.fontFamily=h,e.text=n.text,e.x=t,e.y=i,e.textAlign=(a=(o=n==null?void 0:n.collisionTextAlign)!==null&&o!==void 0?o:n==null?void 0:n.textAlign)!==null&&a!==void 0?a:"center",e.textBaseline=n.textBaseline}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.sectorLabel,d=t>0,h=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((u,p)=>{const f=p.sectorLabel,g=e.convert(p.radius),m=Math.max(0,g);let v=!1;if(f&&m!==0){const C=t*(1-l)+g*l+a;u.fill=c,u.fontStyle=s,u.fontWeight=n,u.fontSize=i,u.fontFamily=o,u.text=f.text,!d&&h?(u.x=0,u.y=0):(u.x=p.midCos*C,u.y=p.midSin*C),u.textAlign="center",u.textBaseline="middle";const R=u.computeBBox(),b=[[R.x,R.y],[R.x+R.width,R.y],[R.x+R.width,R.y+R.height],[R.x,R.y+R.height]],{startAngle:w,endAngle:x}=p,O={startAngle:w,endAngle:x,innerRadius:t,outerRadius:m};b.every(([M,N])=>ZP(M,N,O))&&(v=!0)}u.visible=v})}updateInnerCircle(){const e=this.innerCircleNode;if(!e)return;const t=this.getInnerRadius();if(t===0)e.size=0;else{const i=Math.min(t,this.getOuterRadius()),s=1;e.size=Math.ceil(i*2+s)}}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:p,fontWeight:f,fontSize:g,fontFamily:m,color:v}=u;h.fontStyle=p,h.fontWeight=f,h.fontSize=g,h.fontFamily=m,h.text=u.text,h.x=0,h.y=0,h.fill=v,h.textAlign="center",h.textBaseline="alphabetic",e.push(h.computeBBox()),t.push(u.margin)});const i=h=>h===0?0:t[h],s=h=>h===t.length-1?0:t[h],n=e.reduce((h,u,p)=>h+u.height+i(p)+s(p),0),o=Math.max(...e.map(h=>h.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(n/2,2))<=(a>0?a:this.getOuterRadius()),d=[];for(let h=0,u=-n/2;h<e.length;h++){const f=e[h].height+u+i(h);d.push(f),u=f+s(h)}this.innerLabelsSelection.each((h,u,p)=>{h.y=d[p],h.visible=c})}getNodeClickEvent(e,t){return new d3(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,t,this)}getNodeDoubleClickEvent(e,t){return new h3(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,t,this)}getTooltipHtml(e){var t;const{angleKey:i}=this;if(!i)return"";const{tooltip:s,angleName:n,radiusKey:o,radiusName:a,calloutLabelKey:l,sectorLabelKey:c,calloutLabelName:d,sectorLabelName:h,id:u}=this,{renderer:p}=s,{datum:f,angleValue:g,radiusValue:m,sectorFormat:{fill:v},calloutLabel:{text:C=""}={}}=e,y=typeof g=="number"?eE(g):String(g),R=(t=this.title)===null||t===void 0?void 0:t.text,b=`${C?`${C}: `:""}${y}`,w={title:R,backgroundColor:v,content:b};return p?Gi(p({datum:f,angleKey:i,angleValue:g,angleName:n,radiusKey:o,radiusValue:m,radiusName:a,calloutLabelKey:l,calloutLabelName:d,sectorLabelKey:c,sectorLabelName:h,title:R,color:v,seriesId:u}),w):Gi(w)}getLegendData(){var e,t,i;const{calloutLabelKey:s,legendItemKey:n,id:o,data:a}=this;if(!a||a.length===0)return[];if(!n&&!s)return[];const l=((e=this.title)===null||e===void 0?void 0:e.showInLegend)&&this.title.text,c=[];for(let d=0;d<a.length;d++){const h=a[d],u=[];l&&u.push(l);const p=this.getLabels(h,2*Math.PI,2*Math.PI,!1);if(n&&p.legendItem!==void 0?u.push(p.legendItem.text):s&&((t=p.calloutLabel)===null||t===void 0?void 0:t.text)!==void 0&&u.push((i=p.calloutLabel)===null||i===void 0?void 0:i.text),u.length===0)continue;const f=this.getSectorFormat(h,d,d,!1);c.push({legendType:"category",id:o,itemId:d,seriesId:o,enabled:this.seriesItemEnabled[d],label:{text:u.join(" - ")},marker:{fill:f.fill,stroke:f.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return c}onLegendItemClick(e){const{enabled:t,itemId:i,series:s}=e;s.id===this.id?this.toggleSeriesItem(i,t):s.type==="pie"&&this.toggleOtherSeriesItems(s,i,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t,i){var s,n;const{legendItemKey:o}=this;if(!o)return;const a=e.legendItemKey&&((s=e.data)===null||s===void 0?void 0:s.find((l,c)=>c===t)[e.legendItemKey]);a&&((n=this.data)===null||n===void 0||n.forEach((l,c)=>{l[o]===a&&this.toggleSeriesItem(c,i)}))}animateEmptyUpdateReady(){const i=Math.PI/-2+Zs(this.rotation);this.groupSelection.selectByTag(lo.Sector).forEach(n=>{var o;const a=n.datum;(o=this.animationManager)===null||o===void 0||o.animateMany(`${this.id}_empty-update-ready_${n.id}`,[{from:i,to:a.startAngle},{from:i,to:a.endAngle}],{disableInteractions:!0,duration:1e3,ease:P0,repeat:0,onUpdate([l,c]){n.startAngle=l,n.endAngle=c}})});const s={from:0,to:1,delay:1e3,duration:200,ease:To,repeat:0};this.calloutLabelSelection.each(n=>{var o;(o=this.animationManager)===null||o===void 0||o.animate(`${this.id}_empty-update-ready_${n.id}`,Object.assign(Object.assign({},s),{onUpdate(a){n.opacity=a}}))}),this.sectorLabelSelection.each(n=>{var o;(o=this.animationManager)===null||o===void 0||o.animate(`${this.id}_empty-update-ready_${n.id}`,Object.assign(Object.assign({},s),{onUpdate(a){n.opacity=a}}))}),this.innerLabelsSelection.each(n=>{var o;(o=this.animationManager)===null||o===void 0||o.animate(`${this.id}_empty-update-ready_${n.id}`,Object.assign(Object.assign({},s),{onUpdate(a){n.opacity=a}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(lo.Sector).forEach(e=>{const{datum:t}=e;e.startAngle=t.startAngle,e.endAngle=t.endAngle})}}mt.className="PieSeries";mt.type="pie";ke([_(zi)],mt.prototype,"angleKey",void 0);ke([_(zi)],mt.prototype,"angleName",void 0);ke([_(Le)],mt.prototype,"radiusKey",void 0);ke([_(Le)],mt.prototype,"radiusName",void 0);ke([_(ht(0))],mt.prototype,"radiusMin",void 0);ke([_(ht(0))],mt.prototype,"radiusMax",void 0);ke([_(Le)],mt.prototype,"calloutLabelKey",void 0);ke([_(Le)],mt.prototype,"calloutLabelName",void 0);ke([_(Le)],mt.prototype,"sectorLabelKey",void 0);ke([_(Le)],mt.prototype,"sectorLabelName",void 0);ke([_(Le)],mt.prototype,"legendItemKey",void 0);ke([_(Na)],mt.prototype,"fills",void 0);ke([_(Na)],mt.prototype,"strokes",void 0);ke([_(ce(0,1))],mt.prototype,"fillOpacity",void 0);ke([_(ce(0,1))],mt.prototype,"strokeOpacity",void 0);ke([_(ep)],mt.prototype,"lineDash",void 0);ke([_(ce(0))],mt.prototype,"lineDashOffset",void 0);ke([_(Lt)],mt.prototype,"formatter",void 0);ke([_(ce(-360,360))],mt.prototype,"rotation",void 0);ke([_(ce())],mt.prototype,"outerRadiusOffset",void 0);ke([_(ce(0))],mt.prototype,"outerRadiusRatio",void 0);ke([_(ce())],mt.prototype,"innerRadiusOffset",void 0);ke([_(ce(0))],mt.prototype,"innerRadiusRatio",void 0);ke([_(ce(0))],mt.prototype,"strokeWidth",void 0);var p3=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class F0 extends Qn{constructor(e=window.document,t,i){super(e,t,i),this.padding=new El(40)}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return p3(this,void 0,void 0,function*(){const t=yield e.performLayout.call(this),i=t.clone();this.computeSeriesRect(t),this.computeCircle();const s=20,n=t.clone().grow(s);return this.hoverRect=n,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:t,hoverRect:n,visible:!0},axes:[]}),t})}computeSeriesRect(e){const{seriesAreaPadding:t}=this;e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e}computeCircle(){const e=this.seriesRect,t=this.series.filter(c=>c instanceof qP),i=(c,d,h)=>{t.forEach(p=>{p.centerX=c,p.centerY=d,p.radius=h});const u=t.filter(p=>p instanceof mt);if(u.length>1){const p=u.map(f=>{const g=f.getInnerRadius();return{series:f,innerRadius:g}}).sort((f,g)=>f.innerRadius-g.innerRadius);p[p.length-1].series.surroundingRadius=void 0;for(let f=0;f<p.length-1;f++)p[f].series.surroundingRadius=p[f+1].innerRadius}},s=e.x+e.width/2,n=e.y+e.height/2,o=Math.max(0,Math.min(e.width,e.height)/2);let a=o;i(s,n,a);const l=({hideWhenNecessary:c=!1}={})=>{const d=[];for(const p of t){const f=p.computeLabelsBBox({hideWhenNecessary:c},e);f!=null&&d.push(f)}if(d.length===0){i(s,n,o);return}const h=qe.merge(d),u=this.refineCircle(h,a);i(u.centerX,u.centerY,u.radius),u.radius!==a&&(a=u.radius)};l(),l(),l(),l({hideWhenNecessary:!0}),l({hideWhenNecessary:!0})}refineCircle(e,t){const s=this.seriesRect,n=-t,o=-t,a=t,l=t;let c=Math.max(0,n-e.x),d=Math.max(0,o-e.y),h=Math.max(0,e.x+e.width-a),u=Math.max(0,e.y+e.height-l);const p=s.width-c-h,f=s.height-d-u;let g=Math.min(p,f)/2;const m=.5*s.width/2,v=.5*s.height/2,C=Math.min(m,v);if(g<C){g=C;const b=c+h,w=d+u;if(2*g+w>s.height){const x=s.height-2*g;Math.min(d,u)*2>x?(d=x/2,u=x/2):d>u?d=x-u:u=x-d}if(2*g+b>s.width){const x=s.width-2*g;Math.min(c,h)*2>x?(c=x/2,h=x/2):c>h?c=x-h:h=x-c}}const y=c+2*g+h,R=d+2*g+u;return{centerX:s.x+(s.width-y)/2+c+g,centerY:s.y+(s.height-R)/2+d+g,radius:g}}}F0.className="PolarChart";F0.type="polar";var hR=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class N0 extends Qn{constructor(e=window.document,t,i){super(e,t,i),this._data={}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return hR(this,void 0,void 0,function*(){const t=yield e.performLayout.call(this),{seriesAreaPadding:i}=this,s=t.clone();t.shrink(i.left,"left"),t.shrink(i.top,"top"),t.shrink(i.right,"right"),t.shrink(i.bottom,"bottom"),this.seriesRect=t;const n=20,o=t.clone().grow(n);this.hoverRect=o,yield Promise.all(this.series.map(l=>hR(this,void 0,void 0,function*(){l.rootGroup.translationX=Math.floor(t.x),l.rootGroup.translationY=Math.floor(t.y),yield l.update({seriesRect:t})})));const{seriesRoot:a}=this;return a.setClipRectInGroupCoordinateSpace(new qe(t.x,t.y,t.width,t.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:s,paddedRect:t,hoverRect:o,visible:!0},axes:[]}),t})}}N0.className="HierarchyChart";N0.type="hierarchy";const f3=/(#\{(.*?)\})/g;function hE(r,e,t){return r.replace(f3,function(...i){const s=i[2],[n,o]=s.split(":"),a=e[n];if(typeof a=="number"){const l=o&&t&&t[o];if(l){const{locales:c,options:d}=l;return a.toLocaleString(c,d)}return String(a)}if(a instanceof Date){const l=o&&t&&t[o];return typeof l=="string"?Bv(l)(a):a.toDateString()}return typeof a=="string"||a!=null&&a.toString?String(a):""})}let fh=null;function fi(r){return fh=fh??document.createElement("div"),r?(fh.textContent=r,fh.innerHTML):""}function g3(r,e){let t=Math.floor(r[0]),i=r[1];t=m3(t,i,e);const s=C3(t,i,e),n=e-1;i=t+n*s;const o=[t,i],a=v3(t,s,e);return[o,a]}function m3(r,e,t){const i=Math.abs(e-r)/(t-1),s=Math.floor(Math.log10(i)),n=Math.pow(10,s);return Math.floor(r/n)*n}function v3(r,e,t){const i=Math.floor(Math.log10(e)),s=e>0&&e<1?Math.abs(i):0,n=Math.pow(10,s),o=new iE(s);for(let a=0;a<t;a++){const l=r+e*a;o[a]=Math.round(l*n)/n}return o}function C3(r,e,t){const i=t-1,s=(e-r)/i;return y3(s)}function y3(r){const e=Math.floor(Math.log10(r)),t=Math.pow(10,e),i=r/t*10;return i>0&&i<=1?t/10:i>1&&i<=2?2*t/10:i>1&&i<=5?5*t/10:i>5&&i<=10?10*t/10:i>10&&i<=20?20*t/10:i>20&&i<=40?40*t/10:i>40&&i<=50?50*t/10:i>50&&i<=100?100*t/10:i}var uE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class iM extends Fo{constructor(){super(...arguments),this.maxSpacing=NaN}}uE([_(Fa(oc(1),Ug("minSpacing"))),ac(NaN)],iM.prototype,"maxSpacing",void 0);class Hd extends ip{constructor(e,t=new Xt){super(e,t),this.min=NaN,this.max=NaN,t.strictClampByDefault=!0}normaliseDataDomain(e){var t;const{min:i,max:s}=this;return e.length>2&&(e=(t=Ir(e))!==null&&t!==void 0?t:[NaN,NaN]),isNaN(i)||(e=[i,e[1]]),isNaN(s)||(e=[e[0],s]),e[0]>e[1]&&(e=[]),e}formatDatum(e){return typeof e=="number"?e.toFixed(2):(ge.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))}createTick(){return new iM}updateSecondaryAxisTicks(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[t,i]=g3(this.dataDomain,e??0);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}}Hd.className="NumberAxis";Hd.type="number";uE([_(Fa(oc(),y0("max"))),ac(NaN)],Hd.prototype,"min",void 0);uE([_(Fa(oc(),Ug("min"))),ac(NaN)],Hd.prototype,"max",void 0);var sM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function nM(){return Ee(e=>typeof e=="number"&&e!==0,"expecting a non-zero Number")}class xl extends Hd{constructor(e){super(e,new Yg),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(e){var t;const{min:i,max:s}=this;e.length>2&&(e=(t=Ir(e))!==null&&t!==void 0?t:[NaN,NaN]),isNaN(i)||(e=[i,e[1]]),isNaN(s)||(e=[e[0],s]);const n=e[0]>e[1],o=e[0]<0&&e[1]>0,a=e[0]===0&&e[1]===0;return(n||o||a)&&(e=[],o?ge.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&ge.warn("the data domain has 0 extent, no data is rendered.")),e[0]===0&&(e[0]=1),e[1]===0&&(e[1]=-1),e}set base(e){this.scale.base=e}get base(){return this.scale.base}}xl.className="LogAxis";xl.type="log";sM([_(Fa(oc(),y0("max"),nM())),ac(NaN)],xl.prototype,"min",void 0);sM([_(Fa(oc(),Ug("min"),nM())),ac(NaN)],xl.prototype,"max",void 0);var pE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class oM extends Fo{constructor(){super(...arguments),this.maxSpacing=NaN}}pE([_(Fa(oc(1),Ug("minSpacing"))),ac(NaN)],oM.prototype,"maxSpacing",void 0);class ld extends ip{constructor(e){super(e,new nE),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:t}=this;t.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=t.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(e){var t;let{min:i,max:s}=this;return typeof i=="number"&&(i=new Date(i)),typeof s=="number"&&(s=new Date(s)),e.length>2&&(e=((t=Ir(e))!==null&&t!==void 0?t:[0,1e3]).map(n=>new Date(n))),i instanceof Date&&(e=[i,e[1]]),s instanceof Date&&(e=[e[0],s]),e[0]>e[1]&&(e=[]),e}createTick(){return new oM}onLabelFormatChange(e,t){t?super.onLabelFormatChange(e,t):this.labelFormatter=this.scale.tickFormat({ticks:e})}formatDatum(e){var t;return(t=this.moduleCtx.callbackCache.call(this.datumFormatter,e))!==null&&t!==void 0?t:String(e)}calculatePadding(e,t){return 1}}ld.className="TimeAxis";ld.type="time";pE([_(Fa(hP,y0("max")))],ld.prototype,"min",void 0);pE([_(Fa(hP,Ug("min")))],ld.prototype,"max",void 0);var us=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},gh=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class rM extends $i{constructor(){super(...arguments),this.formatter=void 0}}us([_(Lt)],rM.prototype,"formatter",void 0);class fE extends Va{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}us([_(Lt)],fE.prototype,"renderer",void 0);us([_(Le)],fE.prototype,"format",void 0);var Vh;(function(r){r[r.Fill=0]="Fill",r[r.Stroke=1]="Stroke",r[r.Marker=2]="Marker",r[r.Label=3]="Label"})(Vh||(Vh={}));class ps extends op{constructor(e){super({moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,directionKeys:{[ye.X]:["xKey"],[ye.Y]:["yKeys"]},directionNames:{[ye.X]:["xName"],[ye.Y]:["yNames"]}}),this.tooltip=new fE,this.marker=new A0,this.label=new rM,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this._yKeys=[],this._visibles=[],this.yNames=[],this.strokeWidth=2,this.shadow=void 0;const{marker:t,label:i}=this;t.enabled=!1,i.enabled=!1}set yKeys(e){tE(this._yKeys,e)||(this._yKeys=e,this.processedData=void 0,this.processSeriesItemEnabled())}get yKeys(){return this._yKeys}set visibles(e){this._visibles=e,this.processSeriesItemEnabled()}get visibles(){return this._visibles}processSeriesItemEnabled(){const{seriesItemEnabled:e,_visibles:t=[]}=this;e.clear(),this._yKeys.forEach((i,s)=>{var n;return e.set(i,(n=t[s])!==null&&n!==void 0?n:!0)})}set normalizedTo(e){const t=e?Math.abs(e):void 0;this._normalizedTo!==t&&(this._normalizedTo=t)}get normalizedTo(){return this._normalizedTo}processData(){return gh(this,void 0,void 0,function*(){const{xKey:e,yKeys:t,seriesItemEnabled:i,xAxis:s,yAxis:n,normalizedTo:o}=this,a=e&&t.length&&this.data?this.data:[],l=(s==null?void 0:s.scale)instanceof ct,c=(n==null?void 0:n.scale)instanceof ct,d=[...i.entries()].filter(([,p])=>p).map(([p])=>p),h=o&&isFinite(o)?o:void 0,u=[];h&&u.push(JP(d,h,"sum")),this.dataModel=new Ga({props:[Zb(e,l,{id:"xValue"}),...d.map(p=>Fn(p,c,{id:`yValue-${p}`,missingValue:NaN,invalidValue:void 0})),CP(d),...u],groupByKeys:!0,dataVisible:this.visible&&d.length>0}),this.processedData=this.dataModel.processData(a)})}getDomain(e){const{processedData:t,xAxis:i,yAxis:s}=this;if(!t)return[];const{defs:{keys:[n]},domain:{keys:[o],values:[a],aggValues:[l]=[]}}=t;return e===ye.X?n.valueType==="category"?o:this.fixNumericExtent(Ir(o),i):s instanceof xl||s instanceof ld?this.fixNumericExtent(a,s):this.fixNumericExtent(l,s)}createNodeData(){var e;return gh(this,void 0,void 0,function*(){const{xAxis:t,yAxis:i,data:s,processedData:{data:n}={},ctx:{callbackCache:o}}=this;if(!t||!i||!s)return[];const a=[],{yKeys:l,xKey:c="",marker:d,label:h,fills:u,strokes:p,id:f}=this,{scale:g}=t,{scale:m}=i,v=m instanceof ct,C=((e=g.bandwidth)!==null&&e!==void 0?e:0)/2,y=s.length,R=new Array(y).fill(null).map(()=>({left:0,right:0})),b=new Array(y).fill(0),w=(O,M,N,V)=>{const I=g.convert(O)+C,H=R[N][V],B=R[N][V]+M,X=m.convert(H,{strict:!1}),J=m.convert(B,{strict:!1});return R[N][V]=B,[{x:I,y:J,size:d.size},{x:I,y:X,size:d.size}]},x=(O,M,N,V)=>{let I;const H=this.normalizedTo&&isFinite(this.normalizedTo),B=H&&v&&Hf(V);(!H&&!isNaN(V)||B)&&(I=b[N]+=M);const J=g.convert(O)+C,Y=m.convert(I,{strict:!1});return{x:J,y:Y,size:d.size}};return l.forEach((O,M)=>{var N;const V=(N=this.dataModel)===null||N===void 0?void 0:N.resolveProcessedDataIndexById(`yValue-${O}`),I=[],H=[],B={itemId:O,points:[],yValues:[]},X={itemId:O,points:[]};if(a[M]={itemId:O,fillSelectionData:X,labelData:I,nodeData:H,strokeSelectionData:B},!V)return;const J=X.points,Y=[],ae=B.points,re=B.yValues;let K=-1;n==null||n.forEach((D,T)=>{const{keys:[P],datum:F,values:L}=D;L.forEach((k,z)=>{var Z;K++;const he=F[z],xe=k[V.index],we=isNaN(xe)?void 0:xe,Qt=z<L.length-1,ei=Qt?D:n[T+1],ti=ei==null?void 0:ei.keys[0],di=Qt?z+1:0,Mt=ei==null?void 0:ei.values[di][V.index],bn=isNaN(Mt)?void 0:Mt,Ti=x(P,+we,K,he[O]);d&&H.push({index:K,series:this,itemId:O,datum:he,nodeMidPoint:{x:Ti.x,y:Ti.y},cumulativeValue:b[K],yValue:we,yKey:O,xKey:c,point:Ti,fill:u[M%u.length],stroke:p[M%p.length]});let En;h.formatter?En=(Z=o.call(h.formatter,{value:we,seriesId:f}))!==null&&Z!==void 0?Z:"":En=Js(we)?Number(we).toFixed(2):String(we),h&&I.push({index:K,itemId:O,point:Ti,label:En?{text:En,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0});const zr=[P,ti],$r=[we,bn];if(zr.some(xs=>xs==null))return;$r.some(xs=>xs==null)&&($r[0]=0,$r[1]=0);const Ya=w(zr[0],+$r[0],K,"right");J.push(Ya[0]),Y.push(Ya[1]);const qi=w(zr[1],+$r[1],K,"left");J.push(qi[0]),Y.push(qi[1]),ae.push({x:NaN,y:NaN}),re.push(void 0),ae.push(Ya[0]),re.push(we),bn!==void 0&&(ae.push(qi[0]),re.push(we))})});for(let D=Y.length-1;D>=0;D--)J.push(Y[D])}),a})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:e}=this.marker,t=np(e);return new t}updateMarkerSelection(e){return gh(this,void 0,void 0,function*(){const{nodeData:t,markerSelection:i}=e,{marker:{enabled:s}}=this,n=s&&t?t:[];return this.marker.isDirty()&&i.clear(),i.update(n,o=>{o.tag=Vh.Marker})})}updateMarkerNodes(e){var t;return gh(this,void 0,void 0,function*(){const{markerSelection:i,isHighlight:s}=e,{id:n,xKey:o="",marker:a,seriesItemEnabled:l,yKeys:c,fills:d,strokes:h,fillOpacity:u,marker:{fillOpacity:p=u},strokeOpacity:f,highlightStyle:{item:{fill:g,fillOpacity:m=p,stroke:v,strokeWidth:C}},ctx:{callbackCache:y}}=this,{size:R,formatter:b}=a,w=(t=a.strokeWidth)!==null&&t!==void 0?t:this.strokeWidth,x=typeof a.shape=="function";i.each((O,M)=>{var N,V,I,H,B,X,J,Y;const ae=c.indexOf(M.yKey),re=s&&g!==void 0?g:(N=a.fill)!==null&&N!==void 0?N:d[ae%d.length],K=s?m:p,D=s&&v!==void 0?v:(V=a.stroke)!==null&&V!==void 0?V:h[ae%d.length],T=s&&C!==void 0?C:w;let P;b&&(P=y.call(b,{datum:M.datum,xKey:o,yKey:M.yKey,fill:re,stroke:D,strokeWidth:T,size:R,highlighted:s,seriesId:n})),O.fill=(I=P==null?void 0:P.fill)!==null&&I!==void 0?I:re,O.stroke=(H=P==null?void 0:P.stroke)!==null&&H!==void 0?H:D,O.strokeWidth=(B=P==null?void 0:P.strokeWidth)!==null&&B!==void 0?B:T,O.fillOpacity=K??1,O.strokeOpacity=(J=(X=a.strokeOpacity)!==null&&X!==void 0?X:f)!==null&&J!==void 0?J:1,O.size=(Y=P==null?void 0:P.size)!==null&&Y!==void 0?Y:R,O.translationX=M.point.x,O.translationY=M.point.y,O.visible=O.size>0&&!!l.get(M.yKey)&&!isNaN(M.point.x)&&!isNaN(M.point.y),!(!x||O.dirtyPath)&&(O.path.clear({trackChanges:!0}),O.updatePath(),O.checkPathDirty())}),s||this.marker.markClean()})}updateLabelSelection(e){return gh(this,void 0,void 0,function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.tag=Vh.Label})})}updateLabelNodes(e){return gh(this,void 0,void 0,function*(){const{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:o,fontFamily:a,color:l}=this.label;t.each((c,d)=>{const{point:h,label:u}=d;u&&i?(c.fontStyle=s,c.fontWeight=n,c.fontSize=o,c.fontFamily=a,c.textAlign=u.textAlign,c.textBaseline=u.textBaseline,c.text=u.text,c.x=h.x,c.y=h.y-10,c.fill=l,c.visible=!0):c.visible=!1})})}getNodeClickEvent(e,t){var i;return new D0((i=this.xKey)!==null&&i!==void 0?i:"",t.yKey,e,t,this)}getNodeDoubleClickEvent(e,t){var i;return new O0((i=this.xKey)!==null&&i!==void 0?i:"",t.yKey,e,t,this)}getTooltipHtml(e){var t,i,s,n;const{xKey:o,id:a}=this,{yKey:l}=e,c=(t=this.dataModel)===null||t===void 0?void 0:t.resolveProcessedDataIndexById(`yValue-${l}`);if(!(o&&l)||!c)return"";const d=e.datum,h=d[o],u=d[l],{xAxis:p,yAxis:f,yKeys:g}=this;if(!(p&&f&&Js(u))||!c)return"";const{xName:m,yNames:v,fills:C,strokes:y,tooltip:R,marker:b}=this,{size:w,formatter:x,strokeWidth:O,fill:M,stroke:N}=b,V=p.formatDatum(h),I=f.formatDatum(u),H=g.indexOf(l),B=(s=(i=this.processedData)===null||i===void 0?void 0:i.data[e.index])===null||s===void 0?void 0:s.values[0][c==null?void 0:c.index],X=v[H],J=fi(X),Y=fi(V+": "+I),ae=O??this.strokeWidth,re=M??C[H%C.length],K=N??y[H%C.length];let D;x&&(D=x({datum:d,xKey:o,yKey:l,fill:re,stroke:K,strokeWidth:ae,size:w,highlighted:!1,seriesId:a}));const T=(n=D==null?void 0:D.fill)!==null&&n!==void 0?n:re,P={title:J,backgroundColor:T,content:Y},{renderer:F,format:L}=R;if(L||F){const k={datum:d,xKey:o,xName:m,xValue:h,yKey:l,yValue:u,processedYValue:B,yName:X,color:T,title:J,seriesId:a};if(L)return Gi({content:hE(L,k)},P);if(F)return Gi(F(k),P)}return Gi(P)}getLegendData(){var e,t,i,s,n;const{data:o,id:a,xKey:l,yKeys:c,yNames:d,seriesItemEnabled:h,marker:u,fills:p,strokes:f,fillOpacity:g,strokeOpacity:m}=this;if(!(o!=null&&o.length)||!l||!c.length)return[];const v=[];for(let C=c.length-1;C>=0;C--){const y=c[C];v.push({legendType:"category",id:a,itemId:y,seriesId:a,enabled:(e=h.get(y))!==null&&e!==void 0?e:!1,label:{text:d[C]||c[C]},marker:{shape:u.shape,fill:(t=u.fill)!==null&&t!==void 0?t:p[C%p.length],stroke:(i=u.stroke)!==null&&i!==void 0?i:f[C%f.length],fillOpacity:(s=u.fillOpacity)!==null&&s!==void 0?s:g,strokeOpacity:(n=u.strokeOpacity)!==null&&n!==void 0?n:m}})}return v}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,o={},l=Object.values(n).reduce((c,d)=>c+d,0)===1&&t;if(s.id===this.id){const c=Object.values(n).filter(d=>d===1).length===Object.keys(n).length;this.yKeys.forEach(d=>{var h;const p=d===i||l||c&&t;o[d]=(h=o[d])!==null&&h!==void 0?h:p})}else this.yKeys.forEach(c=>{o[c]=l});Object.keys(o).forEach(c=>{super.toggleSeriesItem(c,o[c])})}animateEmptyUpdateReady({markerSelections:e,labelSelections:t,contextData:i,paths:s,seriesRect:n}){const{strokes:o,fills:a,fillOpacity:l,lineDash:c,lineDashOffset:d,strokeOpacity:h,strokeWidth:u,shadow:p}=this;i.forEach(({fillSelectionData:f,strokeSelectionData:g,itemId:m},v)=>{var C,y,R;const[b,w]=s[v],x=1e3,O=200,M={from:0,to:(C=n==null?void 0:n.width)!==null&&C!==void 0?C:0,disableInteractions:!0,duration:x,ease:To,repeat:0};{const{points:N,yValues:V}=g;w.tag=Vh.Stroke,w.fill=void 0,w.lineJoin=w.lineCap="round",w.pointerEvents=rs.None,w.stroke=o[v%o.length],w.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:m}),w.strokeOpacity=h,w.lineDash=c,w.lineDashOffset=d,(y=this.animationManager)===null||y===void 0||y.animate(`${this.id}_empty-update-ready_stroke_${v}`,Object.assign(Object.assign({},M),{onUpdate(I){w.path.clear({trackChanges:!0});let H=!0;N.forEach((B,X)=>{if(V[X]===void 0||isNaN(B.x)||isNaN(B.y))H=!0;else if(B.x<=I)H?(w.path.moveTo(B.x,B.y),H=!1):w.path.lineTo(B.x,B.y);else if(X>0&&V[X]!==void 0&&V[X-1]!==void 0&&N[X-1].x<=I){const J=N[X-1],Y=B,ae=I,re=J.y+(ae-J.x)*(Y.y-J.y)/(Y.x-J.x);w.path.lineTo(ae,re)}}),w.checkPathDirty()}}))}{const{points:N}=f,V=N.slice(0,N.length/2),I=N.slice(N.length/2);b.tag=Vh.Fill,b.stroke=void 0,b.lineJoin="round",b.pointerEvents=rs.None,b.fill=a[v%a.length],b.fillOpacity=l,b.strokeOpacity=h,b.strokeWidth=u,b.lineDash=c,b.lineDashOffset=d,b.fillShadow=p,(R=this.animationManager)===null||R===void 0||R.animate(`${this.id}_empty-update-ready_fill_${v}`,Object.assign(Object.assign({},M),{onUpdate(H){b.path.clear({trackChanges:!0});let B=0,X=0;V.forEach((J,Y)=>{if(J.x<=H)B=J.x,X=J.y,b.path.lineTo(J.x,J.y);else if(Y>0&&V[Y-1].x<H){const ae=V[Y-1],re=J;B=H,X=ae.y+(B-ae.x)*(re.y-ae.y)/(re.x-ae.x),b.path.lineTo(B,X)}}),I.forEach((J,Y)=>{const ae=I.length-Y-1;if(J.x<=H)b.path.lineTo(J.x,J.y);else if(ae>0&&V[ae-1].x<H){const re=J,K=I[Y+1],D=re.y+(B-re.x)*(K.y-re.y)/(K.x-re.x);b.path.lineTo(B,D)}}),I.length>0&&b.path.lineTo(I[I.length-1].x,I[I.length-1].y),b.path.closePath(),b.checkPathDirty()}}))}e[v].each((N,V)=>{var I,H,B,X;const J=n!=null&&n.width?V.point.x/n.width*x:0,Y=this.animateFormatter(V),ae=(H=(I=V.point)===null||I===void 0?void 0:I.size)!==null&&H!==void 0?H:0;(B=this.animationManager)===null||B===void 0||B.animate(`${this.id}_empty-update-ready_${N.id}`,Object.assign(Object.assign({},M),{to:(X=Y==null?void 0:Y.size)!==null&&X!==void 0?X:ae,delay:J,duration:O,onUpdate(re){N.size=re}}))}),t[v].each((N,V)=>{var I;const H=n!=null&&n.width?V.point.x/n.width*x:0;(I=this.animationManager)===null||I===void 0||I.animate(`${this.id}_empty-update-ready_${N.id}`,{from:0,to:1,delay:H,duration:O,ease:To,repeat:0,onUpdate:B=>{N.opacity=B}})})})}animateReadyUpdate({contextData:e,paths:t}){const{strokes:i,fills:s,fillOpacity:n,lineDash:o,lineDashOffset:a,strokeOpacity:l,strokeWidth:c,shadow:d}=this;e.forEach(({strokeSelectionData:h,fillSelectionData:u,itemId:p},f)=>{const[g,m]=t[f];m.stroke=i[f%i.length],m.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:p}),m.strokeOpacity=l,m.lineDash=o,m.lineDashOffset=a,m.path.clear({trackChanges:!0});let v=!0;h.points.forEach((C,y)=>{h.yValues[y]===void 0||isNaN(C.x)||isNaN(C.y)?v=!0:v?(m.path.moveTo(C.x,C.y),v=!1):m.path.lineTo(C.x,C.y)}),m.checkPathDirty(),g.fill=s[f%s.length],g.fillOpacity=n,g.strokeOpacity=l,g.strokeWidth=c,g.lineDash=o,g.lineDashOffset=a,g.fillShadow=d,g.path.clear({trackChanges:!0}),u.points.forEach(C=>{g.path.lineTo(C.x,C.y)}),g.path.closePath(),g.checkPathDirty()})}animateFormatter(e){var t,i,s;const{marker:n,fills:o,strokes:a,xKey:l="",yKeys:c,id:d,ctx:{callbackCache:h}}=this,{size:u,formatter:p}=n,f=c.indexOf(e.yKey),g=(t=n.fill)!==null&&t!==void 0?t:o[f%o.length],m=(i=n.stroke)!==null&&i!==void 0?i:a[f%o.length],v=(s=n.strokeWidth)!==null&&s!==void 0?s:this.strokeWidth;let C;return p&&(C=h.call(p,{datum:e.datum,xKey:l,yKey:e.yKey,fill:g,stroke:m,strokeWidth:v,size:u,highlighted:!1,seriesId:d})),C}isLabelEnabled(){return this.label.enabled}}ps.className="AreaSeries";ps.type="area";us([_(Na)],ps.prototype,"fills",void 0);us([_(Na)],ps.prototype,"strokes",void 0);us([_(ce(0,1))],ps.prototype,"fillOpacity",void 0);us([_(ce(0,1))],ps.prototype,"strokeOpacity",void 0);us([_(ep)],ps.prototype,"lineDash",void 0);us([_(ce(0))],ps.prototype,"lineDashOffset",void 0);us([_(Le)],ps.prototype,"xKey",void 0);us([_(Le)],ps.prototype,"xName",void 0);us([_(jg)],ps.prototype,"_yKeys",void 0);us([_(Kb)],ps.prototype,"_visibles",void 0);us([_(jg)],ps.prototype,"yNames",void 0);us([_(ht())],ps.prototype,"_normalizedTo",void 0);us([_(ce(0))],ps.prototype,"strokeWidth",void 0);var lp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class wi extends Ei{constructor(){super(...arguments),this.borderPath=new FS,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=rt.defaultStyles.strokeWidth,this.effectiveStrokeWidth=rt.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var e;return!!(this.lastUpdatePathStrokeWidth!==this.strokeWidth||this.path.isDirty()||this.borderPath.isDirty()||!((e=this.clipPath)===null||e===void 0)&&e.isDirty())}updatePath(){var e,t,i;const{path:s,borderPath:n,crisp:o}=this;let{x:a,y:l,width:c,height:d,strokeWidth:h}=this;const p=1/((t=(e=this.layerManager)===null||e===void 0?void 0:e.canvas.pixelRatio)!==null&&t!==void 0?t:1);let f=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),o&&(c<=p&&(f*=c/p),d<=p&&(f*=d/p),c=this.align(a,c),d=this.align(l,d),a=this.align(a),l=this.align(l)),h)if(c<p){const g=a+p/2;n.moveTo(g,l),n.lineTo(g,l+d),h=p,this.borderClipPath=void 0}else if(d<p){const g=l+p/2;n.moveTo(a,g),n.lineTo(a+c,g),h=p,this.borderClipPath=void 0}else if(h<c&&h<d){const g=h/2;a+=g,l+=g,c-=h,d-=h,this.borderClipPath=void 0,s.rect(a,l,c,d),n.rect(a,l,c,d)}else this.borderClipPath=(i=this.borderClipPath)!==null&&i!==void 0?i:new FS,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(a,l,c,d),n.rect(a,l,c,d);else this.borderClipPath=void 0,s.rect(a,l,c,d);this.effectiveStrokeWidth=h,this.lastUpdatePathStrokeWidth=h,this.microPixelEffectOpacity=f}computeBBox(){const{x:e,y:t,width:i,height:s}=this;return new qe(e,t,i,s)}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=e;e.globalAlpha=n*s*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:o,microPixelEffectOpacity:a}=this;if(!!t&&!!i){const{strokeOpacity:c,lineDash:d,lineDashOffset:h,lineCap:u,lineJoin:p}=this;n&&(n.draw(e),e.clip()),s.draw(e);const{globalAlpha:f}=e;e.strokeStyle=t,e.globalAlpha=f*o*c*a,e.lineWidth=i,d&&e.setLineDash(d),h&&(e.lineDashOffset=h),u&&(e.lineCap=u),p&&(e.lineJoin=p),e.stroke(),e.globalAlpha=f}}}wi.className="Rect";lp([Tt()],wi.prototype,"x",void 0);lp([Tt()],wi.prototype,"y",void 0);lp([Tt()],wi.prototype,"width",void 0);lp([Tt()],wi.prototype,"height",void 0);lp([Tt()],wi.prototype,"radius",void 0);lp([Tt()],wi.prototype,"crisp",void 0);var S3=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};function w3({value:r,rect:e,placement:t,seriesId:i,padding:s=0,formatter:n,barAlongX:o,ctx:{callbackCache:a}}){let l;n&&(l=a.call(n,{value:Js(r)?r:void 0,seriesId:i})),l===void 0&&(l=Js(r)?r.toFixed(2):"");let c=e.x+e.width/2,d=e.y+e.height/2,h="center",u="middle";const p=r>=0;switch(t){case"start":{o?(c=p?e.x-s:e.x+e.width+s,h=p?"start":"end"):(d=p?e.y+e.height+s:e.y-s,u=p?"top":"bottom");break}case"outside":case"end":{o?(c=p?e.x+e.width+s:e.x-s,h=p?"start":"end"):(d=p?e.y-s:e.y+e.height+s,u=p?"bottom":"top");break}case"inside":default:{u="middle";break}}return{text:l,textAlign:h,textBaseline:u,x:c,y:d}}function b3({rect:r,config:e}){const{crisp:t=!0,fill:i,stroke:s,strokeWidth:n,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,visible:h=!0}=e;r.crisp=t,r.fill=i,r.stroke=s,r.strokeWidth=n,r.fillOpacity=o,r.strokeOpacity=a,r.lineDash=l,r.lineDashOffset=c,r.fillShadow=d,r.visible=h}function E3(r){var e,t,i,s,n,o,a,{datum:l,isHighlighted:c,style:d,highlightStyle:h,formatter:u,seriesId:p,stackGroup:f,ctx:{callbackCache:g}}=r,m=S3(r,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const v=c&&(e=h.fill)!==null&&e!==void 0?e:d.fill,C=c&&(t=h.stroke)!==null&&t!==void 0?t:d.stroke,y=c&&(i=h.strokeWidth)!==null&&i!==void 0?i:d.strokeWidth,R=c&&(s=h.fillOpacity)!==null&&s!==void 0?s:d.fillOpacity,{strokeOpacity:b,fillShadow:w,lineDash:x,lineDashOffset:O}=d;let M;return u&&(M=g.call(u,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:v,stroke:C,strokeWidth:y,highlighted:c,seriesId:p,stackGroup:f},m))),{fill:(n=M==null?void 0:M.fill)!==null&&n!==void 0?n:v,stroke:(o=M==null?void 0:M.stroke)!==null&&o!==void 0?o:C,strokeWidth:(a=M==null?void 0:M.strokeWidth)!==null&&a!==void 0?a:y,fillOpacity:R,strokeOpacity:b,lineDash:x,lineDashOffset:O,fillShadow:w}}function x3(r=[]){const[e,t]=r;return!(e!==0||t!==1)}function R3({labelNode:r,labelDatum:e,config:t,visible:i}){if(e&&t&&t.enabled){const{x:s,y:n,text:o,textAlign:a,textBaseline:l}=e,{fontStyle:c,fontWeight:d,fontSize:h,fontFamily:u,color:p}=t;r.fontStyle=c,r.fontWeight=d,r.fontSize=h,r.fontFamily=u,r.textAlign=a,r.textBaseline=l,r.text=o,r.x=s,r.y=n,r.fill=p,r.visible=i}else r.visible=!1}var Ki=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},mh=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};const T3=["inside","outside"],D3=(r,e)=>It(r,e,t=>T3.includes(t));var jv;(function(r){r[r.Bar=0]="Bar",r[r.Label=1]="Label"})(jv||(jv={}));class gE extends $i{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}Ki([_(Lt)],gE.prototype,"formatter",void 0);Ki([_(D3)],gE.prototype,"placement",void 0);class aM extends Va{constructor(){super(...arguments),this.renderer=void 0}}Ki([_(Lt)],aM.prototype,"renderer",void 0);function O3(r){return r.length>0&&Array.isArray(r[0])}class xi extends op{constructor(e){super({moduleCtx:e,pickModes:[si.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:{[ye.X]:["xKey"],[ye.Y]:["yKeys"]},directionNames:{[ye.X]:["xName"],[ye.Y]:["yNames"]}}),this.label=new gE,this.tooltip=new aM,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.groupScale=new Ro,this.xKey=void 0,this.xName=void 0,this.cumYKeyCount=[],this.flatYKeys=void 0,this.hideInLegend=[],this.yKeys=[],this.yKeysCache=[],this.visibles=[],this.grouped=!1,this.stackGroups={},this.yNames={},this.legendItemNames={},this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.label.enabled=!1}resolveKeyDirection(e){return this.getBarDirection()===ye.X?e===ye.X?ye.Y:ye.X:e}processYKeys(){let{yKeys:e}=this,t;O3(e)||(t=e,e=this.grouped?t.map(s=>[s]):[t]);const i=Object.values(this.stackGroups);if(i.length>0){const s=u=>u.reduce((p,f)=>p.concat(f),[]),n=s(e),o=new Set(s(i)),a=n.filter(u=>!o.has(u));e=i.map(u=>u),a.length>0&&e.push(a);const l=u=>u.reduce((p,f,g)=>p.set(f,g),new Map),c=s(e),d=l(c),h=u=>{const p=Array.from({length:u.length});return u.forEach((f,g)=>{const m=n[g],v=d.get(m);p[v]=f}),p};this.fills=h(this.fills),this.strokes=h(this.strokes),this.visibles=h(this.visibles)}if(!tE(this.yKeysCache,e)){this.flatYKeys=t||void 0,this.yKeys=e;let s=0;this.cumYKeyCount=[];const n=[];e.forEach((a,l)=>{a.length>0&&n.push(String(l)),this.cumYKeyCount.push(s),s+=a.length}),this.processSeriesItemEnabled();const{groupScale:o}=this;o.domain=n}this.yKeysCache=e}processSeriesItemEnabled(){const{seriesItemEnabled:e}=this,t=(n,o)=>n.concat(...Array.isArray(o)?o:[o]),i=this.visibles.reduce(t,[]);e.clear();let s=0;this.yKeys.forEach(n=>{n.forEach(o=>{var a;return e.set(o,(a=i[s++])!==null&&a!==void 0?a:!0)})})}getStackGroup(e){var t;const{stackGroups:i}=this;return(t=Object.entries(i).find(([s,n])=>n.includes(e)))===null||t===void 0?void 0:t[0]}processYNames(){const e=this.yNames;if(Array.isArray(e)&&this.flatYKeys){const t={};this.flatYKeys.forEach((i,s)=>{t[i]=e[s]}),this.yNames=t}}processData(){var e,t,i,s,n;return mh(this,void 0,void 0,function*(){this.processYKeys(),this.processYNames();const{xKey:o,seriesItemEnabled:a,normalizedTo:l,data:c=[]}=this,d=Math.abs(l??NaN),h=((e=this.getCategoryAxis())===null||e===void 0?void 0:e.scale)instanceof ct,u=((t=this.getValueAxis())===null||t===void 0?void 0:t.scale)instanceof ct,p=[...a.entries()].filter(([,v])=>v).map(([v])=>v),f=this.yKeys.map(v=>v.filter(C=>a.get(C))).filter(v=>v.length>0),g=d&&isFinite(d)?d:void 0,m=[];g&&m.push(JP(p,g,"sum")),this.dataModel=new Ga({props:[Zb(o,h),...p.map(v=>Fn(v,u,{invalidValue:null})),...f.map(v=>CP(v)),...h?[Py]:[],cR,...m],groupByKeys:!0,dataVisible:this.visible&&p.length>0}),this.processedData=this.dataModel.processData(c),this.smallestDataInterval={x:(n=(s=(i=this.processedData)===null||i===void 0?void 0:i.reduced)===null||s===void 0?void 0:s[Py.property])!==null&&n!==void 0?n:1/0,y:1/0}})}getDomain(e){var t;const{processedData:i}=this;if(!i)return[];const{defs:{keys:[s]},domain:{keys:[n],values:[o]},reduced:{[Py.property]:a,[cR.property]:l}={}}=i;if(e===this.getCategoryDirection()){if(s.valueType==="category")return n;const c=(t=Ir(n))!==null&&t!==void 0?t:[NaN,NaN];return e===ye.Y?[c[0]+-a,c[1]]:[c[0],c[1]+a]}else return this.getValueAxis()instanceof xl?this.fixNumericExtent(o):this.fixNumericExtent(l)}getNodeClickEvent(e,t){var i;return new D0((i=this.xKey)!==null&&i!==void 0?i:"",t.yKey,e,t,this)}getNodeDoubleClickEvent(e,t){var i;return new O0((i=this.xKey)!==null&&i!==void 0?i:"",t.yKey,e,t,this)}getCategoryAxis(){return this.getCategoryDirection()===ye.Y?this.yAxis:this.xAxis}getValueAxis(){return this.getBarDirection()===ye.Y?this.yAxis:this.xAxis}calculateStep(e){var t;const{smallestDataInterval:i}=this,s=this.getCategoryAxis();if(!s)return;const o=(s.dataDomain[1]-s.dataDomain[0])/((t=i==null?void 0:i.x)!==null&&t!==void 0?t:1)+1,a=Math.floor(e),l=Math.min(o,a);return e/Math.max(1,l)}createNodeData(){return mh(this,void 0,void 0,function*(){const{data:e,visible:t}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&t&&i&&s))return[];const n=i.scale,o=s.scale,{groupScale:a,yKeys:l,xKey:c="",cumYKeyCount:d,fills:h,strokes:u,strokeWidth:p,seriesItemEnabled:f,label:g,id:m,processedData:v,ctx:C}=this;let y=n.bandwidth;if(n instanceof ct){const w=Math.max(i.range[0],i.range[1]);y=this.calculateStep(w)}a.range=[0,y],i instanceof ba?a.padding=i.groupPaddingInner:i instanceof ad?a.padding=.1:a.padding=0,a.padding===0?a.round=!1:a.round=!0;const R=a.bandwidth>=1?a.bandwidth:a.rawBandwidth,b=[];return v==null||v.data.forEach(({keys:w,datum:x,values:O},M)=>{var N,V,I,H,B,X;const J=n.convert(w[0]);for(let Y=0;Y<((N=l==null?void 0:l.length)!==null&&N!==void 0?N:0);Y++){const ae=(V=l==null?void 0:l[Y])!==null&&V!==void 0?V:[];(I=b[Y])!==null&&I!==void 0||(b[Y]=[]);let re=0,K=0;for(let D=0;D<ae.length;D++){const T=ae[D],P=(H=v==null?void 0:v.indices.values[T])!==null&&H!==void 0?H:-1;if((B=(X=b[Y])[D])!==null&&B!==void 0||(X[D]={itemId:T,nodeData:[],labelData:[]}),P===void 0)continue;const F=O[0][P],L=+F,k=J+a.convert(String(Y));if(!i.inRange(k,R)||isNaN(L))continue;const z=L<0?re:K,Z=o.convert(z+L,{strict:!1}),he=o.convert(z,{strict:!1}),xe=this.getBarDirection()===ye.X,we={x:xe?Math.min(Z,he):k,y:xe?k:Math.min(Z,he),width:xe?Math.abs(he-Z):R,height:xe?R:Math.abs(he-Z)},Qt={x:we.x+we.width/2,y:we.y+we.height/2},{fontStyle:ei,fontWeight:ti,fontSize:di,fontFamily:Mt,color:bn,formatter:Ti,placement:En}=g,{text:zr,textAlign:$r,textBaseline:Ya,x:qi,y:xs}=w3({value:F,rect:we,formatter:Ti,placement:En,seriesId:m,barAlongX:xe,ctx:C}),oh=d[Y]+D,wm={index:M,series:this,itemId:T,datum:x[0],cumulativeValue:z+L,yValue:F,yKey:T,xKey:c,x:we.x,y:we.y,width:we.width,height:we.height,nodeMidPoint:Qt,colorIndex:oh,fill:h[oh%h.length],stroke:u[oh%u.length],strokeWidth:p,label:f.get(T)&&zr?{text:zr,fontStyle:ei,fontWeight:ti,fontSize:di,fontFamily:Mt,textAlign:$r,textBaseline:Ya,fill:bn,x:qi,y:xs}:void 0};b[Y][D].nodeData.push(wm),b[Y][D].labelData.push(wm),L<0?re+=L:K+=L}}}),b.reduce((w,x)=>w.concat(...x),[])})}nodeFactory(){return new wi}updateDatumSelection(e){return mh(this,void 0,void 0,function*(){const{nodeData:t,datumSelection:i}=e;return i.update(t,s=>s.tag=jv.Bar)})}updateDatumNodes(e){var t;return mh(this,void 0,void 0,function*(){const{datumSelection:i,isHighlight:s}=e,{fills:n,strokes:o,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,shadow:h,formatter:u,id:p,highlightStyle:{item:f},ctx:g}=this,m=x3((t=this.xAxis)===null||t===void 0?void 0:t.visibleRange),v=this.getCategoryDirection()===ye.X;i.each((C,y)=>{const{colorIndex:R}=y,b={fill:n[R%n.length],stroke:o[R%n.length],fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:h,strokeWidth:this.getStrokeWidth(this.strokeWidth,y)},w=v?y.width>0:y.height>0,x=E3({datum:y,isHighlighted:s,style:b,highlightStyle:f,formatter:u,seriesId:p,stackGroup:this.getStackGroup(y.yKey),ctx:g});x.crisp=m,x.visible=w,b3({rect:C,config:x})})})}updateLabelSelection(e){return mh(this,void 0,void 0,function*(){const{labelData:t,labelSelection:i}=e,{enabled:s}=this.label,n=s?t:[];return i.update(n,o=>{o.tag=jv.Label,o.pointerEvents=rs.None})})}updateLabelNodes(e){return mh(this,void 0,void 0,function*(){const{labelSelection:t}=e;t.each((i,s)=>{const n=s.label;R3({labelNode:i,labelDatum:n,config:this.label,visible:!0})})})}getTooltipHtml(e){var t;const{xKey:i,yKeys:s,processedData:n,ctx:{callbackCache:o}}=this,a=this.getCategoryAxis(),l=this.getValueAxis(),{yKey:c}=e;if(!n||!i||!c||!a||!l)return"";let d=0,h=0,u=0;for(;u<s.length;u++){const K=s[u];if(h=K.indexOf(c),h>=0){d+=h;break}d+=K.length}const{xName:p,yNames:f,fills:g,strokes:m,tooltip:v,formatter:C,id:y}=this,{renderer:R}=v,b=e.datum,w=f[c],x=this.getStackGroup(c),O=g[d%g.length],M=m[d%g.length],N=this.getStrokeWidth(this.strokeWidth),V=b[i],I=b[c],H=fi(a.formatDatum(V)),B=fi(l.formatDatum(I)),X=fi(w),J=H+": "+B;let Y;C&&(Y=o.call(C,{datum:b,fill:O,stroke:M,strokeWidth:N,highlighted:!1,xKey:i,yKey:c,seriesId:y,stackGroup:x}));const ae=(t=Y==null?void 0:Y.fill)!==null&&t!==void 0?t:O,re={title:X,backgroundColor:ae,content:J};return R?Gi(R({datum:b,xKey:i,xValue:V,xName:p,yKey:c,yValue:I,yName:w,color:ae,title:X,seriesId:y,stackGroup:x}),re):Gi(re)}getLegendData(){const{id:e,data:t,xKey:i,yKeys:s,yNames:n,legendItemNames:o,cumYKeyCount:a,seriesItemEnabled:l,hideInLegend:c,fills:d,strokes:h,fillOpacity:u,strokeOpacity:p}=this;if(!(t!=null&&t.length)||!i||!s.length)return[];const f=[];return this.validateLegendData(),this.yKeys.forEach((g,m)=>{var v,C,y;for(let R=0;R<g.length;R++){const b=g[R];if(c.indexOf(b)>=0)return;const w=a[m]+R;f.push({legendType:"category",id:e,itemId:b,seriesId:e,enabled:(v=l.get(b))!==null&&v!==void 0?v:!1,label:{text:(y=(C=o[b])!==null&&C!==void 0?C:n[b])!==null&&y!==void 0?y:b},marker:{fill:d[w%d.length],stroke:h[w%h.length],fillOpacity:u,strokeOpacity:p}})}}),f}validateLegendData(){const{hideInLegend:e,legendItemNames:t}=this;let i=!1;this.yKeys.forEach(s=>{s.forEach(n=>{if(e.indexOf(n)>=0)return;const o=t[n]!==void 0;i&&!o&&ge.warnOnce("a series is missing the legendItemName property, unexpected behaviour may occur."),i=o})})}onLegendItemClick(e){const{itemId:t,enabled:i,series:s}=e;s.id===this.id&&(super.toggleSeriesItem(t,i),Object.keys(this.legendItemNames).filter(n=>this.legendItemNames[n]!==void 0&&this.legendItemNames[n]===this.legendItemNames[t]).forEach(n=>{n!==t&&super.toggleSeriesItem(n,i)}),this.calculateVisibleDomain())}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,numVisibleItems:s}=e,n=Object.values(s).reduce((l,c)=>l+c,0),o=Object.values(s).filter(l=>l===1).length===Object.keys(s).length,a={};this.yKeys.forEach(l=>{l.forEach(c=>{var d;const p=c===i||n===1&&t||o&&t;a[c]=(d=a[c])!==null&&d!==void 0?d:p,Object.keys(this.legendItemNames).filter(f=>this.legendItemNames[f]!==void 0&&this.legendItemNames[f]===this.legendItemNames[c]).forEach(f=>{var g;a[f]=(g=a[f])!==null&&g!==void 0?g:p})})}),Object.keys(a).forEach(l=>{super.toggleSeriesItem(l,a[l])}),this.calculateVisibleDomain()}calculateVisibleDomain(){const e=this.yKeys.map(i=>i.slice());this.seriesItemEnabled.forEach((i,s)=>{i||e.forEach(n=>{const o=n.indexOf(s);o>=0&&n.splice(o,1)})});const t=[];e.forEach((i,s)=>{i.length>0&&t.push(String(s))}),this.groupScale.domain=t,this.nodeDataRefresh=!0}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){let n=1/0;e.forEach(o=>o.each((a,l)=>{l.yValue>=0&&(n=Math.min(n,l.x))})),e.forEach(o=>{o.each((a,l)=>{var c;(c=this.animationManager)===null||c===void 0||c.animateMany(`${this.id}_empty-update-ready_${a.id}`,[{from:n,to:l.x},{from:0,to:l.width}],{disableInteractions:!0,duration:1e3,ease:P0,repeat:0,onUpdate([d,h]){a.x=d,a.width=h,a.y=l.y,a.height=l.height}})})}),t.forEach(o=>{o.each(a=>{var l;(l=this.animationManager)===null||l===void 0||l.animate(`${this.id}_empty-update-ready_${a.id}`,{from:0,to:1,delay:1e3,duration:200,ease:To,repeat:0,onUpdate:c=>{a.opacity=c}})})})}animateReadyUpdate({datumSelections:e}){e.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(e){this.resetSelectionRects(e)}animateReadyResize({datumSelections:e}){var t;(t=this.animationManager)===null||t===void 0||t.stop(),e.forEach(i=>{this.resetSelectionRects(i)})}resetSelectionRects(e){e.each((t,i)=>{t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height})}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return ye.X}getCategoryDirection(){return ye.Y}}xi.className="BarSeries";xi.type="bar";Ki([_(Na)],xi.prototype,"fills",void 0);Ki([_(Na)],xi.prototype,"strokes",void 0);Ki([_(ce(0,1))],xi.prototype,"fillOpacity",void 0);Ki([_(ce(0,1))],xi.prototype,"strokeOpacity",void 0);Ki([_(ep)],xi.prototype,"lineDash",void 0);Ki([_(ce(0))],xi.prototype,"lineDashOffset",void 0);Ki([_(Lt)],xi.prototype,"formatter",void 0);Ki([_(Le)],xi.prototype,"xKey",void 0);Ki([_(Le)],xi.prototype,"xName",void 0);Ki([_(jg)],xi.prototype,"hideInLegend",void 0);Ki([_(Kb)],xi.prototype,"visibles",void 0);Ki([_(gt)],xi.prototype,"grouped",void 0);Ki([_(ht())],xi.prototype,"normalizedTo",void 0);Ki([_(ce(0))],xi.prototype,"strokeWidth",void 0);class mE extends xi{getBarDirection(){return ye.Y}getCategoryDirection(){return ye.X}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){let n=0;e.forEach(o=>o.each((a,l)=>{l.yValue>=0&&(n=Math.max(n,l.height+l.y))})),e.forEach(o=>{o.each((a,l)=>{var c;(c=this.animationManager)===null||c===void 0||c.animateMany(`${this.id}_empty-update-ready_${a.id}`,[{from:n,to:l.y},{from:0,to:l.height}],{disableInteractions:!0,duration:1e3,ease:P0,repeat:0,onUpdate([d,h]){a.y=d,a.height=h,a.x=l.x,a.width=l.width}})})}),t.forEach(o=>{o.each(a=>{var l;(l=this.animationManager)===null||l===void 0||l.animate(`${this.id}_empty-update-ready_${a.id}`,{from:0,to:1,delay:1e3,duration:200,ease:To,repeat:0,onUpdate:c=>{a.opacity=c}})})})}}mE.type="column";mE.className="ColumnSeries";var Yi=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},vh=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};const A3=["count","sum","mean"],P3=Ee(r=>A3.includes(r),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var zv;(function(r){r[r.Bin=0]="Bin",r[r.Label=1]="Label"})(zv||(zv={}));class lM extends $i{constructor(){super(...arguments),this.formatter=void 0}}Yi([_(Lt)],lM.prototype,"formatter",void 0);const uR=10;class cM extends Va{constructor(){super(...arguments),this.renderer=void 0}}Yi([_(Lt)],cM.prototype,"renderer",void 0);class Ri extends op{constructor(e){super({moduleCtx:e,pickModes:[si.EXACT_SHAPE_MATCH]}),this.label=new lM,this.tooltip=new cM,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.label.enabled=!1}deriveBins(e){if(this.binCount===void 0){const t=R0(e[0],e[1],uR),i=Bf(e[0],e[1],uR),s=t[0],n=o=>[o,o+i];return[[s-i,s],...t.map(n)]}else return this.calculateNiceBins(e,this.binCount)}calculateNiceBins(e,t){const i=Math.floor(e[0]),s=e[1],n=t||1,{start:o,binSize:a}=this.calculateNiceStart(i,s,n);return this.getBins(o,s,a,n)}getBins(e,t,i,s){const n=[];for(let o=0;o<s;o++){const a=Math.round((e+o*i)*10)/10;let l=Math.round((e+(o+1)*i)*10)/10;o===s-1&&(l=Math.max(l,t)),n[o]=[a,l]}return n}calculateNiceStart(e,t,i){const s=Math.abs(t-e)/i,n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return{start:Math.floor(e/o)*o,binSize:s}}processData(){return vh(this,void 0,void 0,function*(){const{xKey:e,yKey:t,data:i,areaPlot:s,aggregation:n}=this,o=[Zb(e,!0),c3];if(t){let l=qx();n==="count"||(n==="sum"?l=wB([t]):n==="mean"&&(l=bB([t]))),s&&(l=Zx([t],l)),o.push(Fn(t,!0,{invalidValue:void 0}),l)}else{let l=qx();s&&(l=Zx([],l)),o.push(l)}const a=l=>{var c;const d=Qm(l.domain.keys[0]);if(d.length===0)return l.domain.groups=[],()=>[];const h=(c=this.bins)!==null&&c!==void 0?c:this.deriveBins(d),u=h.length;return this.calculatedBins=[...h],p=>{const f=p.keys[0];for(let g=0;g<u;g++){const m=h[g];if(f>=m[0]&&f<m[1]||g===u-1&&f<=m[1])return m}return[]}};this.dataModel=new Ga({props:o,dataVisible:this.visible,groupByFn:a}),this.processedData=this.dataModel.processData(i??[])})}getDomain(e){var t,i,s,n;const{processedData:o}=this;if(!o)return[];const{domain:{aggValues:[a]=[]}}=o,l=(t=this.calculatedBins)===null||t===void 0?void 0:t[0][0],c=(i=this.calculatedBins)===null||i===void 0?void 0:i[((n=(s=this.calculatedBins)===null||s===void 0?void 0:s.length)!==null&&n!==void 0?n:0)-1][1];return e===ye.X?Qm([l,c]):Qm(a)}getNodeClickEvent(e,t){var i,s;return new D0((i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}getNodeDoubleClickEvent(e,t){var i,s;return new O0((i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}createNodeData(){var e;return vh(this,void 0,void 0,function*(){const{xAxis:t,yAxis:i,processedData:s,ctx:{callbackCache:n}}=this;if(!this.seriesItemEnabled||!t||!i||!s||s.type!=="grouped")return[];const{scale:o}=t,{scale:a}=i,{fill:l,stroke:c,strokeWidth:d,id:h,yKey:u="",xKey:p=""}=this,f=[],g=w=>String(w.value),{label:{formatter:m=g,fontStyle:v,fontWeight:C,fontSize:y,fontFamily:R,color:b}}=this;return s.data.forEach(w=>{var x;const{aggValues:[[O,M]]=[[0,0]],datum:N,datum:{length:V},keys:I,keys:[H,B]}=w,X=o.convert(H),J=o.convert(B),Y=O+M,ae=a.convert(0),re=a.convert(Y),K=J-X,D=Math.abs(re-ae),T=Y!==0?{text:(x=n.call(m,{value:Y,seriesId:h}))!==null&&x!==void 0?x:String(Y),fontStyle:v,fontWeight:C,fontSize:y,fontFamily:R,fill:b,x:X+K/2,y:re+D/2}:void 0,P={x:X+K/2,y:re+D/2};f.push({series:this,datum:N,aggregatedValue:Y,frequency:V,domain:I,yKey:u,xKey:p,x:X,y:re,width:K,height:D,nodeMidPoint:P,fill:l,stroke:c,strokeWidth:d,label:T})}),[{itemId:(e=this.yKey)!==null&&e!==void 0?e:this.id,nodeData:f,labelData:f}]})}nodeFactory(){return new wi}updateDatumSelection(e){return vh(this,void 0,void 0,function*(){const{nodeData:t,datumSelection:i}=e;return i.update(t,s=>{s.tag=zv.Bin,s.crisp=!0})})}updateDatumNodes(e){return vh(this,void 0,void 0,function*(){const{datumSelection:t,isHighlight:i}=e,{fillOpacity:s,strokeOpacity:n,shadow:o,highlightStyle:{item:{fill:a,fillOpacity:l=s,stroke:c,strokeWidth:d}}}=this;t.each((h,u,p)=>{var f,g;const m=i&&d!==void 0?d:u.strokeWidth,v=i?l:s;h.x=u.x,h.width=u.width,h.fill=(f=i?a:void 0)!==null&&f!==void 0?f:u.fill,h.stroke=(g=i?c:void 0)!==null&&g!==void 0?g:u.stroke,h.fillOpacity=v,h.strokeOpacity=n,h.strokeWidth=m,h.lineDash=this.lineDash,h.lineDashOffset=this.lineDashOffset,h.fillShadow=o,h.zIndex=i?Mr.highlightedZIndex:p,h.visible=u.height>0})})}updateLabelSelection(e){return vh(this,void 0,void 0,function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.tag=zv.Label,s.pointerEvents=rs.None,s.textAlign="center",s.textBaseline="middle"})})}updateLabelNodes(e){return vh(this,void 0,void 0,function*(){const{labelSelection:t}=e,i=this.label.enabled;t.each((s,n)=>{const o=n.label;o&&i?(s.text=o.text,s.x=o.x,s.y=o.y,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontSize=o.fontSize,s.fontFamily=o.fontFamily,s.fill=o.fill,s.visible=!0):s.visible=!1})})}getTooltipHtml(e){const{xKey:t,yKey:i="",xAxis:s,yAxis:n}=this;if(!t||!s||!n)return"";const{xName:o,yName:a,fill:l,tooltip:c,aggregation:d,id:h}=this,{renderer:u}=c,{aggregatedValue:p,frequency:f,domain:g,domain:[m,v]}=e,C=`${fi(o??t)}: ${s.formatDatum(m)} - ${s.formatDatum(v)}`;let y=i?`<b>${fi(a??i)} (${d})</b>: ${n.formatDatum(p)}<br>`:"";y+=`<b>Frequency</b>: ${f}`;const R={title:C,backgroundColor:l,content:y};return u?Gi(u({datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:t,xValue:g,xName:o,yKey:i,yValue:p,yName:a,color:l,title:C,seriesId:h}),R):Gi(R)}getLegendData(){var e;const{id:t,data:i,xKey:s,yName:n,visible:o,fill:a,stroke:l,fillOpacity:c,strokeOpacity:d}=this;return!i||i.length===0?[]:[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:o,label:{text:(e=n??s)!==null&&e!==void 0?e:"Frequency"},marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:d}}]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){let n=0;e.forEach(o=>o.each((a,l)=>{n=Math.max(n,l.height+l.y)})),e.forEach(o=>{o.each((a,l)=>{var c;(c=this.animationManager)===null||c===void 0||c.animateMany(`${this.id}_empty-update-ready_${a.id}`,[{from:n,to:l.y},{from:0,to:l.height}],{disableInteractions:!0,duration:1e3,ease:P0,repeat:0,onUpdate([d,h]){a.y=d,a.height=h,a.x=l.x,a.width=l.width}})})}),t.forEach(o=>{o.each(a=>{var l;(l=this.animationManager)===null||l===void 0||l.animate(`${this.id}_empty-update-ready_${a.id}`,{from:0,to:1,delay:1e3,duration:200,ease:To,repeat:0,onUpdate:c=>{a.opacity=c}})})})}animateReadyUpdate({datumSelections:e}){e.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(e){this.resetSelectionRects(e)}animateReadyResize({datumSelections:e}){var t;(t=this.animationManager)===null||t===void 0||t.stop(),e.forEach(i=>{this.resetSelectionRects(i)})}resetSelectionRects(e){e.each((t,i)=>{t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height})}isLabelEnabled(){return this.label.enabled}}Ri.className="HistogramSeries";Ri.type="histogram";Yi([_(Ft)],Ri.prototype,"fill",void 0);Yi([_(Ft)],Ri.prototype,"stroke",void 0);Yi([_(ce(0,1))],Ri.prototype,"fillOpacity",void 0);Yi([_(ce(0,1))],Ri.prototype,"strokeOpacity",void 0);Yi([_(ep)],Ri.prototype,"lineDash",void 0);Yi([_(ce(0))],Ri.prototype,"lineDashOffset",void 0);Yi([_(Le)],Ri.prototype,"xKey",void 0);Yi([_(gt)],Ri.prototype,"areaPlot",void 0);Yi([_($b())],Ri.prototype,"bins",void 0);Yi([_(P3)],Ri.prototype,"aggregation",void 0);Yi([_(ht(0))],Ri.prototype,"binCount",void 0);Yi([_(Le)],Ri.prototype,"xName",void 0);Yi([_(Le)],Ri.prototype,"yKey",void 0);Yi([_(Le)],Ri.prototype,"yName",void 0);Yi([_(ce(0))],Ri.prototype,"strokeWidth",void 0);var vn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Ch=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class dM extends $i{constructor(){super(...arguments),this.formatter=void 0}}vn([_(Lt)],dM.prototype,"formatter",void 0);class vE extends Va{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}vn([_(Lt)],vE.prototype,"renderer",void 0);vn([_(Le)],vE.prototype,"format",void 0);class Cn extends op{constructor(e){super({moduleCtx:e,hasMarkers:!0,pickModes:[si.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,si.NEAREST_NODE,si.EXACT_SHAPE_MATCH]}),this.marker=new A0,this.label=new dM,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new vE,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:t,label:i}=this;t.fill="#c16068",t.stroke="#874349",i.enabled=!1}processData(){return Ch(this,void 0,void 0,function*(){const{xAxis:e,yAxis:t,xKey:i="",yKey:s=""}=this,n=i&&s&&this.data?this.data:[],o=(e==null?void 0:e.scale)instanceof ct,a=(t==null?void 0:t.scale)instanceof ct;this.dataModel=new Ga({props:[Fn(i,o,{id:"xValue"}),Fn(s,a,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible}),this.processedData=this.dataModel.processData(n??[])})}getDomain(e){const{xAxis:t,yAxis:i,dataModel:s,processedData:n}=this;if(!n||!s)return[];const o=s.resolveProcessedDataDefById("xValue");if(e===ye.X){const a=s.getDomain("xValue",n);return(o==null?void 0:o.valueType)==="category"?a:this.fixNumericExtent(Ir(a),t)}else{const a=s.getDomain("yValue",n);return this.fixNumericExtent(a,i)}}createNodeData(){var e,t,i,s,n,o,a,l,c,d,h;return Ch(this,void 0,void 0,function*(){const{processedData:u,dataModel:p,xAxis:f,yAxis:g,marker:{enabled:m,size:v,strokeWidth:C},ctx:{callbackCache:y}}=this;if(!u||!p||!f||!g)return[];const{label:R,yKey:b="",xKey:w="",id:x}=this,O=f.scale,M=g.scale,N=((e=O.bandwidth)!==null&&e!==void 0?e:0)/2,V=((t=M.bandwidth)!==null&&t!==void 0?t:0)/2,I=new Array(u.data.length),H=m?v:0,B=(n=(s=(i=this.dataModel)===null||i===void 0?void 0:i.resolveProcessedDataIndexById("xValue"))===null||s===void 0?void 0:s.index)!==null&&n!==void 0?n:-1,X=(l=(a=(o=this.dataModel)===null||o===void 0?void 0:o.resolveProcessedDataIndexById("yValue"))===null||a===void 0?void 0:a.index)!==null&&l!==void 0?l:-1;let J=!0,Y,ae,re=0;for(let K=0;K<u.data.length;K++){const{datum:D,values:T}=ae??u.data[K],P=T[B],F=T[X];if(F===void 0)Y=void 0,J=!0;else{const L=O.convert(P)+N;if(isNaN(L)){Y=void 0,J=!0;continue}const k=((c=O.bandwidth)!==null&&c!==void 0?c:v*.5+(C??0))+1;ae=((d=u.data[K+1])===null||d===void 0?void 0:d.values[X])===void 0?void 0:u.data[K+1];const z=(h=u.data[K+1])===null||h===void 0?void 0:h.values[B],Z=f.inRangeEx(L,0,k),he=ae&&f.inRangeEx(O.convert(z)+N,0,k);if(Z===-1&&he===-1){J=!0;continue}if(Z===1&&Y===1){J=!0;continue}Y=Z;const xe=M.convert(F)+V;let we;R.formatter&&(we=y.call(R.formatter,{value:F,seriesId:x})),we!==void 0||(typeof F=="number"&&isFinite(F)?we=F.toFixed(2):F&&(we=String(F))),I[re++]={series:this,datum:D,yKey:b,xKey:w,point:{x:L,y:xe,moveTo:J,size:H},nodeMidPoint:{x:L,y:xe},label:we?{text:we,fontStyle:R.fontStyle,fontWeight:R.fontWeight,fontSize:R.fontSize,fontFamily:R.fontFamily,textAlign:"center",textBaseline:"bottom",fill:R.color}:void 0},J=!1}}return I.length=re,[{itemId:b,nodeData:I,labelData:I}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:e}=this.marker,t=np(e);return new t}updateMarkerSelection(e){return Ch(this,void 0,void 0,function*(){let{nodeData:t}=e;const{markerSelection:i}=e,{shape:s,enabled:n}=this.marker;return t=s&&n?t:[],this.marker.isDirty()&&i.clear(),i.update(t)})}updateMarkerNodes(e){var t;return Ch(this,void 0,void 0,function*(){const{markerSelection:i,isHighlight:s}=e,{marker:n,marker:{fillOpacity:o},xKey:a="",yKey:l="",stroke:c,strokeOpacity:d,highlightStyle:{item:{fill:h,fillOpacity:u=o,stroke:p,strokeWidth:f}},id:g,ctx:{callbackCache:m}}=this,{size:v,formatter:C}=n,y=(t=n.strokeWidth)!==null&&t!==void 0?t:this.strokeWidth,R=typeof n.shape=="function";i.each((b,w)=>{var x,O,M,N,V,I,H;const B=s&&h!==void 0?h:n.fill,X=s?u:o,J=s&&p!==void 0?p:(x=n.stroke)!==null&&x!==void 0?x:c,Y=s&&f!==void 0?f:y;let ae;C&&(ae=m.call(C,{datum:w.datum,xKey:a,yKey:l,fill:B,stroke:J,strokeWidth:Y,size:v,highlighted:s,seriesId:g})),b.fill=(O=ae==null?void 0:ae.fill)!==null&&O!==void 0?O:B,b.stroke=(M=ae==null?void 0:ae.stroke)!==null&&M!==void 0?M:J,b.strokeWidth=(N=ae==null?void 0:ae.strokeWidth)!==null&&N!==void 0?N:Y,b.fillOpacity=X??1,b.strokeOpacity=(I=(V=n.strokeOpacity)!==null&&V!==void 0?V:d)!==null&&I!==void 0?I:1,b.size=(H=ae==null?void 0:ae.size)!==null&&H!==void 0?H:v,b.translationX=w.point.x,b.translationY=w.point.y,b.visible=b.size>0&&!isNaN(w.point.x)&&!isNaN(w.point.y),!(!R||b.dirtyPath)&&(b.path.clear({trackChanges:!0}),b.updatePath(),b.checkPathDirty())}),s||this.marker.markClean()})}updateLabelSelection(e){return Ch(this,void 0,void 0,function*(){let{labelData:t}=e;const{labelSelection:i}=e,{shape:s,enabled:n}=this.marker;return t=s&&n?t:[],i.update(t)})}updateLabelNodes(e){return Ch(this,void 0,void 0,function*(){const{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:o,fontFamily:a,color:l}=this.label;t.each((c,d)=>{const{point:h,label:u}=d;d&&u&&i?(c.fontStyle=s,c.fontWeight=n,c.fontSize=o,c.fontFamily=a,c.textAlign=u.textAlign,c.textBaseline=u.textBaseline,c.text=u.text,c.x=h.x,c.y=h.y-10,c.fill=l,c.visible=!0):c.visible=!1})})}getNodeClickEvent(e,t){var i,s;return new D0((i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}getNodeDoubleClickEvent(e,t){var i,s;return new O0((i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}getTooltipHtml(e){var t,i;const{xKey:s,yKey:n,xAxis:o,yAxis:a}=this;if(!s||!n||!o||!a)return"";const{xName:l,yName:c,tooltip:d,marker:h,id:u}=this,{renderer:p,format:f}=d,g=e.datum,m=g[s],v=g[n],C=o.formatDatum(m),y=a.formatDatum(v),R=fi((t=this.title)!==null&&t!==void 0?t:c),b=fi(C+": "+y),{formatter:w,fill:x,stroke:O,strokeWidth:M,size:N}=h,V=M??this.strokeWidth;let I;w&&(I=w({datum:g,xKey:s,yKey:n,fill:x,stroke:O,strokeWidth:V,size:N,highlighted:!1,seriesId:u}));const H=(i=I==null?void 0:I.fill)!==null&&i!==void 0?i:x,B={title:R,backgroundColor:H,content:b};if(f||p){const X={datum:g,xKey:s,xValue:m,xName:l,yKey:n,yValue:v,yName:c,title:R,color:H,seriesId:u};if(f)return Gi({content:hE(f,X)},B);if(p)return Gi(p(X),B)}return Gi(B)}getLegendData(){var e,t,i,s,n,o,a;const{id:l,data:c,xKey:d,yKey:h,yName:u,visible:p,title:f,marker:g,stroke:m,strokeOpacity:v}=this;return c!=null&&c.length&&d&&h?[{legendType:"category",id:l,itemId:h,seriesId:l,enabled:p,label:{text:(e=f??u)!==null&&e!==void 0?e:h},marker:{shape:g.shape,fill:(t=g.fill)!==null&&t!==void 0?t:"rgba(0, 0, 0, 0)",stroke:(s=(i=g.stroke)!==null&&i!==void 0?i:m)!==null&&s!==void 0?s:"rgba(0, 0, 0, 0)",fillOpacity:(n=g.fillOpacity)!==null&&n!==void 0?n:1,strokeOpacity:(a=(o=g.strokeOpacity)!==null&&o!==void 0?o:v)!==null&&a!==void 0?a:1}}]:[]}animateEmptyUpdateReady({markerSelections:e,labelSelections:t,contextData:i,paths:s,seriesRect:n}){i.forEach(({nodeData:o},a)=>{var l,c;const[d]=s[a],{path:h}=d;d.fill=void 0,d.lineJoin="round",d.pointerEvents=rs.None,d.stroke=this.stroke,d.strokeWidth=this.getStrokeWidth(this.strokeWidth),d.strokeOpacity=this.strokeOpacity,d.lineDash=this.lineDash,d.lineDashOffset=this.lineDashOffset;const u=1e3,p=200,f={from:0,to:(l=n==null?void 0:n.width)!==null&&l!==void 0?l:0,disableInteractions:!0,ease:To,repeat:0};(c=this.animationManager)===null||c===void 0||c.animate(`${this.id}_empty-update-ready`,Object.assign(Object.assign({},f),{duration:u,onUpdate(g){h.clear({trackChanges:!0}),o.forEach((m,v)=>{if(m.point.x<=g)m.point.moveTo?h.moveTo(m.point.x,m.point.y):h.lineTo(m.point.x,m.point.y);else if(v>0&&o[v-1].point.x<g){const C=o[v-1].point,y=m.point,R=g,b=C.y+(R-C.x)*(y.y-C.y)/(y.x-C.x);m.point.moveTo?h.moveTo(R,b):h.lineTo(R,b)}}),d.checkPathDirty()}})),e[a].each((g,m)=>{var v,C,y,R;const b=n!=null&&n.width?m.point.x/n.width*u:0,w=this.animateFormatter(m),x=(C=(v=m.point)===null||v===void 0?void 0:v.size)!==null&&C!==void 0?C:0;(y=this.animationManager)===null||y===void 0||y.animate(`${this.id}_empty-update-ready_${g.id}`,Object.assign(Object.assign({},f),{to:(R=w==null?void 0:w.size)!==null&&R!==void 0?R:x,delay:b,duration:p,onUpdate(O){g.size=O}}))}),t[a].each((g,m)=>{var v;const C=n!=null&&n.width?m.point.x/n.width*u:0;(v=this.animationManager)===null||v===void 0||v.animate(`${this.id}_empty-update-ready_${g.id}`,{from:0,to:1,delay:C,duration:p,ease:To,repeat:0,onUpdate:y=>{g.opacity=y}})})})}animateReadyUpdate(e){this.resetMarkersAndPaths(e)}animateReadyResize(e){var t;(t=this.animationManager)===null||t===void 0||t.stop(),this.resetMarkersAndPaths(e)}resetMarkersAndPaths({markerSelections:e,contextData:t,paths:i}){t.forEach(({nodeData:s},n)=>{const[o]=i[n],{path:a}=o;o.stroke=this.stroke,o.strokeWidth=this.getStrokeWidth(this.strokeWidth),o.strokeOpacity=this.strokeOpacity,o.lineDash=this.lineDash,o.lineDashOffset=this.lineDashOffset,a.clear({trackChanges:!0}),s.forEach(l=>{l.point.moveTo?a.moveTo(l.point.x,l.point.y):a.lineTo(l.point.x,l.point.y)}),o.checkPathDirty(),e[n].each((l,c)=>{var d,h,u;const p=this.animateFormatter(c),f=(h=(d=c.point)===null||d===void 0?void 0:d.size)!==null&&h!==void 0?h:0;l.size=(u=p==null?void 0:p.size)!==null&&u!==void 0?u:f})})}animateFormatter(e){var t,i;const{marker:s,xKey:n="",yKey:o="",stroke:a,id:l,ctx:{callbackCache:c}}=this,{size:d,formatter:h}=s,u=s.fill,p=(t=s.stroke)!==null&&t!==void 0?t:a,f=(i=s.strokeWidth)!==null&&i!==void 0?i:this.strokeWidth;let g;return h&&(g=c.call(h,{datum:e.datum,xKey:n,yKey:o,fill:u,stroke:p,strokeWidth:f,size:d,highlighted:!1,seriesId:l})),g}isLabelEnabled(){return this.label.enabled}}Cn.className="LineSeries";Cn.type="line";vn([_(Le)],Cn.prototype,"title",void 0);vn([_(Ft)],Cn.prototype,"stroke",void 0);vn([_(ep)],Cn.prototype,"lineDash",void 0);vn([_(ce(0))],Cn.prototype,"lineDashOffset",void 0);vn([_(ce(0))],Cn.prototype,"strokeWidth",void 0);vn([_(ce(0,1))],Cn.prototype,"strokeOpacity",void 0);vn([_(Le)],Cn.prototype,"xKey",void 0);vn([_(Le)],Cn.prototype,"xName",void 0);vn([_(Le)],Cn.prototype,"yKey",void 0);vn([_(Le)],Cn.prototype,"yName",void 0);class CE{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(e=>Re.fromString(e))}update(){const{domain:e,range:t}=this;e.length<2&&(ge.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let s=1;s<e.length;s++){const n=e[s-1],o=e[s];if(n>=o){ge.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((a,l)=>a-l);break}}const i=t.length<e.length;if(i||e.length>2&&t.length>e.length)if(ge.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let s=t.length;s<e.length;s++)t.push("black");else t.splice(e.length);this.parsedRange=this.range.map(s=>Re.fromString(s))}convert(e){const{domain:t,range:i,parsedRange:s}=this,n=t[0],o=t[t.length-1],a=i[0],l=i[i.length-1];if(e<=n)return a;if(e>=o)return l;let c,d;if(t.length===2){const p=(e-n)/(o-n),f=1/(i.length-1);c=i.length<=2?0:Math.min(Math.floor(p*(i.length-1)),i.length-2),d=(p-c*f)/f}else{for(c=0;c<t.length-2&&!(e<t[c+1]);c++);const p=t[c],f=t[c+1];d=(e-p)/(f-p)}const h=s[c],u=s[c+1];return kP(h,u)(d)}}var Es=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},yh=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class hM extends $i{constructor(){super(...arguments),this.formatter=void 0}}Es([_(Lt)],hM.prototype,"formatter",void 0);class uM extends rE{constructor(e,t,i,s,n,o){super(t,i,s,n,o),this.sizeKey=e}}class M3 extends uM{constructor(){super(...arguments),this.type="nodeClick"}}class _3 extends uM{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class pM extends Va{constructor(){super(...arguments),this.renderer=void 0}}Es([_(Lt)],pM.prototype,"renderer",void 0);class fs extends op{constructor(e){super({moduleCtx:e,pickModes:[si.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,si.NEAREST_NODE,si.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Xt,this.marker=new A0,this.label=new hM,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new CE,this.tooltip=new pM;const{label:t}=this;t.enabled=!1}processData(){var e,t,i,s,n,o;return yh(this,void 0,void 0,function*(){const{xKey:a="",yKey:l="",sizeKey:c,xAxis:d,yAxis:h,marker:u,data:p}=this,f=(d==null?void 0:d.scale)instanceof ct,g=(h==null?void 0:h.scale)instanceof ct,{colorScale:m,colorDomain:v,colorRange:C,colorKey:y}=this;if(this.dataModel=new Ga({props:[Fn(a,f,{id:"xValue"}),Fn(l,g,{id:"yValue"}),...c?[Fn(c,!0,{id:"sizeValue"})]:[],...y?[Fn(y,!0,{id:"colorValue"})]:[]],dataVisible:this.visible}),this.processedData=this.dataModel.processData(p??[]),c){const R=(t=(e=this.dataModel.resolveProcessedDataIndexById("sizeValue"))===null||e===void 0?void 0:e.index)!==null&&t!==void 0?t:-1,b=(s=(i=this.processedData)===null||i===void 0?void 0:i.domain.values[R])!==null&&s!==void 0?s:[];this.sizeScale.domain=u.domain?u.domain:b}if(y){const R=(o=(n=this.dataModel.resolveProcessedDataIndexById("colorValue"))===null||n===void 0?void 0:n.index)!==null&&o!==void 0?o:-1;m.domain=v??this.processedData.domain.values[R],m.range=C,m.update()}})}getDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s=e===ye.X?"xValue":"yValue",n=t.resolveProcessedDataDefById(s),o=t.getDomain(s,i);if((n==null?void 0:n.valueType)==="category")return o;const a=e===ye.X?this.xAxis:this.yAxis;return this.fixNumericExtent(Ir(o),a)}getNodeClickEvent(e,t){var i,s;return new M3(this.sizeKey,(i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}getNodeDoubleClickEvent(e,t){var i,s;return new _3(this.sizeKey,(i=this.xKey)!==null&&i!==void 0?i:"",(s=this.yKey)!==null&&s!==void 0?s:"",e,t,this)}createNodeData(){var e,t,i,s,n,o,a,l,c;return yh(this,void 0,void 0,function*(){const{visible:d,xAxis:h,yAxis:u,yKey:p="",xKey:f="",label:g,labelKey:m,ctx:{callbackCache:v}}=this,C=(e=this.dataModel)===null||e===void 0?void 0:e.resolveProcessedDataIndexById("xValue"),y=(t=this.dataModel)===null||t===void 0?void 0:t.resolveProcessedDataIndexById("yValue");if(!(C&&y&&d&&h&&u))return[];const{colorScale:R,sizeKey:b,colorKey:w,id:x}=this,O=h.scale,M=u.scale,N=((i=O.bandwidth)!==null&&i!==void 0?i:0)/2,V=((s=M.bandwidth)!==null&&s!==void 0?s:0)/2,{sizeScale:I,marker:H}=this,B=new Array((o=(n=this.processedData)===null||n===void 0?void 0:n.data.length)!==null&&o!==void 0?o:0);I.range=[H.size,H.maxSize];const X=g.getFont();let J=0;for(const{values:Y,datum:ae}of(l=(a=this.processedData)===null||a===void 0?void 0:a.data)!==null&&l!==void 0?l:[]){const re=Y[C.index],K=Y[y.index],D=O.convert(re)+N,T=M.convert(K)+V;if(!this.checkRangeXY(D,T,h,u))continue;let P;g.formatter&&(P=v.call(g.formatter,{value:K,seriesId:x,datum:ae})),P===void 0&&(P=m?String(ae[m]):"");const F=Rt.getTextSize(P,X),L=b?I.convert(Y[2]):H.size,k=b?3:2,z=w?R.convert(Y[k]):void 0;B[J++]={series:this,itemId:p,yKey:p,xKey:f,datum:ae,point:{x:D,y:T,size:L},nodeMidPoint:{x:D,y:T},fill:z,label:Object.assign({text:P},F)}}return B.length=J,[{itemId:(c=this.yKey)!==null&&c!==void 0?c:this.id,nodeData:B,labelData:B}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var e;return(e=this.contextNodeData)===null||e===void 0?void 0:e.reduce((t,i)=>t.concat(i.labelData),[])}markerFactory(){const{shape:e}=this.marker,t=np(e);return new t}updateMarkerSelection(e){return yh(this,void 0,void 0,function*(){const{nodeData:t,markerSelection:i}=e,{marker:{enabled:s}}=this;this.marker.isDirty()&&i.clear();const n=s?t:[];return i.update(n)})}updateMarkerNodes(e){return yh(this,void 0,void 0,function*(){const{markerSelection:t,isHighlight:i}=e,{marker:s,xKey:n="",yKey:o="",sizeScale:a,marker:{fillOpacity:l,strokeOpacity:c,strokeWidth:d},highlightStyle:{item:{fill:h,fillOpacity:u=l,stroke:p,strokeWidth:f}},id:g,ctx:{callbackCache:m}}=this,{formatter:v}=s;a.range=[s.size,s.maxSize];const C=typeof s.shape=="function";t.each((y,R)=>{var b,w,x,O,M,N,V,I,H,B;const X=i&&h!==void 0?h:(b=R.fill)!==null&&b!==void 0?b:s.fill,J=i?u:l,Y=i&&p!==void 0?p:s.stroke,ae=c,re=i&&f!==void 0?f:d??1,K=(x=(w=R.point)===null||w===void 0?void 0:w.size)!==null&&x!==void 0?x:0;let D;v&&(D=m.call(v,{datum:R.datum,xKey:n,yKey:o,fill:X,stroke:Y,strokeWidth:re,size:K,highlighted:i,seriesId:g})),y.fill=(O=D==null?void 0:D.fill)!==null&&O!==void 0?O:X,y.stroke=(M=D==null?void 0:D.stroke)!==null&&M!==void 0?M:Y,y.strokeWidth=(N=D==null?void 0:D.strokeWidth)!==null&&N!==void 0?N:re,y.fillOpacity=J??1,y.strokeOpacity=ae??1,y.translationX=(I=(V=R.point)===null||V===void 0?void 0:V.x)!==null&&I!==void 0?I:0,y.translationY=(B=(H=R.point)===null||H===void 0?void 0:H.y)!==null&&B!==void 0?B:0,y.visible=y.size>0,!(!C||y.dirtyPath)&&(y.path.clear({trackChanges:!0}),y.updatePath(),y.checkPathDirty())}),i||this.marker.markClean()})}updateLabelSelection(e){var t,i;return yh(this,void 0,void 0,function*(){const{labelSelection:s}=e,{label:{enabled:n}}=this,a=(n?(i=(t=this.chart)===null||t===void 0?void 0:t.placeLabels().get(this))!==null&&i!==void 0?i:[]:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return s.update(a)})}updateLabelNodes(e){return yh(this,void 0,void 0,function*(){const{labelSelection:t}=e,{label:i}=this;t.each((s,n)=>{var o,a,l,c;s.text=n.label.text,s.fill=i.color,s.x=(a=(o=n.point)===null||o===void 0?void 0:o.x)!==null&&a!==void 0?a:0,s.y=(c=(l=n.point)===null||l===void 0?void 0:l.y)!==null&&c!==void 0?c:0,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.fontSize=i.fontSize,s.fontFamily=i.fontFamily,s.textAlign="left",s.textBaseline="top"})})}getTooltipHtml(e){var t,i,s,n,o,a,l;const{xKey:c,yKey:d,xAxis:h,yAxis:u}=this;if(!c||!d||!h||!u)return"";const{marker:p,tooltip:f,xName:g,yName:m,sizeKey:v,sizeName:C,labelKey:y,labelName:R,id:b,ctx:{callbackCache:w}}=this,{stroke:x}=p,O=(t=e.fill)!==null&&t!==void 0?t:p.fill,M=this.getStrokeWidth((i=p.strokeWidth)!==null&&i!==void 0?i:1),{formatter:N}=this.marker;let V;N&&(V=w.call(N,{datum:e,xKey:c,yKey:d,fill:O,stroke:x,strokeWidth:M,size:(n=(s=e.point)===null||s===void 0?void 0:s.size)!==null&&n!==void 0?n:0,highlighted:!1,seriesId:b}));const I=(a=(o=V==null?void 0:V.fill)!==null&&o!==void 0?o:O)!==null&&a!==void 0?a:"gray",H=(l=this.title)!==null&&l!==void 0?l:m,B=e.datum,X=B[c],J=B[d],Y=fi(h.formatDatum(X)),ae=fi(u.formatDatum(J));let re=`<b>${fi(g??c)}</b>: ${Y}<br><b>${fi(m??d)}</b>: ${ae}`;v&&(re+=`<br><b>${fi(C??v)}</b>: ${fi(B[v])}`),y&&(re=`<b>${fi(R??y)}</b>: ${fi(B[y])}<br>`+re);const K={title:H,backgroundColor:I,content:re},{renderer:D}=f;return D?Gi(D({datum:B,xKey:c,xValue:X,xName:g,yKey:d,yValue:J,yName:m,sizeKey:v,sizeName:C,labelKey:y,labelName:R,title:H,color:I,seriesId:b}),K):Gi(K)}getLegendData(){var e,t,i,s,n;const{id:o,data:a,xKey:l,yKey:c,yName:d,title:h,visible:u,marker:p}=this,{fill:f,stroke:g,fillOpacity:m,strokeOpacity:v}=p;return a!=null&&a.length&&l&&c?[{legendType:"category",id:o,itemId:c,seriesId:o,enabled:u,label:{text:(e=h??d)!==null&&e!==void 0?e:c},marker:{shape:p.shape,fill:(i=(t=p.fill)!==null&&t!==void 0?t:f)!==null&&i!==void 0?i:"rgba(0, 0, 0, 0)",stroke:(n=(s=p.stroke)!==null&&s!==void 0?s:g)!==null&&n!==void 0?n:"rgba(0, 0, 0, 0)",fillOpacity:m??1,strokeOpacity:v??1}}]:[]}animateEmptyUpdateReady({markerSelections:e,labelSelections:t}){e.forEach(n=>{n.each((o,a)=>{var l,c,d,h;const u=this.animateFormatter(o,a),p=(c=(l=a.point)===null||l===void 0?void 0:l.size)!==null&&c!==void 0?c:0,f=(d=u==null?void 0:u.size)!==null&&d!==void 0?d:p;(h=this.animationManager)===null||h===void 0||h.animate(`${this.id}_empty-update-ready_${o.id}`,{from:0,to:f,disableInteractions:!0,duration:1e3,ease:To,repeat:0,onUpdate(g){o.size=g}})})}),t.forEach(n=>{n.each(o=>{var a;(a=this.animationManager)===null||a===void 0||a.animate(`${this.id}_empty-update-ready_${o.id}`,{from:0,to:1,delay:1e3,duration:200,ease:To,repeat:0,onUpdate:l=>{o.opacity=l}})})})}animateReadyUpdate({markerSelections:e}){e.forEach(t=>{this.resetMarkers(t)})}animateReadyHighlightMarkers(e){this.resetMarkers(e)}resetMarkers(e){e.each((t,i)=>{var s,n,o;const a=this.animateFormatter(t,i),l=(n=(s=i.point)===null||s===void 0?void 0:s.size)!==null&&n!==void 0?n:0;t.size=(o=a==null?void 0:a.size)!==null&&o!==void 0?o:l})}animateFormatter(e,t){var i,s,n;const{xKey:o="",yKey:a="",marker:{strokeWidth:l},id:c,ctx:{callbackCache:d}}=this,{formatter:h}=this.marker,u=(i=t.fill)!==null&&i!==void 0?i:e.fill,p=e.stroke,f=l??1,g=(n=(s=t.point)===null||s===void 0?void 0:s.size)!==null&&n!==void 0?n:0;let m;return h&&(m=d.call(h,{datum:t.datum,xKey:o,yKey:a,fill:u,stroke:p,strokeWidth:f,size:g,highlighted:!1,seriesId:c})),m}isLabelEnabled(){return this.label.enabled}}fs.className="ScatterSeries";fs.type="scatter";Es([_(Le)],fs.prototype,"title",void 0);Es([_(Le)],fs.prototype,"labelKey",void 0);Es([_(Le)],fs.prototype,"xName",void 0);Es([_(Le)],fs.prototype,"yName",void 0);Es([_(Le)],fs.prototype,"sizeName",void 0);Es([_(Le)],fs.prototype,"labelName",void 0);Es([_(Le)],fs.prototype,"xKey",void 0);Es([_(Le)],fs.prototype,"yKey",void 0);Es([_(Le)],fs.prototype,"sizeKey",void 0);Es([_(Le)],fs.prototype,"colorKey",void 0);Es([_(Le)],fs.prototype,"colorName",void 0);Es([_(pP)],fs.prototype,"colorDomain",void 0);Es([_(Na)],fs.prototype,"colorRange",void 0);class I3 extends Mr{constructor(e){super({moduleCtx:e,pickModes:[si.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var Qg=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Rl extends jb{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}Qg([_(gt),fe({redraw:le.MAJOR})],Rl.prototype,"enabled",void 0);Qg([_(_o),fe({redraw:le.MAJOR})],Rl.prototype,"color",void 0);Qg([_(ce()),fe({redraw:le.MAJOR})],Rl.prototype,"xOffset",void 0);Qg([_(ce()),fe({redraw:le.MAJOR})],Rl.prototype,"yOffset",void 0);Qg([_(ce(0)),fe({redraw:le.MAJOR})],Rl.prototype,"blur",void 0);var Pt=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Lp=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};class fM extends Va{constructor(){super(...arguments),this.renderer=void 0}}Pt([_(Lt)],fM.prototype,"renderer",void 0);class gM extends $g{constructor(e,t,i,s,n,o){super(s,n,o),this.labelKey=e,this.sizeKey=t,this.colorKey=i}}class L3 extends gM{constructor(){super(...arguments),this.type="nodeClick"}}class F3 extends gM{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class GS extends $i{constructor(){super(...arguments),this.padding=10}}Pt([_(ce(0))],GS.prototype,"padding",void 0);class ev extends $i{constructor(){super(...arguments),this.wrapping="on-space"}}Pt([_(Xb)],ev.prototype,"wrapping",void 0);class G0{constructor(){this.style=(()=>{const e=new $i;return e.color="white",e})()}}Pt([_(Le)],G0.prototype,"key",void 0);Pt([_(Le)],G0.prototype,"name",void 0);Pt([_(Lt)],G0.prototype,"formatter",void 0);var Ja;(function(r){r[r.Name=0]="Name",r[r.Value=1]="Value"})(Ja||(Ja={}));const $o=new be;function Sh(r,e){const{fontStyle:t,fontWeight:i,fontSize:s,fontFamily:n}=e;$o.fontStyle=t,$o.fontWeight=i,$o.fontSize=s,$o.fontFamily=n,$o.text=r,$o.x=0,$o.y=0,$o.textAlign="left",$o.textBaseline="top";const{width:o,height:a}=$o.computeBBox();return{width:o,height:a}}function My(r){if(typeof r=="string"&&!Re.validColorString(r)){const e="black";return ge.warnOnce(`invalid Treemap tile colour string "${r}". Affected treemap tiles will be coloured ${e}.`),"black"}return r}class mM{constructor(){this.color="black"}}Pt([_(Ft)],mM.prototype,"color",void 0);class N3 extends Jb{constructor(){super(...arguments),this.text=new mM}}class Zt extends I3{constructor(){super(...arguments),this.groupSelection=ut.select(this.contentGroup,ve),this.highlightSelection=ut.select(this.highlightGroup,ve),this.title=(()=>{const e=new GS;return e.color="white",e.fontWeight="bold",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.padding=15,e})(),this.subtitle=(()=>{const e=new GS;return e.color="white",e.fontSize=9,e.fontFamily="Verdana, sans-serif",e.padding=13,e})(),this.labels={large:(()=>{const e=new ev;return e.color="white",e.fontWeight="bold",e.fontSize=18,e})(),medium:(()=>{const e=new ev;return e.color="white",e.fontWeight="bold",e.fontSize=14,e})(),small:(()=>{const e=new ev;return e.color="white",e.fontWeight="bold",e.fontSize=10,e})(),formatter:void 0,value:new G0},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new Rl,this.labelShadow=new Rl,this.tooltip=new fM,this.highlightStyle=new N3}getNodePaddingTop(e,t){var i;const{title:s,subtitle:n,nodePadding:o}=this,a=e.label;if(e.isLeaf||!a||e.depth===0)return o;const l=e.depth>1?n:s,c=Sh(a,l),d=3;return l.fontSize>t.width/d||l.fontSize>t.height/d||c.height>=t.height?o:c.height+o+((i=l.padding)!==null&&i!==void 0?i:0)}getNodePadding(e,t){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(e,t),right:i,bottom:i,left:i}}squarify(e,t,i=new Map){if(t.width<=0||t.height<=0)return i;i.set(e,t);const s=1,n=this.getNodePadding(e,t),o=t.width-n.left-n.right,a=t.height-n.top-n.bottom;if(o<=0||a<=0||e.value<=0)return i;let l=0,c=0,d=1/0,h=e.value;const u=e.children,p=new qe(t.x+n.left,t.y+n.top,o,a),f=p.clone();for(let v=0;v<u.length;v++){const C=u[v].value,y=u[c].value,R=f.width<f.height;l+=C;const b=R?f.height:f.width,w=R?f.width:f.height,x=w*y/l;let O=b*l/h;const M=Math.max(x,O)/Math.min(x,O),N=Math.abs(s-M);if(N<d){d=N;continue}l-=C,O=b*l/h;let V=R?f.x:f.y;for(let I=c;I<v;I++){const H=u[I],B=R?V:f.x,X=R?f.y:V,J=w*H.value/l,Y=R?J:O,ae=R?O:J,re=new qe(B,X,Y,ae);this.applyGap(p,re),this.squarify(H,re,i),h-=H.value,V+=J}R?(f.y+=O,f.height-=O):(f.x+=O,f.width-=O),c=v,l=0,d=1/0,v--}const g=f.width<f.height;let m=g?f.x:f.y;for(let v=c;v<u.length;v++){const C=g?m:f.x,y=g?f.y:m,R=u[v].value/h,b=f.width*(g?R:1),w=f.height*(g?1:R),x=new qe(C,y,b,w);this.applyGap(p,x),this.squarify(u[v],x,i),m+=g?b:w}return i}applyGap(e,t){const i=this.nodeGap/2,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),n=s(e),o=s(t);Object.keys(n).forEach(l=>{x0(n[l],o[l])||t.shrink(i,l)})}processData(){return Lp(this,void 0,void 0,function*(){if(!this.data)return;const{data:e,sizeKey:t,labelKey:i,colorKey:s,colorDomain:n,colorRange:o,groupFill:a}=this,l=this.labels.formatter,c=new CE;c.domain=n,c.range=o,c.update();const d=(h,u=0,p)=>{var f,g,m;let v;l&&(v=this.ctx.callbackCache.call(l,{datum:h})),v!==void 0||(i?v=(f=h[i])!==null&&f!==void 0?f:"":v="");let C=s&&(g=h[s])!==null&&g!==void 0?g:u;C=My(C);const y=!h.children;let R=a;typeof C=="string"?R=C:(y||!a)&&(R=c.convert(C));const b={datum:h,depth:u,parent:p,value:0,label:v,fill:R,series:this,isLeaf:y,children:[]};return y?b.value=t&&(m=h[t])!==null&&m!==void 0?m:1:(h.children.forEach(w=>{const x=d(w,u+1,b),O=x.value;isNaN(O)||!isFinite(O)||O===0||(b.value+=O,b.children.push(x))}),b.children.sort((w,x)=>x.value-w.value)),b};this.dataRoot=d(e)})}createNodeData(){return Lp(this,void 0,void 0,function*(){return[]})}update(){return Lp(this,void 0,void 0,function*(){yield this.updateSelections(),yield this.updateNodes()})}updateSelections(){return Lp(this,void 0,void 0,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e,dataRoot:t}=this;if(!e||!t||!e.getSeriesRect())return;const s=[],n=c=>{var d;s.push(c),(d=c.children)===null||d===void 0||d.forEach(n)};n(this.dataRoot);const{groupSelection:o,highlightSelection:a}=this,l=c=>c.update(s,d=>{const h=new wi,u=new be;u.tag=Ja.Name;const p=new be;p.tag=Ja.Value,d.append([h,u,p])});this.groupSelection=l(o),this.highlightSelection=l(a)})}isDatumHighlighted(e){var t;const i=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight();return e===i&&(e.isLeaf||this.highlightGroups)}getTileFormat(e,t){var i;const{formatter:s,ctx:{callbackCache:n}}=this;if(!s)return{};const{gradient:o,colorKey:a,labelKey:l,sizeKey:c,tileStroke:d,tileStrokeWidth:h,groupStroke:u,groupStrokeWidth:p}=this,f=e.isLeaf?d:u,g=e.isLeaf?h:p,m=n.call(s,{seriesId:this.id,datum:e.datum,depth:e.depth,parent:(i=e.parent)===null||i===void 0?void 0:i.datum,colorKey:a,sizeKey:c,labelKey:l,fill:e.fill,stroke:f,strokeWidth:g,gradient:o,highlighted:t});return m??{}}updateNodes(){return Lp(this,void 0,void 0,function*(){if(!this.chart)return;const{gradient:e,highlightStyle:{item:{fill:t,fillOpacity:i,stroke:s,strokeWidth:n},text:{color:o}},tileStroke:a,tileStrokeWidth:l,groupStroke:c,groupStrokeWidth:d,tileShadow:h,labelShadow:u}=this,p=this.chart.getSeriesRect(),f=this.squarify(this.dataRoot,new qe(0,0,p.width,p.height)),g=this.buildLabelMeta(f),m=this.getHighlightedSubtree();this.updateNodeMidPoint(f);const v=(y,R,b)=>{var w,x,O,M,N,V;const I=f.get(R);if(!I){y.visible=!1;return}const H=b&&t!==void 0?t:R.fill,B=(w=b?i:1)!==null&&w!==void 0?w:1;let X=c;b&&s!==void 0?X=s:R.isLeaf&&(X=a);let J=d;b&&n!==void 0?J=n:R.isLeaf&&(J=l);const Y=this.getTileFormat(R,b),ae=My((x=Y==null?void 0:Y.fill)!==null&&x!==void 0?x:H);if((O=Y==null?void 0:Y.gradient)!==null&&O!==void 0?O:e){const re=Re.tryParseFromString(H).brighter().toString(),K=Re.tryParseFromString(H).darker().toString();y.fill=`linear-gradient(180deg, ${re}, ${K})`}else y.fill=ae;y.fillOpacity=(M=Y==null?void 0:Y.fillOpacity)!==null&&M!==void 0?M:B,y.stroke=My((N=Y==null?void 0:Y.stroke)!==null&&N!==void 0?N:X),y.strokeWidth=(V=Y==null?void 0:Y.strokeWidth)!==null&&V!==void 0?V:J,y.fillShadow=h,y.crisp=!0,y.x=I.x,y.y=I.y,y.width=I.width,y.height=I.height,y.visible=!0};this.groupSelection.selectByClass(wi).forEach(y=>v(y,y.datum,!1)),this.highlightSelection.selectByClass(wi).forEach(y=>{const R=this.isDatumHighlighted(y.datum);y.visible=R||m.has(y.datum),y.visible&&v(y,y.datum,R)});const C=(y,R,b,w)=>{const x=g.get(R),O=x==null?void 0:x[w];if(!O){y.visible=!1;return}y.text=O.text,y.fontFamily=O.style.fontFamily,y.fontSize=O.style.fontSize,y.fontWeight=O.style.fontWeight,y.fill=b?o??O.style.color:O.style.color,y.fillShadow=b?void 0:u,y.textAlign=O.hAlign,y.textBaseline=O.vAlign,y.x=O.x,y.y=O.y,y.visible=!0};this.groupSelection.selectByTag(Ja.Name).forEach(y=>C(y,y.datum,!1,"label")),this.highlightSelection.selectByTag(Ja.Name).forEach(y=>{const R=this.isDatumHighlighted(y.datum);y.visible=R||m.has(y.datum),y.visible&&C(y,y.datum,R,"label")}),this.groupSelection.selectByTag(Ja.Value).forEach(y=>C(y,y.datum,!1,"value")),this.highlightSelection.selectByTag(Ja.Value).forEach(y=>{const R=this.isDatumHighlighted(y.datum);y.visible=R||m.has(y.datum),y.visible&&C(y,y.datum,R,"value")})})}updateNodeMidPoint(e){e.forEach((t,i)=>{i.nodeMidPoint={x:t.x+t.width/2,y:t.y}})}getHighlightedSubtree(){const e=new Set,t=i=>{var s;(this.isDatumHighlighted(i)||i.parent&&e.has(i.parent))&&e.add(i),(s=i.children)===null||s===void 0||s.forEach(t)};return t(this.dataRoot),e}buildLabelMeta(e){const{labels:t,title:i,subtitle:s,nodePadding:n,labelKey:o,ctx:{callbackCache:a}}=this,l=/-$/m,c=new Map;return e.forEach((d,h)=>{var u,p,f;if(!o||h.depth===0)return;const g=d.width-2*n,m=d.height-2*n,v=I=>I.fontSize>d.width/3||I.fontSize>d.height/3;let C=h.isLeaf?h.label:h.label.toUpperCase(),y="";const R=t.value,b=R.style,w=Math.ceil(b.fontSize*2*(be.defaultLineHeightRatio-1));h.isLeaf&&(R.formatter?y=(u=a.call(R.formatter,{datum:h.datum}))!==null&&u!==void 0?u:"":R.key&&(y=h.datum[R.key]));let x=Sh(y,b);y&&x.width>g&&(y="");let O,M="";if(h.isLeaf){O=t.small;const I=()=>{const B=m-(y?b.fontSize+w:0),X=[t.large,t.medium,t.small];for(const Y of X){const{width:ae,height:re}=Sh(C,Y);if(re>B||v(Y))continue;if(ae<=g)return{style:Y,wrappedText:void 0};const K=be.wrap(C,g,B,Y,Y.wrapping);if(K&&K!=="â¦"&&(Y===t.small||!(l.exec(K)||K.endsWith("â¦"))))return{style:Y,wrappedText:K}}return Sh(C,t.small).height<=B&&!v(t.small)?{style:t.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let H=I();!H.style&&y&&(y="",H=I()),O=(p=H.style)!==null&&p!==void 0?p:t.small,M=(f=H.wrappedText)!==null&&f!==void 0?f:""}else h.depth===1?O=i:O=s;const N=Sh(M||C,O);if(v(O))return;if(N.width>g){const I=Math.floor(C.length*g/N.width)-1;C=`${C.substring(0,I).trim()}â¦`}x=Sh(y,b);const V=y&&x.width<g&&x.height+N.height+w<m;c.set(h,{label:Object.assign({text:M||C,style:O},h.isLeaf?{hAlign:"center",vAlign:"middle",x:d.x+d.width/2,y:d.y+d.height/2-(V?x.height/2+w/2:0)}:{hAlign:"left",vAlign:"top",x:d.x+n,y:d.y+n}),value:V?{text:y,style:b,hAlign:"center",vAlign:"middle",x:d.x+d.width/2,y:d.y+d.height/2+N.height/2+w/2}:void 0})}),c}getDomain(e){return[0,1]}getNodeClickEvent(e,t){return new L3(this.labelKey,this.sizeKey,this.colorKey,e,t,this)}getNodeDoubleClickEvent(e,t){return new F3(this.labelKey,this.sizeKey,this.colorKey,e,t,this)}getTooltipHtml(e){var t,i,s,n;if(!this.highlightGroups&&!e.isLeaf)return"";const{tooltip:o,sizeKey:a,labelKey:l,colorKey:c,rootName:d,id:h,labels:u,ctx:{callbackCache:p}}=this,{datum:f}=e,{renderer:g}=o,m=e.depth?f[l]:(t=f[l])!==null&&t!==void 0?t:d;let v="";const C=this.getTileFormat(e,!1),y=(s=(i=C==null?void 0:C.fill)!==null&&i!==void 0?i:e.fill)!==null&&s!==void 0?s:"gray",R=u.value.key,b=u.value.formatter;if(R||b){let x="";if(b)x=p.call(b,{datum:f});else{const O=f[R];typeof O=="number"&&isFinite(O)&&(x=eE(O))}x&&(u.value.name&&(v+=`<b>${u.value.name}:</b> `),v+=x)}const w={title:m,backgroundColor:y,content:v};return g?Gi(g({datum:e.datum,parent:(n=e.parent)===null||n===void 0?void 0:n.datum,depth:e.depth,sizeKey:a,labelKey:l,colorKey:c,title:m,color:y,seriesId:h}),w):!m&&!v?"":Gi(w)}getLegendData(){return[]}}Zt.className="TreemapSeries";Zt.type="treemap";Pt([_(ce(0))],Zt.prototype,"nodePadding",void 0);Pt([_(ce(0))],Zt.prototype,"nodeGap",void 0);Pt([_(zi)],Zt.prototype,"labelKey",void 0);Pt([_(Le)],Zt.prototype,"sizeKey",void 0);Pt([_(Le)],Zt.prototype,"colorKey",void 0);Pt([_(uP)],Zt.prototype,"colorDomain",void 0);Pt([_(Na)],Zt.prototype,"colorRange",void 0);Pt([_(Le)],Zt.prototype,"groupFill",void 0);Pt([_(Ft)],Zt.prototype,"groupStroke",void 0);Pt([_(ht(0))],Zt.prototype,"groupStrokeWidth",void 0);Pt([_(Ft)],Zt.prototype,"tileStroke",void 0);Pt([_(ht(0))],Zt.prototype,"tileStrokeWidth",void 0);Pt([_(gt)],Zt.prototype,"gradient",void 0);Pt([_(Lt)],Zt.prototype,"formatter",void 0);Pt([_(zi)],Zt.prototype,"colorName",void 0);Pt([_(zi)],Zt.prototype,"rootName",void 0);Pt([_(Pr)],Zt.prototype,"highlightGroups",void 0);const Oh={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},kS={},zt={has(r){return Object.prototype.hasOwnProperty.call(Oh,r)},isCartesian(r){return Oh[r]==="cartesian"},isPolar(r){return Oh[r]==="polar"},isHierarchy(r){return Oh[r]==="hierarchy"},get seriesTypes(){return Object.keys(Oh)},get cartesianTypes(){return this.seriesTypes.filter(r=>this.isCartesian(r))},get polarTypes(){return this.seriesTypes.filter(r=>this.isPolar(r))},get hierarchyTypes(){return this.seriesTypes.filter(r=>this.isHierarchy(r))}};function G3(r,e){Oh[r]=e}function k3(r,e){var t;kS[r]=Gt([(t=kS[r])!==null&&t!==void 0?t:{},e])}function pR(r){var e;return(e=kS[r])!==null&&e!==void 0?e:{}}const V3={area:ps,bar:xi,column:mE,histogram:Ri,line:Cn,pie:mt,scatter:fs,treemap:Zt},vM={},CM={},yM={};function H3(r,e,t,i,s){vM[r]=t,CM[r]=i,yM[r]=s,G3(r,e)}function B3(r,e){var t;const i=(t=vM[r])!==null&&t!==void 0?t:V3[r];if(i)return new i(e);throw new Error(`AG Charts - unknown series type: ${r}`)}function fR(r){return CM[r]}function SM(r){return yM[r]}const W3={axes:[{type:Hd.type,position:"left"},{type:ba.type,position:"bottom"}]},U3={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},j3={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function wM(r,e){const t={};for(const i in r){const s=e[i]||(n=>n);t[i]=s(r[i],r)}return t}function yE(r){return r!=null&&r instanceof Array&&r[0]instanceof Array}function bM(r,e){if(r==null)return{};if(!(r instanceof Array))return r;const t=e.yKeys;if(t==null||yE(t))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");const i={};return t.forEach((s,n)=>{i[s]=r[n]}),i}function EM(r,e){return r==null?[[]]:yE(r)?r:e.grouped?r.map(t=>[t]):[r]}function xM(r,e){if(r==null)return{};if(!(r instanceof Array))return r;const t=e.yKeys;if(t==null||yE(t))throw new Error("AG Charts - legendItemNames and yKeys mismatching configuration.");const i={};return t.forEach((s,n)=>{i[s]=r[n]}),i}function z3(r){const e=Object.assign({},r);return delete e.yKey,delete e.yName,wM(e,{yNames:bM,yKeys:EM,legendItemNames:xM})}function $3(r){const e=Object.assign({},r);return delete e.yKey,delete e.yName,wM(e,{yNames:bM,yKeys:EM,legendItemNames:xM})}function xc(r){return r}const K3={area:xc,bar:z3,column:$3,histogram:xc,line:xc,pie:xc,scatter:xc,treemap:xc};function Y3(r){var e;const t=(e=r.type)!==null&&e!==void 0?e:"line",i=K3[t];return(i??xc)(r)}function Yo(r,e){if(gR(r)&&gR(e)){const t={};return Object.keys(r).forEach(i=>{i in e?t[i]=Yo(r[i],e[i]):t[i]=r[i]}),Object.keys(e).forEach(i=>{i in r||(t[i]=e[i])}),t}return Array.isArray(r)&&!Array.isArray(e)||VS(r)&&!VS(e)?r:e}function VS(r){return r&&typeof r=="object"}function gR(r){return VS(r)&&r.constructor===Object}const mR={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"},RM={},SE={has(r){return Object.prototype.hasOwnProperty.call(mR,r)},get axesTypes(){return Object.keys(mR)}};function X3(r,e){RM[r]=e}function q3(r){var e;return(e=RM[r])!==null&&e!==void 0?e:{}}const Z3={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},J3=Symbol("extends-series-defaults"),TM=Symbol("override-series-label-defaults"),Q3=Symbol("default-font"),vR="bold",eW="inside",tW="bottom";class Te{constructor(e){e=Yo({},e??{});const{overrides:t=null,palette:i=null}=e,s=this.createChartConfigPerChartType(this.getDefaults());if(t){const{common:n,cartesian:o,polar:a,hierarchy:l}=t,c=(d,h,u)=>{u&&(s[d]=Yo(s[d],u),h.forEach(p=>{const f=p;s[f]=Yo(s[f],u)}))};c("common",Object.keys(s),n),c("cartesian",zt.cartesianTypes,o),c("polar",zt.polarTypes,a),c("hierarchy",zt.hierarchyTypes,l),zt.seriesTypes.forEach(d=>{const h=d,u=t[h];u&&(u.series&&(u.series={[h]:u.series}),s[h]=Yo(s[h],u))})}this.palette=i??this.getPalette(),this.config=Object.freeze(s)}getPalette(){return Z3}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:vR,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:eW},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const e=this.getSeriesDefaults();return Object.assign(Object.assign({},e),{tooltip:Object.assign(Object.assign({},e.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const e=this.getSeriesDefaults();return Object.assign(Object.assign({},e),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},e.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const e=this.getSeriesDefaults();return Object.assign(Object.assign({},e),{tooltip:Object.assign(Object.assign({},e.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:vR,fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:Te.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:Te.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:Te.getCaptionWrappingDefaults()},legend:{position:tW,spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(e){const t={cartesian:zt.cartesianTypes,polar:zt.polarTypes,hierarchy:zt.hierarchyTypes,groupedCategory:[]};return Object.entries(t).forEach(([i,s])=>{const n=i,o=this.templateTheme(pR(n));s.forEach(a=>{const l=a;e[l]||(e[l]=Yo({},e[n]),Yo(e[l],o))})}),e}getDefaults(){const e=Yo({},Te.defaults),t=(s,n)=>{const o=this.templateTheme(pR(s));return o.series=n.reduce((a,l)=>{const c=SM(l);return c&&(a[l]=this.templateTheme(c)),a},{}),s==="cartesian"&&(o.axes=SE.axesTypes.reduce((a,l)=>{const c=q3(l);return c&&(a[l]=this.templateTheme(c)),a},{})),o},i={cartesian:t("cartesian",zt.cartesianTypes),groupedCategory:t("cartesian",zt.cartesianTypes),polar:t("polar",zt.polarTypes),hierarchy:t("hierarchy",zt.hierarchyTypes)};return Yo(e,i)}templateTheme(e){const t=Gt([e]),{extensions:i,properties:s}=this.getTemplateParameters();return rd(t,(n,o)=>{if(o.__extends__){const a=o.__extends__,l=i.get(a);if(l==null)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(o,l,o),delete o.__extends__}if(o.__overrides__){const a=o.__overrides__,l=i.get(a);if(l==null)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(o,l),delete o.__overrides__}for(const[a,l]of Object.entries(o))s.has(l)&&(o[a]=s.get(l))},{}),t}getTemplateParameters(){const e=new Map;e.set(J3,Te.getSeriesDefaults()),e.set(TM,{});const t=new Map;return t.set(Q3,Te.fontFamily),{extensions:e,properties:t}}mergeWithParentDefaults(e,t){return Yo(e,t)}}Te.fontFamily="Verdana, sans-serif";Te.cartesianDefaults=Object.assign(Object.assign({},Te.getChartDefaults()),{axes:{number:Object.assign({},Te.getAxisDefaults()),log:Object.assign(Object.assign({},Te.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},Te.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},Te.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},Te.getAxisDefaults()),time:Object.assign({},Te.getAxisDefaults())},series:{column:Object.assign({},Te.getBarSeriesDefaults()),bar:Object.assign({},Te.getBarSeriesDefaults()),line:Object.assign(Object.assign({},Te.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},Te.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},Te.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},Te.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},Te.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},Te.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},Te.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}});Te.polarDefaults=Object.assign(Object.assign({},Te.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},Te.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Te.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}});Te.hierarchyDefaults=Object.assign(Object.assign({},Te.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},Te.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}});Te.defaults={cartesian:Te.cartesianDefaults,groupedCategory:Te.cartesianDefaults,polar:Te.polarDefaults,hierarchy:Te.hierarchyDefaults};class sn extends Te{constructor(e){super(e)}getDefaults(){const e=sn.fontColor,t=sn.mutedFontColor,i={title:{color:e},label:{color:e},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},s={label:{color:e}},n={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},o={background:{fill:"rgb(34, 38, 41)"},title:{color:e},subtitle:{color:t},legend:{item:{label:{color:e}},pagination:{activeStyle:{fill:e},inactiveStyle:{fill:t},highlightStyle:{fill:e},label:{color:e}}}},a=l=>l.reduce((c,d)=>{const h=SM(d);return h&&(c[d]=this.templateTheme(h)),c},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},o),n),{series:Object.assign({line:Object.assign({},s),bar:Object.assign({},s),column:Object.assign({},s),histogram:Object.assign({},s)},a(zt.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},o),n),{series:Object.assign({bar:Object.assign({},s),column:Object.assign({},s),histogram:Object.assign({},s)},a(zt.cartesianTypes))}),polar:Object.assign(Object.assign({},o),{series:Object.assign({pie:{calloutLabel:{color:e},sectorLabel:{color:e},title:{color:e},innerLabels:{color:e}}},a(zt.polarTypes))}),hierarchy:Object.assign(Object.assign({},o),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:e},subtitle:{color:t},labels:{large:{color:e},medium:{color:e},small:{color:e},value:{style:{color:e}}}}},a(zt.hierarchyTypes))})})}getTemplateParameters(){const e=super.getTemplateParameters();return e.extensions.set(TM,sn.seriesLabelDefaults.label),e}}sn.fontColor="rgb(200, 200, 200)";sn.mutedFontColor="rgb(150, 150, 150)";sn.seriesLabelDefaults={label:{color:sn.fontColor}};const iW={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class sW extends Te{getPalette(){return iW}}const nW={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class oW extends sn{getPalette(){return nW}}const rW={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class aW extends Te{getPalette(){return rW}}const lW={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class cW extends sn{getPalette(){return lW}}const dW={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class hW extends Te{getPalette(){return dW}}const uW={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class pW extends sn{getPalette(){return uW}}const fW={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class gW extends Te{getPalette(){return fW}}const mW={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class vW extends sn{getPalette(){return mW}}const tv=()=>new Te,_y=()=>new sn,CW={undefined:tv,null:tv,"ag-default":tv,"ag-material":()=>new sW,"ag-pastel":()=>new aW,"ag-solar":()=>new hW,"ag-vivid":()=>new gW},yW={undefined:_y,null:_y,"ag-default-dark":_y,"ag-material-dark":()=>new oW,"ag-pastel-dark":()=>new cW,"ag-solar-dark":()=>new pW,"ag-vivid-dark":()=>new vW},DM=Object.assign(Object.assign({},yW),CW);function em(r){var e;if(r instanceof Te)return r;const t=DM[r];if(t)return t();r=r;const i=[];let s;for(;typeof r=="object";)i.push((e=r.overrides)!==null&&e!==void 0?e:{}),r.palette&&s==null&&(s=r.palette),r=r.baseTheme;i.reverse();const n=Object.assign({baseTheme:r,overrides:Gt(i)},s?{palette:s}:{});if(n.baseTheme||n.overrides){const o=em(n.baseTheme);return new o.constructor(n)}return tv()}function SW(r){var e;const t={},i=[];for(const s of r){if(s.type!=="column"&&s.type!=="bar"&&(s.type!=="area"||s.stacked!==!0)){i.push([s]);continue}const n=(e=s.type)!==null&&e!==void 0?e:"line",o=s.stacked?"stacked":"grouped",a=`${n}-${s.xKey}-${o}`;t[a]==null&&(t[a]=[],i.push(t[a])),t[a].push(s)}return i}const CR=Symbol(),Tc=Symbol(),yR=r=>(e,t)=>{var i;return e.concat(...(i=t[r])!==null&&i!==void 0?i:[])},wW=(r,e)=>(t,i)=>typeof i[r]=="boolean"?(t??!1)||i[r]:t??e,wh=(r,e)=>(t,i,s,n)=>{var o;const a=e===Tc||e===CR,l=(o=i[r])!==null&&o!==void 0?o:e;if(l===CR)throw new Error(`AG Charts - missing value for property [${r}] on series config.`);if(l===Tc)return t;if(t.length===0&&!a)for(;t.length<n;)t=t.concat(e);return a?t.concat(l):(t[s]=l,t)},bW=(r,e)=>(t,i)=>i[r]===e?t.concat(...i.yKey?[i.yKey]:i.yKeys):t,EW=()=>(r,e)=>Object.assign(Object.assign({},r),{[e.stackGroup]:[...r[e.stackGroup]||[],e.yKey]}),xW={hideInChart:{outputProp:"hideInChart",reducer:yR("hideInChart"),start:[]},hideInLegend:{outputProp:"hideInLegend",reducer:yR("hideInLegend"),start:[]},yKey:{outputProp:"yKeys",reducer:wh("yKey",Tc),start:[]},fill:{outputProp:"fills",reducer:wh("fill",Tc),start:[]},stroke:{outputProp:"strokes",reducer:wh("stroke",Tc),start:[]},yName:{outputProp:"yNames",reducer:wh("yName",Tc),start:[]},visible:{outputProp:"visibles",reducer:wh("visible",!0),start:[]},legendItemName:{outputProp:"legendItemNames",reducer:wh("legendItemName",Tc),start:[]},grouped:{outputProp:"grouped",reducer:wW("grouped"),seriesType:["bar","column"],start:void 0},showInLegend:{outputProp:"hideInLegend",reducer:bW("showInLegend",!1),seriesType:["bar","column"],start:[]},stackGroup:{outputProp:"stackGroups",reducer:EW(),seriesType:["bar","column"],start:{}}};function RW(r){const e={};return r.forEach((t,i)=>{Object.keys(t).forEach(s=>{var n;const o=xW[s],a=()=>{var p,f;e[s]=(f=(p=t[s])!==null&&p!==void 0?p:e[s])!==null&&f!==void 0?f:void 0};if(!o){a();return}const{outputProp:l,reducer:c,start:d=void 0,seriesType:h=[t.type]}=o;if(!h.includes(t.type)){a();return}const u=c((n=e[l])!==null&&n!==void 0?n:d,t,i,r.length);u!==void 0&&(e[l]=u)})}),e}function TW(r){const e=[],t=r.map(i=>{var s;return(i.type==="bar"||i.type==="column")&&i.yKey!=null&&!i.stacked?Object.assign(Object.assign({},i),{grouped:(s=i.grouped)!==null&&s!==void 0?s:!0}):i});for(const i of SW(t))switch(i[0].type){case"column":case"bar":case"area":e.push(RW(i));break;case"line":default:i.length>1&&ge.warn("unexpected grouping of series type: "+i[0].type),e.push(i[0]);break}return e}function cp(r){var e,t,i,s;return(s=(e=r.type)!==null&&e!==void 0?e:(i=(t=r.series)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.type)!==null&&s!==void 0?s:"line"}function gl(r){const e=cp(r);return e==null?!0:e==="cartesian"?(ge.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):zt.isCartesian(e)}function k0(r){const e=cp(r);return e==null?!1:e==="hierarchy"?(ge.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):zt.isHierarchy(e)}function V0(r){const e=cp(r);return e==null?!1:e==="polar"?(ge.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):zt.isPolar(e)}function SR(r){return r==null?!1:zt.has(r)}function DW(r){return r==null?!1:SE.has(r)}function OM(r){let e=0;for(const t of r)t instanceof Array&&(e+=OM(t)),t!=null&&e++;return e}function qr(r,e,t){const i=[];for(let s=0;s<t;s++)i.push(e[(s+r.colourIndex)%e.length]);return i}const Tl={avoidDeepClone:["data"]};function OW(r,e){var t,i,s,n,o,a;let l=Gt([e,r],Tl);AW(l);const c=l.type,d=cp(l),h=(i=(t=l.tooltip)===null||t===void 0?void 0:t.position)!==null&&i!==void 0?i:{},u=b=>{if(b!=null&&!(SR(b)||fR(b)))throw new Error(`AG Charts - unknown series type: ${b}; expected one of: ${zt.seriesTypes}`)};u(d);for(const{type:b}of(s=l.series)!==null&&s!==void 0?s:[])b!=null&&u(b);l=Object.assign(Object.assign({},l),{type:d});let p="line";gl(l)?p="line":k0(l)?p="treemap":V0(l)&&(p="pie");let f={};const g=fR(d);g?f=g:d==="bar"?f=U3:d==="scatter"||d==="histogram"?f=j3:gl(l)&&(f=W3),NW(l);const{context:m,mergedOptions:v,axesThemes:C,seriesThemes:y}=MW(f,l);v.series=TW(((n=v.series)!==null&&n!==void 0?n:[]).map(b=>{let w=p;b.type?w=b.type:SR(c)&&(w=c);const x=PW(b,w,y,h);return w==="pie"&&VW(y.pie,b,x),x})).map(b=>IW(m,b));const R=b=>{const w=DW(b);return w||ge.warnOnce(`AG Charts - unknown axis type: ${b}; expected one of: ${SE.axesTypes}, ignoring.`),w};if(gl(v)){let b=!0;for(const{type:w}of(o=v.axes)!==null&&o!==void 0?o:[])R(w)||(b=!1);b?v.axes=(a=v.axes)===null||a===void 0?void 0:a.map(w=>{var x,O;const M=w.type,N=Gt([C[M],(O=C[M][(x=w.position)!==null&&x!==void 0?x:"unknown"])!==null&&O!==void 0?O:{}]);return FW(w,N)}):v.axes=f.axes,GW(l,v)}return kW(l,v),v}function AW(r){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([t,i])=>{var s;!((s=r.series)===null||s===void 0)&&s.some(n=>n[t]!=null)&&ge.warnOnce(`property [series.${t}] is deprecated, please use [series.${i}] and multiple series instead.`)})}function PW(r,e,t,i){var s,n;const o=Gt([Object.assign({},i),(s=r.tooltip)===null||s===void 0?void 0:s.position],Tl);return Gt([(n=t[e])!==null&&n!==void 0?n:{},Object.assign(Object.assign({},r),{type:e,tooltip:Object.assign(Object.assign({},r.tooltip),{position:o})})],Tl)}function MW(r,e){const{theme:t,cleanedTheme:i,axesThemes:s,seriesThemes:n}=_W(e),o={colourIndex:0,palette:t.palette},a=Gt([r,i,e],Tl);return{context:o,mergedOptions:a,axesThemes:s,seriesThemes:n}}function _W(r){var e,t;const i=em(r.theme),s=i.config[(e=cp(r))!==null&&e!==void 0?e:"cartesian"],n=Object.entries(i.config).reduce((o,[a,{series:l}])=>(o[a]=l==null?void 0:l[a],o),{});return{theme:i,axesThemes:(t=s.axes)!==null&&t!==void 0?t:{},seriesThemes:n,cleanedTheme:Gt([s,{axes:po,series:po}])}}function IW(r,e,...t){const i=LW(r,e),s={stacked:po},n=Gt([...t,i,e,s],Tl);return Y3(n)}function LW(r,e){var t;const i={},{palette:{fills:s,strokes:n}}=r;let a=OM((t=e.yKeys)!==null&&t!==void 0?t:[])||1;switch(e.type){case"pie":a=Math.max(s.length,n.length);case"area":case"bar":case"column":i.fills=qr(r,s,a),i.strokes=qr(r,n,a);break;case"histogram":i.fill=qr(r,s,1)[0],i.stroke=qr(r,n,1)[0];break;case"scatter":i.marker={stroke:qr(r,n,1)[0],fill:qr(r,s,1)[0]};break;case"line":i.stroke=qr(r,s,1)[0],i.marker={stroke:qr(r,n,1)[0],fill:qr(r,s,1)[0]};break}return r.colourIndex+=a,i}function FW(r,e){const t={top:po,bottom:po,left:po,right:po};if(r.crossLines){Array.isArray(r.crossLines)||(ge.warn("axis[].crossLines should be an array."),r.crossLines=[]);const{crossLines:s}=e;r.crossLines=r.crossLines.map(n=>Gt([s,n]))}return Gt([e,{crossLines:po},r,t],Tl)}function NW(r){rd(r,(e,t)=>{"enabled"in t&&t.enabled===!1&&Object.entries(t).forEach(([i])=>{i!=="enabled"&&delete t[i]})},{skip:["data","theme"]})}function GW(r,e){var t,i,s,n;if(!(((t=r.legend)===null||t===void 0?void 0:t.enabled)!==void 0||((i=e.legend)===null||i===void 0?void 0:i.enabled)!==void 0)){if((s=e.legend)!==null&&s!==void 0||(e.legend={}),((n=r.series)!==null&&n!==void 0?n:[]).length>1){e.legend.enabled=!0;return}e.legend.enabled=!1}}function kW(r,e){rd(r,(t,i,s)=>{if(!s)return;const{_enabledFromTheme:n}=s;n!=null&&delete s._enabledFromTheme,"enabled"in s&&(n||i.enabled==null&&(s.enabled=!0))},{skip:["data","theme"]},e),rd(e,(t,i)=>{i._enabledFromTheme!=null&&delete i._enabledFromTheme},{skip:["data","theme"]})}function VW(r,e,t){Array.isArray(e.innerLabels)?t.innerLabels=e.innerLabels.map(i=>Gt([r.innerLabels,i])):t.innerLabels=po}const HW={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},BW={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function WW({yDirection:r,padding:e=0,position:t="top",bbox:i}){const s=r?HW:BW,{xTranslationDirection:n,yTranslationDirection:o}=s[t],a=r?i.width:i.height,l=r?i.height:i.width,c=n*(e+a/2),d=o*(e+l/2);return{xTranslation:c,yTranslation:d}}function UW({yDirection:r,bbox:e,padding:t=0,position:i="top"}){const s={};return i.startsWith("inside")||(i==="top"&&!r?s.top=t+e.height:i==="bottom"&&!r?s.bottom=t+e.height:i==="left"&&r?s.left=t+e.width:i==="right"&&r&&(s.right=t+e.width)),s}const HS=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e/2,y:t}:{x:e,y:isNaN(i)?t:(t+i)/2},wR=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:s})=>r?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:t/2,y:i},bR=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:(t+i)/2}:{x:e/2,y:isNaN(i)?t:i},ER=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:s})=>r?{x:t/2,y:isNaN(s)?i:s}:{x:e,y:isNaN(s)?i:(i+s)/2},jW=({xEnd:r,yStart:e,yEnd:t})=>({x:r/2,y:isNaN(t)?e:(e+t)/2}),xR=({yDirection:r,xStart:e,xEnd:t,yStart:i})=>r?{x:e/2,y:i}:{x:t,y:i},RR=({yDirection:r,xStart:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:i}:{x:e,y:t},TR=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:t}:{x:e,y:isNaN(i)?t:i},DR=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:s})=>r?{x:t,y:isNaN(s)?i:s}:{x:e,y:isNaN(s)?i:s},zW={top:{c:HS},bottom:{c:ER},left:{c:wR},right:{c:bR},topLeft:{c:xR},topRight:{c:TR},bottomLeft:{c:RR},bottomRight:{c:DR},inside:{c:jW},insideLeft:{c:wR},insideRight:{c:bR},insideTop:{c:HS},insideBottom:{c:ER},insideTopLeft:{c:xR},insideBottomLeft:{c:RR},insideTopRight:{c:TR},insideBottomRight:{c:DR}};var Bd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Nr extends rt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new qe(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;const{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===le.NONE&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:a,x2:l,y2:c}=this;o=this.align(o),a=this.align(a),l=this.align(l),c=this.align(c);const{fill:d,opacity:h,isRange:u}=this;if(!!(u&&d)){const{fillOpacity:y}=this;i.fillStyle=d,i.globalAlpha=h*y,i.beginPath(),i.moveTo(o,a),i.lineTo(l,a),i.lineTo(l,c),i.lineTo(o,c),i.closePath(),i.fill()}const{stroke:f,strokeWidth:g,startLine:m,endLine:v}=this;if(!!((m||v)&&f&&g)){const{strokeOpacity:y,lineDash:R,lineDashOffset:b,lineCap:w,lineJoin:x}=this;i.strokeStyle=f,i.globalAlpha=h*y,i.lineWidth=g,R&&i.setLineDash(R),b&&(i.lineDashOffset=b),w&&(i.lineCap=w),x&&(i.lineJoin=x),i.beginPath(),m&&(i.moveTo(o,a),i.lineTo(l,a)),v&&(i.moveTo(l,c),i.lineTo(o,c)),i.stroke()}(t=this.fillShadow)===null||t===void 0||t.markClean(),super.render(e)}}Nr.className="Range";Nr.defaultStyles=Object.assign(Object.assign({},rt.defaultStyles),{strokeWidth:1});Bd([fe({redraw:le.MINOR})],Nr.prototype,"x1",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"y1",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"x2",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"y2",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"startLine",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"endLine",void 0);Bd([fe({redraw:le.MINOR})],Nr.prototype,"isRange",void 0);var Jt=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const $W=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],KW=Ee((r,e)=>It(r,e,t=>$W.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),YW=Ee((r,e)=>It(r,e,t=>t==="range"||t==="line"),"expecting a crossLine type keyword such as 'range' or 'line'");class eo{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}Jt([_(Pr)],eo.prototype,"enabled",void 0);Jt([_(Le)],eo.prototype,"text",void 0);Jt([_(Fd)],eo.prototype,"fontStyle",void 0);Jt([_(Nd)],eo.prototype,"fontWeight",void 0);Jt([_(ce(0))],eo.prototype,"fontSize",void 0);Jt([_(zi)],eo.prototype,"fontFamily",void 0);Jt([_(ce(0))],eo.prototype,"padding",void 0);Jt([_(Ft)],eo.prototype,"color",void 0);Jt([_(KW)],eo.prototype,"position",void 0);Jt([_(ht(-360,360))],eo.prototype,"rotation",void 0);Jt([_(Pr)],eo.prototype,"parallel",void 0);class ki{constructor(){this.id=La(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new eo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ye.X,this.group=new ve({name:`${this.id}`,layer:!0,zIndex:ki.LINE_LAYER_ZINDEX}),this.crossLineRange=new Nr,this.crossLineLabel=new be,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,crossLineRange:t,crossLineLabel:i}=this;e.append([t,i]),t.pointerEvents=rs.None}update(e){if(!this.enabled||(this.group.visible=e,!e))return;if(!this.createNodeData()){this.group.visible=!1;return}this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var e,t;const{scale:i,gridLength:s,sideFlag:n,direction:o,label:{position:a="top"},clippedRange:l,strokeWidth:c=0}=this;if(!i)return!1;const d=(e=i.bandwidth)!==null&&e!==void 0?e:0,h=y=>Math.max(Math.min(...l),Math.min(Math.max(...l),y)),[u,p]=[0,n*s];let[f,g]=this.getRange(),[m,v]=[Number(i.convert(f,{strict:!1})),i.convert(g,{strict:!1})+d];m=h(m),v=h(v),[f,g]=[Number(i.convert(f)),i.convert(g)+d];const C=!isNaN(m)&&!isNaN(v)&&(f===m||g===v||m!==v)&&Math.abs(v-m)>0;if(C&&m!==Math.min(m,v)&&([m,v]=[Math.min(m,v),Math.max(m,v)],[f,g]=[g,f]),this.isRange=C,this.startLine=!isNaN(f)&&c>0&&f===m,this.endLine=!isNaN(g)&&c>0&&g===v,!C&&!this.startLine&&!this.endLine)return!1;if(this.data=[m,v],this.label.enabled){const y=o===ye.Y,{c:R=HS}=(t=zW[a])!==null&&t!==void 0?t:{},{x:b,y:w}=R({yDirection:y,xStart:u,xEnd:p,yStart:m,yEnd:v});this.labelPoint={x:b,y:w}}return!0}updateRangeNode(){var e;const{crossLineRange:t,sideFlag:i,gridLength:s,data:n,startLine:o,endLine:a,isRange:l,fill:c,fillOpacity:d,stroke:h,strokeWidth:u,lineDash:p}=this;t.x1=0,t.x2=i*s,t.y1=n[0],t.y2=n[1],t.startLine=o,t.endLine=a,t.isRange=l,t.fill=c,t.fillOpacity=d??1,t.stroke=h,t.strokeWidth=u??1,t.strokeOpacity=(e=this.strokeOpacity)!==null&&e!==void 0?e:1,t.lineDash=p}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t=void 0,y:i=void 0}={},label:{parallel:s,rotation:n,position:o="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(t===void 0||i===void 0)return;const{defaultRotation:h,configuredRotation:u}=oE({rotation:n,parallel:s,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=h+u,e.textBaseline="middle",e.textAlign="center";const p=this.computeLabelBBox();if(!p)return;const f=l===ye.Y,{xTranslation:g,yTranslation:m}=WW({yDirection:f,padding:a,position:o,bbox:p});e.translationX=t+g,e.translationY=i+m}getZIndex(e=!1){return e?ki.RANGE_LAYER_ZINDEX:ki.LINE_LAYER_ZINDEX}getRange(){const{value:e,range:t,scale:i}=this,s=i instanceof ct;let[n,o]=t??[e,void 0];return!s&&o===void 0&&(o=n),n=Cu(n,s)!=null?n:void 0,o=Cu(o,s)!=null?o:void 0,s&&n===o&&(o=void 0),n===void 0&&o!==void 0&&(n=o,o=void 0),[n,o]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(e){var t,i,s,n,o,a,l,c;const{isRange:d,startLine:h,endLine:u,direction:p,label:{padding:f=0,position:g="top"}}=this;if(!d&&!h&&!u)return;const m=this.computeLabelBBox(),v=m==null?void 0:m.x,C=m==null?void 0:m.y;if(!m||v==null||C==null)return;const y=UW({yDirection:p===ye.Y,padding:f,position:g,bbox:m});e.left=Math.max((t=e.left)!==null&&t!==void 0?t:0,(i=y.left)!==null&&i!==void 0?i:0),e.right=Math.max((s=e.right)!==null&&s!==void 0?s:0,(n=y.right)!==null&&n!==void 0?n:0),e.top=Math.max((o=e.top)!==null&&o!==void 0?o:0,(a=y.top)!==null&&a!==void 0?a:0),e.bottom=Math.max((l=e.bottom)!==null&&l!==void 0?l:0,(c=y.bottom)!==null&&c!==void 0?c:0)}}ki.LINE_LAYER_ZINDEX=Bt.SERIES_CROSSLINE_LINE_ZINDEX;ki.RANGE_LAYER_ZINDEX=Bt.SERIES_CROSSLINE_RANGE_ZINDEX;ki.className="CrossLine";Jt([_(Pr)],ki.prototype,"enabled",void 0);Jt([_(YW)],ki.prototype,"type",void 0);Jt([_($b(2))],ki.prototype,"range",void 0);Jt([_(Ft)],ki.prototype,"fill",void 0);Jt([_(ht(0,1))],ki.prototype,"fillOpacity",void 0);Jt([_(Ft)],ki.prototype,"stroke",void 0);Jt([_(ht())],ki.prototype,"strokeWidth",void 0);Jt([_(ht(0,1))],ki.prototype,"strokeOpacity",void 0);Jt([_(ep)],ki.prototype,"lineDash",void 0);const AM={constructors:{}},OR={constructors:{title:Ut,subtitle:Ut,footnote:Ut,shadow:Rl,innerCircle:dE,"axes[].crossLines[]":ki,"axes[].title":Lr,"series[].innerLabels[]":cE},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function PM(){return{constructors:Object.assign(Object.assign({},OR.constructors),AM.constructors),allowedTypes:Object.assign({},OR.allowedTypes)}}class MM{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}}const Ac=[];function _M(r){const e=Ac.find(t=>r.type===t.type&&r.optionsKey===t.optionsKey&&r.identifier===t.identifier);if(e){if(r.packageType==="enterprise"&&e.packageType==="community"){const t=Ac.indexOf(e);Ac.splice(t,1,r)}}else Ac.push(r)}var cc=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Do extends Ei{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:e,centerY:t,width:i,height:s}=this,n=e-i/2,o=t-s/2;return new qe(n,o,i,s)}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:e,centerX:t,centerY:i,width:s,height:n}=this;e.clear();const o=t-s/2,a=i-n/2,l=this.align(o),c=this.align(a),d=l+this.align(o,s),h=c+this.align(a,n);e.moveTo(l,c),e.lineTo(d,c),e.lineTo(d,h),e.lineTo(l,h),e.lineTo(l,c);const u=this.gripLineGap/2,p=this.gripLineLength/2;e.moveTo(this.align(t-u),this.align(i-p)),e.lineTo(this.align(t-u),this.align(i+p)),e.moveTo(this.align(t+u),this.align(i-p)),e.lineTo(this.align(t+u),this.align(i+p))}}Do.className="RangeHandle";cc([_(_o)],Do.prototype,"_fill",void 0);cc([_(_o)],Do.prototype,"_stroke",void 0);cc([_(ce(0))],Do.prototype,"_strokeWidth",void 0);cc([_(Yb)],Do.prototype,"_lineCap",void 0);cc([_(ce(0))],Do.prototype,"_width",void 0);cc([_(ce(0))],Do.prototype,"_gripLineGap",void 0);cc([_(ce(0))],Do.prototype,"_gripLineLength",void 0);cc([_(ce(0))],Do.prototype,"_height",void 0);var Wa=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Go extends Ei{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)}get x(){return this._x}set y(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)}get y(){return this._y}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}set min(e){var t;e=Math.min(Math.max(e,0),this.max-this.minRange),!isNaN(e)&&this._min!==e&&(this._min=e,this.dirtyPath=!0,(t=this.onRangeChange)===null||t===void 0||t.call(this))}get min(){return this._min}set max(e){var t;e=Math.max(Math.min(e,1),this.min+this.minRange),!isNaN(e)&&this._max!==e&&(this._max=e,this.dirtyPath=!0,(t=this.onRangeChange)===null||t===void 0||t.call(this))}get max(){return this._max}computeBBox(){const{x:e,y:t,width:i,height:s}=this;return new qe(e,t,i,s)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:s,min:n,max:o}=this,a=e+i*n,l=e+i*o;return new qe(a,t,l-a,s)}updatePath(){const{path:e,x:t,y:i,width:s,height:n,min:o,max:a}=this;e.clear();const l=this.align(t),c=this.align(i),d=l+this.align(t,s),h=c+this.align(i,n);e.moveTo(l,c),e.lineTo(d,c),e.lineTo(d,h),e.lineTo(l,h),e.lineTo(l,c);const u=this.align(t+s*o),p=this.align(t+s*a);e.moveTo(u,c),e.lineTo(u,h),e.lineTo(p,h),e.lineTo(p,c),e.lineTo(u,c)}}Go.className="RangeMask";Wa([_(_o)],Go.prototype,"_stroke",void 0);Wa([_(ce(0))],Go.prototype,"_strokeWidth",void 0);Wa([_(_o)],Go.prototype,"_fill",void 0);Wa([_(ce(0,1))],Go.prototype,"_fillOpacity",void 0);Wa([_(Yb)],Go.prototype,"_lineCap",void 0);Wa([_(ce(0))],Go.prototype,"_width",void 0);Wa([_(ce(0))],Go.prototype,"_height",void 0);Wa([_(ce())],Go.prototype,"_min",void 0);Wa([_(ce())],Go.prototype,"_max",void 0);class co extends ve{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Do,this.maxHandle=new Do,this.mask=(()=>{const{x:e,y:t,width:i,height:s,min:n,max:o}=co.defaults,a=new Go;a.x=e,a.y=t,a.width=i,a.height=s,a.min=n,a.max=o;const{minHandle:l,maxHandle:c}=this;return l.centerX=e,c.centerX=e+i,l.centerY=c.centerY=t+s/2,this.append([a,l,c]),a.onRangeChange=()=>{var d;this.updateHandles(),(d=this.onRangeChange)===null||d===void 0||d.call(this)},a})(),this._x=co.defaults.x,this._y=co.defaults.y,this._width=co.defaults.width,this._height=co.defaults.height,this._min=co.defaults.min,this._max=co.defaults.max,this.isContainerNode=!0}set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}updateHandles(){const{minHandle:e,maxHandle:t,x:i,y:s,width:n,height:o,mask:a}=this;e.centerX=i+n*a.min,t.centerX=i+n*a.max,e.centerY=t.centerY=s+o/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===le.NONE&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);const{mask:n,minHandle:o,maxHandle:a}=this;[n,o,a].forEach(l=>{l.visible&&(i||l.dirty>le.NONE)&&(t.save(),l.render(Object.assign(Object.assign({},e),{ctx:t,forceRender:i})),t.restore())}),this.markClean({force:!0}),s&&s.nodesRendered++}}co.className="Range";co.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class XW{constructor(e){this.rm=e}set fill(e){this.rm.fill=e}get fill(){return this.rm.fill}set stroke(e){this.rm.stroke=e}get stroke(){return this.rm.stroke}set strokeWidth(e){this.rm.strokeWidth=e}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(e){this.rm.fillOpacity=e}get fillOpacity(){return this.rm.fillOpacity}}class AR{constructor(e){this.rh=e}set fill(e){this.rh.fill=e}get fill(){return this.rh.fill}set stroke(e){this.rh.stroke=e}get stroke(){return this.rh.stroke}set strokeWidth(e){this.rh.strokeWidth=e}get strokeWidth(){return this.rh.strokeWidth}set width(e){this.rh.width=e}get width(){return this.rh.width}set height(e){this.rh.height=e}get height(){return this.rh.height}set gripLineGap(e){this.rh.gripLineGap=e}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(e){this.rh.gripLineLength=e}get gripLineLength(){return this.rh.gripLineLength}}var IM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class wE extends MM{constructor(e){super(),this.ctx=e,this.rs=new co,this.mask=new XW(this.rs.mask),this.minHandle=new AR(this.rs.minHandle),this.maxHandle=new AR(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[e.interactionManager.addListener("drag-start",t=>this.onDragStart(t)),e.interactionManager.addListener("drag",t=>this.onDrag(t)),e.interactionManager.addListener("hover",t=>this.onDrag(t)),e.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(t=>this.destroyFns.push(()=>e.interactionManager.removeListener(t))),[e.layoutService.addListener("before-series",t=>this.layout(t)),e.layoutService.addListener("layout-complete",t=>this.layoutComplete(t))].forEach(t=>this.destroyFns.push(()=>e.layoutService.removeListener(t))),e.scene.root.appendChild(this.rs),this.destroyFns.push(()=>{var t;return(t=e.scene.root)===null||t===void 0?void 0:t.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(e){this.rs.width=e}get width(){return this.rs.width}set height(e){this.rs.height=e}get height(){return this.rs.height}set min(e){this.rs.min=e}get min(){return this.rs.min}set max(e){this.rs.max=e}get max(){return this.rs.max}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const e=this.enabled&&this.visible;this.rs.visible=e,e?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:e}){if(this.enabled){const t=this.rs.height+this.margin;e.shrink(t,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}}layoutComplete({series:{rect:e,visible:t}}){this.enabled&&t&&(this.rs.x=e.x,this.rs.width=e.width),this.visible=t}onDragStart(e){if(!this.enabled)return;const{offsetX:t,offsetY:i}=e,{rs:s}=this,{minHandle:n,maxHandle:o,x:a,width:l,min:c}=s,d=s.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.containsPoint(t,i)?this.minHandleDragging=!0:o.containsPoint(t,i)?this.maxHandleDragging=!0:d.containsPoint(t,i)&&(this.panHandleOffset=(t-a)/l-c))}onDrag(e){if(!this.enabled)return;const{rs:t,panHandleOffset:i}=this,{x:s,y:n,width:o,height:a,minHandle:l,maxHandle:c}=t,{offsetX:d,offsetY:h}=e,u=s+o*t.min,p=s+o*t.max,f=new qe(u,n,p-u,a),g=()=>Math.min(Math.max((d-s)/o,0),1);if(l.containsPoint(d,h)||c.containsPoint(d,h)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):f.containsPoint(d,h)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)t.min=g();else if(this.maxHandleDragging)t.max=g();else if(!isNaN(i)){const m=t.max-t.min,v=Math.min(g()-i,1-m);v<=t.min?(t.min=v,t.max=t.min+m):(t.max=v+m,t.min=t.max-m)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}IM([_(gt)],wE.prototype,"_enabled",void 0);IM([_(ce(0))],wE.prototype,"margin",void 0);const qW={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:wE,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}};_M(qW);var LM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class bE extends MM{constructor(e){var t;super(),this.onLayoutComplete=s=>{const{width:n,height:o}=s.chart;this.rectNode.width=n,this.rectNode.height=o},this.node=new ve({name:"background"}),this.node.zIndex=Bt.SERIES_BACKGROUND_ZINDEX,this.rectNode=new wi,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,(t=e.scene.root)===null||t===void 0||t.appendChild(this.node),this.destroyFns.push(()=>{var s;return(s=e.scene.root)===null||s===void 0?void 0:s.removeChild(this.node)});const i=e.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>e.layoutService.removeListener(i))}}LM([_(gt),ci("node","visible")],bE.prototype,"visible",void 0);LM([_(Ft),ci("rectNode","fill")],bE.prototype,"fill",void 0);const ZW={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:bE};_M(ZW);function JW(){for(const r of Ac){if(r.optionConstructors!=null&&Object.assign(AM.constructors,r.optionConstructors),r.type==="root"&&r.themeTemplate)for(const e of r.chartTypes)k3(e,r.themeTemplate);if(r.type==="series"){if(r.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+r.identifier);H3(r.identifier,r.chartTypes[0],r.instanceConstructor,r.seriesDefaults,r.themeTemplate)}if(r.type==="axis"&&r.themeTemplate)for(const e of r.axisTypes)X3(e,r.themeTemplate);r.type==="legend"&&X2(r.identifier,r.instanceConstructor)}}var Fp=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(i.next(d))}catch(h){o(h)}}function l(d){try{c(i.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function PR(r){if(gl(r))return"cartesian";if(V0(r))return"polar";if(k0(r))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${r.type}`)}class $h{static create(e){return ii.createOrUpdate(e)}static update(e,t){if(!al.isInstance(e))throw new Error("AG Charts - invalid chart reference passed");ii.createOrUpdate(t,e)}static updateDelta(e,t){if(!al.isInstance(e))throw new Error("AG Charts - invalid chart reference passed");return ii.updateUserDelta(e,t)}static download(e,t){if(!(e instanceof al))throw new Error("AG Charts - invalid chart reference passed");return ii.download(e,t)}static getImageDataURL(e,t){if(!(e instanceof al))throw new Error("AG Charts - invalid chart reference passed");return ii.getImageDataURL(e,t)}}class al{constructor(e){this.chart=e}static isInstance(e){var t,i;if(e instanceof al||((t=e.constructor)===null||t===void 0?void 0:t.name)==="AgChartInstanceProxy"&&e.chart!=null)return!0;const s=Object.keys((i=e.constructor)===null||i===void 0?void 0:i.prototype);return!!(Object.keys(al.prototype).every(o=>s.includes(o))&&e.chart!=null)}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class ii{static initialiseModules(){ii.initialised||(JW(),ii.initialised=!0)}static createOrUpdate(e,t){ii.initialiseModules(),Pc(">>> createOrUpdate() user options",e);const i={};ii.DEBUG()===!0&&(i.debug=!0);const{overrideDevicePixelRatio:s}=e;delete e.overrideDevicePixelRatio;const n=OW(e,i);let o=t==null?void 0:t.chart;(o==null||PR(e)!==PR(o.processedOptions))&&(o=ii.createChartInstance(n,s,o)),t==null?t=new al(o):t.chart=o;const a=o;a.queuedUserOptions.push(e);const l=()=>{const c=a.queuedUserOptions.indexOf(e);a.queuedUserOptions.splice(0,c)};return a.requestFactoryUpdate(()=>Fp(this,void 0,void 0,function*(){if(a.destroyed)return;const c=od(a.processedOptions,n);if(c==null){l();return}yield ii.updateDelta(a,c,e),l()})),t}static updateUserDelta(e,t){var i;const{chart:s,chart:{queuedUserOptions:n}}=e,o=(i=n[n.length-1])!==null&&i!==void 0?i:s.userOptions,a=Gt([o,t]);Pc(">>> updateUserDelta() user delta",t),Pc("base options",o),ii.createOrUpdate(a,e)}static download(e,t){(()=>Fp(this,void 0,void 0,function*(){const s=yield ii.prepareResizedChart(e,t),{chart:n}=s;n.scene.download(t==null?void 0:t.fileName,t==null?void 0:t.fileFormat),s!==e&&s.destroy()}))().catch(s=>ge.errorOnce(s))}static getImageDataURL(e,t){return Fp(this,void 0,void 0,function*(){const i=yield ii.prepareResizedChart(e,t),{chart:s}=i,n=s.scene.canvas.getDataURL(t==null?void 0:t.fileFormat);return i!==e&&i.destroy(),n})}static prepareResizedChart(e,t){return Fp(this,void 0,void 0,function*(){const{chart:i}=e;let{width:s,height:n}=t??{};const o=i.width,a=i.height;if(s===void 0&&n===void 0||i.scene.canvas.pixelRatio===1&&o===s&&a===n)return e;s=s??o,n=n??a;const c=Object.assign(Object.assign({},i.userOptions),{container:document.createElement("div"),width:s,height:n,autoSize:!1,overrideDevicePixelRatio:1}),d=ii.createOrUpdate(c);return yield d.chart.waitForUpdate(),d})}static createChartInstance(e,t,i){const s=i==null?void 0:i.destroy({keepTransferableResources:!0});if(gl(e))return new _0(document,t,s);if(k0(e))return new N0(document,t,s);if(V0(e))return new F0(document,t,s);throw new Error(`AG Charts - couldn't apply configuration, check type of options: ${e.type}`)}static updateDelta(e,t,i){var s;return Fp(this,void 0,void 0,function*(){t.type==null&&(t=Object.assign(Object.assign({},t),{type:(s=e.processedOptions.type)!==null&&s!==void 0?s:cp(t)})),yield e.awaitUpdateCompletion(),!e.destroyed&&(Pc("applying delta",t),QW(e,t,i))})}}ii.DEBUG=()=>{var r;return(r=Oc("agChartsDebug"))!==null&&r!==void 0?r:!1};ii.initialised=!1;function Pc(r,...e){[!0,"opts"].includes(ii.DEBUG())&&ge.debug(r,...e)}function QW(r,e,t){var i,s,n,o;const a=Gt([(i=r.processedOptions)!==null&&i!==void 0?i:{},e],Tl),l=eU(r,a),c=["type","data","series","listeners","theme","legend"];if(gl(e))c.push("axes");else if(!(V0(e)||k0(e)))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${e.type}`);e.listeners&&FM(r,e.listeners),H0(r,e,{skip:c});let d=!1;e.series&&e.series.length>0&&(tU(r,e),d=!0),gl(e)&&e.axes&&iU(r,e)&&(d=!0),sU(r,e);const h=e.series,u=!!e.data||(h==null?void 0:h.some(m=>m.data!=null)),p=(n=(s=e.legend)!==null&&s!==void 0?s:e.title)!==null&&n!==void 0?n:e.subtitle;d=d||u||!!p,e.data&&(r.data=e.data),e.listeners&&r.updateAllSeriesListeners(),r.processedOptions=a,r.userOptions=Gt([(o=r.userOptions)!==null&&o!==void 0?o:{},t],Tl);const g=d||l?Ze.PROCESS_DATA:Ze.PERFORM_LAYOUT;Pc("chart update type",{updateType:Ze[g]}),r.update(g,{forceNodeDataRefresh:d})}function eU(r,e){const t=n=>r instanceof _0&&n.chartTypes.includes("cartesian")||r instanceof F0&&n.chartTypes.includes("polar")||r instanceof N0&&n.chartTypes.includes("hierarchy");let i=!1;const s=Ac.filter(n=>n.type==="root");for(const n of s){const o=t(n)&&e[n.optionsKey]!=null,a=r.isModuleEnabled(n);o!==a&&(i=!0,o?r.addModule(n):r.removeModule(n))}return i}function tU(r,e){const t=e.series;if(!t)return;if(r.series.length===t.length&&r.series.every((s,n)=>{var o;return s.type===((o=t[n])===null||o===void 0?void 0:o.type)})){r.series.forEach((s,n)=>{var o,a,l,c;const d=(l=(a=(o=r.processedOptions)===null||o===void 0?void 0:o.series)===null||a===void 0?void 0:a[n])!==null&&l!==void 0?l:{},h=od(d,(c=t[n])!==null&&c!==void 0?c:{});h&&(Pc(`applying series diff idx ${n}`,h),NM(s,h,{path:`series[${n}]`,index:n}),s.markNodeDataDirty())});return}r.series=nU(r,t)}function iU(r,e){const t=e.axes;if(!t)return!1;if(r.axes.length===t.length&&r.axes.every((s,n)=>s.type===t[n].type)){const s=r.processedOptions;if(gl(s))return r.axes.forEach((n,o)=>{var a,l;const c=(l=(a=s.axes)===null||a===void 0?void 0:a[o])!==null&&l!==void 0?l:{},d=od(c,t[o]);Pc(`applying axis diff idx ${o}`,d);const h=`axes[${o}]`;H0(n,d,{path:h,skip:["axes[].type"]})}),!0}return r.axes=oU(r,t),!0}function sU(r,e){const t=["listeners"];r.setLegendInit(i=>{var s,n,o;H0(i,(s=e.legend)!==null&&s!==void 0?s:{},{skip:t}),!((n=e.legend)===null||n===void 0)&&n.listeners&&Object.assign(r.legend.listeners,(o=e.legend.listeners)!==null&&o!==void 0?o:{})})}function nU(r,e){const t=[],i=r.getModuleContext();let s=0;for(const n of e??[]){const o=`series[${s++}]`,a=B3(n.type,i);NM(a,n,{path:o,index:s}),t.push(a)}return t}function oU(r,e){const t=[],i=["axes[].type"],s=r.getModuleContext();let n=0;for(const o of e??[]){let a;switch(o.type){case"number":a=new Hd(s);break;case xl.type:a=new xl(s);break;case ba.type:a=new ba(s);break;case ad.type:a=new ad(s);break;case ld.type:a=new ld(s);break;default:throw new Error("AG Charts - unknown axis type: "+o.type)}const l=`axes[${n++}]`;rU(a,o),H0(a,o,{path:l,skip:i}),t.push(a)}return t}function rU(r,e){let t=!1;const i=Ac.filter(s=>s.type==="axis");for(const s of i){const n=e[s.optionsKey]!=null,o=r.isModuleEnabled(s);n!==o&&(t=!0,n?r.addModule(s):r.removeModule(s))}return t}function FM(r,e){r.clearEventListeners();for(const t in e){const i=e[t];typeof i=="function"&&r.addEventListener(t,i)}}function H0(r,e,{skip:t,path:i}={}){const s=Object.assign(Object.assign(Object.assign({},PM()),{skip:t}),i?{path:i}:{});return jh(r,e,s)}function NM(r,e,{path:t,index:i}={}){var s;const n=["series[].listeners"],o=PM(),a=(s=o.constructors)!==null&&s!==void 0?s:{},l={constructors:Object.assign(Object.assign({},a),{title:r.type==="pie"?tM:a.title})},c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),l),{skip:["series[].type",...n??[]]}),t?{path:t}:{}),{idx:i??-1}),d=jh(r,e,c),h=e==null?void 0:e.listeners;return h!=null&&FM(r,h),d}const aU="8.0.0";var tm=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class im extends ji{constructor(e){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=e}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===le.NONE&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);const n=this.sourceImage;t.globalAlpha=this.opacity,t.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(e)}}tm([fe({redraw:le.MAJOR})],im.prototype,"x",void 0);tm([fe({redraw:le.MAJOR})],im.prototype,"y",void 0);tm([fe({redraw:le.MAJOR})],im.prototype,"width",void 0);tm([fe({redraw:le.MAJOR})],im.prototype,"height",void 0);tm([fe({redraw:le.MAJOR})],im.prototype,"opacity",void 0);const lU=Object.entries(DM).reduce((r,[e,t])=>(r[e]=t(),r),{});var sm=Object.freeze({__proto__:null,TimeScale:nE,BandScale:Ro,ContinuousScale:ct,ColorScale:CE,LinearScale:Xt}),Wd=Object.freeze({__proto__:null,ticks:R0,extent:Ir,toFixed:eE,isNumberEqual:x0,tickFormat:IP,interpolateString:hE,Color:Re,isString:zb,isStringObject:cP,isDate:XH,isDiscrete:Nv,isContinuous:Hf,checkDatum:Cu,isNumber:Js,resetIds:FH,createId:La,Padding:El,jsonDiff:od,DELETE:po,jsonMerge:Gt,jsonApply:jh,jsonWalk:rd,normalizeAngle360:as,normalizeAngle360Inclusive:iP,normalizeAngle180:sP,toRadians:Zs,toDegrees:jH,sanitizeHtml:fi,Logger:ge});const cU=["area","bar","column","histogram","line","pie","scatter"];function Wn(r){switch(r){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}const GM=["number","category","groupedCategory","log","time"];function dU(r){switch(r){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}function hU(r,e){var t;const{chartOptionsToRestore:i,chartPaletteToRestore:s,chartThemeToRestore:n}=r,o=mU(r),a=kM(o),l=a?{baseTheme:o}:(t=VM(r,o))!==null&&t!==void 0?t:{},c=r.getGridOptionsChartThemeOverrides(),d=r.apiChartThemeOverrides,u=Wn(r.chartType)==="pie"?"polar":"cartesian",p=r.crossFiltering?pU(e,r,u):void 0,f=Object.assign({},i??{}),v=[a?gU(r,(()=>{const C=y=>y?Object.keys(y).some(R=>A.get(y[R],"title.enabled",!1)):!1;return C(c)||C(d)})()):void 0,p,c,d,f].filter(C=>!!C).reduce((C,y)=>({baseTheme:C,overrides:y}),l);if(s&&o===n){const C=em(l).palette;uU(s,C)||(v.palette=s)}return v}function uU(r,e){const t=(i,s)=>i.length!==s.length?!1:i.every((n,o)=>n===s[o]);return t(r.fills,e.fills)&&t(r.strokes,e.strokes)}function kM(r){return A.includes(Object.keys(lU),r)}function pU(r,e,t){const i={listeners:{legendItemClick:n=>{r.getChart().series.forEach(a=>{a.toggleSeriesItem(n.itemId,n.enabled),a.toggleSeriesItem(`${n.itemId}-filtered-out`,n.enabled)})}}},s={};return t==="polar"&&(s.pie={tooltip:{renderer:({angleName:n,datum:o,calloutLabelKey:a,radiusKey:l,angleValue:c})=>{const d=n,h=o[a],u=o[l];return{title:d,content:`${h}: ${c*u}`}}}}),{[t]:{tooltip:{delay:500},legend:i,listeners:{click:n=>e.crossFilterCallback(n,!0)},series:s}}}const fU=GM.reduce((r,e)=>Object.assign(Object.assign({},r),{[e]:{title:{_enabledFromTheme:!0}}}),{});function gU(r,e){const t=r.getExtraPaddingDirections();return{common:{axes:fU,padding:{top:!e&&t.includes("top")?40:20,right:t.includes("right")?30:20,bottom:t.includes("bottom")?40:20,left:t.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function mU(r){let e=r.getChartThemeName();const t=r.getChartThemes();return A.includes(t,e)||(e=t[0]),e}function VM(r,e){const{customChartThemes:t}=r,i=t&&t[e];return i||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),i}const B0=r=>e=>e===void 0?!0:r(e),MR=r=>typeof r=="string",HM=r=>typeof r=="boolean",vU=r=>typeof r=="object",sa=(r,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${r}: ${t}\`, expected ${e}.`;class Ct{static validateChartParams(e){switch(e.type){case"rangeChartUpdate":return Ct.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return Ct.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return Ct.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateUpdateRangeChartParams(e){const t=[...Ct.commonValidations,...Ct.cellRangeValidations,{property:"seriesChartTypes",validationFn:i=>i===void 0||Array.isArray(i)&&i.every(vU),warnMessage:sa("seriesChartTypes","Array of SeriesChartType")}];return Ct.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const t=[...Ct.commonValidations];return Ct.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const t=[...Ct.commonValidations,...Ct.cellRangeValidations];return Ct.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,i,s){for(const n of t){const{property:o,validationFn:a,warnMessage:l}=n;if(o in e){const c=e[o];if(!a(c))return console.warn(l(c)),!1}}for(const n in e)if(!i.includes(n))return console.warn(`AG Grid - Unexpected property supplied. ${s} does not contain: \`${n}\`.`),!1;return!0}}Ct.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"];Ct.validateChartType=B0(r=>Ct.validChartTypes.includes(r));Ct.validateAgChartThemeOverrides=B0(r=>typeof r=="object");Ct.validateChartParamsCellRange=B0(r=>typeof r=="object");Ct.validateAggFunc=B0(r=>typeof r=="string"||typeof r=="function");Ct.commonValidations=[{property:"chartId",validationFn:MR,warnMessage:sa("chartId","string")},{property:"chartType",validationFn:Ct.validateChartType,warnMessage:sa("chartType",Ct.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:MR,warnMessage:sa("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:Ct.validateAgChartThemeOverrides,warnMessage:sa("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:HM,warnMessage:sa("unlinkChart","boolean")}];Ct.cellRangeValidations=[{property:"cellRange",validationFn:Ct.validateChartParamsCellRange,warnMessage:sa("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:HM,warnMessage:sa("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:Ct.validateAggFunc,warnMessage:sa("aggFunc","string or IAggFunc")}];var BM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const WM=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"];class Ot extends j{constructor(e){super(),this.model=e}init(){this.setChartRange(),this.addManagedListener(this.eventService,E.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){var t,i,s,n,o,a,l;if(!this.validUpdateType(e)||!Ct.validateChartParams(e))return!1;const{chartId:c,chartType:d,chartThemeName:h,unlinkChart:u}=e,p={chartId:c,pivotChart:this.model.pivotChart,chartType:d??this.model.chartType,chartThemeName:h??this.model.chartThemeName,unlinkChart:u??this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let f=Object.assign({},p);switch(e.type){case"rangeChartUpdate":f.cellRange=(t=this.createCellRange(e))!==null&&t!==void 0?t:this.model.suppliedCellRange,f.aggFunc=(i=e.aggFunc)!==null&&i!==void 0?i:this.model.aggFunc,f.seriesChartTypes=e.seriesChartTypes,f.suppressChartRanges=(s=e.suppressChartRanges)!==null&&s!==void 0?s:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":f.cellRange=(n=this.createCellRange(e))!==null&&n!==void 0?n:this.model.suppliedCellRange,f.aggFunc=(o=e.aggFunc)!==null&&o!==void 0?o:this.model.aggFunc,f.crossFiltering=!0,f.suppressChartRanges=(a=e.suppressChartRanges)!==null&&a!==void 0?a:this.model.suppressChartRanges;break}return this.model.updateModel(f),f.unlinkChart||f.suppressChartRanges?(l=this.rangeService)===null||l===void 0||l.setCellRanges([]):this.setChartRange(),!0}updateForGridChange(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}getChartUpdateParams(e){const i=this.getSelectedValueColState().map(o=>({colId:o.colId,displayName:o.displayName})),s=this.getChartData(),n=this.getSelectedDimension();return{data:s,grouping:this.isGrouping(),category:{id:n.colId,name:n.displayName,chartDataType:this.model.getChartDataType(n.colId)},fields:i,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e}}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}setChartThemeName(e){this.model.chartThemeName=e,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemes(){return this.gridOptionsService.get("chartThemes")||WM}getPalettes(){return this.getThemes().map(t=>{const s=kM(t)?t:this.chartProxy.lookupCustomChartTheme(t);return em(s).palette})}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimension(){return this.model.getSelectedDimension()}displayNameMapper(e){const t=this.model.columnNames[e.colId];return e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return A.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(){return this.model.isComboChart()}updateSeriesChartType(e,t,i){const s=this.model.comboChartModel.seriesChartTypes.find(n=>n.colId===e);if(s){const n=this.model.chartType!=="customCombo";n&&(this.model.chartType="customCombo");const o=s.chartType;t!=null&&(s.chartType=t),i!=null&&(s.secondaryAxis=i),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),n&&this.dispatchEvent({type:Ot.EVENT_CHART_TYPE_CHANGED}),o!==t&&this.dispatchEvent({type:Ot.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(){const e=["line","column","area"];return this.isComboChart()?e:[Wn(this.getChartType())]}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&((t=this.rangeService)===null||t===void 0?void 0:t.createCellRangeFromCellRangeParams(e.cellRange))}validUpdateType(e){var t;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const i={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},s=(t=Object.keys(i).find(o=>i[o]()))!==null&&t!==void 0?t:"Range Chart",n=e.type===`${s[0].toLowerCase()}${s.slice(1).replace(/ /g,"")}Update`;return n||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${s}.`),n}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],i=t&&t.startRow||null,s=t&&t.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:s&&s.rowIndex,rowEndPinned:s&&s.rowPinned,columns:e.reduce((n,o)=>n.concat(o.columns.map(a=>a.getId())),[])}}raiseChartModelUpdateEvent(){const e={type:Ot.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)}raiseChartUpdatedEvent(){const e={type:Ot.EVENT_CHART_UPDATED};this.dispatchEvent(e)}raiseChartApiUpdateEvent(){const e={type:Ot.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel(),i={type:E.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(i)}raiseChartRangeSelectionChangedEvent(){const e={type:E.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}}Ot.EVENT_CHART_UPDATED="chartUpdated";Ot.EVENT_CHART_API_UPDATE="chartApiUpdate";Ot.EVENT_CHART_MODEL_UPDATE="chartModelUpdate";Ot.EVENT_CHART_TYPE_CHANGED="chartTypeChanged";Ot.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged";BM([S("rangeService")],Ot.prototype,"rangeService",void 0);BM([U],Ot.prototype,"init",null);var EE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const CU={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]};class Ud extends Q{constructor(e,t){super(Ud.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.columnComps=new Map}init(){this.updatePanels(),this.addManagedListener(this.chartController,Ot.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,Ot.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()}destroy(){this.clearComponents(),super.destroy()}updatePanels(){var e,t;const i=this.chartType,{dimensionCols:s,valueCols:n}=this.chartController.getColStateForMenu(),o=s.map(l=>l.colId).concat(n.map(l=>l.colId));this.chartType=this.chartController.getChartType();const a=this.getGroupExpandedState();if(A.areEqual(A.keys(this.columnComps),o)&&this.chartType===i){if([...s,...n].forEach(c=>{this.columnComps.get(c.colId).setValue(c.selected,!0)}),this.chartController.isActiveXYChart()){const c=this.generateGetSeriesLabel();n.forEach(d=>{this.columnComps.get(d.colId).setLabel(c(d))})}A.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);const l=(e=this.getDataPanelDef().groups)===null||e===void 0?void 0:e.reduce((c,{type:d},h)=>d==="seriesChartType"?h:c,-1);l!==-1&&this.createSeriesChartTypeGroup(n,l)}else this.clearComponents(),(t=this.getDataPanelDef().groups)===null||t===void 0||t.forEach(({type:l})=>{l==="categories"?this.createCategoriesGroup(s):l==="series"?this.createSeriesGroup(n):l==="seriesChartType"?this.createSeriesChartTypeGroup(n):console.warn(`AG Grid: invalid charts data panel group name supplied: '${l}'`)});this.restoreGroupExpandedState(a)}getGroupExpandedState(){return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map(({groupType:t,comp:i})=>{var s,n;const o=!!(!((n=(s=this.getDataPanelDef().groups)===null||s===void 0?void 0:s.find(({type:a})=>a===t))===null||n===void 0)&&n.isOpen);return i?i.isExpanded():o})}restoreGroupExpandedState(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((t,i)=>{t&&t.toggleGroupExpand(e[i])})}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new OC({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}createComponent(e,t){const i=document.createElement("div");return i.id=t,i.className="ag-chart-data-section",i.appendChild(e.getGui()),i}addComponent(e,t,i){const s=this.createComponent(t,i);e.appendChild(s)}addComponentAtIndex(e,t,i,s){const n=this.createComponent(t,i);e.insertBefore(n,e.children[s])}addChangeListener(e,t){this.addManagedListener(e,Ms.EVENT_CHANGED,()=>{t.selected=e.getValue(),this.chartController.updateForPanelChange(t)})}createCategoriesGroup(e){this.categoriesGroupComp=this.createBean(new At({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const t=`chartDimension${this.getCompId()}`;e.forEach(i=>{const s=this.categoriesGroupComp.createManagedBean(new qw);s.setLabel(A.escapeString(i.displayName)),s.setValue(i.selected),s.setInputName(t),this.addChangeListener(s,i),this.categoriesGroupComp.addItem(s),this.columnComps.set(i.colId,s)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")}createSeriesGroup(e){if(this.seriesGroupComp=this.createManagedBean(new At({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){const o=this.seriesGroupComp.createManagedBean(new bb);o.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(a=>{this.chartOptionsService.setPairedMode(!!a),this.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(o)}const t=this.generateGetSeriesLabel();e.forEach(o=>{const a=this.seriesGroupComp.createManagedBean(new _s);a.addCssClass("ag-data-select-checkbox");const l=t(o);a.setLabel(l),a.setValue(o.selected),this.addChangeListener(a,o),this.seriesGroupComp.addItem(a),this.columnComps.set(o.colId,a),this.addDragHandle(a,o)});const i=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(i,this.seriesGroupComp,"seriesGroup");const n={getIconName:()=>De.ICON_MOVE,getContainer:()=>s,onDragging:o=>this.onDragging(o),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(n),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(n))}createSeriesChartTypeGroup(e,t){if(!this.chartController.isComboChart())return;this.seriesChartTypeGroupComp=this.createManagedBean(new At({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const i=this.chartController.getSeriesChartTypes();e.forEach(s=>{if(!s.selected)return;const n=i.filter(h=>h.colId===s.colId)[0];if(!n)return;const o=this.seriesChartTypeGroupComp.createManagedBean(new At({title:s.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),a=this.seriesChartTypeGroupComp.createManagedBean(new _s).setLabel(this.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(n.chartType)).setValue(!!n.secondaryAxis).onValueChange(h=>this.chartController.updateSeriesChartType(s.colId,void 0,h));o.addItem(a);const l=(h,u)=>this.chartTranslationService.translate(h,u),c=[{value:"line",text:l("line","Line")},{value:"area",text:l("area","Area")},{value:"stackedArea",text:l("stackedArea","StackedArea")},{value:"groupedColumn",text:l("groupedColumn","Grouped Column")},{value:"stackedColumn",text:l("stackedColumn","Stacked Column")}],d=o.createManagedBean(new Oo);d.setLabelAlignment("left").setLabelWidth("flex").addOptions(c).setValue(n.chartType).onValueChange(h=>this.chartController.updateSeriesChartType(s.colId,h)),o.addItem(d),this.seriesChartTypeGroupComp.addItem(o)}),t===void 0?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",t)}addDragHandle(e,t){const i=A.createIconNoSpan("columnDrag",this.gridOptionsService);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",i);const s={type:_t.ChartPanel,eElement:i,dragItemName:t.displayName,getDragItem:()=>({columns:[t.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(s))}generateGetSeriesLabel(){if(!this.chartController.isActiveXYChart())return n=>A.escapeString(n.displayName);const e=this.chartType==="bubble",t=this.isInPairedMode();let i=0;const s=new Map;return s.set(0,"X"),s.set(1,"Y"),s.set(2,"size"),n=>{const o=A.escapeString(n.displayName);if(!n.selected)return o;let a;return t?a=s.get(i%(e?3:2)):i===0?a="X":a=e&&i%2===0?"size":"Y",i++,`${o} (${a})`}}getCategoryGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getSeriesGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getDataPanelDef(){var e;const t=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.dataPanel;return t||CU}isInPairedMode(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")}clearComponents(){A.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()}onDragging(e){const t=this.checkHoveredItem(e);if(!t)return;this.lastDraggedColumn=e.dragItem.columns[0];const{comp:i,position:s}=t,{comp:n,position:o}=this.lastHoveredItem||{};if(i===n&&s===o)return;this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:s},i.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${s}`)}checkHoveredItem(e){if(A.missing(e.vDirection))return null;const t=e.event;for(const i of this.columnComps.values()){const s=i.getGui();if(!s.querySelector(".ag-chart-data-column-drag-handle"))continue;const n=s.getBoundingClientRect();if(t.clientY>=n.top&&t.clientY<=n.bottom){const a=s.clientHeight,l=t.clientY>n.top+a/2?"bottom":"top";return{comp:i,position:l}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:e,valueCols:t}=this.chartController.getColStateForMenu(),i=[...e,...t].find(s=>s.column===this.lastDraggedColumn);if(i){let s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&s++,i.order=s,this.chartController.updateForPanelChange(i)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(e=>{e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}isInterestedIn(e){return e===_t.ChartPanel}}Ud.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>';EE([S("dragAndDropService")],Ud.prototype,"dragAndDropService",void 0);EE([S("chartTranslationService")],Ud.prototype,"chartTranslationService",void 0);EE([U],Ud.prototype,"init",null);var jd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ws extends Q{constructor(e){super(),this.activeComps=[],this.params=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(ws.TEMPLATE,{fontGroup:e}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}initGroup(){this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(e=>{this.params.setEnabled&&this.params.setEnabled(e)})}initFontFamilySelect(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],{family:t}=this.params.initialFont;let i=e[0];if(t){const o=e.map(a=>a.toLowerCase()).indexOf(t.toLowerCase());if(o>=0)i=e[o];else{const a=A.capitalise(t);e.push(a),i=a}}const s=e.sort().map(n=>({value:n,text:n}));this.familySelect.addOptions(s).setInputWidth("flex").setValue(`${i}`).onValueChange(n=>this.params.setFont({family:n}))}initFontSizeSelect(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],{size:t}=this.params.initialFont;A.includes(e,t)||e.push(t);const i=e.sort((s,n)=>s-n).map(s=>({value:`${s}`,text:`${s}`}));this.sizeSelect.addOptions(i).setInputWidth("flex").setValue(`${t}`).onValueChange(s=>this.params.setFont({size:parseInt(s,10)})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))}initFontWeightStyleSelect(){const{weight:e="normal",style:t="normal"}=this.params.initialFont,i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let s=i.find(o=>o.weight===e&&o.style===t);s||(s={name:"predefined",weight:e,style:t},i.unshift(s));const n=i.map(o=>({value:o.name,text:this.chartTranslationService.translate(o.name)}));this.weightStyleSelect.addOptions(n).setInputWidth("flex").setValue(s.name).onValueChange(o=>{const a=i.find(l=>l.name===o);this.params.setFont({weight:a.weight,style:a.style})})}initFontColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(`${this.params.initialFont.color}`).onValueChange(e=>this.params.setFont({color:e}))}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}}ws.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`;jd([G("fontGroup")],ws.prototype,"fontGroup",void 0);jd([G("familySelect")],ws.prototype,"familySelect",void 0);jd([G("weightStyleSelect")],ws.prototype,"weightStyleSelect",void 0);jd([G("sizeSelect")],ws.prototype,"sizeSelect",void 0);jd([G("colorPicker")],ws.prototype,"colorPicker",void 0);jd([S("chartTranslationService")],ws.prototype,"chartTranslationService",void 0);jd([U],ws.prototype,"init",null);var Gr=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vs extends Q{constructor({chartOptionsService:e,isExpandedOnInit:t=!1}){super(),this.activePanels=[],this.chartOptionsService=e,this.isExpandedOnInit=t}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(Vs.TEMPLATE,{legendGroup:e}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()}initLegendGroup(){this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(e=>{this.chartOptionsService.setChartOption("legend.enabled",e),this.legendGroup.toggleGroupExpand(!0)})}initLegendPosition(){const e=["top","right","bottom","left"];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(e.map(t=>({value:t,text:this.chartTranslationService.translate(t)}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(t=>this.chartOptionsService.setChartOption("legend.position",t))}initLegendPadding(){const e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Ii(e,200)).setValue(`${e}`).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setChartOption("legend.spacing",t))}initLegendItems(){const e=(t,i,s,n)=>{const o=this.chartOptionsService.getChartOption(`legend.${t}`);s.setLabel(this.chartTranslationService.translate(i)).setMaxValue(Ii(o,n)).setValue(`${o}`).setTextFieldWidth(45).onValueChange(a=>{this.chartOptionsService.setChartOption(`legend.${t}`,a)})};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)}initLabelPanel(){const e=this.chartOptionsService,s={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},setFont:o=>{const a=this.chartOptionsService;o.family&&a.setChartOption("legend.item.label.fontFamily",o.family),o.weight&&a.setChartOption("legend.item.label.fontWeight",o.weight),o.style&&a.setChartOption("legend.item.label.fontStyle",o.style),o.size&&a.setChartOption("legend.item.label.fontSize",o.size),o.color&&a.setChartOption("legend.item.label.color",o.color)}},n=this.createBean(new ws(s));this.legendGroup.addItem(n),this.activePanels.push(n)}destroyActivePanels(){this.activePanels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Vs.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`;Gr([G("legendGroup")],Vs.prototype,"legendGroup",void 0);Gr([G("legendPositionSelect")],Vs.prototype,"legendPositionSelect",void 0);Gr([G("legendPaddingSlider")],Vs.prototype,"legendPaddingSlider",void 0);Gr([G("markerSizeSlider")],Vs.prototype,"markerSizeSlider",void 0);Gr([G("markerStrokeSlider")],Vs.prototype,"markerStrokeSlider",void 0);Gr([G("markerPaddingSlider")],Vs.prototype,"markerPaddingSlider",void 0);Gr([G("itemPaddingXSlider")],Vs.prototype,"itemPaddingXSlider",void 0);Gr([G("itemPaddingYSlider")],Vs.prototype,"itemPaddingYSlider",void 0);Gr([S("chartTranslationService")],Vs.prototype,"chartTranslationService",void 0);Gr([U],Vs.prototype,"init",null);var dp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class kr extends Q{constructor(e){super(),this.chartOptionsService=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(kr.TEMPLATE,{axisTicksGroup:e}),this.initAxisTicks()}initAxisTicks(){this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(t=>this.chartOptionsService.setAxisProperty("tick.color",t));const e=(t,i,s,n)=>{const o=this.chartOptionsService.getAxisProperty(t);i.setLabel(s).setMaxValue(Ii(o,n)).setValue(`${o}`).setTextFieldWidth(45).onValueChange(a=>this.chartOptionsService.setAxisProperty(t,a))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)}}kr.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`;dp([G("axisTicksGroup")],kr.prototype,"axisTicksGroup",void 0);dp([G("axisTicksColorPicker")],kr.prototype,"axisTicksColorPicker",void 0);dp([G("axisTicksWidthSlider")],kr.prototype,"axisTicksWidthSlider",void 0);dp([G("axisTicksSizeSlider")],kr.prototype,"axisTicksSizeSlider",void 0);dp([S("chartTranslationService")],kr.prototype,"chartTranslationService",void 0);dp([U],kr.prototype,"init",null);var nm=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vr extends wC{constructor(e){super(e,Vr.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct(),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:e=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:e=>this.calculateAngleDrag(e),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(e=>{(e==null||e==="")&&(e="0"),e=this.eAngleValue.normalizeValue(e);let t=parseFloat(e);t>180&&(t=t-360),this.setValue(t)}),this.updateNumberInput(),A.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,Ms.EVENT_CHANGED,()=>{const e=this.gridOptionsService.getDocument();this.eAngleValue.getInputElement().contains(e.activeElement)||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,s=t.width/2,n=t.height/2;i.style.left=`${s+Math.cos(e)*8}px`,i.style.top=`${n+Math.sin(e)*8}px`}calculatePolar(){const e=this.offsetX,t=this.offsetY,i=Math.atan2(t,e);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(i)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,i=t.width/2,s=t.height/2,n=e.clientX-t.left,o=e.clientY-t.top,a=n-i,l=o-s,c=Math.atan2(l,a);this.setValue(c,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListener(this,Ms.EVENT_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t){let i;return t?i=e:i=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(i),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(i),this.dispatchEvent({type:Ms.EVENT_CHANGED})),this}setWidth(e){return A.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}}Vr.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`;nm([G("eLabel")],Vr.prototype,"eLabel",void 0);nm([G("eParentCircle")],Vr.prototype,"eParentCircle",void 0);nm([G("eChildCircle")],Vr.prototype,"eChildCircle",void 0);nm([G("eAngleValue")],Vr.prototype,"eAngleValue",void 0);nm([S("dragService")],Vr.prototype,"dragService",void 0);var om=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ua extends Q{constructor({chartController:e,chartOptionsService:t,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.prevXRotation=0,this.prevYRotation=0,this.chartController=e,this.chartOptionsService=t,this.isExpandedOnInit=i}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(Ua.TEMPLATE,{axisGroup:e}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();const t=()=>this.axisLabelUpdateFuncs.forEach(i=>i());this.addManagedListener(this.chartController,Ot.EVENT_CHART_UPDATED,t)}initAxis(){this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(t=>this.chartOptionsService.setAxisProperty("line.color",t));const e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(Ii(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(`${e}`).onValueChange(t=>this.chartOptionsService.setAxisProperty("line.width",t))}initAxisTicks(){const e=this.createBean(new kr(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)}initAxisLabels(){const e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},t=n=>{n.family&&this.chartOptionsService.setAxisProperty("label.fontFamily",n.family),n.weight&&this.chartOptionsService.setAxisProperty("label.fontWeight",n.weight),n.style&&this.chartOptionsService.setAxisProperty("label.fontStyle",n.style),n.size&&this.chartOptionsService.setAxisProperty("label.fontSize",n.size),n.color&&this.chartOptionsService.setAxisProperty("label.color",n.color)},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:t},s=this.createBean(new ws(i));this.axisGroup.addItem(s),this.activePanels.push(s),this.addAdditionalLabelComps(s)}addAdditionalLabelComps(e){this.addLabelPadding(e);const{xRotationComp:t,yRotationComp:i}=this.createRotationWidgets(),s=this.initLabelRotations(t,i);e.addCompToPanel(s),e.addCompToPanel(t),e.addCompToPanel(i)}initLabelRotations(e,t){const i=c=>this.chartOptionsService.getLabelRotation(c),s=(c,d)=>{this.chartOptionsService.setLabelRotation(c,d)},n=c=>{this.chartOptionsService.setAxisProperty("label.autoRotate",c),c?(this.prevXRotation=i("xAxis"),this.prevYRotation=i("yAxis"),s("xAxis",void 0),s("yAxis",void 0)):(s("xAxis",this.prevXRotation),s("yAxis",this.prevYRotation)),e.setDisabled(c),t.setDisabled(c)},a=(()=>{const c=i("xAxis"),d=i("yAxis");return c==null&&d==null?this.chartOptionsService.getAxisProperty("label.autoRotate"):!1})(),l=this.createBean(new _s).setLabel(this.translate("autoRotate")).setValue(a).onValueChange(n);return e.setDisabled(a),t.setDisabled(a),l}createRotationWidgets(){const e=String.fromCharCode(176),t=(i,s)=>{const n=`${this.chartTranslationService.translate(i)} ${e}`,o=this.chartOptionsService.getLabelRotation(s),a=new Vr().setLabel(n).setLabelWidth("flex").setValue(o||0).onValueChange(l=>this.chartOptionsService.setLabelRotation(s,l));return this.axisLabelUpdateFuncs.push(()=>{const l=this.chartOptionsService.getLabelRotation(s);a.setValue(l||0)}),this.createBean(a)};return{xRotationComp:t("xRotation","xAxis"),yRotationComp:t("yRotation","yAxis")}}addLabelPadding(e){const t=this.createBean(new _i),i=this.chartOptionsService.getAxisProperty("label.padding");t.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(Ii(i,30)).setValue(`${i}`).setTextFieldWidth(45).onValueChange(s=>this.chartOptionsService.setAxisProperty("label.padding",s)),e.addCompToPanel(t)}translate(e,t){return this.chartTranslationService.translate(e,t)}destroyActivePanels(){this.activePanels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Ua.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`;om([G("axisGroup")],Ua.prototype,"axisGroup",void 0);om([G("axisColorInput")],Ua.prototype,"axisColorInput",void 0);om([G("axisLineWidthSlider")],Ua.prototype,"axisLineWidthSlider",void 0);om([S("chartTranslationService")],Ua.prototype,"chartTranslationService",void 0);om([U],Ua.prototype,"init",null);var W0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class dc extends Q{constructor({chartOptionsService:e,isExpandedOnInit:t=!1}){super(),this.chartOptionsService=e,this.isExpandedOnInit=t}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(dc.TEMPLATE,{navigatorGroup:e}),this.initNavigator()}initNavigator(){const{chartTranslationService:e}=this;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(i=>{this.chartOptionsService.setChartOption("navigator.enabled",i),this.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);const t=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(Ii(t,60)).setTextFieldWidth(45).setValue(`${t||30}`).onValueChange(i=>this.chartOptionsService.setChartOption("navigator.height",i))}destroy(){super.destroy()}}dc.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
            </ag-group-component>
        </div>`;W0([G("navigatorGroup")],dc.prototype,"navigatorGroup",void 0);W0([G("navigatorHeightSlider")],dc.prototype,"navigatorHeightSlider",void 0);W0([S("chartTranslationService")],dc.prototype,"chartTranslationService",void 0);W0([U],dc.prototype,"init",null);var zd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ko extends Q{constructor(e,t){super(),this.chartOptionsService=e,this.chartController=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(ko.TEMPLATE,{chartPaddingGroup:e}),this.addManagedListener(this.eventService,E.EVENT_CHART_OPTIONS_CHANGED,t=>{this.updateTopPadding(t.chartOptions)}),this.initGroup(),this.initChartPaddingItems()}initGroup(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)}initChartPaddingItems(){const e=(t,i)=>{const s=this.chartOptionsService.getChartOption("padding."+t);i.setLabel(this.chartTranslationService.translate(t)).setMaxValue(Ii(s,200)).setValue(`${s}`).setTextFieldWidth(45).onValueChange(n=>this.chartOptionsService.setChartOption("padding."+t,n))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)}updateTopPadding(e){var t,i;const s=this.chartController.getChartSeriesTypes()[0],n=(i=(t=e[s])===null||t===void 0?void 0:t.padding)===null||i===void 0?void 0:i.top;n!=null&&this.paddingTopSlider.setValue(n)}}ko.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`;zd([G("chartPaddingGroup")],ko.prototype,"chartPaddingGroup",void 0);zd([G("paddingTopSlider")],ko.prototype,"paddingTopSlider",void 0);zd([G("paddingRightSlider")],ko.prototype,"paddingRightSlider",void 0);zd([G("paddingBottomSlider")],ko.prototype,"paddingBottomSlider",void 0);zd([G("paddingLeftSlider")],ko.prototype,"paddingLeftSlider",void 0);zd([S("chartTranslationService")],ko.prototype,"chartTranslationService",void 0);zd([U],ko.prototype,"init",null);var U0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class hc extends Q{constructor(e){super(),this.chartOptionsService=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(hc.TEMPLATE,{chartBackgroundGroup:e}),this.initGroup(),this.initColorPicker()}initGroup(){this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(e=>this.chartOptionsService.setChartOption("background.visible",e))}initColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(e=>this.chartOptionsService.setChartOption("background.fill",e))}}hc.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`;U0([G("chartBackgroundGroup")],hc.prototype,"group",void 0);U0([G("colorPicker")],hc.prototype,"colorPicker",void 0);U0([S("chartTranslationService")],hc.prototype,"chartTranslationService",void 0);U0([U],hc.prototype,"init",null);var UM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class hp extends Q{constructor(e){super(hp.TEMPLATE),this.chartOptionsService=e,this.activePanels=[]}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t=(o,a)=>{o.family&&this.setOption("title.fontFamily",o.family,a),o.weight&&this.setOption("title.fontWeight",o.weight,a),o.style&&this.setOption("title.fontStyle",o.style,a),o.size&&this.setOption("title.fontSize",o.size,a),o.color&&this.setOption("title.color",o.color,a)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||t(i,!0);const s={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:i,setFont:t,setEnabled:o=>{if(this.toolbarExists()){const c=this.getOption("padding.top");this.setOption("padding.top",o?c-20:c+20)}this.setOption("title.enabled",o);const a=this.getOption("title.text"),l=a==="Title"||(a==null?void 0:a.trim().length)===0;o&&l&&this.setOption("title.text",this.titlePlaceholder)}},n=this.createBean(new ws(s));n.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(n.getGui()),this.activePanels.push(n),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{n.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.createBean(new _i),t=this.chartOptionsService.getChartOption("title.spacing");return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(t,100)).setValue(`${t}`).setTextFieldWidth(45).onValueChange(i=>this.chartOptionsService.setChartOption("title.spacing",i)),e}toolbarExists(){const e=this.gridOptionsService.getCallback("getChartToolbarItems");if(!e)return!0;const t={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some(s=>{var n;return(n=e&&e(t))===null||n===void 0?void 0:n.includes(s)})}getOption(e){return this.chartOptionsService.getChartOption(e)}setOption(e,t,i){this.chartOptionsService.setChartOption(e,t,i)}destroyActivePanels(){this.activePanels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}hp.TEMPLATE="<div></div>";UM([S("chartTranslationService")],hp.prototype,"chartTranslationService",void 0);UM([U],hp.prototype,"init",null);var xE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class $d extends Q{constructor({chartController:e,chartOptionsService:t,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.chartController=e,this.chartOptionsService=t,this.isExpandedOnInit=i}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate($d.TEMPLATE,{chartGroup:e}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()}initGroup(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)}initTitles(){const e=this.createBean(new hp(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)}initPaddingPanel(){const e=this.createBean(new ko(this.chartOptionsService,this.chartController));this.chartGroup.addItem(e),this.activePanels.push(e)}initBackgroundPanel(){const e=this.createBean(new hc(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)}destroyActivePanels(){this.activePanels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}$d.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`;xE([G("chartGroup")],$d.prototype,"chartGroup",void 0);xE([S("chartTranslationService")],$d.prototype,"chartTranslationService",void 0);xE([U],$d.prototype,"init",null);var Kd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vo extends Q{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(Vo.TEMPLATE,{shadowGroup:e}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()}initSeriesShadow(){this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(t=>this.chartOptionsService.setSeriesOption("shadow.enabled",t,this.getSelectedSeries())),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(t=>this.chartOptionsService.setSeriesOption("shadow.color",t,this.getSelectedSeries()));const e=(t,i,s,n)=>{const o=this.chartOptionsService.getSeriesOption(`shadow.${i}`,this.getSelectedSeries());t.setLabel(this.chartTranslationService.translate(i)).setMinValue(s).setMaxValue(Ii(o,n)).setValue(`${o}`).onValueChange(a=>this.chartOptionsService.setSeriesOption(`shadow.${i}`,a,this.getSelectedSeries()))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)}}Vo.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`;Kd([G("shadowGroup")],Vo.prototype,"shadowGroup",void 0);Kd([G("shadowColorPicker")],Vo.prototype,"shadowColorPicker",void 0);Kd([G("shadowBlurSlider")],Vo.prototype,"shadowBlurSlider",void 0);Kd([G("shadowXOffsetSlider")],Vo.prototype,"shadowXOffsetSlider",void 0);Kd([G("shadowYOffsetSlider")],Vo.prototype,"shadowYOffsetSlider",void 0);Kd([S("chartTranslationService")],Vo.prototype,"chartTranslationService",void 0);Kd([U],Vo.prototype,"init",null);function _R({labelName:r,chartOptionsService:e,getSelectedSeries:t,seriesOptionLabelProperty:i}){const s=d=>`${i}.${d}`,n=d=>{const h=s(d);return e.getSeriesOption(h,t())},o=(d,h)=>{const u=s(d);e.setSeriesOption(u,h,t())},a={family:n("fontFamily"),style:n("fontStyle"),weight:n("fontWeight"),size:n("fontSize"),color:n("color")},l=d=>{d.family&&o("fontFamily",d.family),d.weight&&o("fontWeight",d.weight),d.style&&o("fontStyle",d.style),d.size&&o("fontSize",d.size),d.color&&o("color",d.color)};return{name:r,enabled:n("enabled")||!1,setEnabled:d=>o("enabled",d),suppressEnabledCheckbox:!1,initialFont:a,setFont:l}}var Yd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ho extends Q{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(Ho.TEMPLATE,{seriesMarkersGroup:e}),this.initMarkers()}initMarkers(){const e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];this.seriesMarkerShapeSelect.addOptions(e).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(n=>this.setSeriesOption("marker.shape",n));const t=this.chartOptionsService.getChartType(),i=A.includes(["scatter","bubble"],t);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(n=>this.setSeriesOption("marker.enabled",n));const s=(n,o,a,l)=>{const c=this.getSeriesOption(n);o.setLabel(this.chartTranslationService.translate(a)).setMaxValue(Ii(c,l)).setValue(`${c}`).setTextFieldWidth(45).onValueChange(d=>this.setSeriesOption(n,d))};t==="bubble"?(s("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),s("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),s("marker.size",this.seriesMarkerSizeSlider,"size",60)),s("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)}getSeriesOption(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())}setSeriesOption(e,t){this.chartOptionsService.setSeriesOption(e,t,this.getSelectedSeries())}}Ho.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`;Yd([G("seriesMarkersGroup")],Ho.prototype,"seriesMarkersGroup",void 0);Yd([G("seriesMarkerShapeSelect")],Ho.prototype,"seriesMarkerShapeSelect",void 0);Yd([G("seriesMarkerSizeSlider")],Ho.prototype,"seriesMarkerSizeSlider",void 0);Yd([G("seriesMarkerMinSizeSlider")],Ho.prototype,"seriesMarkerMinSizeSlider",void 0);Yd([G("seriesMarkerStrokeWidthSlider")],Ho.prototype,"seriesMarkerStrokeWidthSlider",void 0);Yd([S("chartTranslationService")],Ho.prototype,"chartTranslationService",void 0);Yd([U],Ho.prototype,"init",null);var up=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Hr extends Q{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(Hr.TEMPLATE,{calloutGroup:e}),this.initCalloutOptions()}initCalloutOptions(){this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);const e=(t,i,s,n)=>{const o=this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries());i.setLabel(this.chartTranslationService.translate(s)).setMaxValue(Ii(o,n)).setValue(`${o}`).setTextFieldWidth(45).onValueChange(a=>this.chartOptionsService.setSeriesOption(t,a,this.getSelectedSeries()))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)}}Hr.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`;up([G("calloutGroup")],Hr.prototype,"calloutGroup",void 0);up([G("calloutLengthSlider")],Hr.prototype,"calloutLengthSlider",void 0);up([G("calloutStrokeWidthSlider")],Hr.prototype,"calloutStrokeWidthSlider",void 0);up([G("labelOffsetSlider")],Hr.prototype,"labelOffsetSlider",void 0);up([S("chartTranslationService")],Hr.prototype,"chartTranslationService",void 0);up([U],Hr.prototype,"init",null);var RE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Xd extends Q{constructor({chartController:e,chartOptionsService:t,seriesType:i,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initLineWidth(),strokeWidth:()=>this.initStrokeWidth(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins()},this.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},this.chartController=e,this.chartOptionsService=t,this.seriesType=i||this.getChartSeriesType(),this.isExpandedOnInit=s}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(Xd.TEMPLATE,{seriesGroup:e}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,Ot.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),this.seriesWidgetMappings[this.seriesType].forEach(t=>this.widgetFuncs[t]())}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new Oo);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(`${this.seriesType}`).onValueChange(t=>{this.seriesType=t,this.refreshWidgets()}),this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new bb);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(t=>this.setSeriesOption("tooltip.enabled",t)),this.addWidget(e)}initStrokeWidth(){const e=this.getSeriesOption("strokeWidth"),t=this.createBean(new _i);t.setLabel(this.translate("strokeWidth")).setMaxValue(Ii(e,10)).setTextFieldWidth(45).setValue(`${e}`).onValueChange(i=>this.setSeriesOption("strokeWidth",i)),this.addWidget(t)}initLineWidth(){const e=this.getSeriesOption("strokeWidth"),t=this.createBean(new _i);t.setLabel(this.translate("lineWidth")).setMaxValue(Ii(e,10)).setTextFieldWidth(45).setValue(`${e}`).onValueChange(i=>this.setSeriesOption("strokeWidth",i)),this.addWidget(t)}initLineDash(){const e=this.getSeriesOption("lineDash"),t=e?e[0]:0,i=this.createBean(new _i);i.setLabel(this.translate("lineDash")).setMaxValue(Ii(t,30)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(s=>this.setSeriesOption("lineDash",[s])),this.addWidget(i)}initLineOpacity(){const e=this.getSeriesOption("strokeOpacity"),t=this.createBean(new _i);t.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(Ii(e,1)).setTextFieldWidth(45).setValue(`${e}`).onValueChange(i=>this.setSeriesOption("strokeOpacity",i)),this.addWidget(t)}initFillOpacity(){const e=this.getSeriesOption("fillOpacity"),t=this.createBean(new _i);t.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(Ii(e,1)).setTextFieldWidth(45).setValue(`${e}`).onValueChange(i=>this.setSeriesOption("fillOpacity",i)),this.addWidget(t)}initLabels(){const e=this.seriesType==="pie"?"calloutLabel":"label",t=this.seriesType==="pie"?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),i=_R({labelName:t,chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:e}),s=this.createBean(new ws(i));if(this.seriesType==="pie"){const n=this.createBean(new Hr(this.chartOptionsService,()=>this.seriesType));s.addCompToPanel(n),this.activePanels.push(n)}if(this.addWidget(s),this.seriesType==="pie"){const n=_R({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:"sectorLabel"}),o=this.createBean(new ws(n)),a=this.getSectorLabelPositionRatio();o.addCompToPanel(a),this.addWidget(o)}}getSectorLabelPositionRatio(){const e="sectorLabel.positionRatio",t=this.chartOptionsService.getSeriesOption(e,this.seriesType);return this.createBean(new _i).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(Ii(t,1)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(s=>this.chartOptionsService.setSeriesOption(e,s,this.seriesType))}initShadow(){const e=this.createBean(new Vo(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initMarkers(){const e=this.createBean(new Ho(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initBins(){var e;const t=((e=this.getSeriesOption("bins"))!==null&&e!==void 0?e:this.getSeriesOption("calculatedBins")).length,i=this.createBean(new _i);i.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(Ii(t,20)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(s=>this.setSeriesOption("binCount",s)),this.addWidget(i)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getSeriesOption(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)}setSeriesOption(e,t){this.chartOptionsService.setSeriesOption(e,t,this.seriesType)}getChartSeriesType(){if(this.chartController.getSeriesChartTypes().length===0)return"column";const e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":Wn(e)}getSeriesSelectOptions(){this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));const e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(t=>{const i=Wn(t.chartType);e.add(this.seriesSelectOptions.get(i))}),Array.from(e)}updateSeriesType(){const e=this.chartController.getActiveSeriesChartTypes().map(i=>Wn(i.chartType));!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}translate(e,t){return this.chartTranslationService.translate(e,t)}destroyActivePanels(){this.activePanels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Xd.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`;RE([G("seriesGroup")],Xd.prototype,"seriesGroup",void 0);RE([S("chartTranslationService")],Xd.prototype,"chartTranslationService",void 0);RE([U],Xd.prototype,"init",null);var yU=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};function Ii(r,e){return Math.max(r,e)}const SU={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]};class rm extends Q{constructor(e,t){super(rm.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.panels=[],this.isGroupPanelShownInSeries=(i,s)=>{if(["chart","legend","series"].includes(i))return!0;const o=["axis","navigator"],a=["bar","column","line","area","scatter","histogram","cartesian"];return!!(o.includes(i)&&a.includes(s))}}init(){this.createPanels(),this.addManagedListener(this.chartController,Ot.EVENT_CHART_UPDATED,()=>this.createPanels(!0)),this.addManagedListener(this.chartController,Ot.EVENT_CHART_API_UPDATE,()=>this.createPanels(!1))}createPanels(e){var t;const i=this.chartController.getChartType(),s=this.chartController.isGrouping(),n=Wn(i);e&&i===this.chartType&&s===this.isGrouping||(this.destroyPanels(),(t=this.getFormatPanelDef().groups)===null||t===void 0||t.forEach(o=>{const a=o.type;if(!this.isGroupPanelShownInSeries(a,n))return;const l={chartController:this.chartController,chartOptionsService:this.chartOptionsService,isExpandedOnInit:o.isOpen,seriesType:n};a==="chart"?this.addComponent(new $d(l)):a==="legend"?this.addComponent(new Vs(l)):a==="axis"?this.addComponent(new Ua(l)):a==="series"?this.addComponent(new Xd(l)):a==="navigator"?this.addComponent(new dc(l)):console.warn(`AG Grid: invalid charts format panel group name supplied: '${o.type}'`)}),this.chartType=i,this.isGrouping=s)}getFormatPanelDef(){var e;const t=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.formatPanel;return t||SU}addComponent(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())}destroyPanels(){this.panels.forEach(e=>{A.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyPanels(),super.destroy()}}rm.TEMPLATE='<div class="ag-chart-format-wrapper"></div>';yU([U],rm.prototype,"init",null);var jM=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class am extends Q{constructor(e,t){super(),this.size=58,this.padding=5,this.root=new ve;const i=new v0({document:window.document,width:this.size,height:this.size});i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=this.root,i.container=e,this.scene=i,this.tooltipName=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(e=>console.error("AG Grid - chart update failed",e))}}jM([S("chartTranslationService")],am.prototype,"chartTranslationService",void 0);jM([U],am.prototype,"init",null);var wU=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class yn extends am{constructor(e,t){super(e,t),this.stroke="gray",this.axisOvershoot=3}addAxes(){const e=this.size,t=this.padding,i=new xt;i.x1=t,i.y1=t,i.x2=t,i.y2=e-t+this.axisOvershoot,i.stroke=this.stroke;const s=new xt;s.x1=t-this.axisOvershoot+1,s.y1=e-t,s.x2=e-t+1,s.y2=e-t,s.stroke=this.stroke;const n=this.root;n.append(i),n.append(s)}}wU([U],yn.prototype,"addAxes",null);function lm(r){const{stacked:e,size:t,padding:i,xScalePadding:s,xScaleDomain:n,yScaleDomain:o}=r,a=new Ro;a.domain=n,a.range=[i,t-i],a.paddingInner=s,a.paddingOuter=s;const l=new Xt;l.domain=o,l.range=[t-i,i];const c=(d,h,u)=>d.map((p,f)=>{const g=u.convert(p),m=new wi;return m.x=h.convert(f),m.y=g,m.width=h.bandwidth,m.height=u.convert(0)-g,m.strokeWidth=1,m.crisp=!0,m});return e?r.data.map(d=>c(d,a,l)):c(r.data,a,l)}function TE(r,e,t,i){const s=new Xt;s.domain=[0,4],s.range=[i,t-i];const n=new Xt;n.domain=[0,10],n.range=[t-i,i];const o=e.map(l=>{const c=new Ei;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((d,h)=>{c.path[h>0?"lineTo":"moveTo"](s.convert(h),n.convert(d))}),c}),a=new ve;return a.setClipRectInGroupCoordinateSpace(new qe(i,i,t-i*2,t-i*2)),a.append(o),r.append(a),o}class zM extends yn{constructor(e,t,i){super(e,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:s,columnData:n,size:o,padding:a}=this;this.columns=lm({stacked:!1,root:s,data:n,size:o,padding:a,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(this.columns),this.updateColors(t,i)}updateColors(e,t){this.columns.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]})}}zM.chartType="groupedColumn";class pp extends yn{constructor(e,t,i,s=pp.data,n=[0,16],o="stackedColumnTooltip"){super(e,o);const{root:a,size:l,padding:c}=this;this.stackedColumns=lm({stacked:!0,root:a,data:s,size:l,padding:c,xScaleDomain:[0,1,2],yScaleDomain:n,xScalePadding:.3}),a.append([].concat.apply([],this.stackedColumns)),this.updateColors(t,i)}updateColors(e,t){this.stackedColumns.forEach((i,s)=>i.forEach(n=>{n.fill=e[s],n.stroke=t[s]}))}}pp.chartType="stackedColumn";pp.data=[[8,12,16],[6,9,12],[2,3,4]];class cm extends pp{constructor(e,t,i){super(e,t,i,cm.data,[0,10],"normalizedColumnTooltip")}}cm.chartType="normalizedColumn";cm.data=[[10,10,10],[6,7,8],[2,4,6]];class $M extends yn{constructor(e,t,i){super(e,"groupedBarTooltip");const s=this.padding,n=this.size,o=[2,3,4],a=new Ro;a.domain=[0,1,2],a.range=[s,n-s],a.paddingInner=.3,a.paddingOuter=.3;const l=new Xt;l.domain=[0,4],l.range=[n-s,s];const c=l.convert(0),d=a.bandwidth;this.bars=o.map((h,u)=>{const p=new wi;return p.x=s,p.y=a.convert(u),p.width=c-l.convert(h),p.height=d,p.strokeWidth=1,p.crisp=!0,p}),this.updateColors(t,i),this.root.append(this.bars)}updateColors(e,t){this.bars.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]})}}$M.chartType="groupedBar";class fp extends yn{constructor(e,t,i,s=fp.data,n=[0,16],o="stackedBarTooltip"){super(e,o);const a=this.size,l=this.padding,c=new Ro;c.domain=[0,1,2],c.range=[l,a-l],c.paddingInner=.3,c.paddingOuter=.3;const d=new Xt;d.domain=n,d.range=[a-l,l];const h=d.convert(0),u=c.bandwidth;this.bars=s.map(p=>p.map((f,g)=>{const m=new wi;return m.x=l,m.y=c.convert(g),m.width=h-d.convert(f),m.height=u,m.strokeWidth=1,m.crisp=!0,m})),this.updateColors(t,i),this.root.append([].concat.apply([],this.bars))}updateColors(e,t){this.bars.forEach((i,s)=>i.forEach(n=>{n.fill=e[s],n.stroke=t[s]}))}}fp.chartType="stackedBar";fp.data=[[8,12,16],[6,9,12],[2,3,4]];class dm extends fp{constructor(e,t,i){super(e,t,i,dm.data,[0,10],"normalizedBarTooltip")}}dm.chartType="normalizedBar";dm.data=[[10,10,10],[6,7,8],[2,4,6]];const Tn=Zs;class DE extends am{constructor(e,t,i,s=.6,n="doughnutTooltip"){super(e,n);const o=(this.size-this.padding*2)/2,a=o+this.padding,l=[[Tn(-90),Tn(30)],[Tn(30),Tn(120)],[Tn(120),Tn(180)],[Tn(180),Tn(210)],[Tn(210),Tn(240)],[Tn(240),Tn(270)]];this.sectors=l.map(([c,d])=>{const h=new Fr;return h.centerX=a,h.centerY=a,h.innerRadius=o*s,h.outerRadius=o,h.startAngle=c,h.endAngle=d,h.stroke=void 0,h.strokeWidth=1,h}),this.updateColors(t,i),this.root.append(this.sectors)}updateColors(e,t){this.sectors.forEach((i,s)=>{i.fill=e[s%e.length],i.stroke=t[s%t.length]})}}DE.chartType="doughnut";class KM extends DE{constructor(e,t,i){super(e,t,i,0,"pieTooltip")}}KM.chartType="pie";class YM extends yn{constructor(e,t,i){super(e,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=TE(this.root,this.data,this.size,this.padding),this.updateColors(t,i)}updateColors(e,t){this.lines.forEach((i,s)=>{i.stroke=e[s]})}}YM.chartType="line";class XM extends yn{constructor(e,t,i){super(e,"scatterTooltip");const s=this.size,n=this.padding,o=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],a=new Xt;a.domain=[-.5,4],a.range=[n*2,s-n];const l=new Xt;l.domain=[-.5,3.5],l.range=[s-n,n];const c=[];o.forEach(h=>{h.forEach(([u,p])=>{const f=new an;f.strokeWidth=1,f.centerX=a.convert(u),f.centerY=l.convert(p),f.radius=2.5,c.push(f)})}),this.points=c,this.updateColors(t,i);const d=new ve;d.setClipRectInGroupCoordinateSpace(new qe(n,n,s-n*2,s-n*2)),d.append(this.points),this.root.append(d)}updateColors(e,t){this.points.forEach((i,s)=>{i.stroke=t[s%t.length],i.fill=e[s%e.length]})}}XM.chartType="scatter";class qM extends yn{constructor(e,t,i){super(e,"bubbleTooltip");const s=this.size,n=this.padding,o=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],a=new Xt;a.domain=[0,1],a.range=[n*2,s-n];const l=new Xt;l.domain=[0,1],l.range=[s-n,n];const c=[];o.forEach(h=>{h.forEach(([u,p,f])=>{const g=new an;g.strokeWidth=1,g.centerX=a.convert(u),g.centerY=l.convert(p),g.radius=f,g.fillOpacity=.7,c.push(g)})}),this.points=c,this.updateColors(t,i);const d=new ve;d.setClipRectInGroupCoordinateSpace(new qe(n,n,s-n*2,s-n*2)),d.append(this.points),this.root.append(d)}updateColors(e,t){this.points.forEach((i,s)=>{i.stroke=t[s%t.length],i.fill=e[s%e.length]})}}qM.chartType="bubble";class hm extends yn{constructor(e,t,i,s=hm.data){super(e,"groupedAreaTooltip");const n=this.size,o=this.padding,a=new Ro;a.domain=[0,1,2],a.paddingInner=1,a.paddingOuter=0,a.range=[o+.5,n-o-.5];const l=new Xt;l.domain=[0,6],l.range=[n-o+.5,o];const d=s.length*2-1,h=[],u=l.convert(0);s.forEach((p,f)=>{const g=a.convert(f);p.forEach((m,v)=>{const C=l.convert(m),y=h[v]||(h[v]=[]);y[f]={x:g,y:C},y[d-f]={x:g,y:u}})}),this.areas=h.reverse().map(p=>{const f=new Ei;f.strokeWidth=1,f.fillOpacity=.7;const g=f.path;return g.clear(),p.forEach((m,v)=>g[v>0?"lineTo":"moveTo"](m.x,m.y)),g.closePath(),f}),this.updateColors(t,i),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]})}}hm.chartType="area";hm.data=[[1,3,5],[2,6,4],[5,3,1]];class qd extends yn{constructor(e,t,i,s=qd.data,n="stackedAreaTooltip"){super(e,n);const o=this.size,a=this.padding,l=new Ro;l.domain=[0,1,2],l.paddingInner=1,l.paddingOuter=0,l.range=[a+.5,o-a-.5];const c=new Xt;c.domain=[0,16],c.range=[o-a+.5,a+.5];const h=s.length*2-1,u=[];s.forEach((p,f)=>{const g=l.convert(f);let m=0;p.forEach((v,C)=>{const y=c.convert(m+v),R=u[C]||(u[C]=[]);R[f]={x:g,y},R[h-f]={x:g,y:c.convert(m)},m+=v})}),this.areas=u.map(p=>{const f=new Ei;f.strokeWidth=1;const g=f.path;return g.clear(),p.forEach((m,v)=>g[v>0?"lineTo":"moveTo"](m.x,m.y)),g.closePath(),f}),this.updateColors(t,i),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]})}}qd.chartType="stackedArea";qd.data=[[2,3,2],[3,6,5],[6,2,2]];class um extends qd{constructor(e,t,i,s=um.data){super(e,t,i,s,"normalizedAreaTooltip")}}um.chartType="normalizedArea";um.data=qd.data.map(r=>{const e=r.reduce((t,i)=>t+i,0);return r.map(t=>t/e*16)});class ZM extends yn{constructor(e,t,i){super(e,"histogramTooltip");const s=this.padding,n=this.size,o=[2,5,11,13,10,6,1],a=new Xt;a.domain=[0,o.length],a.range=[s,n-s];const l=new Xt;l.domain=[0,o.reduce((d,h)=>Math.max(d,h),0)],l.range=[n-s,s];const c=l.convert(0);this.bars=o.map((d,h)=>{const u=l.convert(d),p=a.convert(h),f=a.convert(h+1),g=new wi;return g.x=p,g.y=u,g.width=f-p,g.height=c-u,g.strokeWidth=1,g.crisp=!0,g}),this.updateColors(t,i),this.root.append(this.bars)}updateColors([e],[t]){this.bars.forEach(i=>{i.fill=e,i.stroke=t})}}ZM.chartType="histogram";class JM extends yn{constructor(e,t,i){super(e,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:n,lineData:o,size:a,padding:l}=this;this.columns=lm({stacked:!1,root:s,data:n,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=TE(s,o,a,l),this.updateColors(t,i)}updateColors(e,t){this.columns.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]}),this.lines.forEach((i,s)=>{i.stroke=e[s+2]})}}JM.chartType="columnLineCombo";class QM extends yn{constructor(e,t,i){super(e,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:s,columnData:n,areaData:o,size:a,padding:l}=this;this.columns=lm({stacked:!1,root:s,data:n,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const c=new Ro;c.range=[l,a-l],c.domain=[0,1,2,3,4],c.paddingInner=1,c.paddingOuter=0;const d=new Xt;d.range=[a-l,l],d.domain=[0,6];const h=[],u=d.convert(0),p=c.convert(0);o.forEach((f,g)=>{const m=h[g]||(h[g]=[]);f.forEach((C,y)=>{const R=C,b=y,w=c.convert(b),x=d.convert(R);m[y]={x:w,y:x}});const v=c.convert(f.length-1);h[g].push({x:v,y:u},{x:p,y:u})}),this.areas=h.map(f=>{const g=new Ei;g.strokeWidth=1,g.fillOpacity=.8;const m=g.path;return f.forEach((v,C)=>m[C>0?"lineTo":"moveTo"](v.x,v.y)),g}),s.append(this.areas),s.append([].concat.apply([],this.columns)),this.updateColors(t,i)}updateColors(e,t){this.areas.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]}),this.columns.forEach((i,s)=>{i.fill=e[s+1],i.stroke=t[s+1]})}}QM.chartType="areaColumnCombo";class e_ extends am{constructor(e,t,i){super(e,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:n,lineData:o,size:a,padding:l}=this;this.columns=lm({stacked:!1,root:s,data:n,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=TE(s,o,a,l);const c="grey",d=3,h=new xt;h.x1=l,h.y1=l,h.x2=l,h.y2=a-l+d,h.stroke=c;const u=new xt;u.x1=l-d+1,u.y1=a-l,u.x2=a-l+1,u.y2=a-l,u.stroke=c;const p=new Ei;this.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,s.append([u,h,p]),this.updateColors(t,i)}updateColors(e,t){this.columns.forEach((i,s)=>{i.fill=e[s],i.stroke=t[s]}),this.lines.forEach((i,s)=>{i.stroke=e[s+2]})}buildPenIconPath(e){const{path:t}=e;t.moveTo(25.76,43.46),t.lineTo(31.27,48.53),t.moveTo(49.86,22),t.lineTo(49.86,22),t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),t.lineTo(46.86,21.41),t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),t.lineTo(25.51,43.8),t.lineTo(25.43,43.89),t.lineTo(23.01,51.89),t.lineTo(22.83,52.46),t.lineTo(31.02,48.86),t.lineTo(49.02,28.52),t.lineTo(49.02,28.52),t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),t.lineTo(50.75,24.93),t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),t.closePath(),t.moveTo(41.76,25.5),t.lineTo(47.34,30.5),t.moveTo(40.74,26.65),t.lineTo(46.25,31.71)}}e_.chartType="customCombo";var t_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const IR={columnGroup:{column:zM,stackedColumn:pp,normalizedColumn:cm},barGroup:{bar:$M,stackedBar:fp,normalizedBar:dm},pieGroup:{pie:KM,doughnut:DE},lineGroup:{line:YM},scatterGroup:{scatter:XM,bubble:qM},areaGroup:{area:hm,stackedArea:qd,normalizedArea:um},histogramGroup:{histogram:ZM},combinationGroup:{columnLineCombo:JM,areaColumnCombo:QM,customCombo:e_}};class gp extends Q{constructor(e,t,i,s=LG){super(gp.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=t,this.strokes=i,this.chartGroups=Object.assign({},s)}init(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(t=>t!=="customCombo"));const e=this.getGui();Object.keys(this.chartGroups).forEach(t=>{const i=this.chartGroups[t],s=this.createBean(new At({title:this.chartTranslationService.translate(t),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));i.forEach(n=>{var o;const a=(o=IR[t])===null||o===void 0?void 0:o[n];if(!a){IR[t]?A.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${t}.${n}'`),`invalid_chartGroupsDef${n}_${t}`):A.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${t}'`),`invalid_chartGroupsDef${t}`);return}const l=document.createElement("div");l.classList.add("ag-chart-mini-thumbnail");const c=a.chartType;this.addManagedListener(l,"click",()=>{this.chartController.setChartType(c),this.updateSelectedMiniChart()}),this.wrappers[c]=l,this.createBean(new a(l,this.fills,this.strokes)),s.addItem(l)}),e.appendChild(s.getGui())}),this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const t in this.wrappers){const i=this.wrappers[t],s=t===e;i.classList.toggle("ag-selected",s)}}}gp.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>';t_([S("chartTranslationService")],gp.prototype,"chartTranslationService",void 0);t_([U],gp.prototype,"init",null);var Zd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Bo extends Q{constructor(e){super(Bo.TEMPLATE),this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[],this.chartController=e}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",A.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",A.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,Ot.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,Ot.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=s=>!s.getGui().classList.contains("ag-hidden"),i=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(i){const s=i.offsetParent;s&&this.eMiniChartsContainer.scrollTo(0,s.offsetTop)}},250)}resetPalettes(e){var t,i;const s=this.chartController.getPalettes(),n=(i=(t=this.gridOptionsService.get("chartToolPanelsDef"))===null||t===void 0?void 0:t.settingsPanel)===null||i===void 0?void 0:i.chartGroupsDef;A.shallowCompare(s,this.palettes)&&!e||this.isAnimating||(this.palettes=s,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(o=>o===this.chartController.getChartThemeName()),this.cardItems=[],A.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((o,a)=>{const l=this.activePaletteIndex===a,{fills:c,strokes:d}=o,h=this.createBean(new gp(this.chartController,c,d,n));this.miniChartsContainers.push(h),this.eMiniChartsContainer.appendChild(h.getGui()),this.addCardLink(a),l?h.updateSelectedMiniChart():h.setDisplayed(!1)}),A.setDisplayed(this.eNavBar,this.palettes.length>1),A.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedListener(t,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;A.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const i=this.miniChartsContainers[this.activePaletteIndex],s=i.getGui(),n=this.miniChartsContainers[e],o=n.getGui();i.updateSelectedMiniChart(),n.updateSelectedMiniChart();const a=t==="left"?-1:1,l=o.style.left=`${A.getAbsoluteWidth(this.getGui())*a}px`;this.activePaletteIndex=e,this.isAnimating=!0;const c="ag-animating";n.setDisplayed(!0),i.addCssClass(c),n.addCssClass(c),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{s.style.left=`${-parseFloat(l)}px`,o.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,i.removeCssClass(c),n.removeCssClass(c),i.setDisplayed(!1)},300)}destroyMiniCharts(){A.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}}Bo.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`;Zd([S("resizeObserverService")],Bo.prototype,"resizeObserverService",void 0);Zd([G("eMiniChartsContainer")],Bo.prototype,"eMiniChartsContainer",void 0);Zd([G("eNavBar")],Bo.prototype,"eNavBar",void 0);Zd([G("eCardSelector")],Bo.prototype,"eCardSelector",void 0);Zd([G("ePrevBtn")],Bo.prototype,"ePrevBtn",void 0);Zd([G("eNextBtn")],Bo.prototype,"eNextBtn",void 0);Zd([U],Bo.prototype,"postConstruct",null);var i_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Dl extends Q{constructor(e){super(),this.tabs=[];const{controller:t,panels:i,chartOptionsService:s}=e;this.chartController=t,this.chartOptionsService=s,this.panels=i}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),{comp:i,tab:s}=this.createTab(e,t,this.getPanelClass(t));this.tabs.push(s),this.addDestroyFunc(()=>this.destroyBean(i))}),this.tabbedLayout=new jl({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,i){const s=document.createElement("div");s.classList.add("ag-chart-tab",`ag-chart-${t}`);const n=new i(this.chartController,this.chartOptionsService);this.getContext().createBean(n),s.appendChild(n.getGui());const o=document.createElement("div"),a=this.chartTranslationService.translate(t);return o.innerText=a,{comp:n,tab:{title:o,titleLabel:a,bodyPromise:Xe.resolve(s),getScrollableContainer:()=>s.querySelector(".ag-scrollable-container")||s,name:e}}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}getPanelClass(e){switch(e){case Dl.TAB_DATA:return Ud;case Dl.TAB_FORMAT:return rm;default:return Bo}}}Dl.TAB_DATA="data";Dl.TAB_FORMAT="format";i_([S("chartTranslationService")],Dl.prototype,"chartTranslationService",void 0);i_([U],Dl.prototype,"init",null);var pm=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class zn extends Q{constructor(e,t,i,s){super(zn.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartController=i,this.chartOptionsService=s,this.buttons={chartSettings:["menu",()=>this.showMenu(this.defaultPanel)],chartData:["menu",()=>this.showMenu("chartData")],chartFormat:["menu",()=>this.showMenu("chartFormat")],chartLink:["linked",n=>this.toggleDetached(n)],chartUnlink:["unlinked",n=>this.toggleDetached(n)],chartDownload:["save",()=>this.saveChart()]},this.panels=[],this.buttonListenersDestroyFuncs=[],this.menuVisible=!1}postConstruct(){this.createButtons(),this.addManagedListener(this.eventService,E.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&(!((t=this.gridOptionsService.get("chartToolPanelsDef"))===null||t===void 0)&&t.defaultToolPanel)&&this.showMenu(this.defaultPanel,!1)}),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,Ot.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartLink","chartUnlink","chartDownload"],t=["chartSettings","chartData","chartFormat"],i=[];return e.some(s=>this.chartToolbarOptions.includes(s))&&i.push("top"),t.some(s=>this.chartToolbarOptions.includes(s))&&i.push(this.gridOptionsService.is("enableRtl")?"left":"right"),i}getToolbarOptions(){var e,t,i;if(!!this.gridOptionsService.get("chartToolPanelsDef")){const n=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],o=this.gridOptionsService.getCallback("getChartToolbarItems");let l=o?o({defaultItems:n}).filter(h=>{if(!Vx.includes(h)){const u=my.includes(h)?`AG Grid: '${h}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:`AG Grid: '${h}' is not a valid Chart Toolbar Option`;return console.warn(u),!1}return!0}):n;const c=(t=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.panels)===null||t===void 0?void 0:t.map(h=>{const u=qm[h];return u||console.warn(`AG Grid - invalid panel in chartToolPanelsDef.panels: '${h}'`),u}).filter(h=>!!h);this.panels=c||Object.values(qm),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(h=>h!=="chartData"));const d=(i=this.gridOptionsService.get("chartToolPanelsDef"))===null||i===void 0?void 0:i.defaultToolPanel;return this.defaultPanel=d&&qm[d]||this.panels[0],this.panels.length>0?[this.panels[0],...l]:l}else{let n=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const o=this.gridOptionsService.getCallback("getChartToolbarItems");if(o){const l=this.gridOptionsService.is("suppressChartToolPanelsButton");n=o({defaultItems:l?n:Vx}).filter(d=>{if(this.buttons[d]){if(!l&&my.includes(d)){const h=`AG Grid: '${d}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return console.warn(h),!1}}else return console.warn(`AG Grid: '${d}' is not a valid Chart Toolbar Option`),!1;return!0}),l||(n=n.concat(my))}this.chartController.isPivotChart()&&(n=n.filter(l=>l!=="chartData"));const a=["chartUnlink","chartLink","chartDownload"];return this.panels=n.filter(l=>a.indexOf(l)===-1),this.defaultPanel=this.panels[0],n.filter(l=>a.indexOf(l)!==-1||this.panels.length&&l===this.panels[0])}}toggleDetached(e){const t=e.target,i=t.classList.contains("ag-icon-linked");t.classList.toggle("ag-icon-linked",!i),t.classList.toggle("ag-icon-unlinked",i);const s=i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",n=this.chartTranslationService.translate(s);n&&(t.title=n),this.chartController.detachChartRange()}createButtons(){this.buttonListenersDestroyFuncs.forEach(t=>t()),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();const e=this.eMenu;A.clearElement(e),this.chartToolbarOptions.forEach(t=>{const i=this.buttons[t],[s,n]=i,o=A.createIconNoSpan(s,this.gridOptionsService,void 0,!0);o.classList.add("ag-chart-menu-icon");const a=this.chartTranslationService.translate(t+"ToolbarTooltip");a&&o instanceof HTMLElement&&(o.title=a),this.buttonListenersDestroyFuncs.push(this.addManagedListener(o,"click",n)),e.appendChild(o)})}saveChart(){const e={type:zn.EVENT_DOWNLOAD_CHART};this.dispatchEvent(e)}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new Un({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new Dl({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,Q.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new Xe(s=>{window.setTimeout(()=>{i.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),s(i),this.addManagedListener(this.eChartContainer,"click",n=>{this.getGui().contains(n.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())}toggleMenu(){this.menuVisible?this.hideMenu():this.showMenu()}showMenu(e,t=!0){if(t||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!e)this.showContainer();else{const i=e||this.defaultPanel;let s=this.panels.indexOf(i);s<0&&(console.warn(`AG Grid: '${e}' is not a valid Chart Tool Panel name`),s=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(s),this.showContainer()):this.createMenuPanel(s).then(this.showContainer.bind(this))}t||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(){this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses()},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}}zn.EVENT_DOWNLOAD_CHART="downloadChart";zn.TEMPLATE=`<div>
        <div class="ag-chart-menu" ref="eMenu"></div>
        <button class="ag-button ag-chart-menu-close" ref="eHideButton">
            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>
        </button>
    </div>`;pm([S("chartTranslationService")],zn.prototype,"chartTranslationService",void 0);pm([G("eMenu")],zn.prototype,"eMenu",void 0);pm([G("eHideButton")],zn.prototype,"eHideButton",void 0);pm([G("eHideButtonIcon")],zn.prototype,"eHideButtonIcon",void 0);pm([U],zn.prototype,"postConstruct",null);var s_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class mp extends Q{constructor(e){super(mp.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e,t){this.chartController=e,this.chartOptionsService=t;for(const c of this.destroyableChartListeners)c();this.destroyableChartListeners=[];const s=this.chartController.getChartProxy().getChart(),n=s.scene.canvas.element,o=this.addManagedListener(n,"dblclick",c=>{const{title:d}=s;if(d&&d.node.containsPoint(c.offsetX,c.offsetY)){const h=d.node.computeBBox(),u=d.node.inverseTransformPoint(h.x,h.y);this.startEditing(Object.assign(Object.assign({},h),u),n.width)}});let a=!1;const l=this.addManagedListener(n,"mousemove",c=>{const{title:d}=s,h=!!(d&&d.enabled&&d.node.containsPoint(c.offsetX,c.offsetY));a!==h&&(n.style.cursor=h?"pointer":""),a=h});this.destroyableChartListeners=[o,l]}startEditing(e,t){if(this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const i=300,s=Math.max(Math.min(e.width+20,t),i),n=this.getGui();n.classList.add("currently-editing");const o=n.style;o.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),o.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),o.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),o.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",o.color=this.chartOptionsService.getChartOption("title.color");const a=this.chartOptionsService.getChartOption("title.text"),l=a===this.chartTranslationService.translate("titlePlaceholder");n.value=l?"":a;const c=a.split(/\r?\n/g).length;o.left=Math.round(e.x+e.width/2-s/2-1)+"px",o.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",o.width=Math.round(s)+"px",o.lineHeight=this.getLineHeight()+"px",this.updateHeight(),n.focus()}updateHeight(){const e=this.getGui(),t=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,i)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartOptionsService.getChartOption("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartOptionsService.getChartOption("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartOptionsService.getChartOption("title.color"),t="rgba(0, 0, 0, 0)";this.chartOptionsService.setChartOption("title.color",t),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartOptionsService.setChartOption("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}}mp.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `;s_([S("chartTranslationService")],mp.prototype,"chartTranslationService",void 0);s_([U],mp.prototype,"init",null);var vp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ja extends j{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const i=this.extractRowsFromGridRowModel(e);return i.chartData=this.aggregateRowsByDimension(e,i.chartData),i}extractRowsFromGridRowModel(e){let t=[];const i={},s={},n={};let o={},a=[],l;if(e.crossFiltering)o=this.getFilteredRowNodes(),a=this.getAllRowNodes(),l=a.length;else{const c=this.gridRowModel.getRowCount()-1;l=(e.endRow>=0?Math.min(e.endRow,c):c)-e.startRow+1}for(let c=0;c<l;c++){const d={},h=e.crossFiltering?a[c]:this.gridRowModel.getRow(c+e.startRow);e.dimensionCols.forEach(u=>{const p=u.colId,f=this.columnModel.getGridColumn(p);if(f){const g=this.valueService.getValue(f,h);if(e.grouping){const m=g&&g.toString?String(g.toString()):"",v=ja.getGroupLabels(h,m);d[p]={labels:v,toString:function(){return this.labels.filter(y=>!!y).reverse().join(" - ")}},h.group&&(s[v.toString()]=c);const C=v.slice(1,v.length).toString();C&&(n[C]=s[C])}else d[p]=g}else d[Cr.DEFAULT_CATEGORY]=c+1}),e.valueCols.forEach(u=>{let p=[];const f=u.getColDef().pivotKeys;f&&(p=f.slice());const g=u.getColDef().headerName;g&&p.push(g),p.length>0&&(i[u.getId()]=p);const m=u.getColId();if(e.crossFiltering){const v=m+"-filtered-out",C=this.valueService.getValue(u,h),y=C!=null&&typeof C.toNumber=="function"?C.toNumber():C;o[h.id]?(d[m]=y,d[v]=e.aggFunc||e.isScatter?void 0:0):(d[m]=e.aggFunc||e.isScatter?void 0:0,d[v]=y)}else{let v=this.valueService.getValue(u,h);v&&v.hasOwnProperty("toString")&&(v=parseFloat(v.toString())),d[m]=v!=null&&typeof v.toNumber=="function"?v.toNumber():v}}),h.footer&&(d.footer=!0),t.push(d)}if(e.grouping){const c=A.values(n),d=(h,u)=>!h.footer&&!A.includes(c,u);t=t.filter(d)}return{chartData:t,columnNames:i}}aggregateRowsByDimension(e,t){const i=e.dimensionCols;if(!e.aggFunc||i.length===0)return t;const s=A.last(i),n=s&&s.colId,o={},a=[];return t.forEach(l=>{let c=o;i.forEach(d=>{const h=d.colId,u=l[h];if(h===n){let p=c[u];p||(p={__children:[]},i.forEach(f=>{const g=f.colId;p[g]=l[g]}),c[u]=p,a.push(p)),p.__children.push(l)}else c[u]||(c[u]={}),c=c[u]})}),ie.assertRegistered(te.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&a.forEach(l=>e.valueCols.forEach(c=>{if(e.crossFiltering)e.valueCols.forEach(d=>{const h=d.getColId(),u=l.__children.filter(v=>typeof v[h]<"u").map(v=>v[h]);let p=this.aggregationStage.aggregateValues(u,e.aggFunc);l[d.getId()]=p&&typeof p.value<"u"?p.value:p;const f=`${h}-filtered-out`,g=l.__children.filter(v=>typeof v[f]<"u").map(v=>v[f]);let m=this.aggregationStage.aggregateValues(g,e.aggFunc);l[f]=m&&typeof m.value<"u"?m.value:m});else{const d=l.__children.map(u=>u[c.getId()]);let h=0;ie.assertRegistered(te.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&(h=this.aggregationStage.aggregateValues(d,e.aggFunc)),l[c.getId()]=h&&typeof h.value<"u"?h.value:h}})),a}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const t=this.extractPivotKeySeparator(e);e.forEach(i=>{if(t==="")i.getColDef().pivotKeys=[];else{const s=i.getColId().split(t);i.getColDef().pivotKeys=s.slice(0,s.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";const t=(s,n)=>{const o=s.getGroupId();return s.getParent()?t(s.getParent(),o):n.split(o)[1][0]},i=e[0];return i.getParent()==null?"":t(i.getParent(),i.getColId())}static getGroupLabels(e,t){const i=[t];for(;e&&e.level!==0;)e=e.parent,e&&i.push(e.key);return i}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){const t=this.sortController.getSortOptions();return!t||t.length==0?e:this.rowNodeSorter.doFullSort(e,t)}}vp([S("rowModel")],ja.prototype,"gridRowModel",void 0);vp([S("valueService")],ja.prototype,"valueService",void 0);vp([S("columnModel")],ja.prototype,"columnModel",void 0);vp([S("rowNodeSorter")],ja.prototype,"rowNodeSorter",void 0);vp([S("sortController")],ja.prototype,"sortController",void 0);vp([Ne("aggregationStage")],ja.prototype,"aggregationStage",void 0);var j0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Su=class extends j{getColumn(e){return this.columnModel.getPrimaryColumn(e)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(e){return this.columnModel.getDisplayNameForColumn(e,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const e=this.columnModel.getAllDisplayedColumns(),t=new Set,i=new Set;return e.forEach(s=>{const n=s.getColDef(),o=n.chartDataType;if(o)switch(o){case"category":case"time":t.add(s);return;case"series":i.add(s);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${o}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(n.colId==="ag-Grid-AutoColumn"){t.add(s);return}if(!s.isPrimary()){i.add(s);return}(this.isNumberCol(s)?i:t).add(s)}),{dimensionCols:t,valueCols:i}}isNumberCol(e){if(e.getColId()==="ag-Grid-AutoColumn")return!1;const t=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!t)return!1;let i=this.valueService.getValue(e,t);return i==null&&(i=this.extractLeafData(t,e)),i!=null&&typeof i.toNumber=="function"&&(i=i.toNumber()),typeof i=="number"}extractLeafData(e,t){if(!e.allLeafChildren)return null;for(let i=0;i<e.allLeafChildren.length;i++){const s=e.allLeafChildren[i],n=this.valueService.getValue(t,s);if(n!=null)return n}return null}};j0([S("columnModel")],Su.prototype,"columnModel",void 0);j0([S("valueService")],Su.prototype,"valueService",void 0);j0([S("rowRenderer")],Su.prototype,"rowRenderer",void 0);Su=j0([ee("chartColumnService")],Su);var bU=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class fm extends j{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=(t=e.params.seriesChartTypes)!==null&&t!==void 0?t:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=t?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(s=>(fm.SUPPORTED_COMBO_CHART_TYPES.includes(s.chartType)||(console.warn(`AG Grid: invalid chartType '${s.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),s.chartType="line"),s));const t=s=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const n=this.savedCustomSeriesChartTypes.find(o=>o.colId===s.colId);return n||(s.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${s.colId}', defaulting to 'line'.`),{colId:s.colId,chartType:"line",secondaryAxis:!1})},i=this.chartDataModel.valueColState.map(t);this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel;let i=e==="columnLineCombo"?"groupedColumn":"stackedArea",s=e==="columnLineCombo"?"line":"groupedColumn";const n=t.filter(a=>a.selected),o=Math.ceil(n.length/2);this.seriesChartTypes=n.map((a,l)=>{const c=l>=o?s:i;return{colId:a.colId,chartType:c,secondaryAxis:!1}})}}fm.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"];bU([U],fm.prototype,"init",null);var OE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Cr extends j{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.chartType=e.chartType,this.pivotChart=e.pivotChart,this.chartThemeName=e.chartThemeName,this.aggFunc=e.aggFunc,this.referenceCellRange=e.cellRange,this.suppliedCellRange=e.cellRange,this.suppressChartRanges=e.suppressChartRanges,this.unlinked=!!e.unlinkChart,this.crossFiltering=!!e.crossFiltering}init(){this.datasource=this.createManagedBean(new ja),this.chartColumnService=this.createManagedBean(new Su),this.comboChartModel=this.createManagedBean(new fm(this)),this.updateCellRanges(),this.updateData()}updateModel(e){const{cellRange:t,chartType:i,pivotChart:s,chartThemeName:n,aggFunc:o,suppressChartRanges:a,unlinkChart:l,crossFiltering:c,seriesChartTypes:d}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=s,this.chartThemeName=n,this.aggFunc=o,this.referenceCellRange=t,this.suppliedCellRange=t,this.suppressChartRanges=a,this.unlinked=!!l,this.crossFiltering=!!c,this.updateSelectedDimension(t==null?void 0:t.columns),this.updateCellRanges(),(this.isComboChart()||d)&&this.comboChartModel.update(d),this.unlinked||this.updateData()}updateCellRanges(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:t,valueCols:i}=this.chartColumnService.getChartColumns(),s=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(t,s,e),this.setValueCellRange(i,s,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const i={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:A.includes(["scatter","bubble"],this.chartType)},{chartData:s,columnNames:n}=this.datasource.getData(i);this.chartData=s,this.columnNames=n}isGrouping(){const e=this.gridOptionsService.isTreeData(),t=e?null:this.chartColumnService.getRowGroupColumns(),i=e||t&&t.length>0,s=this.getSelectedDimension().colId,o=this.chartColumnService.getGroupDisplayColumns().map(a=>a.getColId()).some(a=>a===s);return!!i&&o}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimension(){return this.dimensionColState.filter(e=>e.selected)[0]}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const t=this.chartColumnService.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===Xs.DIMENSION?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return A.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),A.convertToSet(e)}getRowIndexes(){let e=0,t=0;const{rangeService:i,valueCellRange:s}=this;if(i&&s){e=i.getRangeStartRow(s).rowIndex;const n=i.getRangeEndRow(s);t=n.rowPinned==="bottom"?-1:n.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColumnService.getChartColumns(),i=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];let n=!1,o=1;const a=this.suppliedCellRange.columns[0];e.forEach(d=>{const h=d.getColId()==="ag-Grid-AutoColumn";let u=!1;this.crossFiltering&&this.aggFunc?a.getColId()===d.getColId()&&(u=!0):u=h?!0:!n&&i.has(d),this.dimensionColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:u,order:o++}),u&&(n=!0)});const l={colId:Cr.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!n,order:0};this.dimensionColState.unshift(l);const c=this.referenceCellRange.columns.filter(d=>t.has(d));t.forEach(d=>{s&&A.includes(this.referenceCellRange.columns,d)&&(d=c.shift()),this.valueColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:i.has(d),order:o++})})}updateColumnState(e){const t=a=>a.colId===e.colId,{dimensionColState:i,valueColState:s}=this;i.filter(t).length>0?i.forEach(a=>a.selected=t(a)):s.filter(t).forEach(a=>a.selected=e.selected);const n=[...i,...s],o=[];n.forEach((a,l)=>{l===e.order&&o.push(e.colId),a.colId!==e.colId&&o.push(a.colId)}),n.forEach(a=>{const l=o.indexOf(a.colId);a.order=l>=0?o.indexOf(a.colId):n.length-1}),this.reorderColState()}reorderColState(){const e=(t,i)=>t.order-i.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,i){if(this.dimensionCellRange=void 0,!i&&!this.dimensionColState.length){e.forEach(n=>{this.dimensionCellRange||!t.has(n)||(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,n))});return}let s=i;if(this.crossFiltering&&this.aggFunc){const n=this.suppliedCellRange.columns[0];s=this.dimensionColState.filter(o=>o.colId===n.getColId())[0]}else(!s||!e.has(s.column))&&(s=this.dimensionColState.filter(n=>n.selected)[0]);s&&s.colId!==Cr.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,s.column))}setValueCellRange(e,t,i){this.valueCellRange=void 0;const s=[];if(e.forEach(n=>{i&&i.colId===n.getColId()?i.selected&&s.push(i.column):t.has(n)&&s.push(n)}),s.length>0){let n=[];this.valueColState.length>0?n=this.valueColState.map(o=>o.colId):t.forEach(o=>n.push(o.getColId())),s.sort((o,a)=>n.indexOf(o.getColId())-n.indexOf(a.getColId())),this.valueCellRange=this.createCellRange(Xs.VALUE,...s)}}updateSelectedDimension(e){const t=new Set(e.map(s=>s.getColId())),i=this.dimensionColState.find(s=>t.has(s.colId))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map(s=>Object.assign(Object.assign({},s),{selected:s.colId===i.colId}))}syncDimensionCellRange(){const e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(Xs.DIMENSION,e.column))}isComboChart(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)}}Cr.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY";OE([S("rangeService")],Cr.prototype,"rangeService",void 0);OE([S("chartTranslationService")],Cr.prototype,"chartTranslationService",void 0);OE([U],Cr.prototype,"init",null);function LR(r){return r.chart!=null?r.chart:r}class n_{constructor(e){this.chartProxyParams=e,this.clearThemeOverrides=!1,this.chart=e.chartInstance,this.chartType=e.chartType,this.crossFiltering=e.crossFiltering,this.crossFilterCallback=e.crossFilterCallback,this.standaloneChartType=Wn(this.chartType),this.chart==null?this.chart=$h.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}getChart(){return LR(this.chart)}getChartRef(){return this.chart}downloadChart(e,t,i){const{chart:s}=this,n=LR(s),o=t||(n.title?n.title.text:"chart"),{width:a,height:l}=e||{};$h.download(s,{width:a,height:l,fileName:o,fileFormat:i})}getChartImageDataURL(e){return this.getChart().scene.getDataURL(e)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var e;return(e=this.getChartOptions().theme.overrides)!==null&&e!==void 0?e:{}}getChartPalette(){return em(this.getChartOptions().theme).palette}setPaired(e){const t=Wn(this.chartProxyParams.chartType);$h.updateDelta(this.chart,{theme:{overrides:{[t]:{paired:e}}}})}isPaired(){const e=Wn(this.chartProxyParams.chartType);return A.get(this.getChartThemeOverrides(),`${e}.paired`,!0)}lookupCustomChartTheme(e){return VM(this.chartProxyParams,e)}transformData(e,t,i){return i?e.map((s,n)=>{const o=s[t],a=o&&o.toString?o.toString():"",l=Object.assign({},s);return l[t]={id:n,value:o,toString:()=>a},l}):e}getCommonChartOptions(e){var t,i;const s=this.clearThemeOverrides?{}:(i=(t=this.chart)===null||t===void 0?void 0:t.getOptions())!==null&&i!==void 0?i:{},n=this.chart!=null?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,Object.assign(Object.assign({},s),{theme:Object.assign(Object.assign({},hU(this.chartProxyParams,this)),e?{overrides:e}:n),container:this.chartProxyParams.parentElement,mode:"integrated"})}getActiveFormattingPanelOverrides(){var e,t;if(this.clearThemeOverrides)return{};const i=(e=this.chart)===null||e===void 0?void 0:e.getOptions().theme;return(t=i==null?void 0:i.overrides)!==null&&t!==void 0?t:{}}destroy({keepChartInstance:e=!1}={}){if(e)return this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}}class uc extends n_{constructor(e){super(e),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}update(e){const t=this.getAxes(e),i=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});$h.update(this.getChartRef(),i)}getData(e,t){var i;const s=["area","line"].includes(this.standaloneChartType),n=this.standaloneChartType==="bar"?"left":"bottom",o=((i=t.find(a=>a.position===n))===null||i===void 0?void 0:i.type)==="category";return this.crossFiltering&&s?this.getCrossFilterData(e):this.getDataTransformedData(e,o)}getDataTransformedData(e,t){return this.transformData(e.data,e.category.id,t)}getXAxisType(e){return e.grouping?"groupedCategory":uc.isTimeAxis(e)?"time":"category"}static isTimeAxis(e){if(e.category&&e.category.chartDataType)return e.category.chartDataType==="time";const t=e.data[0];return(t&&t[e.category.id])instanceof Date}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const i=s=>this.standaloneChartType==="area"?t.getCrossFilteringContext().lastSelectedChartId===t.chartId?s+"-total":s:s+"-total";return e.map(s=>(s.yKey=i(s.yKey),s.listeners={nodeClick:n=>{const o=n.datum[s.xKey],a=n.event.metaKey||n.event.ctrlKey;this.crossFilteringAddSelectedPoint(a,o),this.crossFilterCallback(n)}},s.marker={formatter:n=>{const o=n.datum[t.category.id];return{fill:n.highlighted?"yellow":n.fill,size:n.highlighted?14:this.crossFilteringPointSelected(o)?8:0}}},this.standaloneChartType==="area"&&(s.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(s.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),s))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const t=e.fields[0].colId,i=`${t}-filtered-out`,s=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(n=>{const o=n[e.category.id];this.crossFilteringAllPoints.add(o);const a=this.crossFilteringPointSelected(o);return this.standaloneChartType==="area"&&s===e.chartId&&(n[`${t}-total`]=a?n[t]:n[t]+n[i]),this.standaloneChartType==="line"&&(n[`${t}-total`]=a?n[t]:n[t]+n[i]),n})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}}function EU(r){return Array.isArray(r)?[]:{}}function Wf(r,e){return e.clone!==!1&&e.isMergeableObject(r)?cd(EU(r),r,e):r}function xU(r,e,t){return r.concat(e).map(function(i){return Wf(i,t)})}function RU(r,e){if(!e.customMerge)return cd;const t=e.customMerge(r);return typeof t=="function"?t:cd}function TU(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(e){return r.propertyIsEnumerable(e)}):[]}function FR(r){return Object.keys(r).concat(TU(r))}function o_(r,e){try{return e in r}catch{return!1}}function DU(r,e){return o_(r,e)&&!(Object.hasOwnProperty.call(r,e)&&Object.propertyIsEnumerable.call(r,e))}function OU(r={},e={},t){const i={};return t.isMergeableObject(r)&&FR(r).forEach(function(s){i[s]=Wf(r[s],t)}),FR(e).forEach(function(s){DU(r,s)||(o_(r,s)&&t.isMergeableObject(e[s])?i[s]=RU(s,t)(r[s],e[s],t):i[s]=Wf(e[s],t))}),i}function AU(r){return PU(r)&&!MU(r)}function PU(r){return!!r&&typeof r=="object"}function MU(r){const e=Object.prototype.toString.call(r);return e==="[object RegExp]"||e==="[object Date]"}function cd(r,e,t){t=t||{},t.arrayMerge=t.arrayMerge||xU,t.isMergeableObject=t.isMergeableObject||AU,t.cloneUnlessOtherwiseSpecified=Wf;const i=Array.isArray(e),s=Array.isArray(r);return i===s?i?t.arrayMerge(r,e,t):OU(r,e,t):Wf(e,t)}function NR(r,e){const t=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),s=parseInt(r.slice(5,7),16);return e?`rgba(${t}, ${i}, ${s}, ${e})`:`rgba(${t}, ${i}, ${s})`}function GR(r,e){return r.map(t=>{const i=Re.fromString(t);return new Re(i.r,i.g,i.b,e).toHexString()})}class _U extends uc{constructor(e){super(e)}getAxes(e){const t=this.standaloneChartType==="bar",i=[{type:this.getXAxisType(e),position:t?"left":"bottom"},{type:"number",position:t?"bottom":"left"}];if(this.isNormalised()){const s=i[1];s.label=Object.assign(Object.assign({},s.label),{formatter:n=>Math.round(n.value)+"%"})}return i}getSeries(e){const t=["groupedColumn","groupedBar"],i=!this.crossFiltering&&A.includes(t,this.chartType),s=e.fields.map(n=>({type:this.standaloneChartType,grouped:i,normalizedTo:this.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:n.colId,yName:n.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(s):s}extractCrossFilterSeries(e){const t=this.getChartPalette(),i=(o,a)=>Object.assign(Object.assign({},o),{highlightStyle:{item:{fill:void 0}},fill:t==null?void 0:t.fills[a],stroke:t==null?void 0:t.strokes[a],listeners:{nodeClick:this.crossFilterCallback}}),s=o=>{const a=o.yKey+"-filtered-out";return Object.assign(Object.assign({},cd({},o)),{yKey:a,fill:NR(o.fill,"0.3"),stroke:NR(o.stroke,"0.3"),hideInLegend:[a]})},n=[];for(let o=0;o<e.length;o++){const a=i(e[o],o);n.push(a),n.push(s(a))}return n}isNormalised(){const e=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&A.includes(e,this.chartType)}}class IU extends uc{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const i=t[1];i.label=Object.assign(Object.assign({},i.label),{formatter:s=>Math.round(s.value)+"%"})}return t}getSeries(e){const t=e.fields.map(i=>({type:this.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,e):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}}class LU extends uc{constructor(e){super(e)}getAxes(e){return[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}]}getSeries(e){const t=e.fields.map(i=>({type:this.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,e):t}}class AE extends n_{constructor(e){super(e)}update(e){const{data:t,category:i}=e,s=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(t,i.id),series:this.getSeries(e)});$h.update(this.getChartRef(),s)}getSeries(e){const t=e.fields.length,i={currentOffset:0,offsetAmount:t>1?20:40},s=this.getFields(e).map(n=>{var o;const a={type:this.standaloneChartType,angleKey:n.colId,angleName:n.displayName,sectorLabelKey:n.colId,calloutLabelKey:e.category.id,calloutLabelName:e.category.name};if(this.chartType==="doughnut"){const{outerRadiusOffset:l,innerRadiusOffset:c}=AE.calculateOffsets(i),d=n.displayName?{title:{text:n.displayName,showInLegend:t>1}}:void 0;return Object.assign(Object.assign(Object.assign(Object.assign({},a),{outerRadiusOffset:l,innerRadiusOffset:c}),d),{calloutLine:{colors:(o=this.getChartPalette())===null||o===void 0?void 0:o.strokes}})}return a});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(e){const t=e.fields[0].colId,i=`${t}-filtered-out`;return e.data.map(s=>{const n=s[t]+s[i];return s[`${t}-total`]=n,s[i]=1,s[t]=s[t]/n,s})}extractCrossFilterSeries(e){const t=this.getChartPalette(),i=l=>Object.assign(Object.assign({},l),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),s=(l,c)=>{var d,h;return Object.assign(Object.assign({},cd({},a)),{radiusKey:c+"-filtered-out",fills:GR((d=l.fills)!==null&&d!==void 0?d:t.fills,.3),strokes:GR((h=l.strokes)!==null&&h!==void 0?h:t.strokes,.3),showInLegend:!1})},n=e[0],o=n.angleKey,a=i(n);return[s(n,o),a]}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const i=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:i}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}crossFilteringReset(){}}class FU extends uc{constructor(e){super(e)}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(e){const t=this.isPaired(),i=this.getSeriesDefinitions(e.fields,t),s=e.category.id===Cr.DEFAULT_CATEGORY?void 0:e.category,n=i.map(o=>({type:this.standaloneChartType,xKey:o.xField.colId,xName:o.xField.displayName,yKey:o.yField.colId,yName:o.yField.displayName,title:`${o.yField.displayName} vs ${o.xField.displayName}`,sizeKey:o.sizeField?o.sizeField.colId:void 0,sizeName:o.sizeField?o.sizeField.displayName:void 0,labelKey:s?s.id:o.yField.colId,labelName:s?s.name:void 0}));return this.crossFiltering?this.extractCrossFilterSeries(n,e):n}extractCrossFilterSeries(e,t){const{data:i}=t,s=this.getChartPalette(),n=d=>`${d}-filtered-out`,o=(d,h)=>{var u;const p=[1/0,-1/0];if(h!=null)for(const f of d){const g=(u=f[h])!==null&&u!==void 0?u:f[n(h)];g<p[0]&&(p[0]=g),g>p[1]&&(p[1]=g)}if(p[0]<=p[1])return p},a=(d,h)=>{const{sizeKey:u}=d,p=s==null?void 0:s.fills[h],f=s==null?void 0:s.strokes[h];let g=o(i,u);const m=Object.assign(Object.assign({},d.marker),{fill:p,stroke:f,domain:g});return Object.assign(Object.assign({},d),{marker:m,highlightStyle:{item:{fill:"yellow"}},listeners:Object.assign(Object.assign({},d.listeners),{nodeClick:this.crossFilterCallback})})},l=d=>{let{sizeKey:h,yKey:u,xKey:p}=d;return h!=null&&(h=n(h)),Object.assign(Object.assign({},d),{yKey:n(u),xKey:n(p),marker:Object.assign(Object.assign({},d.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:h,showInLegend:!1,listeners:Object.assign(Object.assign({},d.listeners),{nodeClick:f=>{const g=f.datum[n(p)],m=Object.assign(Object.assign({},f),{xKey:p,datum:Object.assign(Object.assign({},f.datum),{[p]:g})});this.crossFilterCallback(m)}})})},c=e.map(a);return[...c,...c.map(l)]}getSeriesDefinitions(e,t){if(e.length<2)return[];const i=this.chartType==="bubble";if(t)return i?e.map((n,o)=>o%3===0?{xField:n,yField:e[o+1],sizeField:e[o+2]}:null).filter(n=>n&&n.yField&&n.sizeField):e.map((n,o)=>o%2===0?{xField:n,yField:e[o+1]}:null).filter(n=>n&&n.yField);const s=e[0];return i?e.map((n,o)=>o%2===1?{xField:s,yField:n,sizeField:e[o+1]}:null).filter(n=>n&&n.sizeField):e.filter((n,o)=>o>0).map(n=>({xField:s,yField:n}))}}class NU extends uc{constructor(e){super(e)}getSeries(e){const t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}}class PE extends j{constructor(e){super(),this.chartController=e}getChartOption(e){return A.get(this.getChart(),e,void 0)}setChartOption(e,t,i){const s=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&s.push("cartesian");let n={};s.forEach(o=>{n=cd(n,this.createChartOptions({seriesType:o,expression:e,value:t}))}),this.updateChart(n),i||this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(i=>console.error("AG Grid - chart update failed",i))}getAxisProperty(e){var t;return A.get((t=this.getChart().axes)===null||t===void 0?void 0:t[0],e,void 0)}setAxisProperty(e,t){var i;const s=this.getChart();let n={};(i=s.axes)===null||i===void 0||i.forEach(o=>{n=cd(n,this.getUpdateAxisOptions(o,e,t))}),this.updateChart(n),this.raiseChartOptionsChangedEvent()}getLabelRotation(e){const t=this.getAxis(e);return A.get(t,"label.rotation",void 0)}setLabelRotation(e,t){const i=this.getAxis(e);if(i){const s=this.getUpdateAxisOptions(i,"label.rotation",t);this.updateChart(s),this.raiseChartOptionsChangedEvent()}}getSeriesOption(e,t){const i=this.getChart().series.find(s=>PE.isMatchingSeries(t,s));return A.get(i,e,void 0)}setSeriesOption(e,t,i){const s=this.createChartOptions({seriesType:i,expression:`series.${e}`,value:t});this.updateChart(s),this.raiseChartOptionsChangedEvent()}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getAxis(e){const t=this.getChart();if(!(!t.axes||t.axes.length<1))return e==="xAxis"?t.axes&&t.axes[0].direction==="x"?t.axes[0]:t.axes[1]:t.axes&&t.axes[1].direction==="y"?t.axes[1]:t.axes[0]}getUpdateAxisOptions(e,t,i){const s=Wn(this.getChartType());return["number","category","time","groupedCategory"].includes(e.type)?this.createChartOptions({seriesType:s,expression:`axes.${e.type}.${t}`,value:i}):{}}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();$h.updateDelta(t,e)}createChartOptions({seriesType:e,expression:t,value:i}){const s={},n={theme:{overrides:s}};return A.set(s,`${e}.${t}`,i),n}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:E.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return cU.includes(e)&&t.type===e}destroy(){super.destroy()}}class GU extends uc{constructor(e){super(e)}getAxes(e){const t=e?e.fields:[],i=new Map(t.map(a=>[a.colId,a])),{primaryYKeys:s,secondaryYKeys:n}=this.getYKeys(t,e.seriesChartTypes),o=[{type:this.getXAxisType(e),position:"bottom",gridStyle:[{stroke:void 0}]}];return s.length>0&&o.push({type:"number",keys:s,position:"left"}),n.length>0&&n.forEach((a,l)=>{const c=i.get(a);if(!(c&&c.colId===a))return;const h={type:"number",keys:[a],position:"right"},u=s.some(f=>!!i.get(f)),p=l===n.length-1;!u&&p||(h.gridStyle=[{stroke:void 0}]),o.push(h)}),o}getSeries(e){const{fields:t,category:i,seriesChartTypes:s}=e;return t.map(n=>{const o=s.find(a=>a.colId===n.colId);if(o){const a=o.chartType,c=["groupedColumn","groupedBar"].includes(a)?{grouped:!0}:{};return Object.assign({type:Wn(a),xKey:i.id,yKey:n.colId,yName:n.displayName,stacked:["stackedArea","stackedColumn"].includes(a)},c)}})}getYKeys(e,t){const i=[],s=[];return e.forEach(n=>{const o=n.colId,a=t.find(l=>l.colId===o);a&&(a.secondaryAxis?s.push(o):i.push(o))}),{primaryYKeys:i,secondaryYKeys:s}}}var Br=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ds extends Q{constructor(e){super(ds.TEMPLATE),this.params=e}init(){const e=this.gridOptionsService.get("chartThemes")||WM;if(e.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");let{chartThemeName:t}=this.params;A.includes(e,t)||(t=e[0]);const i={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:t,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},s=this.gridOptionsService.is("enableRtl");this.addCssClass(s?"ag-rtl":"ag-ltr");const n=this.createBean(new Cr(i));this.chartController=this.createManagedBean(new Ot(n)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,Ot.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,zn.EVENT_DOWNLOAD_CHART,()=>this.downloadChart()),this.update(),this.raiseChartCreatedEvent()}validateCustomThemes(){const e=this.getChartThemes(),t=this.gridOptionsService.get("customChartThemes");t&&A.getAllKeysInObjects([t]).forEach(i=>{A.includes(e,i)||console.warn("AG Grid: a custom chart theme with the name '"+i+"' has been supplied but not added to the 'chartThemes' list")})}createChart(){let e;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));const t=(o,a)=>{const l=this.params.crossFilteringContext;l.lastSelectedChartId=a?"":this.chartController.getChartId(),a&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(o,a)},i=this.chartController.getChartType(),s={chartType:i,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var o,a;return(a=(o=this.chartMenu)===null||o===void 0?void 0:o.getExtraPaddingDirections())!==null&&a!==void 0?a:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:t,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:(o,a)=>this.chartTranslationService.translate(o,a)};if(this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=ds.createChartProxy(s),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",s.chartType);return}const n=this.eChart.querySelector("canvas");n&&n.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new PE(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemes()}getGridOptionsChartThemeOverrides(){return this.gridOptionsService.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new _U(e);case"pie":case"doughnut":return new AE(e);case"area":case"stackedArea":case"normalizedArea":return new IU(e);case"line":return new LU(e);case"scatter":case"bubble":return new FU(e);case"histogram":return new NU(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new GU(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:i}=this.getBestDialogSize();this.chartDialog=new Ef({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:i,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(Ef.EVENT_DESTROYED,()=>this.destroy())}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=A.getAbsoluteWidth(e)*.75,i=A.getAbsoluteHeight(e)*.75,s=.553,n=this.chartProxy.getChart();let o=this.params.insideDialog?850:n.width,a=this.params.insideDialog?470:n.height;return(o>t||a>i)&&(o=Math.min(o,t),a=Math.round(o*s),a>i&&(a=i,o=Math.min(o,Math.round(a/s)))),{width:o,height:a}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new zn(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new mp(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}update(e){if(e!=null&&e.chartId&&!this.chartController.update(e))return;this.chartTypeChanged(e)&&this.createChart(),this.updateChart(e==null?void 0:e.chartThemeOverrides),e!=null&&e.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,s=this.chartController.getSelectedValueColState().map(l=>({colId:l.colId,displayName:l.displayName})),n=this.chartController.getChartData();if(this.handleEmptyChart(n,s))return;let a=this.chartController.getChartUpdateParams(e);t.update(a),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}chartTypeChanged(e){const[t,i]=[this.chartController.getChartType(),e==null?void 0:e.chartType];return this.chartType!==t||!!i&&this.chartType!==i}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode();let s=1;this.chartController.isActiveXYChart()&&(s=this.chartController.getChartType()==="bubble"?3:2);const n=t.length<s||e.length===0;if(this.eChart){const o=i||n;A.setDisplayed(this.eChart,!o),A.setDisplayed(this.eEmpty,o)}return i?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):n?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,t,i){this.chartProxy.downloadChart(e,t,i)}openChartToolPanel(e){const t=e&&qm[e];this.chartMenu.showMenu(t)}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())}raiseChartCreatedEvent(){const e={type:E.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:E.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);const e=this.getGui();A.clearElement(e),A.removeFromParent(e),this.raiseChartDestroyedEvent()}}ds.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>
        </div>`;Br([G("eChart")],ds.prototype,"eChart",void 0);Br([G("eChartContainer")],ds.prototype,"eChartContainer",void 0);Br([G("eMenuContainer")],ds.prototype,"eMenuContainer",void 0);Br([G("eEmpty")],ds.prototype,"eEmpty",void 0);Br([G("eTitleEditContainer")],ds.prototype,"eTitleEditContainer",void 0);Br([S("chartCrossFilterService")],ds.prototype,"crossFilterService",void 0);Br([S("chartTranslationService")],ds.prototype,"chartTranslationService",void 0);Br([S("gridApi")],ds.prototype,"gridApi",void 0);Br([S("popupService")],ds.prototype,"popupService",void 0);Br([U],ds.prototype,"init",null);const Uf="30.0.2";var ml=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};function kU(r){return r.version,r.version==null&&(r.version=qU(r)),r=Us("23.0.0",r,VU),r=Us("24.0.0",r,HU),r=Us("25.1.0",r,BU),r=Us("26.0.0",r,WU),r=Us("26.1.0",r,UU),r=Us("26.2.0",r,jU),r=Us("28.0.0",r,zU),r=Us("28.2.0",r,$U),r=Us("29.0.0",r,KU),r=Us("29.1.0",r,r_),r=Us("29.2.0",r,a_),r=Us("30.0.0",r,YU),r=XU(r),r=Us(Uf,r,e=>e),r}function VU(r){return r=lr("chartOptions.legend.item.marker.type","shape",r),r=lr("chartOptions.seriesDefaults.marker.type","shape",r),r=lr("chartOptions.legend.padding","spacing",r),r}function HU(r){var e;r=os("chartOptions.seriesDefaults.marker.minSize",r);const t=r,{chartType:i,chartPalette:s}=t,n=t.chartOptions,{xAxis:o,yAxis:a}=n,l=ml(n,["xAxis","yAxis"]),c=ml(t,["chartType","chartPalette","chartOptions"]),d=dU(i),h=d==null?void 0:d.map((u,p)=>Object.assign({type:u},p===0?o:a));return Object.assign({chartType:i,chartThemeName:(e=JU[s])!==null&&e!==void 0?e:"ag-default",chartOptions:Object.assign(Object.assign({},l),{axes:h,xAxis:o,yAxis:a})},c)}function BU(r){return r=lr("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",r),r}function WU(r){return r=aa("chartOptions.seriesDefaults.highlightStyle",r,t=>{var{dimOpacity:i}=t,s=ml(t,["dimOpacity"]);return Object.assign(Object.assign({},s),i!=null?{series:{dimOpacity:i}}:{})}),r=os("chart",r),r=os("chartOptions.seriesDefaults.tooltipClass",r),r=os("chartOptions.seriesDefaults.tooltipTracking",r),r=VR("chartOptions.axes[].label.rotation",0,r),r=VR("chartOptions.axes[].label.rotation",335,r),r}function UU(r){const e=t=>{var{item:i,series:s}=t,n=ml(t,["item","series"]);return Object.assign({item:Object.assign(Object.assign({},n),i)},s?{series:s}:{})};return r=aa("chartOptions.seriesDefaults.highlightStyle",r,e),r=aa("chartOptions.series[].highlightStyle",r,e),r}function jU(r){r=iv("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",r),r=iv("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",r),r=iv("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",r),r=os("chartOptions.seriesDefaults.fill",r),r=os("chartOptions.seriesDefaults.stroke",r),r=os("chartOptions.seriesDefaults.callout.colors",r),r=os("chartOptions.xAxis",r),r=os("chartOptions.yAxis",r);const e=r,{chartType:t}=e,i=e.chartOptions,{axes:s,series:n,seriesDefaults:o}=i,a=ml(i,["axes","series","seriesDefaults"]),l=ml(e,["chartType","chartOptions"]),c=[Wn(t)],d={};if(!c.includes("pie")){const u={top:{},bottom:{},left:{},right:{}},p=s.map(f=>{var{type:g}=f,m=ml(f,["type"]);return{[g]:Object.assign(Object.assign({},u),m)}}).reduce(HR,{});GM.filter(f=>p[f]==null).forEach(f=>{p[f]=Object.assign({},u)}),d.axes=p}const h=c.map(u=>({[u]:Object.assign(Object.assign(Object.assign({},d),{series:o}),a)})).reduce(HR,{});return r=Object.assign(Object.assign({},l),{chartType:t,chartOptions:h}),r}function zU(r){return r=os("chartOptions.*.title.padding",r),r=os("chartOptions.*.subtitle.padding",r),r=os("chartOptions.*.axes.*.title.padding",r),r=ME("chartOptions.*.axes.*.title.enabled",!1,r),r}function $U(r){return r=lr("chartOptions.pie.series.callout","calloutLine",r),r=lr("chartOptions.pie.series.label","calloutLabel",r),r=lr("chartOptions.pie.series.labelKey","sectorLabelKey",r),r=lr("chartOptions.pie.series.labelName","sectorLabelName",r),r}function KU(r){return r=Np("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",r),r=Np("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",r),r=Np("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",r),r=Np("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",r),r=Np("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",r),r=iv("chartOptions.scatter.series.paired","chartOptions.scatter.paired",r),r}function r_(r){return r=os("chartOptions.axes[].tick.count",r),r}function a_(r){return r=aa("chartOptions.*.tooltip",r,t=>{var i,s,n,o,{tracking:a}=t,l=ml(t,["tracking"]);const c=Object.assign({},l);return a===!1?((i=c.position)!==null&&i!==void 0||(c.position={type:"pointer"}),(s=c.range)!==null&&s!==void 0||(c.range="nearest")):a===!0&&((n=c.position)!==null&&n!==void 0||(c.position={type:"node"}),(o=c.range)!==null&&o!==void 0||(c.range="nearest")),c}),r}function YU(r){return r=lr("chartOptions.pie.series.labelKey","sectorLabelKey",r),r=lr("chartOptions.pie.series.labelName","sectorLabelName",r),r=r_(r),r=a_(r),r=os("chartOptions.*.series.flipXY",r),r=l_("chartOptions.common.legend.enabled",!0,r),r=ME("chartOptions.common.legend.position","right",r),r}function XU(r){return r=os("chartOptions.*.width",r),r=os("chartOptions.*.height",r),r=ME("chartOptions.*.axes.category.label.autoRotate",!0,r),r}function qU(r){var e,t;const i=r;if(r.version!=null)return r.version;const s=(h,...u)=>Object.keys(h||{}).some(p=>u.includes(p)),n=i.chartOptions,o=s(n,"seriesDefaults")?n==null?void 0:n.seriesDefaults:n==null?void 0:n[Object.keys(n)[0]],a={"27.0.0":s(i,"seriesChartTypes"),"26.2.0":!s(n,"seriesDefaults"),"26.1.0":s(o==null?void 0:o.highlightStyle,"item"),"26.0.0":s(o==null?void 0:o.highlightStyle,"series"),"25.1.0":s(o==null?void 0:o.label,"minAngle"),"25.0.0":s(i,"modelType","aggFunc","unlinkChart","suppressChartRanges")||s(o,"lineDash","lineDashOffset"),"24.0.0":s(i,"chartThemeName","chart")||s(n,"series"),"23.2.0":s(n,"navigator"),"23.0.0":s((t=(e=n==null?void 0:n.legend)===null||e===void 0?void 0:e.item)===null||t===void 0?void 0:t.marker,"shape"),"22.1.0":s(i,"chartPalette","chartType")},l="27.1.0",c=Object.entries(a).filter(([h,u])=>u),[d=l]=c[0];return d}function Us(r,e,t){if(kR(r)>kR(e.version)){const i=t(e);return i.version=r,i}return e}function ZU(r){const e=typeof r=="string"?r.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+r);return{major:e[0],minor:e[1],patch:e[2]}}function kR(r){const{major:e,minor:t,patch:i}=ZU(r);return e*1e4+t*100+i}function VR(r,e,t){return Ol(r,!0,t,(i,s)=>{i[s]===e&&delete i[s]})}function ME(r,e,t){return Ol(r,!1,t,(i,s)=>{i[s]==null&&(i[s]=e)})}function l_(r,e,t){var i;typeof r=="string"&&(r=r.split("."));const s=r[0];return r.length>1&&(t[s]=l_(r.slice(1),e,(i=t[s])!==null&&i!==void 0?i:{})),Object.keys(t).includes(s)||(t[s]=e),t}function iv(r,e,t){let i,s=!1;return t=Ol(r,!0,t,(n,o)=>{s=!0,i=n[o],delete n[o]}),s?Ol(e,!1,t,(n,o)=>{n[o]=i}):t}function Np(r,e,t){let i,s=!1;return t=Ol(r,!0,t,(n,o)=>{s=!0,i=n[o],delete n[o]}),s?Ol(e,!1,t,(n,o)=>{n[o]===void 0&&(n[o]=i)}):t}function lr(r,e,t){return Ol(r,!0,t,(i,s)=>{i[e]=i[s],delete i[s]})}function os(r,e){return Ol(r,!0,e,(t,i)=>delete t[i])}function Ol(r,e,t,i){const s=r instanceof Array?r:r.split("."),n=s.slice(0,s.length-1),o=s[s.length-1];return aa(n,t,a=>{const l=Object.keys(a).includes(o);if(e&&!l)return a;const c=Object.assign({},a);return i(c,o),c})}function aa(r,e,t){const i=r instanceof Array?r:r.split(".");if(e=Object.assign({},e),i.length===0)return t(e);if(i[0].startsWith("{")){const s=i[0].substring(1,i[0].lastIndexOf("}")).split(",");for(const n of s)e[n]!=null&&(e[n]=aa(i.slice(1),e[n],t))}else if(i[0].endsWith("[]")){const s=i[0].substring(0,r[0].indexOf("["));e[s]instanceof Array&&(e[s]=e[s].map(n=>aa(i.slice(1),n,t)))}else if(i[0]==="*")for(const s in e)e[s]=aa(i.slice(1),e[s],t);else e[i[0]]!=null&&(e[i[0]]=aa(i.slice(1),e[i[0]],t));return e}const HR=(r,e)=>Object.assign(Object.assign({},r),e),JU={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"};var z0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Al=class extends j{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""}}updateChart(e){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const t=[...this.activeChartComps].find(i=>i.getChartId()===e.chartId);if(!t){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${e.chartId}.`);return}t.update(e)}getChartModels(){const e=[],t=i=>Object.assign(Object.assign({},i),{version:Uf});return this.activeChartComps.forEach(i=>e.push(t(i.getChartModel()))),e}getChartRef(e){let t;return this.activeCharts.forEach(i=>{i.chartId===e&&(t=i)}),t}getChartComp(e){let t;return this.activeChartComps.forEach(i=>{i.getChartId()===e&&(t=i)}),t}getChartImageDataURL(e){let t;return this.activeChartComps.forEach(i=>{i.getChartId()===e.chartId&&(t=i.getChartImageDataURL(e.fileFormat))}),t}downloadChart(e){const t=Array.from(this.activeChartComps).find(i=>i.getChartId()===e.chartId);t==null||t.downloadChart(e.dimensions,e.fileName,e.fileFormat)}openChartToolPanel(e){const t=Array.from(this.activeChartComps).find(i=>i.getChartId()===e.chartId);t==null||t.openChartToolPanel(e.panel)}closeChartToolPanel(e){const t=Array.from(this.activeChartComps).find(i=>i.getChartId()===e);t==null||t.closeChartToolPanel()}createChartFromCurrentRange(e="groupedColumn"){const t=this.getSelectedRange();return this.createChart(t,e)}restoreChart(e,t){if(!e){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}e.version!==Uf&&(e=kU(e));const i={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:t,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},s=o=>this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(o):void 0;if(e.modelType==="pivot"){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");const a={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(c=>c.getColId())},l=s(a);if(!l){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(l,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,e.chartOptions)}const n=s(i.cellRange);if(!n){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(n,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,e.chartOptions,e.chartPalette,i.seriesChartTypes)}createRangeChart(e){var t;const i=(t=this.rangeService)===null||t===void 0?void 0:t.createCellRangeFromCellRangeParams(e.cellRange);if(!i){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(i,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes)}createPivotChart(e){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");const t={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(s=>s.getColId())},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(t):void 0;if(!i){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(i,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart)}createCrossFilterChart(e){var t;const i=(t=this.rangeService)===null||t===void 0?void 0:t.createCellRangeFromCellRangeParams(e.cellRange);if(!i){console.warn("AG Grid - unable to create chart as no range is selected");return}const s=!0,o=typeof e.suppressChartRanges<"u"&&e.suppressChartRanges!==null?e.suppressChartRanges:!0;return this.createChart(i,e.chartType,e.chartThemeName,!1,o,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,s)}createChart(e,t,i,s=!1,n=!1,o,a,l,c=!1,d=!1,h,u,p){const f=this.gridOptionsService.getCallback("createChartContainer"),g={chartId:this.generateId(),pivotChart:s,cellRange:e,chartType:t,chartThemeName:i,insideDialog:!(o||f),suppressChartRanges:n,aggFunc:a,chartThemeOverrides:l,unlinkChart:c,crossFiltering:d,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:h,chartPaletteToRestore:u,seriesChartTypes:p,crossFilteringResetCallback:()=>this.activeChartComps.forEach(C=>C.crossFilteringReset())},m=new ds(g);this.context.createBean(m);const v=this.createChartRef(m);if(o){o.appendChild(m.getGui());const C=this.environment.getTheme();C.el&&!C.el.contains(o)&&o.classList.add(C.theme)}else f?f(v):m.addEventListener(ds.EVENT_DESTROYED,()=>{this.activeChartComps.delete(m),this.activeCharts.delete(v)});return v}createChartRef(e){const t={destroyChart:()=>{this.activeCharts.has(t)&&(this.context.destroyBean(e),this.activeChartComps.delete(e),this.activeCharts.delete(t))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(t),this.activeChartComps.add(e),t}getSelectedRange(){const e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}destroyAllActiveCharts(){this.activeCharts.forEach(e=>e.destroyChart())}};Al.CHARTS_VERSION=aU;z0([Ne("rangeService")],Al.prototype,"rangeService",void 0);z0([S("columnModel")],Al.prototype,"columnModel",void 0);z0([ft],Al.prototype,"destroyAllActiveCharts",null);Al=z0([ee("chartService")],Al);var QU=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},BS;let $v=BS=class extends j{translate(e,t){const i=this.localeService.getLocaleTextFunc(),s=BS.DEFAULT_TRANSLATIONS[e]||t;return i(e,s)}};$v.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"};$v=BS=QU([ee("chartTranslationService")],$v);var $0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},sv;let wu=sv=class extends j{filter(e,t=!1){const i=this.gridApi.getFilterModel();if(t){this.resetFilters(i);return}let s=sv.extractFilterColId(e);this.isValidColumnFilter(s)?this.updateFilters(i,e,s):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+s+"'")}resetFilters(e){Object.keys(e).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(e,t,i){let s=sv.extractFilterColId(t),n=t.datum[s];if(n===void 0)return;let o=n.toString();if(t.event.metaKey||t.event.ctrlKey){const a=this.getCurrentGridValuesForCategory(i),l=A.includes(a,o);let c;l?c=a.filter(d=>d!==o):(c=a,c.push(o)),e[i]=this.getUpdatedFilterModel(i,c)}else{const a=[o];e={[i]:this.getUpdatedFilterModel(i,a)}}this.gridApi.setFilterModel(e)}getUpdatedFilterModel(e,t){return this.getColumnFilterType(e)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:t}]}:{filterType:"set",values:t}}getCurrentGridValuesForCategory(e){let t=[];const i=this.getColumnById(e);return this.gridApi.forEachNodeAfterFilter(s=>{if(i&&!s.group){const n=this.valueService.getValue(i,s)+"";t.includes(n)||t.push(n)}}),t}static extractFilterColId(e){return e.xKey||e.calloutLabelKey}isValidColumnFilter(e){e.indexOf("-filtered-out")&&(e=e.replace("-filtered-out",""));let t=this.getColumnFilterType(e);return typeof t=="boolean"?t:A.includes(["agSetColumnFilter","agMultiColumnFilter"],t)}getColumnFilterType(e){let t=this.getColumnById(e);if(t)return t.getColDef().filter}getColumnById(e){return this.columnModel.getGridColumn(e)}};$0([S("gridApi")],wu.prototype,"gridApi",void 0);$0([S("columnModel")],wu.prototype,"columnModel",void 0);$0([S("valueService")],wu.prototype,"valueService",void 0);wu=sv=$0([ee("chartCrossFilterService")],wu);var Wr=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let $n=class extends j{constructor(){super(...arguments),this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}init(){this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(()=>{const e=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new OC({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),getHorizontalPosition:()=>e.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:t=>e.getScrollFeature().setHorizontalScrollPosition(t),shouldSkipVerticalScroll:()=>!this.gridOptionsService.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!e.getScrollFeature().isHorizontalScrollShowing()})})}onColumnsChanged(){this.refreshLastRangeStart();const e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(i=>{const s=i.columns;i.columns=i.columns.filter(o=>o.isVisible()&&e.indexOf(o)!==-1),!A.areEqual(s,i.columns)&&this.dispatchChangedEvent(!1,!0,i.id)});const t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(i=>i.columns.length>0),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const e=A.last(this.cellRanges);e&&this.refreshRangeStart(e)}isContiguousRange(e){const t=e.columns;if(!t.length)return!1;const i=this.columnModel.getAllDisplayedColumns(),s=t.map(n=>i.indexOf(n)).sort((n,o)=>n-o);return A.last(s)-s[0]+1===t.length}getRangeStartRow(e){return e.startRow&&e.endRow?this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;const t=this.pinnedRowModel.getPinnedBottomRowCount();return t>0?{rowIndex:t-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(e,t=!1){if(!this.gridOptionsService.isEnableRangeSelection())return;const i=this.calculateColumnsBetween(e.column,e.column);if(!i)return;(this.gridOptionsService.is("suppressMultiRangeSelection")||!t||A.missing(this.cellRanges))&&this.removeAllCellRanges(!0);const n={rowIndex:e.rowIndex,rowPinned:e.rowPinned},o={startRow:n,endRow:n,columns:i,startColumn:e.column};this.cellRanges.push(o),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=A.last(this.cellRanges);this.updateRangeEnd(t,e)}updateRangeEnd(e,t,i=!1){const s=t.column,n=this.calculateColumnsBetween(e.startColumn,s);!n||this.isLastCellOfRange(e,t)||(e.columns=n,e.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i||this.dispatchChangedEvent(!0,!0,e.id))}refreshRangeStart(e){const{startColumn:t,columns:i}=e,s=(c,d)=>{const h=e.columns.filter(u=>u!==c);c?(e.startColumn=c,e.columns=d?[c,...h]:[...h,c]):e.columns=h},{left:n,right:o}=this.getRangeEdgeColumns(e);if(t===i[0]&&t!==n){s(n,!0);return}if(t===A.last(i)&&t===o){s(o,!1);return}}getRangeEdgeColumns(e){const t=this.columnModel.getAllDisplayedColumns(),i=e.columns.map(s=>t.indexOf(s)).filter(s=>s>-1).sort((s,n)=>s-n);return{left:t[i[0]],right:t[A.last(i)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=e.key,i=e.ctrlKey||e.metaKey,s=A.last(this.cellRanges),n=this.newestRangeStartCell,o=s.columns[0],a=A.last(s.columns),l=s.endRow.rowIndex,c=s.endRow.rowPinned,h={column:n.column===o?a:o,rowIndex:l,rowPinned:c},u=this.cellNavigationService.getNextCellToFocus(t,h,i);if(u)return this.setCellRange({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:u.rowIndex,rowEndPinned:u.rowPinned,columnStart:n.column,columnEnd:u.column}),u}setCellRange(e){this.gridOptionsService.isEnableRangeSelection()&&(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){A.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(t=>{t.columns&&t.startRow&&this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),this.cellRanges.push(t)}),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(e){this.newestRangeStartCell=e}clearCellRangeCellValues(e){let{cellRanges:t}=e;const{cellEventSource:i="rangeService",dispatchWrapperEvents:s,wrapperEventSource:n="deleteKey"}=e;if(s){const o={type:E.EVENT_RANGE_DELETE_START,source:n};this.eventService.dispatchEvent(o)}if(t||(t=this.cellRanges),t.forEach(o=>{this.forEachRowInRange(o,a=>{const l=this.rowPositionUtils.getRowNode(a);if(l)for(let c=0;c<o.columns.length;c++){const d=this.columnModel.getGridColumn(o.columns[c]);if(!d||!d.isCellEditable(l))return;l.setDataValue(d,null,i)}})}),s){const o={type:E.EVENT_RANGE_DELETE_END,source:n};this.eventService.dispatchEvent(o)}}createCellRangeFromCellRangeParams(e){let t,i=!1;if(e.columns)t=e.columns.map(o=>this.columnModel.getColumnWithValidation(o)).filter(o=>o);else{const o=this.columnModel.getColumnWithValidation(e.columnStart),a=this.columnModel.getColumnWithValidation(e.columnEnd);if(!o||!a)return;t=this.calculateColumnsBetween(o,a),t&&t.length&&(i=t[0]!==o)}if(!t)return;const s=e.rowStartIndex!=null?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,n=e.rowEndIndex!=null?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0;return{startRow:s,endRow:n,columns:t,startColumn:i?A.last(t):t[0]}}addCellRange(e){if(!this.gridOptionsService.isEnableRangeSelection())return;const t=this.createCellRangeFromCellRangeParams(e);t&&(t.startRow&&this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.startColumn}),this.cellRanges.push(t),this.dispatchChangedEvent(!1,!0,t.id))}getCellRanges(){return this.cellRanges}isEmpty(){return this.cellRanges.length===0}isMoreThanOneCell(){const e=this.cellRanges.length;if(e===0)return!1;if(e>1)return!0;const t=this.cellRanges[0],i=this.getRangeStartRow(t),s=this.getRangeEndRow(t);return i.rowPinned!==s.rowPinned||i.rowIndex!==s.rowIndex||t.columns.length!==1}areAllRangesAbleToMerge(){const e=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(s=>{this.forEachRowInRange(s,n=>{const o=`${n.rowPinned||"normal"}_${n.rowIndex}`,a=e.get(o),l=s.columns.map(c=>c.getId());if(a){const c=l.filter(d=>a.indexOf(d)===-1);a.push(...c)}else e.set(o,l)})});let i;for(const s of e.values()){const n=s.sort().join();if(i===void 0){i=n;continue}if(i!==n)return!1}return!0}forEachRowInRange(e,t){const i=this.getRangeStartRow(e),s=this.getRangeEndRow(e);let n=i;for(;n&&(t(n),!this.rowPositionUtils.sameRow(n,s));)n=this.cellNavigationService.getRowBelow(n)}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){const i=t.columns!==null&&A.includes(t.columns,e.column),s=this.isRowInRange(e.rowIndex,e.rowPinned,t);return i&&s}isLastCellOfRange(e,t){const{startRow:i,endRow:s}=e,n=this.rowPositionUtils.before(i,s)?s:i,o=t.rowIndex===n.rowIndex&&t.rowPinned===n.rowPinned,a=e.columns[0],l=A.last(e.columns),c=e.startColumn===a?l:a;return t.column===c&&o}isBottomRightCell(e,t){const i=this.columnModel.getAllDisplayedColumns(),s=e.columns.map(d=>i.indexOf(d)).sort((d,h)=>d-h),{startRow:n,endRow:o}=e,a=this.rowPositionUtils.before(n,o)?o:n,l=i.indexOf(t.column)===A.last(s),c=t.rowIndex===a.rowIndex&&A.makeNull(t.rowPinned)===A.makeNull(a.rowPinned);return l&&c}getCellRangeCount(e){return this.isEmpty()?0:this.cellRanges.filter(t=>this.isCellInSpecificRange(e,t)).length}isRowInRange(e,t,i){const s=this.getRangeStartRow(i),n=this.getRangeEndRow(i),o={rowIndex:e,rowPinned:t||null},a=o.rowIndex===s.rowIndex&&o.rowPinned==s.rowPinned,l=o.rowIndex===n.rowIndex&&o.rowPinned==n.rowPinned;if(a||l)return!0;const c=!this.rowPositionUtils.before(o,s),d=this.rowPositionUtils.before(o,n);return c&&d}getDraggingRange(){return this.draggingRange}onDragStart(e){if(!this.gridOptionsService.isEnableRangeSelection())return;const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=t||i,a=!this.gridOptionsService.is("suppressMultiRangeSelection")?n:!1,l=s&&A.existsAndNotEmpty(this.cellRanges);!a&&(!l||A.exists(A.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);const c=this.dragService.getStartTarget();if(c&&this.updateValuesOnMove(c),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=a&&this.getCellRangeCount(this.lastCellHovered)>1,l||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=A.last(this.cellRanges);else{const d={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:d,endRow:d,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(e){if(e&&this.dragging||this.gridOptionsService.is("suppressMultiRangeSelection")||this.isEmpty())return;const t=A.last(this.cellRanges),i=this.getRangeStartRow(t),s=this.getRangeEndRow(t),n=[];this.cellRanges.slice(0,-1).forEach(o=>{const a=this.getRangeStartRow(o),l=this.getRangeEndRow(o),c=o.columns,d=c.filter(u=>t.columns.indexOf(u)===-1);if(d.length===c.length){n.push(o);return}if(this.rowPositionUtils.before(s,a)||this.rowPositionUtils.before(l,i)){n.push(o);return}const h=n.length;if(this.rowPositionUtils.before(a,i)){const u={columns:[...c],startColumn:t.startColumn,startRow:Object.assign({},a),endRow:this.cellNavigationService.getRowAbove(i)};n.push(u)}if(d.length>0){const u={columns:d,startColumn:A.includes(d,t.startColumn)?t.startColumn:d[0],startRow:this.rowPositionUtils.rowMax([Object.assign({},i),Object.assign({},a)]),endRow:this.rowPositionUtils.rowMin([Object.assign({},s),Object.assign({},l)])};n.push(u)}this.rowPositionUtils.before(s,l)&&n.push({columns:[...c],startColumn:t.startColumn,startRow:this.cellNavigationService.getRowBelow(s),endRow:Object.assign({},l)}),n.length-h===1&&(n[n.length-1].id=o.id)}),this.cellRanges=n,e&&this.dispatchChangedEvent(!1,!0)}updateValuesOnMove(e){const t=A.getCtrlForEventTarget(this.gridOptionsService,e,Hn.DOM_DATA_KEY_CELL_CTRL),i=t==null?void 0:t.getCellPosition();this.cellHasChanged=!1,!(!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)}onDragging(e){if(!this.dragging||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;const t=this.lastCellHovered,i=o=>t&&t.rowPinned===o&&this.newestRangeStartCell.rowPinned===o,s=i("top")||i("bottom");if(this.autoScrollService.check(e,s),!this.cellHasChanged)return;const n=this.calculateColumnsBetween(this.newestRangeStartCell.column,t.column);n&&(this.draggingRange.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},this.draggingRange.columns=n,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}dispatchChangedEvent(e,t,i){const s={type:E.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:t,id:i};this.eventService.dispatchEvent(s)}calculateColumnsBetween(e,t){const i=this.columnModel.getAllDisplayedColumns(),s=e===t,n=i.indexOf(e);if(n<0){console.warn(`AG Grid: column ${e.getId()} is not visible`);return}const o=s?n:i.indexOf(t);if(o<0){console.warn(`AG Grid: column ${t.getId()} is not visible`);return}if(s)return[e];const a=Math.min(n,o),l=a===n?o:n,c=[];for(let d=a;d<=l;d++)c.push(i[d]);return c}};Wr([S("rowModel")],$n.prototype,"rowModel",void 0);Wr([S("dragService")],$n.prototype,"dragService",void 0);Wr([S("columnModel")],$n.prototype,"columnModel",void 0);Wr([S("cellNavigationService")],$n.prototype,"cellNavigationService",void 0);Wr([S("pinnedRowModel")],$n.prototype,"pinnedRowModel",void 0);Wr([S("rowPositionUtils")],$n.prototype,"rowPositionUtils",void 0);Wr([S("cellPositionUtils")],$n.prototype,"cellPositionUtils",void 0);Wr([S("ctrlsService")],$n.prototype,"ctrlsService",void 0);Wr([U],$n.prototype,"init",null);$n=Wr([ee("rangeService")],$n);var Wo=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Sn extends Q{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}init(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:e=>{this.dragging=!0,this.rangeService.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(e){this.cellCtrl=e}getCellRange(){return this.cellRange}setCellRange(e){this.cellRange=e}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(e){this.rangeStartRow=e}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(e){this.rangeEndRow=e}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(e){e.stopPropagation()}onDragStart(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return`ag-dragging-${this.type===Cl.FILL?"fill":"range"}-handle`}updateValuesOnMove(e){const t=this.mouseEventService.getCellPositionForEvent(e);!t||this.lastCellHovered&&this.cellPositionUtils.equals(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(e){const t=this.getCellCtrl(),i=this.getGui(),s=A.last(this.rangeService.getCellRanges()),n=s.startRow,o=s.endRow;if(n&&o&&(this.rowPositionUtils.before(o,n)?(this.setRangeStartRow(o),this.setRangeEndRow(n)):(this.setRangeStartRow(n),this.setRangeEndRow(o))),t!==e||!A.isVisible(i)){this.setCellCtrl(e);const a=e.getComp().getParentOfValue();a&&a.appendChild(i)}this.setCellRange(s)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){A.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)}}Wo([S("rowRenderer")],Sn.prototype,"rowRenderer",void 0);Wo([S("dragService")],Sn.prototype,"dragService",void 0);Wo([S("rangeService")],Sn.prototype,"rangeService",void 0);Wo([S("mouseEventService")],Sn.prototype,"mouseEventService",void 0);Wo([S("columnModel")],Sn.prototype,"columnModel",void 0);Wo([S("cellNavigationService")],Sn.prototype,"cellNavigationService",void 0);Wo([S("navigationService")],Sn.prototype,"navigationService",void 0);Wo([S("rowPositionUtils")],Sn.prototype,"rowPositionUtils",void 0);Wo([S("cellPositionUtils")],Sn.prototype,"cellPositionUtils",void 0);Wo([S("ctrlsService")],Sn.prototype,"ctrlsService",void 0);Wo([U],Sn.prototype,"init",null);function ej(r){const e=r.length;let t=0;if(e<=1)return r;for(let h=0;h<r.length;h++){const u=r[h],p=u.toString().split("e-");if(p.length>1){t=Math.max(t,parseInt(p[1],10));continue}Math.floor(u)!==u&&(t=Math.max(t,u.toString().split(".")[1].length))}let i=0,s=0,n=0,o=0,a=0;for(let h=0;h<e;h++)a=r[h],i+=h,s+=a,o+=h*h,n+=h*a;const l=(e*n-i*s)/(e*o-i*i),c=s/e-l*i/e,d=[];for(let h=0;h<=e;h++)d.push(parseFloat((h*l+c).toFixed(t)));return d}var _E=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class pc extends Sn{constructor(){super(pc.TEMPLATE),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=Cl.FILL}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));const{x:t,y:i}=this.initialXY,{x:s,y:n}=this.mouseEventService.getNormalisedPosition(e),o=Math.abs(t-s),a=Math.abs(i-n),l=this.getFillHandleDirection();let c;l==="xy"?c=o>a?"x":"y":c=l,c!==this.dragAxis&&(this.dragAxis=c,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const i=this.getCellCtrl();if(!i)return;this.initialPosition=i.getCellPosition()}const t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const t=this.dragAxis==="x",i=this.getCellRange(),s=i.columns.length,n=this.getRangeStartRow(),o=this.getRangeEndRow();let a;if(!this.isUp&&!this.isLeft)a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,columnStart:i.columns[0],rowEndIndex:t?o.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?o.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:i.columns[s-1]});else{const l=t?n:this.lastCellMarked;a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:l.rowIndex,rowStartPinned:l.rowPinned,columnStart:t?this.lastCellMarked.column:i.columns[0],rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnEnd:i.columns[s-1]})}a&&(this.raiseFillStartEvent(),this.handleValueChanged(i,a,e),this.rangeService.setCellRanges([a]),this.raiseFillEndEvent(i,a))}getFillHandleDirection(){const e=this.gridOptionsService.get("fillHandleDirection");return e?e!=="x"&&e!=="y"&&e!=="xy"?(A.doOnce(()=>console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"warn invalid fill direction"),"xy"):e:"xy"}raiseFillStartEvent(){const e={type:E.EVENT_FILL_START};this.eventService.dispatchEvent(e)}raiseFillEndEvent(e,t){const i={type:E.EVENT_FILL_END,initialRange:e,finalRange:t};this.eventService.dispatchEvent(i)}handleValueChanged(e,t,i){const s=this.rangeService.getRangeEndRow(e),n=this.rangeService.getRangeStartRow(e),o=this.rangeService.getRangeEndRow(t),a=this.rangeService.getRangeStartRow(t),l=this.dragAxis==="y";if(this.isReduce&&!this.gridOptionsService.is("suppressClearOnFillReduction")){const m=l?e.columns:e.columns.filter(C=>t.columns.indexOf(C)<0),v=l?this.cellNavigationService.getRowBelow(o):a;v&&this.clearCellsInRange(v,s,m);return}let c=!0;const d=[],h=[];let u=0;const p=()=>{d.length=0,h.length=0,u=0},f=(m,v)=>{let C=this.isUp?s:n,y=!1;for(l&&(c=!0,p());!y&&C;){const R=this.rowPositionUtils.getRowNode(C);if(!R)break;l&&m?g(d,m,R,()=>!this.rowPositionUtils.sameRow(C,this.isUp?n:s)):v&&(c=!0,p(),v.forEach(b=>g(d,b,R,()=>b!==(this.isLeft?e.columns[0]:A.last(e.columns))))),y=this.rowPositionUtils.sameRow(C,this.isUp?a:o),C=this.isUp?this.cellNavigationService.getRowAbove(C):this.cellNavigationService.getRowBelow(C)}},g=(m,v,C,y)=>{var R,b;let w,x=!1;if(c)w=this.valueService.getValue(v,C),h.push(w),c=y();else{const{value:O,fromUserFunction:M,sourceCol:N,sourceRowNode:V}=this.processValues(i,m,h,v,C,u++);if(w=O,v.isCellEditable(C)){const I=this.valueService.getValue(v,C);M||(!((R=N==null?void 0:N.getColDef())===null||R===void 0)&&R.useValueFormatterForExport&&(w=(b=this.valueFormatterService.formatValue(N,V,w))!==null&&b!==void 0?b:w),v.getColDef().useValueParserForImport&&(w=this.valueParserService.parseValue(v,C,N?w:A.toStringOrNull(w),I))),!M||I!==w?C.setDataValue(v,w,"rangeService"):x=!0}}x||m.push({value:w,column:v,rowNode:C})};if(l)e.columns.forEach(m=>{f(m)});else{const m=this.isLeft?[...t.columns].reverse():t.columns;f(void 0,m)}}clearCellsInRange(e,t,i){const s={startRow:e,endRow:t,columns:i,startColumn:i[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[s]})}processValues(e,t,i,s,n,o){const a=this.gridOptionsService.getCallback("fillOperation"),l=this.dragAxis==="y";let c;if(l?c=this.isUp?"up":"down":c=this.isLeft?"left":"right",a){const h={event:e,values:t.map(({value:p})=>p),initialValues:i,currentIndex:o,currentCellValue:this.valueService.getValue(s,n),direction:c,column:s,rowNode:n},u=a(h);if(u!==!1)return{value:u,fromUserFunction:!0}}const d=!t.some(({value:h})=>{const u=parseFloat(h);return isNaN(u)||u.toString()!==h.toString()});if(e.altKey||!d){if(d&&i.length===1){const f=this.isUp||this.isLeft?-1:1;return{value:parseFloat(A.last(t).value)+1*f,fromUserFunction:!1}}const{value:h,column:u,rowNode:p}=t[o%t.length];return{value:h,fromUserFunction:!1,sourceCol:u,sourceRowNode:p}}return{value:A.last(ej(t.map(({value:h})=>Number(h)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach(e=>{if(!e.isAlive())return;const t=e.getComp();t.addOrRemoveCssClass("ag-selection-fill-top",!1),t.addOrRemoveCssClass("ag-selection-fill-right",!1),t.addOrRemoveCssClass("ag-selection-fill-bottom",!1),t.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(t,e))return;const i=this.rowPositionUtils.before(t,e),s=this.getRangeStartRow(),n=this.getRangeEndRow();i&&(t.rowPinned==s.rowPinned&&t.rowIndex>=s.rowIndex||s.rowPinned!=n.rowPinned&&t.rowPinned==n.rowPinned&&t.rowIndex<=n.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,i),this.isReduce=!1)}else{const i=e.column,s=t.column;if(i===s)return;const n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(i),a=n.indexOf(s);a<=o&&a>=n.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,a<o),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,i){const{navigationService:s,rangeService:n}=this;let o=e;do{const a=this.getCellRange(),l=a.columns.length;for(let c=0;c<l;c++){const d=a.columns[c],h={rowIndex:o.rowIndex,rowPinned:o.rowPinned},u=Object.assign(Object.assign({},h),{column:d}),p=n.isCellInSpecificRange(u,a),f=this.rowPositionUtils.sameRow(o,e);if(i&&(this.isUp=!0),!f){const g=s.getCellByPosition(u);if(g){this.markedCells.push(g);const m=g.getComp();p||(m.addOrRemoveCssClass("ag-selection-fill-left",c===0),m.addOrRemoveCssClass("ag-selection-fill-right",c===l-1)),m.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(o,t))}}}if(this.rowPositionUtils.sameRow(o,t))break}while(o=i?this.cellNavigationService.getRowAbove(o):this.cellNavigationService.getRowBelow(o))}reduceVertical(e,t){let i=e;do{const s=this.getCellRange(),n=s.columns.length,o=this.rowPositionUtils.sameRow(i,t);for(let a=0;a<n;a++){const l={rowIndex:i.rowIndex,rowPinned:i.rowPinned},c=Object.assign(Object.assign({},l),{column:s.columns[a]}),d=this.navigationService.getCellByPosition(c);d&&(this.markedCells.push(d),d.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,t)))}if(o)break}while(i=this.cellNavigationService.getRowAbove(i))}extendHorizontal(e,t,i){const s=this.columnModel.getAllDisplayedColumns(),n=s.indexOf(i?t.column:e.column),o=s.indexOf(i?this.getCellRange().columns[0]:t.column),a=i?0:1,l=s.slice(n+a,o+a),c=this.getRangeStartRow(),d=this.getRangeEndRow();l.forEach(h=>{let u=c,p=!1;do{p=this.rowPositionUtils.sameRow(u,d);const f=this.navigationService.getCellByPosition({rowIndex:u.rowIndex,rowPinned:u.rowPinned,column:h});if(f){this.markedCells.push(f);const g=f.getComp();g.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(u,c)),g.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(u,d)),i?(this.isLeft=!0,g.addOrRemoveCssClass("ag-selection-fill-left",h===l[0])):g.addOrRemoveCssClass("ag-selection-fill-right",h===A.last(l))}u=this.cellNavigationService.getRowBelow(u)}while(!p)})}reduceHorizontal(e,t){const i=this.columnModel.getAllDisplayedColumns(),s=i.indexOf(t.column),n=i.indexOf(e.column),o=i.slice(s,n),a=this.getRangeStartRow(),l=this.getRangeEndRow();o.forEach(c=>{let d=a,h=!1;do{h=this.rowPositionUtils.sameRow(d,l);const u=this.navigationService.getCellByPosition({rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:c});u&&(this.markedCells.push(u),u.getComp().addOrRemoveCssClass("ag-selection-fill-right",c===o[0])),d=this.cellNavigationService.getRowBelow(d)}while(!h)})}refresh(e){const t=this.rangeService.getCellRanges()[0];if(!t.startRow||!t.endRow){this.destroy();return}super.refresh(e)}}pc.TEMPLATE='<div class="ag-fill-handle"></div>';_E([S("valueService")],pc.prototype,"valueService",void 0);_E([S("valueParserService")],pc.prototype,"valueParserService",void 0);_E([S("valueFormatterService")],pc.prototype,"valueFormatterService",void 0);class gm extends Sn{constructor(){super(gm.TEMPLATE),this.type=Cl.RANGE,this.rangeFixed=!1}onDrag(e){const t=this.getLastCellHovered();if(!t)return;const i=this.rangeService.getCellRanges(),s=A.last(i);this.rangeFixed||(this.fixRangeStartEnd(s),this.rangeFixed=!0),this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column},i.length===2&&i[0].type===Xs.DIMENSION&&s.type===Xs.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(s))&&this.rangeService.updateRangeEnd(i[0],Object.assign(Object.assign({},this.endPosition),{column:i[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(e){const t=A.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(t),this.rangeFixed=!1}fixRangeStartEnd(e){const t=this.rangeService.getRangeStartRow(e),i=this.rangeService.getRangeEndRow(e),s=e.columns[0];e.startRow=t,e.endRow=i,e.startColumn=s}}gm.TEMPLATE='<div class="ag-range-handle"></div>';var tj=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let WS=class extends j{createSelectionHandle(e){return this.createBean(e===Cl.RANGE?new gm:new pc)}};WS=tj([ee("selectionHandleFactory")],WS);const ij="30.0.2",c_={version:ij,moduleName:te.RangeSelectionModule,beans:[$n,WS],agStackComponents:[{componentName:"AgFillHandle",componentClass:pc},{componentName:"AgRangeHandle",componentClass:gm}],dependantModules:[Wi]};var za=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Vt extends Q{constructor(e){super(Vt.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){const e=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(t){let i=e.clientX-t.left,s=e.clientY-t.top;i=Math.max(i,0),i=Math.min(i,t.width),s=Math.max(s,0),s=Math.min(s,t.height),this.setSpectrumValue(i/t.width,1-s/t.height)}}moveHueSlider(e){const t=this.spectrumHueRect;if(t){const i=this.spectrumHueSlider,s=i.getBoundingClientRect();let n=e.clientX-t.left;n=Math.max(n,0),n=Math.min(n,t.width),this.H=1-n/t.width,i.style.left=n+s.width/2+"px",this.update()}}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(t){const i=this.spectrumAlphaSlider,s=i.getBoundingClientRect();let n=e.clientX-t.left;n=Math.max(n,0),n=Math.min(n,t.width),this.A=n/t.width,i.style.left=n+s.width/2+"px",this.update()}}update(){const e=Re.fromHSB(this.H*360,this.S,this.B,this.A),t=Re.fromHSB(this.H*360,1,1),i=e.toRgbaString(),s=this.picker;Re.fromString(s.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),s.setValue(i),this.spectrumColor.style.backgroundColor=t.toRgbaString(),this.spectrumDragger.style.backgroundColor=i}setSpectrumValue(e,t){const i=this.spectrumValRect||this.refreshSpectrumRect();if(i){const s=this.spectrumDragger,n=s.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,s.style.left=e*i.width-n.width/2+"px",s.style.top=(1-t)*i.height-n.height/2+"px",this.update()}}initRecentColors(){const t=Vt.recentColors.map((i,s)=>`<div class="ag-recent-color" id=${s} style="background-color: ${i}; width: 15px; height: 15px;" recent-color="${i}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(e){const t=Re.fromString(e),[i,s,n]=t.toHSB();this.H=(isNaN(i)?0:i)/360,this.A=t.a;const o=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-o.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*a.width}px`,this.setSpectrumValue(s,n)}onRecentColorClick(e){const t=e.target;if(!A.exists(t.id))return;const i=parseInt(t.id,10);this.setValue(Vt.recentColors[i]),this.destroy()}addRecentColor(){const t=Re.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString();let i=Vt.recentColors;!this.colorChanged||i[0]===t||(i=i.filter(s=>s!=t),i=[t].concat(i),i.length>Vt.maxRecentColors&&(i=i.slice(0,Vt.maxRecentColors)),Vt.recentColors=i)}destroy(){this.addRecentColor(),super.destroy()}}Vt.maxRecentColors=8;Vt.recentColors=[];Vt.TEMPLATE=`<div class="ag-color-panel">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`;za([G("spectrumColor")],Vt.prototype,"spectrumColor",void 0);za([G("spectrumVal")],Vt.prototype,"spectrumVal",void 0);za([G("spectrumDragger")],Vt.prototype,"spectrumDragger",void 0);za([G("spectrumHue")],Vt.prototype,"spectrumHue",void 0);za([G("spectrumHueSlider")],Vt.prototype,"spectrumHueSlider",void 0);za([G("spectrumAlpha")],Vt.prototype,"spectrumAlpha",void 0);za([G("spectrumAlphaSlider")],Vt.prototype,"spectrumAlphaSlider",void 0);za([G("recentColors")],Vt.prototype,"recentColors",void 0);za([U],Vt.prototype,"postConstruct",null);class sj extends Pu{constructor(e){super(e,"ag-color-picker","colorPicker"),e&&e.color&&(this.value=e.color)}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}showPicker(){const e=this.getGui().getBoundingClientRect(),t=this.createBean(new Ef({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}));this.isPickerDisplayed=!0,t.addCssClass("ag-color-dialog"),A.setAriaExpanded(this.eWrapper,!0);const i=this.createBean(new Vt({picker:this}));return i.addDestroyFunc(()=>{t.isAlive()&&this.destroyBean(t)}),t.setParentComponent(this),t.setBodyComponent(i),i.setValue(this.getValue()),t.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.isDestroyingPicker=!0,i.isAlive()&&this.destroyBean(i)),this.isAlive()&&(A.setAriaExpanded(this.eWrapper,!1),this.getFocusableElement().focus()),this.isPickerDisplayed=!1}),t}setValue(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,super.setValue(e))}getValue(){return this.value}}const d_=28,h_=6;function US(r){return r&&r.match(/\d+\.\d+\.\d+/)}function nj({gridMajorVersion:r,chartsMajorVersion:e}){const t=parseInt(r,10),i=parseInt(e,10),s=t-d_,n=i-h_,o=s>=0;return s===n&&o}function oj(r){if(!r||!US(r))return;const[e,t]=r.split(".")||[],i=`${e}.${t}.x`,n=parseInt(e,10)-d_+h_;if(n<0)return;const a=`${n}.${t}.x`;return{gridMajorMinor:i,chartsMajorMinor:a}}function Fm({type:r,gridVersion:e,chartsVersion:t}){const i="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return i;const s=oj(e);if(!s)return i;const{gridMajorMinor:n,chartsMajorMinor:o}=s;return r==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${n} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:r==="invalidCharts"?`AG Grid version ${n} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:i}function rj({gridVersion:r,chartsVersion:e}){if(!US(e))return{isValid:!1,message:Fm({type:"invalidCharts",gridVersion:r,chartsVersion:e})};if(!US(r))return{isValid:!1,message:Fm({type:"invalidGrid",gridVersion:r,chartsVersion:e})};const[t,i]=r.split(".")||[],[s,n]=e.split(".")||[],o=nj({gridMajorVersion:t,chartsMajorVersion:s});return o&&i===n?{isValid:!0}:!o||i!==n?{isValid:!1,message:Fm({type:"incompatible",gridVersion:r,chartsVersion:e})}:{isValid:!1,message:Fm({type:"invalid",gridVersion:r,chartsVersion:e})}}const aj={version:Uf,validate:()=>rj({gridVersion:Uf,chartsVersion:Al.CHARTS_VERSION}),moduleName:te.GridChartsModule,beans:[Al,$v,wu],agStackComponents:[{componentName:"AgColorPicker",componentClass:sj},{componentName:"AgAngleSelect",componentClass:Vr}],dependantModules:[c_,Wi]};var u_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class K0 extends j{constructor(){super(...arguments),this.loadRowDataVersion=0,this.needRefresh=!1}init(e,t){this.params=t,this.comp=e,t.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(t.node.parent,oe.EVENT_DATA_CHANGED,()=>{this.needRefresh=!0}),this.addManagedListener(this.eventService,E.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))}onFullWidthRowFocused(e){const t=this.params,i={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},s={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.rowPositionUtils.sameRow(i,s)&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)}setAutoHeightClasses(){const e=this.gridOptionsService.is("detailRowAutoHeight"),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(t,!0),this.comp.addOrRemoveDetailGridCssClass(i,!0)}setupRefreshStrategy(){const e=this.params.refreshStrategy;if(e=="everything"||e=="nothing"||e=="rows"){this.refreshStrategy=e;return}e!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"}addThemeToDetailGrid(){const{theme:e}=this.environment.getTheme();e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)}createDetailGrid(){if(A.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}const e=this.gridOptionsService.is("detailRowAutoHeight"),t=Object.assign({},this.params.detailGridOptions);e&&(t.domLayout="autoHeight"),this.comp.setDetailGrid(t)}registerDetailWithMaster(e,t){const i=this.params.node.id,s=this.params.api,n={id:i,api:e,columnApi:t},o=this.params.node;s.addDetailGridInfo(i,n),o.detailGridInfo=n,this.addDestroyFunc(()=>{o.detailGridInfo===n&&(s.removeDetailGridInfo(i),o.detailGridInfo=null)})}loadRowData(){this.loadRowDataVersion++;const e=this.loadRowDataVersion,t=this.params.getDetailRowData;if(!t){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}const i=n=>{this.loadRowDataVersion===e&&this.comp.setRowData(n)},s={node:this.params.node,data:this.params.node.data,successCallback:i,context:this.gridOptionsService.context};t(s)}refresh(){return!this.needRefresh||this.refreshStrategy==="nothing"?!0:(this.needRefresh=!1,this.refreshStrategy==="everything"?!1:(this.loadRowData(),!0))}}u_([S("rowPositionUtils")],K0.prototype,"rowPositionUtils",void 0);u_([S("focusService")],K0.prototype,"focusService",void 0);var lj=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class mm extends Q{init(e){this.params=e,this.selectAndSetTemplate();const t={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),addOrRemoveDetailGridCssClass:(i,s)=>this.eDetailGrid.classList.toggle(i,s),setDetailGrid:i=>this.setDetailGrid(i),setRowData:i=>this.setRowData(i),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new K0),this.ctrl.init(t,e)}refresh(){return this.ctrl&&this.ctrl.refresh()}destroy(){super.destroy()}selectAndSetTemplate(){if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}const e=()=>{this.setTemplate(mm.TEMPLATE)};if(A.missing(this.params.template))e();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){const t=this.params.template,i=t(this.params);this.setTemplate(i)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),e();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}setDetailGrid(e){if(!this.eDetailGrid)return;const t=this.context.getBean("agGridReact"),i=t?A.cloneObject(t):void 0,s=this.context.getBean("frameworkComponentWrapper"),n=this.getFrameworkOverrides();new kg(this.eDetailGrid,e,{frameworkOverrides:n,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:s}}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc(()=>{e.api&&e.api.destroy()})}setRowData(e){this.detailApi&&this.detailApi.setRowData(e)}}mm.TEMPLATE=`<div class="ag-details-row" role="gridcell">
            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
        </div>`;lj([G("eDetailGrid")],mm.prototype,"eDetailGrid",void 0);const cj="30.0.2",dj={version:cj,moduleName:te.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:mm}],controllers:[{controllerName:"detailCellRenderer",controllerClass:K0}],dependantModules:[Wi]};var Hs=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Pl=class extends j{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,i){this.showMenu(e,s=>{const n=s.getGui();this.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:t,ePopup:n}),i&&s.showTab(i)},"columnMenu",i,void 0,t.target)}showMenuAfterButtonClick(e,t,i,s,n){let o=-1,a="left";this.gridOptionsService.is("enableRtl")&&(o=1,a="right"),this.showMenu(e,l=>{const c=l.getGui();this.popupService.positionPopupByComponent({type:i,column:e,eventSource:t,ePopup:c,alignSide:a,nudgeX:9*o,nudgeY:-23,position:"under",keepWithinBounds:!0}),s&&l.showTab(s)},i,s,n,t)}showMenu(e,t,i,s,n,o){const{menu:a,eMenuGui:l,currentHeaderPosition:c,currentColumnIndex:d,anchorToElement:h}=this.getMenuParams(e,n,o),u=[];u.push(this.getClosedCallback(e,a,c,d,o));const p=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:g=>{u.forEach(m=>m(g))},afterGuiAttached:g=>a.afterGuiAttached(Object.assign({},{container:i},g)),positionCallback:s?()=>t(a):void 0,ariaLabel:p("ariaLabelColumnMenu","Column Menu")}),s||(a.showTabBasedOnPreviousSelection(),t(a));const f=this.popupService.setPopupPositionRelatedToElement(l,h);f&&this.addStopAnchoring(f,e,u),a.addEventListener(Pe.EVENT_TAB_SELECTED,g=>{this.lastSelectedTab=g.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=a,a.addEventListener(j.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)})}addStopAnchoring(e,t,i){e.then(s=>{t.addEventListener("leftChanged",s),t.addEventListener("visibleChanged",s),i.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("visibleChanged",s)})})}getClosedCallback(e,t,i,s,n){return o=>{if(this.destroyBean(t),e.setMenuVisible(!1,"contextMenu"),!(!(o instanceof KeyboardEvent)||!n)){if(A.isVisible(n)){const l=this.focusService.findTabbableParent(n);l&&(e&&this.headerNavigationService.scrollToColumn(e),l.focus())}else if(i&&s!==-1){const l=this.columnModel.getAllDisplayedColumns(),c=l[s]||A.last(l);c&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:i.headerRowIndex,column:c}})}}}}getMenuParams(e,t,i){const s=this.createBean(new Pe(e,this.lastSelectedTab,t));return{menu:s,eMenuGui:s.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui()}}isMenuEnabled(e){return e.getMenuTabs(Pe.TABS_DEFAULT).length>0}};Hs([S("popupService")],Pl.prototype,"popupService",void 0);Hs([S("focusService")],Pl.prototype,"focusService",void 0);Hs([S("headerNavigationService")],Pl.prototype,"headerNavigationService",void 0);Hs([S("ctrlsService")],Pl.prototype,"ctrlsService",void 0);Hs([S("columnModel")],Pl.prototype,"columnModel",void 0);Pl=Hs([ee("menuFactory")],Pl);class Pe extends j{constructor(e,t,i){super(),this.tabFactories={},this.includeChecks={},this.column=e,this.initialSelection=t,this.tabFactories[Pe.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[Pe.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[Pe.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[Pe.TAB_GENERAL]=()=>!0,this.includeChecks[Pe.TAB_FILTER]=()=>this.filterManager.isFilterAllowed(e),this.includeChecks[Pe.TAB_COLUMNS]=()=>!0,this.restrictTo=i}init(){const e=this.getTabsToCreate().map(t=>this.createTab(t));this.tabbedLayout=new jl({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){return this.restrictTo?this.restrictTo:this.column.getMenuTabs(Pe.TABS_DEFAULT).filter(e=>this.isValidMenuTabItem(e)).filter(e=>this.isNotSuppressed(e)).filter(e=>this.isModuleLoaded(e))}isModuleLoaded(e){return e===Pe.TAB_COLUMNS?ie.isRegistered(te.ColumnsToolPanelModule,this.context.getGridId()):!0}isValidMenuTabItem(e){let t=!0,i=Pe.TABS_DEFAULT;return this.restrictTo!=null&&(t=this.restrictTo.indexOf(e)>-1,i=this.restrictTo),t=t&&Pe.TABS_DEFAULT.indexOf(e)>-1,t||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${i}]`),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===Pe.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===Pe.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===Pe.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=Pe.TAB_COLUMNS;break;case this.tabItemFilter:t=Pe.TAB_FILTER;break;case this.tabItemGeneral:t=Pe.TAB_GENERAL;break}t&&this.activateTab(t)}activateTab(e){const t={type:Pe.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(t)}getMenuItems(){const e=this.getDefaultMenuOptions();let t;const i=this.gridOptionsService.getCallback("getMainMenuItems");return i?t=i({column:this.column,defaultItems:e}):t=e,A.removeRepeatsFromArray(t,Pe.MENU_ITEM_SEPARATOR),t}getDefaultMenuOptions(){const e=[],t=!this.column.getColDef().lockPinned,i=this.columnModel.getRowGroupColumns().length,s=i>0,n=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,o=this.column.isAllowValue(),a=this.column.isAllowRowGroup(),l=this.column.isPrimary(),c=this.columnModel.isPivotMode(),d=this.rowModel.getType()==="clientSide",h=this.gridOptionsService.isTreeData(),u=l&&s&&o||!l;return t&&e.push("pinSubMenu"),u&&e.push("valueAggSubMenu"),(t||u)&&e.push(Pe.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(Pe.MENU_ITEM_SEPARATOR),a&&this.column.isPrimary()&&(n?e.push("rowUnGroup"):e.push("rowGroup")),e.push(Pe.MENU_ITEM_SEPARATOR),e.push("resetColumns"),d&&(h||i>(c?1:0))&&(e.push("expandAll"),e.push("contractAll")),e}createMainPanel(){this.mainMenuList=this.createManagedBean(new hr);const e=this.getMenuItems(),t=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(t),this.mainMenuList.addEventListener(Nt.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:A.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:Pe.TAB_GENERAL.replace("MenuTab",""),bodyPromise:Xe.resolve(this.mainMenuList.getGui()),name:Pe.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){let t;e&&e.event&&e.event instanceof KeyboardEvent&&(t=e.event),this.hidePopupFunc(t&&{keyboardEvent:t});const i=this.focusService.getFocusedCell(),s=this.gridOptionsService.getDocument();if(s.activeElement===s.body&&i){const{rowIndex:n,rowPinned:o,column:a}=i;this.focusService.setFocusedCell({rowIndex:n,column:a,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}createFilterPanel(){const e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!e)throw new Error("AG Grid - Unable to instantiate filter");const t=s=>{e!=null&&e.filterPromise&&e.filterPromise.then(n=>{n&&n.afterGuiAttached&&n.afterGuiAttached(s)})},i=()=>{var s;return(s=e==null?void 0:e.filterPromise)===null||s===void 0?void 0:s.then(n=>{var o;return(o=n==null?void 0:n.afterGuiDetached)===null||o===void 0?void 0:o.call(n)})};return this.tabItemFilter={title:A.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:Pe.TAB_FILTER.replace("MenuTab",""),bodyPromise:e==null?void 0:e.guiPromise,afterAttachedCallback:t,afterDetachedCallback:i,name:Pe.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const t=this.createManagedBean(new Jl);let i=this.column.getColDef().columnsMenuParams;i||(i={});const{contractColumnSelection:s,suppressColumnExpandAll:n,suppressColumnFilter:o,suppressColumnSelectAll:a,suppressSyncLayoutWithGrid:l,columnLayout:c}=i;t.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!s,suppressColumnExpandAll:!!n,suppressColumnFilter:!!o,suppressColumnSelectAll:!!a,suppressSyncLayoutWithGrid:!!c||!!l,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),c&&t.setColumnLayout(c);const d=t.getGui();return d.classList.add("ag-menu-column-select"),e.appendChild(d),this.tabItemColumns={title:A.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:Pe.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:Xe.resolve(e),name:Pe.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:t,hidePopup:i}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))}getGui(){return this.tabbedLayout.getGui()}}Pe.EVENT_TAB_SELECTED="tabSelected";Pe.TAB_FILTER="filterMenuTab";Pe.TAB_GENERAL="generalMenuTab";Pe.TAB_COLUMNS="columnsMenuTab";Pe.TABS_DEFAULT=[Pe.TAB_GENERAL,Pe.TAB_FILTER,Pe.TAB_COLUMNS];Pe.MENU_ITEM_SEPARATOR="separator";Hs([S("columnModel")],Pe.prototype,"columnModel",void 0);Hs([S("filterManager")],Pe.prototype,"filterManager",void 0);Hs([S("gridApi")],Pe.prototype,"gridApi",void 0);Hs([S("columnApi")],Pe.prototype,"columnApi",void 0);Hs([S("menuItemMapper")],Pe.prototype,"menuItemMapper",void 0);Hs([S("rowModel")],Pe.prototype,"rowModel",void 0);Hs([S("focusService")],Pe.prototype,"focusService",void 0);Hs([U],Pe.prototype,"init",null);var $a=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const hj="ag-menu",BR="ag-context-menu-open";let dd=class extends j{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,i){const s=[];if(A.exists(e)&&ie.isRegistered(te.ClipboardModule,this.context.getGridId())&&t&&(this.gridOptionsService.is("suppressCutToClipboard")||s.push("cut"),s.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&ie.isRegistered(te.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&s.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&s.push("chartRange")),A.exists(e)){const o=!ie.isRegistered(te.CsvExportModule,this.context.getGridId()),a=!ie.isRegistered(te.ExcelExportModule,this.context.getGridId()),l=this.gridOptionsService.is("suppressExcelExport")||a,c=this.gridOptionsService.is("suppressCsvExport")||o;!A.isIOSUserAgent()&&(!l||!c)&&s.push("export")}const n=this.gridOptionsService.getCallback("getContextMenuItems");if(n){const o={node:e,column:t,value:i,defaultItems:s.length?s:void 0};return n(o)}return s}onContextMenu(e,t,i,s,n,o){if(!this.gridOptionsService.is("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsService.is("suppressContextMenu")))return;const a=e||t.touches[0];this.showMenu(i,s,n,a,o)&&(e||t).preventDefault()}blockMiddleClickScrollsIfNeeded(e){const{gridOptionsService:t}=this,{which:i}=e;t.is("suppressMiddleClickScrolls")&&i===2&&e.preventDefault()}showMenu(e,t,i,s,n){const o=this.getMenuItems(e,t,i),a=this.ctrlsService.getGridBodyCtrl().getGui();if(o===void 0||A.missingOrEmpty(o))return!1;const l=new vm(o);this.createBean(l);const c=l.getGui(),d={column:t,rowNode:e,type:"contextMenu",mouseEvent:s,ePopup:c,nudgeY:1},h=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{a.classList.remove(BR),this.destroyBean(l)},click:s,positionCallback:()=>{const p=this.gridOptionsService.is("enableRtl");this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},d),{nudgeX:p?(c.offsetWidth+1)*-1:1}))},anchorToElement:n,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return u&&(a.classList.add(BR),l.afterGuiAttached({container:"contextMenu",hidePopup:u.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=l,l.addEventListener(j.EVENT_DESTROYED,()=>{this.activeMenu===l&&(this.activeMenu=null)}),u&&l.addEventListener(Nt.EVENT_MENU_ITEM_SELECTED,u.hideFunc),!0}};$a([S("popupService")],dd.prototype,"popupService",void 0);$a([Ne("rangeService")],dd.prototype,"rangeService",void 0);$a([S("ctrlsService")],dd.prototype,"ctrlsService",void 0);$a([S("columnModel")],dd.prototype,"columnModel",void 0);dd=$a([ee("contextMenuFactory")],dd);class vm extends Q{constructor(e){super(`<div class="${hj}" role="presentation"></div>`),this.menuList=null,this.focusedCell=null,this.menuItems=e}addMenuItems(){const e=this.createManagedBean(new hr),t=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener(Nt.EVENT_MENU_ITEM_SELECTED,i=>this.dispatchEvent(i))}afterGuiAttached(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){const{rowIndex:t,rowPinned:i,column:s}=this.focusedCell,n=this.gridOptionsService.getDocument();n.activeElement===n.body&&this.focusService.setFocusedCell({rowIndex:t,column:s,rowPinned:i,forceBrowserFocus:!0})}}destroy(){this.restoreFocusedCell(),super.destroy()}}$a([S("menuItemMapper")],vm.prototype,"menuItemMapper",void 0);$a([S("focusService")],vm.prototype,"focusService",void 0);$a([S("cellPositionUtils")],vm.prototype,"cellPositionUtils",void 0);$a([U],vm.prototype,"addMenuItems",null);var fc=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let yr=class extends j{mapWithStockItems(e,t){if(!e)return[];const i=[];return e.forEach(s=>{let n;if(typeof s=="string"?n=this.getStockMenuItem(s,t):n=Object.assign({},s),!n)return;const o=n,{subMenu:a}=o;a&&a instanceof Array&&(o.subMenu=this.mapWithStockItems(a,t)),n!=null&&i.push(n)}),i}getStockMenuItem(e,t){var i;const s=this.localeService.getLocaleTextFunc(),n=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:s("pinColumn","Pin Column"),icon:A.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:s("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnPinned(t,"left","contextMenu"),checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:s("pinRight","Pin Right"),action:()=>this.columnModel.setColumnPinned(t,"right","contextMenu"),checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:s("noPin","No Pin"),action:()=>this.columnModel.setColumnPinned(t,null,"contextMenu"),checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return ie.assertRegistered(te.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!(t!=null&&t.isPrimary())&&!(t!=null&&t.getColDef().pivotValueColumn)?null:{name:s("valueAggregation","Value Aggregation"),icon:A.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(t)}:null;case"autoSizeThis":return{name:s("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(t,n,"contextMenu")};case"autoSizeAll":return{name:s("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns(n,"contextMenu")};case"rowGroup":return{name:s("groupBy","Group by")+" "+A.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:(t==null?void 0:t.isRowGroupActive())||!(t!=null&&t.getColDef().enableRowGroup),action:()=>this.columnModel.addRowGroupColumn(t,"contextMenu"),icon:A.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":return{name:s("ungroupBy","Un-Group by")+" "+A.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:!(t!=null&&t.isRowGroupActive())||!(t!=null&&t.getColDef().enableRowGroup),action:()=>this.columnModel.removeRowGroupColumn(t,"contextMenu"),icon:A.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null)};case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:s("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:s("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return ie.assertRegistered(te.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:A.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return ie.assertRegistered(te.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:s("copyWithHeaders","Copy with Headers"),icon:A.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return ie.assertRegistered(te.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:A.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(ie.assertRegistered(te.ClipboardModule,"Cut from Menu",this.context.getGridId())){const c=this.focusService.getFocusedCell(),d=c?this.rowPositionUtils.getRowNode(c):null,h=d?c==null?void 0:c.column.isCellEditable(d):!1;return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:A.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!h||this.gridOptionsService.is("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return ie.assertRegistered(te.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),disabled:!0,icon:A.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const o=[],a=ie.isRegistered(te.CsvExportModule,this.context.getGridId()),l=ie.isRegistered(te.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&a&&o.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&l&&o.push("excelExport"),{name:s("export","Export"),subMenu:o,icon:A.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:s("csvExport","CSV Export"),icon:A.createIconNoSpan("csvExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:s("excelExport","Excel Export"),icon:A.createIconNoSpan("excelExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return(i=this.chartMenuItemMapper.getChartItems(e))!==null&&i!==void 0?i:null;default:return console.warn(`AG Grid: unknown menu item type ${e}`),null}}createAggregationSubMenu(e){const t=this.localeService.getLocaleTextFunc();let i;if(e.isPrimary())i=e;else{const n=e.getColDef().pivotValueColumn;i=A.exists(n)?n:void 0}const s=[];if(i){const n=i.isValueActive(),o=this.aggFuncService.getFuncNames(i);s.push({name:t("noAggregation","None"),action:()=>{this.columnModel.removeValueColumn(i,"contextMenu"),this.columnModel.setColumnAggFunc(i,void 0,"contextMenu")},checked:!n}),o.forEach(a=>{s.push({name:t(a,A.capitalise(a)),action:()=>{this.columnModel.setColumnAggFunc(i,a,"contextMenu"),this.columnModel.addValueColumn(i,"contextMenu")},checked:n&&i.getAggFunc()===a})})}return s}};fc([S("columnModel")],yr.prototype,"columnModel",void 0);fc([S("gridApi")],yr.prototype,"gridApi",void 0);fc([Ne("clipboardService")],yr.prototype,"clipboardService",void 0);fc([Ne("aggFuncService")],yr.prototype,"aggFuncService",void 0);fc([S("focusService")],yr.prototype,"focusService",void 0);fc([S("rowPositionUtils")],yr.prototype,"rowPositionUtils",void 0);fc([S("chartMenuItemMapper")],yr.prototype,"chartMenuItemMapper",void 0);yr=fc([ee("menuItemMapper")],yr);const uj="30.0.2";var p_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},jS;let Kv=jS=class extends j{getChartItems(e){var t,i;if(!this.chartService){ie.assertRegistered(te.GridChartsModule,`the Context Menu key "${e}"`,this.context.getGridId());return}const s=e==="pivotChart"?new pj(this.gridOptionsService,this.chartService,this.localeService):new fj(this.gridOptionsService,this.chartService,this.localeService);let n=s.getMenuItem();const o=(i=(t=this.gridOptionsService.get("chartToolPanelsDef"))===null||t===void 0?void 0:t.settingsPanel)===null||i===void 0?void 0:i.chartGroupsDef;return o&&(n=jS.filterAndOrderChartMenu(n,o,s.getConfigLookup())),this.cleanInternals(n)}cleanInternals(e){if(!e)return e;const t=i=>{var s;return i==null||delete i._key,(s=i==null?void 0:i.subMenu)===null||s===void 0||s.forEach(n=>t(n)),i};return t(e)}static buildLookup(e){let t={};const i=s=>{t[s._key]=s,s.subMenu&&s.subMenu.forEach(n=>i(n))};return i(e),t}static filterAndOrderChartMenu(e,t,i){var s;const n=this.buildLookup(e);let o=Object.assign(Object.assign({},e),{subMenu:[]});if(Object.entries(t).forEach(([a,l])=>{var c,d;const h=i[a];if(h==null){A.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${a}'`),`invalid_chartGroupsDef${a}`);return}const u=n[h._key];if(u)if(u.subMenu){const p=l.map(f=>{const g=h[f];if(g==null){A.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${a}.${f}'`),`invalid_chartGroupsDef${f}_${a}`);return}return n[g]}).filter(f=>f!==void 0);p.length>0&&(u.subMenu=p,(c=o.subMenu)===null||c===void 0||c.push(u))}else(d=o.subMenu)===null||d===void 0||d.push(u)}),((s=o.subMenu)===null||s===void 0?void 0:s.length)!=0)return o}};p_([Ne("chartService")],Kv.prototype,"chartService",void 0);Kv=jS=p_([ee("chartMenuItemMapper")],Kv);class pj{constructor(e,t,i){this.gridOptionsService=e,this.chartService=t,this.localeService=i}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(i,s,n,o)=>({name:e(i,s),action:()=>this.chartService.createPivotChart({chartType:n}),_key:o});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","pivotPie"),t("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},t("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","pivotScatter"),t("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","pivotArea"),t("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},t("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:A.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}}}class fj{constructor(e,t,i){this.gridOptionsService=e,this.chartService=t,this.localeService=i}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(i,s,n,o)=>({name:e(i,s),action:()=>this.chartService.createChartFromCurrentRange(n),_key:o});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","rangePie"),t("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},t("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","rangeScatter"),t("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","rangeArea"),t("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},t("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:A.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}}}const gj={version:uj,moduleName:te.MenuModule,beans:[Pl,dd,yr,Kv],dependantModules:[Wi]};var IE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ml extends Hu{constructor(){super('<div class="ag-multi-filter ag-menu-list-compact"></div>'),this.filterDefs=[],this.filters=[],this.guiDestroyFuncs=[],this.activeFilterIndices=[],this.lastActivatedMenuItem=null,this.afterFiltersReadyFuncs=[]}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}static getFilterDefs(e){const{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}init(e){this.params=e,this.filterDefs=Ml.getFilterDefs(e);const{column:t,filterChangedCallback:i}=e;this.column=t,this.filterChangedCallback=i;const s=[];return this.filterDefs.forEach((n,o)=>{const a=this.createFilter(n,o);a!=null&&s.push(a)}),Xe.all(s).then(n=>{this.filters=n,this.refreshGui("columnMenu"),this.afterFiltersReadyFuncs.forEach(o=>o()),this.afterFiltersReadyFuncs.length=0})}refreshGui(e){e!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((t,i)=>{i>0&&this.appendChild(A.loadTemplate('<div class="ag-filter-separator"></div>'));const s=this.filterDefs[i],n=this.getFilterTitle(t,s);let o;s.display==="subMenu"&&e!=="toolPanel"?o=this.insertFilterMenu(t,n).getGui():s.display==="subMenu"||s.display==="accordion"?o=this.insertFilterGroup(t,n).getGui():o=t.getGui(),this.appendChild(o)}),this.lastOpenedInContainer=e)}getFilterTitle(e,t){if(t.title!=null)return t.title;const i=e;return typeof i.getFilterTitle=="function"?i.getFilterTitle():"Filter"}destroyChildren(){this.guiDestroyFuncs.forEach(e=>e()),this.guiDestroyFuncs.length=0}insertFilterMenu(e,t){const i=this.createBean(new Nt({name:t,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:()=>!1}));return i.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(i)),this.addManagedListener(i,Nt.EVENT_MENU_ITEM_ACTIVATED,s=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==s.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=s.menuItem}),i.addGuiEventListener("focusin",()=>i.activate()),i.addGuiEventListener("focusout",()=>{i.isSubMenuOpen()||i.deactivate()}),i}insertFilterGroup(e,t){const i=this.createBean(new At({title:t,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(i)),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListener(i,At.EVENT_EXPANDED,()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0})),i}isFilterActive(){return this.filters.some(e=>e.isFilterActive())}getLastActiveFilterIndex(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null}doesFilterPass(e,t){let i=!0;return this.filters.forEach(s=>{!i||s===t||!s.isFilterActive()||(i=s.doesFilterPass(e))}),i}getFilterType(){return"multi"}getModelFromUi(){return{filterType:this.getFilterType(),filterModels:this.filters.map(t=>{const i=t;return typeof i.getModelFromUi=="function"?i.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(t=>t.isFilterActive()?t.getModel():null)}:null}setModel(e){const t=(s,n)=>new Xe(o=>{const a=s.setModel(n);a?a.then(()=>o()):o()});let i=[];return e==null?i=this.filters.map((s,n)=>t(s,null).then(()=>{this.updateActiveList(n)})):this.filters.forEach((s,n)=>{const o=e.filterModels.length>n?e.filterModels[n]:null,a=t(s,o).then(()=>{this.updateActiveList(n)});i.push(a)}),Xe.all(i).then(()=>{})}applyModel(e="api"){let t=!1;return this.filters.forEach(i=>{i instanceof en&&(t=i.applyModel(e)||t)}),t}getChildFilterInstance(e){return this.filters[e]}afterGuiAttached(e){e&&this.refreshGui(e.container);const{filters:t}=this.params,i=t&&t.some(o=>o.display&&o.display!=="inline");this.executeFunctionIfExists("afterGuiAttached",Object.assign(Object.assign({},e||{}),{suppressFocus:i}));const s=this.gridOptionsService.getDocument(),n=s.activeElement;i&&(n===s.body||this.getGui().contains(n))&&this.forceFocusOutOfContainer(!0)}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged")}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded")}destroy(){this.filters.forEach(e=>{e.setModel(null),this.destroyBean(e)}),this.filters.length=0,this.destroyChildren(),super.destroy()}executeFunctionIfExists(e,...t){A.forEachReverse(this.filters,i=>{const s=i[e];typeof s=="function"&&s.apply(i,t)})}createFilter(e,t){const{filterModifiedCallback:i,doesRowPassOtherFilter:s}=this.params;let n;const o=Object.assign(Object.assign({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:i,filterChangedCallback:c=>{this.executeWhenAllFiltersReady(()=>this.filterChanged(t,c))},doesRowPassOtherFilter:c=>s(c)&&this.doesFilterPass({node:c,data:c.data},n)}),a=this.userComponentFactory.getFilterDetails(e,o,"agTextColumnFilter");if(!a)return null;const l=a.newAgStackInstance();return l&&l.then(c=>n=c),l}executeWhenAllFiltersReady(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveList(e){const t=this.filters[e];A.removeFromArray(this.activeFilterIndices,e),t.isFilterActive()&&this.activeFilterIndices.push(e)}filterChanged(e,t){this.updateActiveList(e),this.filterChangedCallback(t);const i=this.filters[e];this.filters.forEach(s=>{s!==i&&typeof s.onAnyFilterChanged=="function"&&s.onAnyFilterChanged()})}onFocusIn(e){return this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0}getModelAsString(e){var t,i,s,n;if(!this.filters||!(!((t=e==null?void 0:e.filterModels)===null||t===void 0)&&t.length))return"";const o=(i=this.getLastActiveFilterIndex())!==null&&i!==void 0?i:0,a=this.filters[o];return(n=(s=a.getModelAsString)===null||s===void 0?void 0:s.call(a,e.filterModels[o]))!==null&&n!==void 0?n:""}}IE([S("filterManager")],Ml.prototype,"filterManager",void 0);IE([S("userComponentFactory")],Ml.prototype,"userComponentFactory",void 0);IE([U],Ml.prototype,"postConstruct",null);var f_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class LE extends Q{constructor(){super('<div class="ag-multi-floating-filter ag-floating-filter-input"></div>'),this.floatingFilters=[]}init(e){this.params=e;const t=e.filterParams,i=[];return Ml.getFilterDefs(t).forEach((s,n)=>{const o=Object.assign(Object.assign({},e),{parentFilterInstance:l=>{this.parentMultiFilterInstance(c=>{const d=c.getChildFilterInstance(n);d!=null&&l(d)})}});A.mergeDeep(o.filterParams,s.filterParams);const a=this.createFloatingFilter(s,o);a!=null&&i.push(a)}),Xe.all(i).then(s=>{s.forEach((n,o)=>{this.floatingFilters.push(n);const a=n.getGui();this.appendChild(a),o>0&&A.setDisplayed(a,!1)})})}onParentModelChanged(e,t){t&&t.afterFloatingFilter||this.parentMultiFilterInstance(i=>{if(e==null)this.floatingFilters.forEach((s,n)=>{s.onParentModelChanged(null,t),A.setDisplayed(s.getGui(),n===0)});else{const s=i.getLastActiveFilterIndex();this.floatingFilters.forEach((n,o)=>{const a=e.filterModels.length>o?e.filterModels[o]:null;n.onParentModelChanged(a,t);const l=s==null?o===0:o===s;A.setDisplayed(n.getGui(),l)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}createFloatingFilter(e,t){var i;let s=(i=this.userComponentFactory.getDefaultFloatingFilterType(e,()=>this.filterManager.getDefaultFloatingFilter(this.params.column)))!==null&&i!==void 0?i:"agReadOnlyFloatingFilter";const n=this.userComponentFactory.getFloatingFilterCompDetails(e,t,s);return n?n.newAgStackInstance():null}parentMultiFilterInstance(e){this.params.parentFilterInstance(t=>{if(!(t instanceof Ml))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");e(t)})}}f_([S("userComponentFactory")],LE.prototype,"userComponentFactory",void 0);f_([S("filterManager")],LE.prototype,"filterManager",void 0);const mj="30.0.2",vj={version:mj,moduleName:te.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:Ml},{componentName:"agMultiColumnFloatingFilter",componentClass:LE}],dependantModules:[Wi]};function g_(r,e){r.then(t=>{const i=t.getGui();i!=null&&(typeof i=="object"?e.appendChild(i):e.innerHTML=i)})}var Cj=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class m_ extends Q{constructor(e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e}setState(e,t,i){this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.updateSelected(i)}updateSelected(e){this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const s=t!=null?t:e;A.exists(s)&&s!==""?this.getGui().textContent=s.toString():this.getGui().innerHTML="&nbsp;"}populateWithRenderer(e,t){const i={value:e,valueFormatted:t,api:this.gridOptionsService.api},s=this.userComponentFactory.getCellRendererDetails(this.params,i),n=s?s.newAgStackInstance():void 0;return n!=null?g_(n,this.getGui()):this.getGui().innerText=i.valueFormatted!=null?i.valueFormatted:i.value,n?(n.then(o=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(o)})}),!0):!1}}Cj([S("userComponentFactory")],m_.prototype,"userComponentFactory",void 0);var FE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class _l extends Rd{constructor(){super(_l.TEMPLATE),this.selectionConfirmed=!1,this.searchString=""}init(e){var t;this.params=e,this.selectedValue=e.value,this.originalSelectedValue=e.value,this.focusAfterAttached=e.cellStartedEdit;const i=A.createIconNoSpan("smallDown",this.gridOptionsService);if(i.classList.add("ag-rich-select-value-icon"),this.eValue.appendChild(i),this.virtualList=this.createManagedBean(new Pa("rich-select")),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),A.exists(this.params.cellHeight)&&this.virtualList.setRowHeight(this.params.cellHeight),this.renderSelectedValue(),A.missing(e.values)){console.warn("AG Grid: richSelectCellEditor requires values for it to work");return}const s=e.values;this.virtualList.setModel({getRowCount:()=>s.length,getRow:a=>s[a]}),this.addGuiEventListener("keydown",this.onKeyDown.bind(this));const n=this.virtualList.getGui();this.addManagedListener(n,"click",this.onClick.bind(this)),this.addManagedListener(n,"mousemove",this.onMouseMove.bind(this));const o=A.exists(e.searchDebounceDelay)?e.searchDebounceDelay:300;this.clearSearchString=A.debounce(this.clearSearchString,o),((t=e.eventKey)===null||t===void 0?void 0:t.length)===1&&this.searchText(e.eventKey)}onKeyDown(e){const t=e.key;switch(e.preventDefault(),t){case W.ENTER:this.onEnterKeyDown();break;case W.TAB:this.confirmSelection();break;case W.DOWN:case W.UP:this.onNavigationKeyDown(e,t);break;default:this.searchText(e)}}confirmSelection(){this.selectionConfirmed=!0}onEnterKeyDown(){this.confirmSelection(),this.params.stopEditing()}onNavigationKeyDown(e,t){e.preventDefault();const i=this.params.values.indexOf(this.selectedValue),s=t===W.UP?i-1:i+1;if(s>=0&&s<this.params.values.length){const n=this.params.values[s];this.setSelectedValue(n)}}searchText(e){if(typeof e!="string"){let t=e.key;if(t===W.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!A.isEventFromPrintableCharacter(e))return;this.searchText(t);return}this.searchString+=e,this.runSearch(),this.clearSearchString()}runSearch(){const e=this.params.values;let t;if((typeof e[0]=="number"||typeof e[0]=="string")&&(t=e.map(o=>this.params.formatValue(o))),typeof e[0]=="object"&&this.params.colDef.keyCreator&&(t=e.map(o=>{const a={value:o,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return this.params.colDef.keyCreator(a)})),!t)return;const i=A.fuzzySuggestions(this.searchString,t,!0)[0];if(!i)return;const s=t.indexOf(i),n=e[s];this.setSelectedValue(n)}clearSearchString(){this.searchString=""}renderSelectedValue(){const e=this.params.formatValue(this.selectedValue),t=this.eValue,i={value:this.selectedValue,valueFormatted:e,api:this.gridOptionsService.api},s=this.userComponentFactory.getCellRendererDetails(this.params,i),n=s?s.newAgStackInstance():void 0;n?(g_(n,t),n.then(o=>{this.addDestroyFunc(()=>this.getContext().destroyBean(o))})):A.exists(this.selectedValue)?t.innerText=e:A.clearElement(t)}setSelectedValue(e){if(this.selectedValue===e)return;const t=this.params.values.indexOf(e);t!==-1&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow((i,s)=>{i.updateSelected(t===s)}),this.virtualList.focusRow(t))}createRowComponent(e){const t=this.params.formatValue(e),i=new m_(this.params);return this.getContext().createBean(i),i.setState(e,t,e===this.selectedValue),i}onMouseMove(e){const t=this.virtualList.getGui().getBoundingClientRect(),i=this.virtualList.getScrollTop(),s=e.clientY-t.top+i,n=Math.floor(s/this.virtualList.getRowHeight()),o=this.params.values[n];o!==void 0&&this.setSelectedValue(o)}onClick(){this.confirmSelection(),this.params.stopEditing()}afterGuiAttached(){const e=this.params.values.indexOf(this.selectedValue);if(this.virtualList.refresh(),e>=0&&this.virtualList.ensureIndexVisible(e),this.virtualList.refresh(),this.focusAfterAttached){const t=e!==-1?e:0;this.params.values.length?this.virtualList.focusRow(t):this.getGui().focus()}}getValue(){return this.selectionConfirmed?this.selectedValue:this.originalSelectedValue}}_l.TEMPLATE=`<div class="ag-rich-select" tabindex="-1">
            <div ref="eValue" class="ag-rich-select-value"></div>
            <div ref="eList" class="ag-rich-select-list"></div>
        </div>`;FE([S("userComponentFactory")],_l.prototype,"userComponentFactory",void 0);FE([G("eValue")],_l.prototype,"eValue",void 0);FE([G("eList")],_l.prototype,"eList",void 0);const yj="30.0.2",Sj={version:yj,moduleName:te.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:_l},{componentName:"agRichSelectCellEditor",componentClass:_l}],dependantModules:[Wi]};var to=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Bs extends Ht{constructor(e,t,i){super(0),this.nodeIdSequence=new Ni,this.info={},this.ssrmParams=e,this.parentRowNode=i,this.level=i.level+1,this.groupLevel=e.rowGroupCols?this.level<e.rowGroupCols.length:void 0,this.leafGroup=e.rowGroupCols?this.level===e.rowGroupCols.length-1:!1}postConstruct(){if(this.usingTreeData=this.gridOptionsService.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){const s=this.ssrmParams.rowGroupCols[this.level];this.groupField=s.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}let e=1;const t=this.parentRowNode.level===-1,i=this.storeUtils.getServerSideInitialRowCount();t&&i!==void 0&&(e=i),this.initialiseRowNodes(e),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(()=>this.rowNodeBlockLoader.removeBlock(this))}destroyRowNodes(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}}initialiseRowNodes(e,t=!1){this.destroyRowNodes();for(let i=0;i<e;i++){const s=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t&&(s.failedLoad=!0),this.allRowNodes.push(s),this.nodesAfterFilter.push(s),this.nodesAfterSort.push(s)}}getBlockStateJson(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}}loadFromDatasource(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})}getStartRow(){return 0}getEndRow(){return this.nodesAfterSort.length}createDataNode(e,t){const i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t!=null?A.insertIntoArray(this.allRowNodes,i,t):this.allRowNodes.push(i);const s=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(i,e,s,void 0),this.nodeManager.addRowNode(i),this.blockUtils.checkOpenByDefault(i),this.allNodesMap[i.id]=i,i}prefixId(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()}processServerFail(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}processServerResult(e){if(!this.isAlive())return;const t=e.storeInfo||e.groupLevelInfo;t&&Object.assign(this.info,t);const i=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!e.rowData){const s='AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.';A.doOnce(()=>console.warn(s,e),"FullStore.noData")}this.createOrRecycleNodes(i,e.rowData),i&&this.blockUtils.destroyRowNodes(A.getAllValuesInObject(i)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}createOrRecycleNodes(e,t){if(!t)return;const i=n=>{if(!e)return;const o=this.gridOptionsService.getCallback("getRowId");if(!o)return;const a=this.parentRowNode.getGroupKeys(),l=this.level,c=o({data:n,parentKeys:a.length>0?a:void 0,level:l}),d=e[c];if(d)return delete e[c],d},s=(n,o)=>{this.allNodesMap[n.id]=n,this.blockUtils.updateDataIntoRowNode(n,o),this.allRowNodes.push(n)};t.forEach(n=>{const o=i(n);o?s(o,n):this.createDataNode(n)})}flushAsyncTransactions(){window.setTimeout(()=>this.transactionManager.flushAsyncTransactions(),0)}filterAndSortNodes(){this.filterRowNodes(),this.sortRowNodes()}sortRowNodes(){const e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),t=this.sortController.getSortOptions(),i=!t||t.length==0;if(e||i){this.nodesAfterSort=this.nodesAfterFilter;return}this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,t)}filterRowNodes(){const e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),t=this.groupLevel;if(e||t){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(i=>this.filterManager.doesRowPassFilter({rowNode:i}))}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(e=>this.blockUtils.clearDisplayIndex(e))}getDisplayIndexEnd(){return this.displayIndexEnd}isDisplayIndexInStore(e){return this.getRowCount()===0?!1:e>=this.displayIndexStart&&e<this.displayIndexEnd}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value;const i={};this.nodesAfterSort.forEach(s=>{this.blockUtils.setDisplayIndex(s,e,t),i[s.id]=!0}),this.allRowNodes.forEach(s=>{i[s.id]||this.blockUtils.clearDisplayIndex(s)}),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e,t=new Ni){e(this,t.next()),this.allRowNodes.forEach(i=>{const s=i.childStore;s&&s.forEachStoreDeep(e,t)})}forEachNodeDeep(e,t=new Ni){this.allRowNodes.forEach(i=>{e(i,t.next());const s=i.childStore;s&&s.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e,t=new Ni){this.nodesAfterSort.forEach(i=>{e(i,t.next());const s=i.childStore;s&&s.forEachNodeDeepAfterFilterAndSort(e,t)})}getRowUsingDisplayIndex(e){return this.isDisplayIndexInStore(e)?this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort):void 0}getRowBounds(e){for(let t=0;t<this.nodesAfterSort.length;t++){const i=this.nodesAfterSort[t],s=this.blockUtils.extractRowBounds(i,e);if(s)return s}return null}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(e>=this.topPx+this.heightPx){const o=this.nodesAfterSort[this.nodesAfterSort.length-1],a=o.rowTop+o.rowHeight;if(e>=a&&o.expanded){if(o.childStore&&o.childStore.getRowCount()>0)return o.childStore.getRowIndexAtPixel(e);if(o.detailNode)return o.detailNode.rowIndex}return o.rowIndex}let s=null;return this.nodesAfterSort.forEach(o=>{const a=this.blockUtils.getIndexAtPixel(o,e);a!=null&&(s=a)}),s??this.displayIndexEnd-1}getChildStore(e){return this.storeUtils.getChildStore(e,this,t=>this.allRowNodes.find(s=>s.key==t))}forEachChildStoreShallow(e){this.allRowNodes.forEach(t=>{const i=t.childStore;i&&e(i)})}refreshAfterFilter(e){const t=this.storeUtils.isServerSideFilterOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||t&&i){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(n=>n.refreshAfterFilter(e))}refreshAfterSort(e){const t=this.storeUtils.isServerSideSortOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.storeUtils.isServerSideSortAllLevels()||t&&i){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(n=>n.refreshAfterSort(e))}applyTransaction(e){switch(this.getState()){case Ht.STATE_FAILED:return{status:Os.StoreLoadingFailed};case Ht.STATE_LOADING:return{status:Os.StoreLoading};case Ht.STATE_WAITING_TO_LOAD:return{status:Os.StoreWaitingToLoad}}const t=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(t){const n={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info};if(!t(n))return{status:Os.Cancelled}}const i={status:Os.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,i),this.executeRemove(e,i,s),this.executeUpdate(e,i,s),this.filterAndSortNodes(),this.updateSelection(s),i}updateSelection(e){if(e.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});const i={type:E.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(i)}}executeAdd(e,t){const{add:i,addIndex:s}=e;if(A.missingOrEmpty(i))return;typeof s=="number"&&s>=0?i.reverse().forEach(o=>{const a=this.createDataNode(o,s);t.add.push(a)}):i.forEach(o=>{const a=this.createDataNode(o);t.add.push(a)})}executeRemove(e,t,i){const{remove:s}=e;if(s==null)return;const n={};s.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&i.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],t.remove.push(a),this.nodeManager.removeNode(a))}),this.allRowNodes=this.allRowNodes.filter(o=>!n[o.id])}executeUpdate(e,t,i){const{update:s}=e;s!=null&&s.forEach(n=>{const o=this.lookupRowNode(n);o&&(this.blockUtils.updateDataIntoRowNode(o,n),!o.selectable&&o.isSelected()&&i.push(o),t.update.push(o))})}lookupRowNode(e){const t=this.gridOptionsService.getCallback("getRowId");let i;if(t!=null){const s=this.level,n=this.parentRowNode.getGroupKeys(),o=t({data:e,parentKeys:n.length>0?n:void 0,level:s});if(i=this.allNodesMap[o],!i)return console.error(`AG Grid: could not find row id=${o}, data item was not found for this id`),null}else if(i=this.allRowNodes.find(s=>s.data===e),!i)return console.error("AG Grid: could not find data item as object was not found",e),null;return i}addStoreStates(e){e.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}refreshStore(e){if(e){const t=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(t)}this.scheduleLoad(),this.fireStoreUpdatedEvent()}retryLoads(){this.getState()===Ht.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(e=>e.retryLoads())}scheduleLoad(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()}fireStoreUpdatedEvent(){const e={type:E.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}getRowCount(){return this.nodesAfterSort.length}getTopLevelRowDisplayedIndex(e){return this.nodesAfterSort[e].rowIndex}isLastRowIndexKnown(){return this.getState()==Ht.STATE_LOADED}getRowNodesInRange(e,t){const i=[];let s=!1;return A.missing(e)&&(s=!0),this.nodesAfterSort.forEach(o=>{const a=o===e||o===t;(s||a)&&i.push(o),a&&(s=!s)}),s?[]:i}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}}to([S("ssrmStoreUtils")],Bs.prototype,"storeUtils",void 0);to([S("ssrmBlockUtils")],Bs.prototype,"blockUtils",void 0);to([S("columnModel")],Bs.prototype,"columnModel",void 0);to([S("rowNodeBlockLoader")],Bs.prototype,"rowNodeBlockLoader",void 0);to([S("rowNodeSorter")],Bs.prototype,"rowNodeSorter",void 0);to([S("sortController")],Bs.prototype,"sortController",void 0);to([S("selectionService")],Bs.prototype,"selectionService",void 0);to([S("ssrmNodeManager")],Bs.prototype,"nodeManager",void 0);to([S("filterManager")],Bs.prototype,"filterManager",void 0);to([S("ssrmTransactionManager")],Bs.prototype,"transactionManager",void 0);to([U],Bs.prototype,"postConstruct",null);to([ft],Bs.prototype,"destroyRowNodes",null);var Y0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class gc extends j{constructor(e,t,i){super(),this.loadingNodes=new Set,this.checkForLoadQueued=!1,this.loaderTimeout=void 0,this.nextBlockToLoad=void 0,this.parentNode=t,this.cache=e,this.storeParams=i}init(){this.addManagedListener(this.rowNodeBlockLoader,Ca.BLOCK_LOADED_EVENT,()=>this.queueLoadAction())}isRowLoading(e){return this.loadingNodes.has(e)}getBlockToLoad(){var e;const t=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow();for(let l=t;l<=i;l++){const c=this.cache.getNodeCachedByDisplayIndex(l);if(!c)continue;const d=this.cache.getNodes().getBy("node",c);if(d&&!this.isRowLoading(d.index)&&(c.__needsRefreshWhenVisible||c.stub&&!c.failedLoad))return this.getBlockStartIndexForIndex(d.index)}const s=this.cache.getNodesToRefresh();let n=null,o=Number.MAX_SAFE_INTEGER;s.forEach(l=>{if(l.rowIndex==null){n=l;return}const c=Math.abs(t-l.rowIndex),d=Math.abs(l.rowIndex-i);c<o&&(n=l,o=c),d<o&&(n=l,o=d)});const a=(e=this.cache.getNodes().getBy("node",n))===null||e===void 0?void 0:e.index;return a==null?void 0:this.getBlockStartIndexForIndex(a)}reset(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0}executeLoad(e,t){var i;const s=this.cache.getSsrmParams(),n={startRow:e,endRow:t,rowGroupCols:s.rowGroupCols,valueCols:s.valueCols,pivotCols:s.pivotCols,pivotMode:s.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:s.filterModel,sortModel:s.sortModel},o=()=>{for(let h=0;h<t-e;h++)this.loadingNodes.delete(e+h)},a=()=>{for(let h=0;h<t-e;h++)this.loadingNodes.add(e+h)},l=h=>{this.rowNodeBlockLoader.loadComplete(),this.cache.onLoadSuccess(e,t-e,h),o(),this.queueLoadAction()},c=()=>{this.rowNodeBlockLoader.loadComplete(),this.cache.onLoadFailed(e,t-e),o(),this.queueLoadAction()},d={request:n,successCallback:(h,u)=>l({rowData:h,rowCount:u}),success:l,failCallback:c,fail:c,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};a(),(i=this.cache.getSsrmParams().datasource)===null||i===void 0||i.getRows(d)}getNextBlockToLoad(){const e=this.getBlockToLoad();return e!=null&&e<0&&this.getBlockToLoad(),e!=null?[String(e),e+this.getBlockSize()]:null}queueLoadCheck(){this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask(()=>{this.checkForLoadQueued=!1,this.queueLoadAction()}))}queueLoadAction(){var e;const t=this.getNextBlockToLoad();if(!t){window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,this.nextBlockToLoad=void 0;return}if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==t[0]&&this.nextBlockToLoad[1]!==t[1]){this.nextBlockToLoad=t,window.clearTimeout(this.loaderTimeout);const[i,s]=this.nextBlockToLoad,n=Number(i);this.loaderTimeout=window.setTimeout(()=>{this.cache.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(n,s),this.nextBlockToLoad=void 0)},(e=this.gridOptionsService.getNum("blockLoadDebounceMillis"))!==null&&e!==void 0?e:0)}}attemptLoad(e,t){const i=this.rowNodeBlockLoader.getAvailableLoadingCount();i!=null&&i===0||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,t),this.queueLoadAction())}getBlockSize(){return this.storeParams.cacheBlockSize||gc.DEFAULT_BLOCK_SIZE}getBlockStartIndexForIndex(e){const t=this.getBlockSize();return e-e%t}getBlockBoundsForIndex(e){const t=this.getBlockStartIndexForIndex(e),i=this.getBlockSize();return[t,t+i]}}gc.DEFAULT_BLOCK_SIZE=100;Y0([S("gridApi")],gc.prototype,"api",void 0);Y0([S("columnApi")],gc.prototype,"columnApi",void 0);Y0([S("rowNodeBlockLoader")],gc.prototype,"rowNodeBlockLoader",void 0);Y0([U],gc.prototype,"init",null);class wj{constructor(...e){if(e.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=e,this.maps=new Map(this.indexes.map(t=>[t,new Map]))}getBy(e,t){const i=this.maps.get(e);if(!i)throw new Error(`AG Grid: ${String(e)} not found`);return i.get(t)}set(e){this.indexes.forEach(t=>{const i=this.maps.get(t);if(!i)throw new Error(`AG Grid: ${String(t)} not found`);i.set(e[t],e)})}delete(e){this.indexes.forEach(t=>{const i=this.maps.get(t);if(!i)throw new Error(`AG Grid: ${String(t)} not found`);i.delete(e[t])})}clear(){this.maps.forEach(e=>e.clear())}getIterator(e){const t=this.maps.get(e);if(!t)throw new Error(`AG Grid: ${String(e)} not found`);return t.values()}forEach(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)e(i.value)}find(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)if(e(i.value))return i.value}filter(e){const t=this.getIterator(this.indexes[0]);let i;const s=[];for(;(i=t.next())&&!i.done;)e(i.value)&&s.push(i.value);return s}}var Cp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ua extends j{constructor(e,t,i){super(),this.live=!0,this.store=e,this.numberOfRows=t,this.isLastRowKnown=!1,this.storeParams=i}init(){this.nodeMap=new wj("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new gc(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.isMasterDetail()}destroyRowNodes(){this.numberOfRows=0,this.nodeMap.forEach(e=>this.blockUtils.destroyRowNode(e.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1}getRowByDisplayIndex(e){var t,i,s,n;if(!this.store.isDisplayIndexInStore(e))return;const o=this.nodeDisplayIndexMap.get(e);if(o)return(o.stub||o.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),o;if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);const a=this.nodeDisplayIndexMap.get(e-1);if(a){if(this.isMasterDetail&&a.master&&a.expanded)return a.detailNode;if(a.expanded&&(!((t=a.childStore)===null||t===void 0)&&t.isDisplayIndexInStore(e)))return(i=a.childStore)===null||i===void 0?void 0:i.getRowUsingDisplayIndex(e);const u=this.nodeMap.getBy("node",a);return this.createStubNode(u.index+1,e)}const l=this.getSurroundingNodesByDisplayIndex(e);if(l==null){const u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(u,e)}const{previousNode:c,nextNode:d}=l;if(c&&c.node.expanded&&(!((s=c.node.childStore)===null||s===void 0)&&s.isDisplayIndexInStore(e)))return(n=c.node.childStore)===null||n===void 0?void 0:n.getRowUsingDisplayIndex(e);if(d){const u=d.node.rowIndex-e,p=d.index-u;return this.createStubNode(p,e)}const h=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(h,e)}createStubNode(e,t){const i=this.store.getRowBounds(t),s=this.createRowAtIndex(e,null,n=>{n.setRowIndex(t),n.setRowTop(i.rowTop),this.nodeDisplayIndexMap.set(t,n)});return this.rowLoader.queueLoadCheck(),s}getRowByStoreIndex(e){var t;return(t=this.nodeMap.getBy("index",e))===null||t===void 0?void 0:t.node}skipDisplayIndexes(e,t,i){if(e===0)return;const s=this.gridOptionsService.getRowHeightAsNumber();t.skip(e),i.value+=e*s}setDisplayIndexes(e,t){this.nodeDisplayIndexMap.clear();const i={};this.nodeMap.forEach(o=>{i[o.index]=o.node});let s=-1;for(const o in i){const a=i[o],l=Number(o),c=l-1-s;this.skipDisplayIndexes(c,e,t),this.blockUtils.setDisplayIndex(a,e,t),this.nodeDisplayIndexMap.set(a.rowIndex,a),s=l}const n=this.numberOfRows-1-s;this.skipDisplayIndexes(n,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){if(e<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=e,t!=null&&(this.isLastRowKnown=t,t===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){var t;return(t=this.nodeDisplayIndexMap.get(e))!==null&&t!==void 0?t:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,i;return this.nodeMap.forEach(s=>{if(e>s.node.rowIndex){(i==null||i.node.rowIndex<s.node.rowIndex)&&(i=s);return}if(t==null||t.node.rowIndex>s.node.rowIndex){t=s;return}}),!i&&!t?null:{previousNode:i,nextNode:t}}getDisplayIndexFromStoreIndex(e){var t,i;const s=this.nodeMap.getBy("index",e);if(s)return s.node.rowIndex;let n,o;if(this.nodeMap.forEach(c=>{if(e>c.index){(o==null||o.index<c.index)&&(o=c);return}if(n==null||n.index>c.index){n=c;return}}),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!o)return this.store.getDisplayIndexStart()+e;const a=e-o.index;return((i=(t=o.node.childStore)===null||t===void 0?void 0:t.getDisplayIndexEnd())!==null&&i!==void 0?i:o.node.rowIndex)+a}createRowAtIndex(e,t,i){const s=this.nodeMap.getBy("index",e);if(s){const{node:o}=s;if(this.nodesToRefresh.delete(o),o.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,o))return this.blockUtils.updateDataIntoRowNode(o,t),o;if(this.getRowIdFunc==null&&o.group&&o.expanded)return o;this.destroyRowAtIndex(e)}if(t&&this.getRowIdFunc!=null){const o=this.getRowId(t),a=this.nodeMap.getBy("id",o);if(a){this.nodeMap.delete(a);const{node:l,index:c}=a;return this.blockUtils.updateDataIntoRowNode(l,t),this.nodeMap.set({id:l.id,node:l,index:e}),this.markBlockForVerify(c),l}}const n=this.blockUtils.createRowNode(this.store.getRowDetails());if(t!=null){const o=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(n,t,o,void 0),this.blockUtils.checkOpenByDefault(n),this.nodeManager.addRowNode(n)}return this.nodeMap.set({id:n.id,node:n,index:e}),i&&i(n),n}getBlockStates(){const e={},t={};this.nodeMap.forEach(({node:o,index:a})=>{var l;const c=this.rowLoader.getBlockStartIndexForIndex(a);!o.stub&&!o.failedLoad&&(e[c]=((l=e[c])!==null&&l!==void 0?l:0)+1);let d="loaded";o.failedLoad?d="failed":this.rowLoader.isRowLoading(c)?d="loading":(this.nodesToRefresh.has(o)||o.stub)&&(d="needsLoading"),t[c]||(t[c]=new Set),t[c].add(d)});const i={loading:4,failed:3,needsLoading:2,loaded:1},s=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),n={};return Object.entries(t).forEach(([o,a])=>{var l;const d=[...a].sort((p,f)=>{var g,m;return((g=i[p])!==null&&g!==void 0?g:0)-((m=i[f])!==null&&m!==void 0?m:0)})[0],h=Number(o)/this.rowLoader.getBlockSize(),u=s?`${s}-${h}`:String(h);n[u]={blockNumber:h,startRow:Number(o),endRow:Number(o)+this.rowLoader.getBlockSize(),pageStatus:d,loadedRowCount:(l=e[o])!==null&&l!==void 0?l:0}}),n}destroyRowAtIndex(e){const t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.delete(t.node),this.blockUtils.destroyRowNode(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){const[t,i]=this.rowLoader.getBlockBoundsForIndex(e);this.nodeMap.filter(n=>n.index>=t&&n.index<i).forEach(({node:n})=>{n.__needsRefreshWhenVisible=!0})}doesNodeMatch(e,t){if(t.stub)return!1;if(this.getRowIdFunc!=null){const i=this.getRowId(e);return t.id===i}return t.data===e}purgeStubsOutsideOfViewport(){const e=this.api.getFirstDisplayedRow(),t=this.api.getLastDisplayedRow(),i=this.rowLoader.getBlockStartIndexForIndex(e),[s,n]=this.rowLoader.getBlockBoundsForIndex(t);this.nodeMap.forEach(o=>{this.rowLoader.isRowLoading(o.index)||o.node.failedLoad||o.node.stub&&(o.index<i||o.index>n)&&this.destroyRowAtIndex(o.index)})}getBlocksDistanceFromRow(e,t){const i={};return e.forEach(({node:s,index:n})=>{const[o,a]=this.rowLoader.getBlockBoundsForIndex(n);if(o in i)return;const l=Math.abs(s.rowIndex-t);let c;const d=this.nodeMap.getBy("index",[a-1]);d&&(c=Math.abs(d.node.rowIndex-t));const h=c==null||l<c?l:c;i[o]=h}),Object.entries(i)}purgeExcessRows(){var e;if(this.purgeStubsOutsideOfViewport(),this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)return;const t=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),s=new Set,n=new Set;this.nodeMap.forEach(({index:g,node:m})=>{const v=this.rowLoader.getBlockStartIndexForIndex(g);s.add(v),m.rowIndex>=t&&m.rowIndex<=i&&n.add(v)});const o=Math.max(n.size,(e=this.storeParams.maxBlocksInCache)!==null&&e!==void 0?e:0),l=s.size-o;if(l<=0)return;let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;n.forEach(g=>{c>g&&(c=g),d<g&&(d=g)});const h=this.nodeMap.filter(({node:g,index:m})=>{const v=this.rowLoader.getBlockStartIndexForIndex(m);return!(v>=c&&v<=d)&&!this.isNodeCached(g)});if(h.length===0)return;const u=t+(i-t)/2,p=this.getBlocksDistanceFromRow(h,u),f=this.rowLoader.getBlockSize();p.sort((g,m)=>Math.sign(m[1]-g[1]));for(let g=0;g<Math.min(l,p.length);g++){const m=Number(p[g][0]);for(let v=m;v<m+f;v++){const C=this.nodeMap.getBy("index",v);!C||this.isNodeCached(C.node)||this.destroyRowAtIndex(v)}}}isNodeFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();return!t||t.rowPinned!=null?!1:t.rowIndex===e.rowIndex}isNodeCached(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)}extractDuplicateIds(e){if(!this.getRowIdFunc==null)return[];const t=new Set,i=new Set;return e.forEach(s=>{const n=this.getRowId(s);if(t.has(n)){i.add(n);return}t.add(n)}),[...i]}onLoadSuccess(e,t,i){var s;if(!this.live)return;const n=(s=i.groupLevelInfo)!==null&&s!==void 0?s:i.storeInfo;if(this.store.setStoreInfo(n),this.getRowIdFunc!=null){const l=this.extractDuplicateIds(i.rowData);if(l.length>0){const c=l.join(", ");console.warn(`AG Grid: Unable to display rows as duplicate row ids (${c}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`),this.onLoadFailed(e,t);return}}const o=this.nodesToRefresh.size>0;i.rowData.forEach((l,c)=>{var d;const h=e+c,u=this.nodeMap.getBy("index",h);if(!((d=u==null?void 0:u.node)===null||d===void 0)&&d.stub){this.createRowAtIndex(h,l);return}if(u&&this.doesNodeMatch(l,u.node)){this.blockUtils.updateDataIntoRowNode(u.node,l),this.nodesToRefresh.delete(u.node),u.node.__needsRefreshWhenVisible=!1;return}this.createRowAtIndex(h,l)});const a=this.nodesToRefresh.size===0;if(o&&a&&this.fireRefreshFinishedEvent(),i.rowCount!=null&&i.rowCount!==-1)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(t>i.rowData.length)this.numberOfRows=e+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const l=e+i.rowData.length+1;l>this.numberOfRows&&(this.numberOfRows=l)}this.isLastRowKnown&&this.nodeMap.filter(c=>c.index>=this.numberOfRows).forEach(c=>this.destroyRowAtIndex(c.index)),this.fireStoreUpdatedEvent()}fireRefreshFinishedEvent(){this.nodesToRefresh.size===0&&this.store.fireRefreshFinishedEvent()}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){var i;if(!this.live)return;const s=this.nodesToRefresh.size>0;for(let o=e;o<e+t&&o<this.getRowCount();o++){let{node:a}=(i=this.nodeMap.getBy("index",o))!==null&&i!==void 0?i:{};a&&this.nodesToRefresh.delete(a),(!a||!a.stub)&&(a&&!a.stub&&this.destroyRowAtIndex(o),a=this.createRowAtIndex(o)),a.__needsRefreshWhenVisible=!1,a.failedLoad=!0}const n=this.nodesToRefresh.size===0;s&&n&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)}),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){if(this.getRowIdFunc==null)return null;const{level:t}=this.store.getRowDetails(),i=this.store.getParentNode().getGroupKeys(),s=this.getRowIdFunc({data:e,parentKeys:i.length>0?i:void 0,level:t});return String(s)}updateRowNodes(e){if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");const t=[];return e.forEach(i=>{const s=this.getRowId(i),n=this.nodeMap.getBy("id",s);n&&(this.blockUtils.updateDataIntoRowNode(n.node,i),t.push(n.node))}),t}insertRowNodes(e,t){const i=t==null&&this.isLastRowKnown?this.store.getRowCount():t;if(i==null||this.store.getRowCount()<i)return[];if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");const s={};e.forEach(l=>{const c=this.getRowId(l);c&&this.isNodeInCache(c)||(s[c]=l)});const n=Object.values(s);let o=n.length;if(o===0)return[];const a=this.nodeMap.filter(l=>l.index>=i);return a.forEach(l=>this.nodeMap.delete(l)),a.forEach(l=>{this.nodeMap.set({node:l.node,index:l.index+o,id:l.id})}),this.numberOfRows+=o,n.map((l,c)=>this.createRowAtIndex(i+c,l))}getOrderedNodeMap(){const e={};return this.nodeMap.forEach(t=>e[t.index]=t),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}removeRowNodes(e){if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");const t=[],i=[];let s=0;const n=[...e],o=this.getOrderedNodeMap();let a=-1;for(let l in o){a+=1;const c=o[l],d=n.findIndex(u=>u===c.id);if(d!==-1){n.splice(d,1),this.destroyRowAtIndex(Number(l)),t.push(c.node),s+=1;continue}if(s===0)continue;const h=Number(l);a!==h&&i.push(c.node),this.nodeMap.delete(o[l]),this.nodeMap.set({id:c.id,node:c.node,index:h-s})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:s,n.length>0&&i.length>0&&(i.forEach(l=>l.__needsRefreshWhenVisible=!0),this.rowLoader.queueLoadCheck()),t}}Cp([S("gridApi")],ua.prototype,"api",void 0);Cp([S("ssrmBlockUtils")],ua.prototype,"blockUtils",void 0);Cp([S("focusService")],ua.prototype,"focusService",void 0);Cp([S("ssrmNodeManager")],ua.prototype,"nodeManager",void 0);Cp([U],ua.prototype,"init",null);Cp([ft],ua.prototype,"destroyRowNodes",null);var yp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ea extends j{constructor(e,t,i){super(),this.idSequence=new Ni,this.ssrmParams=e,this.parentRowNode=i,this.storeParams=t,this.level=i.level+1,this.group=e.rowGroupCols?this.level<e.rowGroupCols.length:!1,this.leafGroup=e.rowGroupCols?this.level===e.rowGroupCols.length-1:!1,this.info={}}init(){let e=1;if(this.level===0&&(e=this.storeUtils.getServerSideInitialRowCount()),this.cache=this.createManagedBean(new ua(this,e,this.storeParams)),!this.gridOptionsService.isTreeData()&&this.group){const i=this.ssrmParams.rowGroupCols[this.level];this.groupField=i.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}}destroyRowNodes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)}applyTransaction(e){var t,i,s;const n=this.gridOptionsService.getCallback("getRowId");if(!n)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:Os.Cancelled};const o=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(o){const d={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info};if(!o(d))return{status:Os.Cancelled}}let a;!((t=e.update)===null||t===void 0)&&t.length&&(a=this.cache.updateRowNodes(e.update));let l;if(!((i=e.add)===null||i===void 0)&&i.length){let d=e.addIndex;d!=null&&d<0&&(d=void 0),l=this.cache.insertRowNodes(e.add,d)}let c;if(!((s=e.remove)===null||s===void 0)&&s.length){const d=e.remove.map(u=>n({level:this.level,parentKeys:this.parentRowNode.getGroupKeys(),data:u})),h=[...new Set(d)];c=this.cache.removeRowNodes(h)}return this.updateSelectionAfterTransaction(a,c),{status:Os.Applied,update:a,add:l,remove:c}}updateSelectionAfterTransaction(e,t){const i=[];e==null||e.forEach(s=>{s.isSelected()&&!s.selectable&&i.push(s)}),t==null||t.forEach(s=>{s.isSelected()&&i.push(s)}),i.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(e=>this.blockUtils.clearDisplayIndex(e.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value,this.cache.setDisplayIndexes(e,t),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e,t=new Ni){e(this,t.next()),this.cache.getNodes().forEach(i=>{const s=i.node.childStore;s&&s.forEachStoreDeep(e,t)})}forEachNodeDeep(e,t=new Ni){this.cache.getNodes().forEach(i=>{e(i.node,t.next());const s=i.node.childStore;s&&s.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e,t=new Ni){const i=this.cache.getOrderedNodeMap();for(let s in i){const n=i[s];e(n.node,t.next());const o=n.node.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(e,t)}}retryLoads(){this.cache.getNodes().forEach(({node:e})=>{e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)}),this.forEachChildStoreShallow(e=>e.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){var t;if(!this.isDisplayIndexInStore(e))return null;const i=this.cache.getNodeCachedByDisplayIndex(e);if(i){const c=this.blockUtils.extractRowBounds(i,e);if(c)return c}const{previousNode:s,nextNode:n}=(t=this.cache.getSurroundingNodesByDisplayIndex(e))!==null&&t!==void 0?t:{};if(s){const c=this.blockUtils.extractRowBounds(s.node,e);if(c!=null)return c}const o=this.gridOptionsService.getRowHeightAsNumber();if(n){const c=(n.node.rowIndex-e)*o;return{rowTop:n.node.rowTop-c,rowHeight:o}}const a=this.topPx+this.heightPx,l=(this.getDisplayIndexEnd()-e)*o;return{rowTop:a-l,rowHeight:o}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;let t=Number.MAX_SAFE_INTEGER,i=null,s=Number.MAX_SAFE_INTEGER,n=null;if(this.cache.getNodes().forEach(({node:c})=>{const d=Math.abs(e-c.rowTop);if(c.rowTop<e){d<t&&(t=d,i=c);return}d<s&&(s=d,n=c)}),i=i,n=n,i){const c=this.blockUtils.getIndexAtPixel(i,e);if(c!=null)return c}const o=this.gridOptionsService.getRowHeightAsNumber();if(n){const c=n.rowTop,d=Math.ceil((c-e)/o);return n.rowIndex-d}const a=this.topPx+this.heightPx,l=Math.floor((a-e)/o);return this.getDisplayIndexEnd()-l}getChildStore(e){return this.storeUtils.getChildStore(e,this,t=>{const i=this.cache.getNodes().find(s=>s.node.key==t);return i?i.node:null})}forEachChildStoreShallow(e){this.cache.getNodes().forEach(({node:t})=>{t.childStore&&e(t.childStore)})}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){const i=this.cache.getRowCount();this.destroyBean(this.cache),this.cache=this.createManagedBean(new ua(this,i,this.storeParams)),this.fireStoreUpdatedEvent();return}this.forEachChildStoreShallow(i=>i.refreshAfterSort(e))}refreshAfterFilter(e){if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.refreshStore(!0);return}this.forEachChildStoreShallow(i=>i.refreshAfterFilter(e))}refreshStore(e){if(e){this.destroyBean(this.cache),this.cache=this.createManagedBean(new ua(this,1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){const t=this.cache.getDisplayIndexFromStoreIndex(e);return t??e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){return A.missing(e),this.cache.getNodes().filter(({node:i})=>i.rowIndex>=e.rowIndex&&i.rowIndex<=t.rowIndex).map(({node:i})=>i)}addStoreStates(e){e.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){const e={type:E.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}fireRefreshFinishedEvent(){const e={type:E.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}}yp([S("ssrmBlockUtils")],Ea.prototype,"blockUtils",void 0);yp([S("ssrmStoreUtils")],Ea.prototype,"storeUtils",void 0);yp([S("columnModel")],Ea.prototype,"columnModel",void 0);yp([S("selectionService")],Ea.prototype,"selectionService",void 0);yp([U],Ea.prototype,"init",null);yp([ft],Ea.prototype,"destroyRowNodes",null);var Uo=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let ln=class extends j{constructor(){super(...arguments),this.onRowHeightChanged_debounced=A.debounce(this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1}ensureRowHeightsValid(){return!1}start(){this.started=!0;const e=this.gridOptionsService.get("serverSideDatasource");e&&this.setDatasource(e)}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}addEventListeners(){this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,E.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));const e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.verifyProps()}verifyProps(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){const e="AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.";A.doOnce(()=>console.warn(e),"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")){const e="AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.";A.doOnce(()=>console.warn(e),"SSRM.SelectionNeedsRowNodeIdFunc")}}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}isLastRowIndexKnown(){const e=this.getRootStore();return e?e.isLastRowIndexKnown():!1}onColumnEverything(){if(!this.storeParams){this.resetRootStore();return}const e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=d=>{const h={};d.oldCols.forEach(f=>h[f.id]=f);const u=d.newCols.every(f=>{const g=h[f.id];return g&&delete h[f.id],g&&g.field===f.field&&g.aggFunc===f.aggFunc}),p=!d.allowRemovedColumns&&!!Object.values(h).length;return u&&!p},n=!A.jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel()),o=!s({oldCols:this.storeParams.rowGroupCols,newCols:e}),a=!s({oldCols:this.storeParams.pivotCols,newCols:i}),l=!!(e!=null&&e.length)&&!s({oldCols:this.storeParams.valueCols,newCols:t,allowRemovedColumns:!0});if(n||o||a||l)this.resetRootStore();else{const d=this.createStoreParams();this.storeParams.rowGroupCols=d.rowGroupCols,this.storeParams.pivotCols=d.pivotCols,this.storeParams.valueCols=d.valueCols}}destroyRootStore(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);const i=this.getRootStore();i&&(i.refreshAfterSort(t),this.onStoreUpdated())}resetRootStore(){this.destroyRootStore(),this.rootNode=new oe(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds());const e={type:E.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.dispatchModelUpdated(!0)}columnsToValueObjects(e){return e.map(t=>({id:t.getId(),aggFunc:t.getAggFunc(),displayName:this.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}))}createStoreParams(){const e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=this.gridOptionsService.isGetRowHeightFunction();return{valueCols:t,rowGroupCols:e,pivotCols:i,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new Ni,dynamicRowHeight:s}}getParams(){return this.storeParams}dispatchModelUpdated(e=!1){const t={type:E.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1};this.eventService.dispatchEvent(t)}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const e=this.getRootStore();e&&e.setDisplayIndexes(new Ni,{value:0})}retryLoads(){const e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){const t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}expandAll(e){this.pauseStoreUpdateListening=!0,this.forEachNode(t=>{t.stub||t.hasChildren()&&t.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);const i=this.getRootStore();i&&(i.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore}getRowCount(){const e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){const e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){const t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){const t=this.getRootStore();return t?t.getRowBounds(e):{rowTop:0,rowHeight:this.gridOptionsService.getRowHeightAsNumber()}}getBlockStates(){const e=this.getRootStore();if(!e)return;const t={};return e.forEachStoreDeep(i=>{if(i instanceof Bs){const{id:s,state:n}=i.getBlockStateJson();t[s]=n}else if(i instanceof Ea)Object.entries(i.getBlockStates()).forEach(([s,n])=>{t[s]=n});else throw new Error("AG Grid: Unsupported store type")}),t}getRowIndexAtPixel(e){const t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}isRowsToRender(){return this.getRootStore()!=null&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){const t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachNodeAfterFilterAndSort(e){const t=this.getRootStore();t&&t.forEachNodeDeepAfterFilterAndSort(e)}executeOnStore(e,t){const i=this.getRootStore();if(!i)return;const s=i.getChildStore(e);s&&t(s)}refreshStore(e={}){const t=e.route?e.route:[];this.executeOnStore(t,i=>i.refreshStore(e.purge==!0))}getStoreState(){const e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){if(!A.exists(e))return[];if(!t)return[e];const i=e.rowIndex,s=t.rowIndex;if(i===null||s===null)return[e];const n=[],[o,a]=[i,s].sort((c,d)=>c-d);return this.forEachNode(c=>{const d=c.rowIndex;d==null||c.stub||d>=o&&d<=a&&n.push(c)}),!n.every((c,d,h)=>d===0?c.rowIndex===o:h[d-1].rowIndex===c.rowIndex-1)||n.length!==a-o+1?[e]:n}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i),i.detailNode&&i.detailNode.id===e&&(t=i.detailNode)}),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){const i=this.getRootStore();if(i){if(i instanceof Ea){i.setRowCount(e,t);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}}};Uo([S("columnModel")],ln.prototype,"columnModel",void 0);Uo([S("filterManager")],ln.prototype,"filterManager",void 0);Uo([S("rowRenderer")],ln.prototype,"rowRenderer",void 0);Uo([S("ssrmSortService")],ln.prototype,"sortListener",void 0);Uo([S("ssrmNodeManager")],ln.prototype,"nodeManager",void 0);Uo([S("ssrmStoreFactory")],ln.prototype,"storeFactory",void 0);Uo([S("beans")],ln.prototype,"beans",void 0);Uo([ft],ln.prototype,"destroyDatasource",null);Uo([U],ln.prototype,"addEventListeners",null);Uo([ft],ln.prototype,"destroyRootStore",null);ln=Uo([ee("rowModel")],ln);var X0=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let bu=class extends j{loadFromDatasource(e){const{storeParams:t,parentBlock:i,parentNode:s}=e,n=s.getGroupKeys();if(!t.datasource)return;const o={startRow:e.startRow,endRow:e.endRow,rowGroupCols:t.rowGroupCols,valueCols:t.valueCols,pivotCols:t.pivotCols,pivotMode:t.pivotMode,groupKeys:n,filterModel:t.filterModel,sortModel:t.sortModel},a={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:o,parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout(()=>{if(!t.datasource||!i.isAlive()){e.failCallback();return}t.datasource.getRows(a)},0)}getChildStore(e,t,i){if(A.missingOrEmpty(e))return t;const s=e[0],n=i(s);if(n){const o=e.slice(1,e.length),a=n.childStore;return a?a.getChildStore(o):null}return null}isServerRefreshNeeded(e,t,i){if(i.valueColChanged||i.secondaryColChanged)return!0;const s=e.level+1;if(!(s<t.length))return!0;const a=t[s].id;return i.changedColumns.indexOf(a)>-1?!0:this.columnModel.getAllGridColumns().filter(h=>h.getColDef().showRowGroup&&i.changedColumns.includes(h.getId())).map(h=>h.getColDef().showRowGroup).some(h=>h===!0||h===a)}getServerSideInitialRowCount(){const e=this.gridOptionsService.getNum("serverSideInitialRowCount");return typeof e=="number"&&e>0?e:1}assertRowModelIsServerSide(e){return this.gridOptionsService.isRowModelType("serverSide")?!0:(A.doOnce(()=>console.warn(`AG Grid: The '${e}' property can only be used with the Server Side Row Model.`),e),!1)}assertNotTreeData(e){return this.gridOptionsService.is("treeData")?(A.doOnce(()=>console.warn(`AG Grid: The '${e}' property cannot be used while using tree data.`),e+"_TreeData"),!1):!0}isServerSideSortAllLevels(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")}isServerSideOnlyRefreshFilteredGroups(){return this.gridOptionsService.is("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")}isServerSideSortOnServer(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")}isServerSideFilterOnServer(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")}};X0([S("columnApi")],bu.prototype,"columnApi",void 0);X0([S("columnModel")],bu.prototype,"columnModel",void 0);X0([S("gridApi")],bu.prototype,"gridApi",void 0);bu=X0([ee("ssrmStoreUtils")],bu);var Sp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const bj="ag-Grid-MissingKey";let Il=class extends j{postConstruct(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsService.isTreeData(),this.usingMasterDetail=this.gridOptionsService.isMasterDetail()}createRowNode(e){const t=new oe(this.beans),i=e.rowHeight!=null?e.rowHeight:this.rowHeight;return t.setRowHeight(i),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn),t}destroyRowNodes(e){e&&e.forEach(t=>this.destroyRowNode(t))}destroyRowNode(e,t=!1){e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),e.id!=null&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();const t=this.gridOptionsService.get("getServerSideGroupKey");e.hasChildren()&&t!=null&&(e.key=t(e.data)),!e.hasChildren()&&e.childStore!=null&&(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)}setRowGroupInfo(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),(e.key===null||e.key===void 0)&&A.doOnce(()=>{console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn(`column = ${e.rowGroupColumn.getId()}`),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.is("groupIncludeFooter")&&(e.createFooter(),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){const t=this.gridOptionsService.get("isRowMaster");t!=null?e.master=t(e.data):e.master=!0}updateDataIntoRowNode(e,t){e.updateData(t),this.usingTreeData?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e)):e.group?this.setChildCountIntoRowNode(e):this.usingMasterDetail}setDataIntoRowNode(e,t,i,s){var n;e.stub=!1,A.exists(t)?(e.setDataAndId(t,i),this.usingTreeData?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(this.usingTreeData||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),A.exists(t)&&(e.setRowHeight(this.gridOptionsService.getRowHeightForNode(e,!1,s).height),(n=e.sibling)===null||n===void 0||n.setRowHeight(this.gridOptionsService.getRowHeightForNode(e.sibling,!1,s).height))}setChildCountIntoRowNode(e){const t=this.gridOptionsService.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){const t=this.columnModel.getGroupDisplayColumns(),i=this.gridOptionsService.isTreeData();t.forEach(s=>{if(e.groupData==null&&(e.groupData={}),i)e.groupData[s.getColId()]=e.key;else if(s.isRowGroupDisplayed(e.rowGroupColumn.getId())){const n=this.valueService.getValue(e.rowGroupColumn,e);e.groupData[s.getColId()]=n}})}clearDisplayIndex(e){e.clearRowTopAndRowIndex(),e.hasChildren()&&A.exists(e.childStore)&&e.childStore.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(e,t,i){if(e.setRowIndex(t.next()),e.setRowTop(i.value),i.value+=e.rowHeight,e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.next()),e.detailNode.setRowTop(i.value),i.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.hasChildren()&&A.exists(e.childStore)){const o=e.childStore;e.expanded?o.setDisplayIndexes(t,i):o.clearDisplayIndexes()}}binarySearchForDisplayIndex(e,t){let i=0,s=t.length-1;if(A.missing(s)||A.missing(i)){console.warn(`AG Grid: error: topPointer = ${s}, bottomPointer = ${i}`);return}for(;;){const n=Math.floor((i+s)/2),o=t[n];if(o.rowIndex===e)return o;const a=o.master&&o.expanded,l=o.detailNode;if(a&&l&&l.rowIndex===e)return o.detailNode;const c=o.childStore;if(o.expanded&&c&&c.isDisplayIndexInStore(e))return c.getRowUsingDisplayIndex(e);if(o.rowIndex<e)i=n+1;else if(o.rowIndex>e)s=n-1;else{console.warn(`AG Grid: error: unable to locate rowIndex = ${e} in cache`);return}}}extractRowBounds(e,t){const i=s=>({rowHeight:s.rowHeight,rowTop:s.rowTop});if(e.rowIndex===t)return i(e);if(e.hasChildren()&&e.expanded&&A.exists(e.childStore)){const s=e.childStore;if(s.isDisplayIndexInStore(t))return s.getRowBounds(t)}else if(e.master&&e.expanded&&A.exists(e.detailNode)&&e.detailNode.rowIndex===t)return i(e.detailNode)}getIndexAtPixel(e,t){if(e.isPixelInRange(t))return e.rowIndex;const i=e.master&&e.expanded,s=e.detailNode;if(i&&s&&s.isPixelInRange(t))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&A.exists(e.childStore)){const n=e.childStore;if(n.isPixelInRange(t))return n.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){const t=[];let i=e;for(;i&&i.level>=0;)i.key===""?t.push(bj):t.push(i.key),i=i.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){if(!e.isExpandable())return;const t=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(!t)return;const i={data:e.data,rowNode:e};t(i)&&window.setTimeout(()=>e.setExpanded(!0),0)}};Sp([S("valueService")],Il.prototype,"valueService",void 0);Sp([S("columnModel")],Il.prototype,"columnModel",void 0);Sp([S("ssrmNodeManager")],Il.prototype,"nodeManager",void 0);Sp([S("beans")],Il.prototype,"beans",void 0);Sp([U],Il.prototype,"postConstruct",null);Il=Sp([ee("ssrmBlockUtils")],Il);var v_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Yv=class{constructor(){this.rowNodes={}}addRowNode(e){const t=e.id;this.rowNodes[t]&&(console.warn(`AG Grid: Duplicate node id ${e.id}. Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`),console.warn("first instance",this.rowNodes[t].data),console.warn("second instance",e.data)),this.rowNodes[t]=e}removeNode(e){const t=e.id;this.rowNodes[t]&&(this.rowNodes[t]=void 0)}clear(){this.rowNodes={}}};v_([ft],Yv.prototype,"clear",null);Yv=v_([ee("ssrmNodeManager")],Yv);var Jd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let xa=class extends j{constructor(){super(...arguments),this.asyncTransactions=[]}postConstruct(){this.gridOptionsService.isRowModelType("serverSide")}applyTransactionAsync(e,t){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){const e=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const e=[],t=[],i=[];let s=!1;if(this.asyncTransactions.forEach(n=>{let o;if(this.serverSideRowModel.executeOnStore(n.transaction.route,l=>{o=l.applyTransaction(n.transaction)}),o==null&&(o={status:Os.StoreNotFound}),t.push(o),o.status==Os.StoreLoading){i.push(n);return}n.callback&&e.push(()=>n.callback(o)),o.status===Os.Applied&&(s=!0)}),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,s&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:E.EVENT_STORE_UPDATED})),t.length>0){const n={type:E.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(n)}}flushAsyncTransactions(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,i=>{t=i.applyTransaction(e)}),t){if(this.valueCache.onDataChanged(),t.remove){const i=t.remove.map(s=>s.id);this.selectionService.deleteSelectionStateFromParent(e.route||[],i)}return this.eventService.dispatchEvent({type:E.EVENT_STORE_UPDATED}),t}else return{status:Os.StoreNotFound}}};Jd([S("rowNodeBlockLoader")],xa.prototype,"rowNodeBlockLoader",void 0);Jd([S("valueCache")],xa.prototype,"valueCache",void 0);Jd([S("rowModel")],xa.prototype,"serverSideRowModel",void 0);Jd([S("rowRenderer")],xa.prototype,"rowRenderer",void 0);Jd([S("selectionService")],xa.prototype,"selectionService",void 0);Jd([U],xa.prototype,"postConstruct",null);xa=Jd([ee("ssrmTransactionManager")],xa);var Cm=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let hd=class extends j{postConstruct(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,E.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))}onRowGroupOpened(e){const t=e.node;if(t.expanded){if(t.master)this.createDetailNode(t);else if(A.missing(t.childStore)){const s=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(s,t))}}else this.gridOptionsService.is("purgeClosedRowNodes")&&A.exists(t.childStore)&&(t.childStore=this.destroyBean(t.childStore));const i={type:E.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(i)}createDetailNode(e){if(A.exists(e.detailNode))return e.detailNode;const t=new oe(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,A.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;const i=200,s=this.gridOptionsService.getRowHeightForNode(t).height;return t.rowHeight=s||i,e.detailNode=t,t}};Cm([S("rowModel")],hd.prototype,"serverSideRowModel",void 0);Cm([S("ssrmStoreFactory")],hd.prototype,"storeFactory",void 0);Cm([S("beans")],hd.prototype,"beans",void 0);Cm([U],hd.prototype,"postConstruct",null);hd=Cm([ee("ssrmExpandListener")],hd);var wp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Ll=class extends j{postConstruct(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))}extractSortModel(){const e=this.sortController.getSortModel();return this.gridOptionsService.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e}removeMultiColumnPrefixOnColumnIds(e){if(this.gridOptionsService.isGroupMultiAutoColumn()){const t=ma+"-";for(let i=0;i<e.length;++i)e[i].colId.indexOf(t)>-1&&(e[i].colId=e[i].colId.substr(t.length))}}replaceAutoGroupColumnWithActualRowGroupColumns(e){const t=e.find(i=>i.colId==ma);if(t){const i=e.indexOf(t);A.removeFromArray(e,t);const s=a=>e.filter(l=>l.colId===a.getColId()).length==0,n=a=>({colId:a.getId(),sort:t.sort}),o=this.columnModel.getRowGroupColumns().filter(s).map(n);A.insertArrayIntoArray(e,o,i)}}onSortChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.extractSortModel(),i=e.sortModel,s=this.findChangedColumnsInSort(t,i),n=this.listenerUtils.isSortingWithValueColumn(s),o=this.listenerUtils.isSortingWithSecondaryColumn(s),a={valueColChanged:n,secondaryColChanged:o,changedColumns:s};this.serverSideRowModel.refreshAfterSort(t,a)}findChangedColumnsInSort(e,t){let i=[];[e,t].forEach(o=>{if(o){const a=o.map(l=>l.colId);i=i.concat(a)}});const s=(o,a)=>{const l=o?o.sort:null,c=a?a.sort:null;return l!==c},n=(o,a)=>{const l=o?t.indexOf(o):-1,c=a?e.indexOf(a):-1;return l!==c};return i.filter(o=>{const a=t.find(c=>c.colId===o),l=e.find(c=>c.colId===o);return s(a,l)||n(a,l)})}};wp([S("sortController")],Ll.prototype,"sortController",void 0);wp([S("columnModel")],Ll.prototype,"columnModel",void 0);wp([S("rowModel")],Ll.prototype,"serverSideRowModel",void 0);wp([S("ssrmListenerUtils")],Ll.prototype,"listenerUtils",void 0);wp([U],Ll.prototype,"postConstruct",null);Ll=wp([ee("ssrmSortService")],Ll);var ym=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let ud=class extends j{postConstruct(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))}onFilterChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.filterManager.getFilterModel(),i=e?e.filterModel:{},s=this.findChangedColumns(t,i),n=this.listenerUtils.isSortingWithValueColumn(s),o=this.listenerUtils.isSortingWithSecondaryColumn(s),a={valueColChanged:n,secondaryColChanged:o,changedColumns:s};this.serverSideRowModel.refreshAfterFilter(t,a)}findChangedColumns(e,t){const i={};Object.keys(e).forEach(n=>i[n]=!0),Object.keys(t).forEach(n=>i[n]=!0);const s=[];return Object.keys(i).forEach(n=>{const o=JSON.stringify(e[n]),a=JSON.stringify(t[n]);o!=a&&s.push(n)}),s}};ym([S("rowModel")],ud.prototype,"serverSideRowModel",void 0);ym([S("filterManager")],ud.prototype,"filterManager",void 0);ym([S("ssrmListenerUtils")],ud.prototype,"listenerUtils",void 0);ym([U],ud.prototype,"postConstruct",null);ud=ym([ee("ssrmFilterListener")],ud);var NE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let jf=class{createStore(e,t){const i=this.getStoreParams(e,t),s=i.suppressInfiniteScroll?Bs:Ea;return new s(e,i,t)}getStoreParams(e,t){const i=this.getLevelSpecificParams(t),s=this.isInfiniteScroll(i),n=this.getBlockSize(s,i),o=this.getMaxBlocksInCache(s,e,i);return{suppressInfiniteScroll:!s,cacheBlockSize:n,maxBlocksInCache:o}}getMaxBlocksInCache(e,t,i){if(!e)return;const s=i&&i.maxBlocksInCache!=null?i.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache");if(s!=null&&s>=0){if(t.dynamicRowHeight){const o="AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";A.doOnce(()=>console.warn(o),"storeFactory.maxBlocksInCache.dynamicRowHeight");return}if(this.columnModel.isAutoRowHeightActive()){const o="AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";A.doOnce(()=>console.warn(o),"storeFactory.maxBlocksInCache.autoRowHeightActive");return}return s}}getBlockSize(e,t){if(!e)return;const i=t&&t.cacheBlockSize!=null?t.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");return i!=null&&i>0?i:100}getLevelSpecificParams(e){const t=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(!t)return;const i={level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()},s=t(i);return s.storeType!=null&&(s.suppressInfiniteScroll=s.storeType!=="partial"),s}isInfiniteScroll(e){return!(e&&e.suppressInfiniteScroll!=null?e.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())}isSuppressServerSideInfiniteScroll(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")}};NE([S("gridOptionsService")],jf.prototype,"gridOptionsService",void 0);NE([S("columnModel")],jf.prototype,"columnModel",void 0);jf=NE([ee("ssrmStoreFactory")],jf);var C_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let Xv=class{isSortingWithValueColumn(e){const t=this.columnModel.getValueColumns().map(i=>i.getColId());for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){if(!this.columnModel.getSecondaryColumns())return!1;const t=this.columnModel.getSecondaryColumns().map(i=>i.getColId());for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return!0;return!1}};C_([S("columnModel")],Xv.prototype,"columnModel",void 0);Xv=C_([ee("ssrmListenerUtils")],Xv);var y_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class qv extends j{constructor(){super(...arguments),this.selectedState={selectAll:!1,toggledNodes:new Set},this.lastSelected=null,this.selectAllUsed=!1,this.selectedNodes={}}init(){this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",e=>{this.rowSelection=e.currentValue})}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){const t={selectAll:!1,toggledNodes:new Set};if(typeof e!="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in e&&typeof e.selectAll=="boolean")t.selectAll=e.selectAll;else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in e&&Array.isArray(e.toggledNodes))e.toggledNodes.forEach(i=>{typeof i=="string"?t.toggledNodes.add(i):console.warn(`AG Grid: Provided ids must be of string type. Invalid id provided: ${i}`)});else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=t}deleteSelectionStateFromParent(e,t){if(this.selectedState.toggledNodes.size===0)return!1;let i=!1;return t.forEach(s=>{this.selectedState.toggledNodes.delete(s)&&(i=!0)}),i}setNodesSelected(e){if(e.nodes.length===0)return 0;const t=e.clearSelection&&e.newValue&&!e.rangeSelect;if(this.rowSelection!=="multiple"||t){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");const s=e.nodes[0];return e.newValue?(this.selectedNodes={[s.id]:s},this.selectedState={selectAll:!1,toggledNodes:new Set([s.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=s.id,1}const i=s=>{if(e.newValue?this.selectedNodes[s.id]=s:delete this.selectedNodes[s.id],e.newValue===this.selectedState.selectAll){this.selectedState.toggledNodes.delete(s.id);return}this.selectedState.toggledNodes.add(s.id)};if(e.rangeSelect&&this.lastSelected){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const s=e.nodes[0],n=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(s,n??null).forEach(i),this.lastSelected=s.id,1}return e.nodes.forEach(i),this.lastSelected=e.nodes[e.nodes.length-1].id,1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){const t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map(e=>e.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}clearOtherNodes(e,t){const i=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])},this.rowModel.forEachNode(n=>{n!==e&&n.selectThisNode(!1,void 0,t)});const s={type:E.EVENT_SELECTION_CHANGED,source:t};return this.eventService.dispatchEvent(s),i}isEmpty(){var e;return!this.selectedState.selectAll&&!(!((e=this.selectedState.toggledNodes)===null||e===void 0)&&e.size)}selectAllRowNodes(e){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0}deselectAllRowNodes(e){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}}getSelectAllState(e,t){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}}y_([S("rowModel")],qv.prototype,"rowModel",void 0);y_([U],qv.prototype,"init",null);var bp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Ej=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};class Fl extends j{constructor(){super(...arguments),this.selectedState={selectAllChildren:!1,toggledNodes:new Map},this.lastSelected=null}init(){this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,()=>this.removeRedundantState()),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.selectionService.reset())}getSelectedState(){const e=(t,i,s)=>{const n={nodeId:s};if(i<=this.columnModel.getRowGroupColumns().length&&(n.selectAllChildren=t.selectAllChildren),t.toggledNodes.size){const o=[];t.toggledNodes.forEach((a,l)=>{const c=e(a,i+1,l);o.push(c)}),n.toggledNodes=o}return n};return e(this.selectedState,0)}setSelectedState(e){const t=(i,s)=>{var n,o;if(typeof i!="object")throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in i&&typeof i.selectAllChildren!="boolean")throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in i){if(!Array.isArray(i.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!i.toggledNodes.every(h=>typeof h=="object"&&"nodeId"in h&&typeof h.nodeId=="string"))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}const a=(n=i.selectAllChildren)!==null&&n!==void 0?n:!s,l=(o=i.toggledNodes)===null||o===void 0?void 0:o.map(d=>[d.nodeId,t(d,a)]);if(l==null?void 0:l.some(([d,h])=>a===h.selectAllChildren&&h.toggledNodes.size===0))throw new Error(`
                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.
                    Please rebuild the selection state and reapply it.
                `);return{selectAllChildren:a,toggledNodes:new Map(l)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(i){console.error(i.message)}}deleteSelectionStateFromParent(e,t){let i=this.selectedState;const s=[...e];for(;i&&s.length;)i=i.toggledNodes.get(s.pop());if(!i)return!1;let n=!1;return t.forEach(o=>{i!=null&&i.toggledNodes.delete(o)&&(n=!0)}),n&&this.removeRedundantState(),n}setNodesSelected(e){const{nodes:t}=e,i=Ej(e,["nodes"]);if(t.length===0)return 0;if(e.rangeSelect){if(t.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const s=t[0],o=this.rowModel.getNodesInRangeForSelection(s,this.lastSelected).map(this.getRouteToNode).sort((l,c)=>c.length-l.length),a=new Set;return o.forEach(l=>{a.has(l[l.length-1])||(l.forEach(c=>a.add(c)),this.recursivelySelectNode(l,this.selectedState,Object.assign({node:s},i)))}),this.removeRedundantState(),this.lastSelected=s,1}return e.nodes.forEach(s=>{const n=this.getRouteToNode(s);this.recursivelySelectNode(n,this.selectedState,Object.assign(Object.assign({},i),{node:s}))}),this.removeRedundantState(),this.lastSelected=e.nodes[e.nodes.length-1],1}isNodeSelected(e){const t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected([e,...t],i){if(t.length===0){const s=i.toggledNodes.has(e.id);if(e.hasChildren()){const n=i.toggledNodes.get(e.id);if(n&&n.toggledNodes.size)return}return i.selectAllChildren?!s:s}if(i.toggledNodes.has(e.id)){const s=i.toggledNodes.get(e.id);if(s)return this.isNodePathSelected(t,s)}return!!i.selectAllChildren}getRouteToNode(e){const t=[];let i=e;for(;i.parent;)t.push(i),i=i.parent;return t.reverse()}removeRedundantState(){if(this.filterManager.isAnyFilterPresent())return;const e=(t=this.selectedState,i=this.serverSideRowModel.getRootStore(),s)=>{let n=!0,o=!0;return t.toggledNodes.forEach((a,l)=>{const c=this.rowModel.getRowNode(l);c||(n=!1);const d=c==null?void 0:c.childStore;if(!d){a.toggledNodes.size>0&&(o=!1);return}e(a,d,c)&&t.selectAllChildren===a.selectAllChildren&&t.toggledNodes.delete(l),a.toggledNodes.size>0&&(o=!1)}),!i||!i.isLastRowIndexKnown()||i.getRowCount()!==t.toggledNodes.size?!1:o&&n?(t.toggledNodes.clear(),t.selectAllChildren=!t.selectAllChildren,s&&(s==null?void 0:s.isSelected())!==t.selectAllChildren&&s.selectThisNode(t.selectAllChildren,void 0,"api"),!0):!1};e()}recursivelySelectNode([e,...t],i,s){if(!e)return;if(!t.length){if(i.selectAllChildren===s.newValue){i.toggledNodes.delete(e.id);return}const c={selectAllChildren:s.newValue,toggledNodes:new Map};i.toggledNodes.set(e.id,c);return}const o=i.toggledNodes.has(e.id),a=o?i.toggledNodes.get(e.id):{selectAllChildren:i.selectAllChildren,toggledNodes:new Map};o||i.toggledNodes.set(e.id,a),this.recursivelySelectNode(t,a,s),i.selectAllChildren===a.selectAllChildren&&a.toggledNodes.size===0&&i.toggledNodes.delete(e.id)}getSelectedNodes(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");const e=[];return this.rowModel.forEachNode(t=>{t.isSelected()&&e.push(t)}),e}processNewRow(e){}getSelectedRows(){return this.getSelectedNodes().map(e=>e.data)}getSelectionCount(){return-1}isEmpty(){var e;return!this.selectedState.selectAllChildren&&!(!((e=this.selectedState.toggledNodes)===null||e===void 0)&&e.size)}selectAllRowNodes(e){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}}deselectAllRowNodes(e){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}getSelectAllState(e,t){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}}bp([S("rowModel")],Fl.prototype,"rowModel",void 0);bp([S("columnModel")],Fl.prototype,"columnModel",void 0);bp([S("filterManager")],Fl.prototype,"filterManager",void 0);bp([S("rowModel")],Fl.prototype,"serverSideRowModel",void 0);bp([S("selectionService")],Fl.prototype,"selectionService",void 0);bp([U],Fl.prototype,"init",null);var GE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let zf=class extends j{init(){const e=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",i=>{this.destroyBean(this.selectionStrategy);const s=i.currentValue?Fl:qv;this.selectionStrategy=this.createManagedBean(new s),this.shotgunResetNodeSelectionState();const n={type:E.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",i=>this.rowSelection=i.currentValue);const t=e?Fl:qv;this.selectionStrategy=this.createManagedBean(new t)}getServerSideSelectionState(){return this.selectionStrategy.getSelectedState()}setServerSideSelectionState(e){this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState();const t={type:E.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(t)}setNodesSelected(e){if(e.nodes.length>1&&this.rowSelection!=="multiple")return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(e.nodes.length>1&&e.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;const t=this.selectionStrategy.setNodesSelected(e);this.shotgunResetNodeSelectionState(e.source);const i={type:E.EVENT_SELECTION_CHANGED,source:e.source};return this.eventService.dispatchEvent(i),t}deleteSelectionStateFromParent(e,t){if(!this.selectionStrategy.deleteSelectionStateFromParent(e,t))return;this.shotgunResetNodeSelectionState();const s={type:E.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(s)}shotgunResetNodeSelectionState(e){this.rowModel.forEachNode(t=>{if(t.stub)return;const i=this.selectionStrategy.isNodeSelected(t);i!==t.isSelected()&&t.selectThisNode(i,void 0,e)})}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e,t){this.selectionStrategy.processNewRow(e);const i=this.selectionStrategy.isNodeSelected(e);e.setSelectedInitialValue(i)}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"})}isEmpty(){return this.selectionStrategy.isEmpty()}selectAllRowNodes(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(e),this.rowModel.forEachNode(i=>{i.stub||i.selectThisNode(!0,void 0,e.source)});const t={type:E.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)}deselectAllRowNodes(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(e),this.rowModel.forEachNode(i=>{i.stub||i.selectThisNode(!1,void 0,e.source)});const t={type:E.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)}getSelectAllState(e,t){return this.selectionStrategy.getSelectAllState(e,t)}updateGroupsFromChildrenSelections(e,t){return!1}getBestCostNodeSelection(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")}filterFromSelection(){}};GE([S("rowModel")],zf.prototype,"rowModel",void 0);GE([U],zf.prototype,"init",null);zf=GE([ee("selectionService")],zf);const xj="30.0.2",Rj={version:xj,moduleName:te.ServerSideRowModelModule,rowModel:"serverSide",beans:[ln,hd,Ll,bu,Il,Yv,xa,ud,jf,Xv,zf],dependantModules:[Wi]};class Tj{constructor(e,t,i,s,n,o,a,l,c){this.rowModel=e,this.filterParams=t,this.createKey=i,this.caseFormat=s,this.columnModel=n,this.valueService=o,this.treeDataOrGrouping=a,this.treeData=l,this.getDataPath=c}extractUniqueValues(e,t){const i=new Map,s=this.extractExistingFormattedKeys(t),n=new Set,o=this.treeData&&!!this.getDataPath,a=this.columnModel.getRowGroupColumns(),l=(c,d)=>{const h=this.caseFormat(c);if(!n.has(h)){n.add(h);let u=c,p=A.makeNull(d);const f=s==null?void 0:s.get(h);f!=null&&(u=f,p=t.get(f)),i.set(u,p)}};return this.rowModel.forEachLeafNode(c=>{if(!c.data||!e(c))return;if(this.treeDataOrGrouping){this.addValueForTreeDataOrGrouping(c,o,a,l);return}let d=this.getValue(c);if(this.filterParams.convertValuesToStrings){this.addValueForConvertValuesToString(c,d,l);return}d!=null&&Array.isArray(d)?(d.forEach(h=>{l(this.createKey(h,c),h)}),d.length===0&&l(null,null)):l(this.createKey(d,c),d)}),i}addValueForConvertValuesToString(e,t,i){const s=this.createKey(t,e);s!=null&&Array.isArray(s)?(s.forEach(n=>{const o=A.toStringOrNull(A.makeNull(n));i(o,o)}),s.length===0&&i(null,null)):i(s,s)}addValueForTreeDataOrGrouping(e,t,i,s){var n;let o;if(t){if(!((n=e.childrenAfterGroup)===null||n===void 0)&&n.length)return;o=this.getDataPath(e.data)}else o=i.map(a=>this.valueService.getKeyForNode(a,e)),o.push(this.getValue(e));o&&(o=o.map(a=>A.toStringOrNull(A.makeNull(a)))),o!=null&&o.some(a=>a==null)&&(o=null),s(this.createKey(o),o)}getValue(e){const{api:t,colDef:i,column:s,columnApi:n,context:o}=this.filterParams;return this.filterParams.valueGetter({api:t,colDef:i,column:s,columnApi:n,context:o,data:e.data,getValue:a=>e.data[a],node:e})}extractExistingFormattedKeys(e){if(!e)return null;const t=new Map;return e.forEach((i,s)=>{t.set(this.caseFormat(s),s)}),t}}class ll{}ll.SELECT_ALL="__AG_SELECT_ALL__";class Dj{constructor(e,t,i,s){this.valueFormatterService=e,this.valueFormatter=t,this.formatter=i,this.column=s,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,i){this.displayedKeys=Array.from(i)}updateDisplayedValuesToMatchMiniFilter(e,t,i,s,n){this.displayedKeys=[];for(let o of i)if(o==null)n&&this.displayedKeys.push(o);else{const a=e(o),l=this.valueFormatterService.formatValue(this.column,null,a,this.valueFormatter,!1),c=this.formatter(l);s(c)&&this.displayedKeys.push(o)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return ll.SELECT_ALL}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}}class q0{constructor(e,t,i,s){this.formatter=e,this.treeListPathGetter=t,this.treeListFormatter=i,this.treeDataOrGrouping=s,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:ll.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:ll.SELECT_ALL,parentTreeKeys:[]}}updateDisplayedValuesToAllAvailable(e,t,i,s){s==="reload"?this.generateItemTree(e,t,i):s==="otherFilter"?(this.updateAvailable(i),this.updateExpandAll()):s==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,t,i,s,n,o){o==="reload"?this.generateItemTree(e,t,i):o==="otherFilter"&&this.updateAvailable(i),this.updateFilter(s,n),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,t,i){var s;this.allDisplayedItemsTree=[],this.groupsExist=!1;const n=this.getTreeListPathGetter(e,i);for(let o of t){const a=e(o),l=(s=n(a))!==null&&s!==void 0?s:[null];l.length>1&&(this.groupsExist=!0);const c=i.has(o);let d=this.allDisplayedItemsTree,h,u=[];l.forEach((p,f)=>{d||(d=[],h.children=d),h=d.find(g=>{var m;return((m=g.treeKey)===null||m===void 0?void 0:m.toUpperCase())===(p==null?void 0:p.toUpperCase())}),h||(h={treeKey:p,depth:f,filterPasses:!0,expanded:!1,available:c,parentTreeKeys:u},f===l.length-1&&(h.key=o),d.push(h)),d=h.children,u=[...u,p]})}this.updateAvailable(i),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,t){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return s=>s;let i=!1;for(const s of t){const n=e(s);if(n instanceof Date){i=!0;break}else if(n!=null)break}return i?q0.DATE_TREE_LIST_PATH_GETTER:(A.doOnce(()=>console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),"getTreeListPathGetter"),s=>[String(s)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=t=>{t.forEach(i=>{!i.filterPasses||!i.available||(this.activeDisplayedItemsFlat.push(i),i.children&&i.expanded&&e(i.children))})};e(this.allDisplayedItemsTree)}resetFilter(){const e=t=>{t.children&&t.children.forEach(i=>{e(i)}),t.filterPasses=!0};this.allDisplayedItemsTree.forEach(t=>e(t))}updateFilter(e,t){const i=s=>s.available?s.treeKey==null?t:e(this.formatter(this.treeListFormatter?this.treeListFormatter(s.treeKey,s.depth,s.parentTreeKeys):s.treeKey)):!1;this.allDisplayedItemsTree.forEach(s=>this.recursiveItemCheck(s,!1,i,"filterPasses"))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey(t=>e.push(t)),e}forEachDisplayedKey(e){const t=(i,s)=>{i.children?(!i.expanded||!s)&&i.children.forEach(n=>{n.filterPasses&&t(n,!1)}):e(i.key)};this.activeDisplayedItemsFlat.forEach(i=>t(i,!0))}someDisplayedKey(e){const t=(i,s)=>{if(i.children){if(!i.expanded||!s)return i.children.some(n=>n.filterPasses?t(n,!1):!1)}else return e(i.key);return!1};return this.activeDisplayedItemsFlat.some(i=>t(i,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(i,s,n)=>{for(const o of i){if(!o.filterPasses||!o.available||!o.children)continue;if(s=s||!!o.expanded,n=n||!o.expanded,s&&n)return;const a=e(o.children,s,n);if(a===void 0)return;a?s=!0:n=!0}return s&&n?void 0:s},t=this.getSelectAllItem();t.expanded=e(t.children,!1,!1)}recursiveItemCheck(e,t,i,s){let n=!1;e.children&&e.children.forEach(a=>{const l=this.recursiveItemCheck(a,t||i(e),i,s);n=n||l});const o=t||n||i(e);return e[s]=o,o}updateAvailable(e){const t=i=>e.has(i.key);this.allDisplayedItemsTree.forEach(i=>this.recursiveItemCheck(i,!1,t,"available"))}}q0.DATE_TREE_LIST_PATH_GETTER=r=>r?[String(r.getFullYear()),String(r.getMonth()+1),String(r.getDate())]:null;var zs;(function(r){r[r.PROVIDED_LIST=0]="PROVIDED_LIST",r[r.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",r[r.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"})(zs||(zs={}));class Sm{constructor(e){var t;this.localEventService=new nn,this.miniFilterText=null,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;const{usingComplexObjects:i,columnModel:s,valueService:n,treeDataTreeList:o,groupingTreeList:a,filterParams:l,gridOptionsService:c,valueFormatterService:d,valueFormatter:h}=e,{column:u,colDef:p,textFormatter:f,doesRowPassOtherFilter:g,suppressSorting:m,comparator:v,rowModel:C,values:y,caseSensitive:R,convertValuesToStrings:b,treeList:w,treeListPathGetter:x,treeListFormatter:O}=l;this.filterParams=l,this.setIsLoading=e.setIsLoading,this.translate=e.translate,this.caseFormat=e.caseFormat,this.createKey=e.createKey,this.usingComplexObjects=!!e.usingComplexObjects,this.formatter=f||$t.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=g,this.suppressSorting=m||!1,this.convertValuesToStrings=!!b;const M=v??p.comparator,N=!!o||!!a;this.compareByValue=!!(i&&M||N||w&&!x),N&&!M?this.entryComparator=this.createTreeDataOrGroupingComparator():w&&!x&&!M?this.entryComparator=([I,H],[B,X])=>A.defaultComparator(H,X):this.entryComparator=([I,H],[B,X])=>M(H,X),this.keyComparator=(t=M)!==null&&t!==void 0?t:A.defaultComparator,this.caseSensitive=!!R;const V=c.get("getDataPath");C.getType()==="clientSide"&&(this.clientSideValuesExtractor=new Tj(C,this.filterParams,this.createKey,this.caseFormat,s,n,N,!!o,V)),y==null?this.valuesType=zs.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(y)?zs.PROVIDED_LIST:zs.PROVIDED_CALLBACK,this.providedValues=y),this.displayValueModel=w?new q0(this.formatter,x,O,o||a):new Dj(d,h,this.formatter,u),this.updateAllValues().then(I=>this.resetSelectionState(I||[]))}addEventListener(e,t,i){this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService.removeEventListener(e,t,i)}refreshValues(){const e=this.getModel();return this.updateAllValues(),this.setModel(e)}overrideValues(e){return new Xe(t=>{this.allValuesPromise.then(()=>{this.valuesType=zs.PROVIDED_LIST,this.providedValues=e,this.refreshValues().then(()=>t())})})}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then(e=>(this.updateAvailableKeys(e??[],"otherFilter"),!0)):Xe.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new Xe(e=>{switch(this.valuesType){case zs.TAKEN_FROM_GRID_VALUES:case zs.PROVIDED_LIST:{e(this.processAllKeys(this.valuesType===zs.TAKEN_FROM_GRID_VALUES,this.providedValues));break}case zs.PROVIDED_CALLBACK:{this.setIsLoading(!0);const t=this.providedValues,{columnApi:i,api:s,context:n,column:o,colDef:a}=this.filterParams,l={success:c=>{this.setIsLoading(!1),e(this.processAllKeys(!1,c))},colDef:a,column:o,columnApi:i,api:s,context:n};window.setTimeout(()=>t(l),0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(e=>this.updateAvailableKeys(e||[],"reload")).then(()=>this.initialised=!0),this.allValuesPromise}processAllKeys(e,t){const i=e?this.getValuesFromRows(!1):this.uniqueValues(this.validateProvidedValues(t)),s=this.sortKeys(i);return this.allValues=i??new Map,s}validateProvidedValues(e){if(this.usingComplexObjects&&(e!=null&&e.length)){const t=e[0];t&&typeof t!="object"&&typeof t!="function"&&(this.createKey(t)==null?A.doOnce(()=>console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"),"setFilterComplexObjectsProvidedNull"):A.doOnce(()=>console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?"),"setFilterComplexObjectsProvidedPrimitive"))}return e}setValuesType(e){this.valuesType=e}getValuesType(){return this.valuesType}isKeyAvailable(e){return this.availableKeys.has(e)}showAvailableOnly(){return this.valuesType===zs.TAKEN_FROM_GRID_VALUES}updateAvailableKeys(e,t){const i=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(i),this.localEventService.dispatchEvent({type:Sm.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(t,e)}sortKeys(e){const t=e??new Map;if(this.suppressSorting)return Array.from(t.keys());let i;return this.compareByValue?i=Array.from(t.entries()).sort(this.entryComparator).map(([s])=>s):i=Array.from(t.keys()).sort(this.keyComparator),this.filterParams.excelMode&&t.has(null)&&(i=i.filter(s=>s!=null),i.push(null)),i}getValuesFromRows(e=!1){if(!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),null;const t=i=>!e||this.doesRowPassOtherFilters(i);return this.clientSideValuesExtractor.extractUniqueValues(t,e&&!this.caseSensitive?this.allValues:void 0)}setMiniFilter(e){return e=A.makeNull(e),this.miniFilterText===e?!1:(this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(e,t){if(e==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(o=>this.getValue(o),t,this.availableKeys,e);return}const i=this.caseFormat(this.formatter(this.miniFilterText)||""),s=o=>o!=null&&this.caseFormat(o).indexOf(i)>=0,n=!!this.filterParams.excelMode&&s(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(o=>this.getValue(o),t,this.availableKeys,s,n,e)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(e){return this.displayValueModel.getDisplayedItem(e)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(e){return this.allValues.get(e)}selectAllMatchingMiniFilter(e=!1){this.miniFilterText==null?this.selectedKeys=new Set(this.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(t=>this.selectedKeys.add(t)))}deselectAllMatchingMiniFilter(){this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}selectKey(e){this.selectedKeys.add(e)}deselectKey(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e)}isKeySelected(e){return this.selectedKeys.has(e)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.isKeySelected(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.isKeySelected(e))}getModel(){return this.hasSelections()?Array.from(this.selectedKeys):null}setModel(e){return this.allValuesPromise.then(t=>{if(e==null)this.resetSelectionState(t??[]);else{this.selectedKeys.clear();const i=new Map;this.allValues.forEach((s,n)=>{i.set(this.caseFormat(n),n)}),e.forEach(s=>{const n=this.caseFormat(s),o=i.get(n);o!==void 0&&this.selectKey(o)})}})}uniqueValues(e){const t=new Map,i=new Set;return(e??[]).forEach(s=>{const n=A.makeNull(s),o=this.convertAndGetKey(n),a=this.caseFormat(o);i.has(a)||(i.add(a),t.set(o,n))}),t}convertAndGetKey(e){return this.convertValuesToStrings?e:this.createKey(e)}resetSelectionState(e){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return([e,t],[i,s])=>{if(t==null)return s==null?0:-1;if(s==null)return 1;for(let n=0;n<t.length;n++){if(n>=s.length)return 1;const o=A.defaultComparator(t[n],s[n]);if(o!==0)return o}return 0}}}Sm.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged";var Qd=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class ni extends Q{constructor(e){var t;super(e.isGroup?ni.GROUP_TEMPLATE:ni.TEMPLATE),this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=(t=e.depth)!==null&&t!==void 0?t:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}init(){this.render(),this.eCheckbox.setLabelEllipsis(!0),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),A.setAriaLevel(this.focusWrapper,this.depth+1)),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}setupExpansion(){this.eGroupClosedIcon.appendChild(A.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(A.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(A.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const i={type:ni.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};t||this.dispatchEvent(i),this.setExpandedIcons(),this.refreshAriaExpanded()}}refreshAriaExpanded(){A.setAriaExpanded(this.focusWrapper,!!this.isExpanded)}setExpandedIcons(){A.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===!1:!this.isExpanded),A.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===!0),this.hasIndeterminateExpandState&&A.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===void 0)}onCheckboxChanged(e){this.isSelected=e;const t={type:ni.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item};this.dispatchEvent(t),this.refreshVariableAriaLabels()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(this.isSelected,t)}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.localeService.getLocaleTextFunc(),t=this.eCheckbox.getValue(),i=t===void 0?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),s=e("ariaToggleVisibility","Press SPACE to toggle visibility");A.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}setupFixedAriaLabels(e){if(!this.isTree)return;const i=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value");A.setAriaLabel(this.focusWrapper,`${e} ${i}`),A.setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)}refresh(e,t,i){var s,n;if(this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(i,!0),this.valueFunction){const o=this.valueFunction();this.setTooltipAndCellRendererParams(o,o),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}(n=(s=this.cellRendererComponent)===null||s===void 0?void 0:s.refresh)===null||n===void 0||n.call(s,this.cellRendererParams)}render(){const{params:{column:e}}=this;let{value:t}=this,i=null;typeof t=="function"?(this.valueFunction=t,i=this.valueFunction(),t=i):this.isTree?i=A.toStringOrNull(t):i=this.getFormattedValue(e,t),this.setTooltipAndCellRendererParams(t,i),this.renderCell()}setTooltipAndCellRendererParams(e,t){if(this.params.showTooltips){const i=t??A.toStringOrNull(e);this.setTooltip(i)}this.cellRendererParams={value:e,valueFormatted:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}}getTooltipParams(){const e=super.getTooltipParams();return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e}getFormattedValue(e,t){return this.valueFormatterService.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){const e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),t=e?e.newAgStackInstance():void 0;if(t==null){this.renderCellWithoutCellRenderer();return}t.then(i=>{i&&(this.cellRendererComponent=i,this.eCheckbox.setLabel(i.getGui()),this.addDestroyFunc(()=>this.destroyBean(i)))})}renderCellWithoutCellRenderer(){var e;let t=(e=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!==null&&e!==void 0?e:this.translate("blanks");typeof t!="string"&&(A.doOnce(()=>console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"),"setFilterComplexObjectsValueFormatter"),t=""),this.eCheckbox.setLabel(t),this.setupFixedAriaLabels(t)}getComponentHolder(){return this.params.column.getColDef()}}ni.EVENT_SELECTION_CHANGED="selectionChanged";ni.EVENT_EXPANDED_CHANGED="expandedChanged";ni.GROUP_TEMPLATE=`
        <div class="ag-set-filter-item" aria-hidden="true">
            <span class="ag-set-filter-group-icons">
                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>
                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>
            </span>
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`;ni.TEMPLATE=`
        <div class="ag-set-filter-item">
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`;Qd([S("valueFormatterService")],ni.prototype,"valueFormatterService",void 0);Qd([S("userComponentFactory")],ni.prototype,"userComponentFactory",void 0);Qd([G("eCheckbox")],ni.prototype,"eCheckbox",void 0);Qd([G("eGroupOpenedIcon")],ni.prototype,"eGroupOpenedIcon",void 0);Qd([G("eGroupClosedIcon")],ni.prototype,"eGroupClosedIcon",void 0);Qd([G("eGroupIndeterminateIcon")],ni.prototype,"eGroupIndeterminateIcon",void 0);Qd([U],ni.prototype,"init",null);const Oj={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."};class S_{getModelAsString(e,t){const{values:i}=e||t.getModel()||{},s=t.getValueModel();if(i==null||s==null)return"";const n=i.filter(l=>s.isKeyAvailable(l)),o=n.length,a=n.slice(0,10).map(l=>t.getFormattedValue(l));return`(${o}) ${a.join(",")}${o>10?",...":""}`}}var eh=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ka extends en{constructor(){super("setFilter"),this.valueModel=null,this.setFilterParams=null,this.virtualList=null,this.caseSensitive=!1,this.convertValuesToStrings=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.appliedModelKeys=null,this.noAppliedModelKeys=!1,this.filterModelFormatter=new S_}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return`
            <div class="ag-set-filter">
                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">${this.translateForSetFilter("loadingOoo")}</div>
                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">${this.translateForSetFilter("noMatches")}</div>
                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
            </div>`}handleKeyDown(e){if(super.handleKeyDown(e),!e.defaultPrevented)switch(e.key){case W.SPACE:this.handleKeySpace(e);break;case W.ENTER:this.handleKeyEnter(e);break;case W.LEFT:this.handleKeyLeft(e);break;case W.RIGHT:this.handleKeyRight(e);break}}handleKeySpace(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0||t.toggleSelected()}handleKeyEnter(e){if(!this.setFilterParams)return;const{excelMode:t,readOnly:i}=this.setFilterParams||{};!t||i||(e.preventDefault(),this.onBtApply(!1,!1,e),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0||t.setExpanded(!1)}handleKeyRight(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0||t.setExpanded(!0)}getComponentForKeyEvent(e){var t;const i=this.gridOptionsService.getDocument();if(!this.eSetFilterList.contains(i.activeElement)||!this.virtualList)return;const s=this.virtualList.getLastFocusedRow();if(s==null)return;const n=this.virtualList.getComponentAt(s);if(n==null)return;e.preventDefault();const{readOnly:o}=(t=this.setFilterParams)!==null&&t!==void 0?t:{};if(!o)return n}getCssIdentifier(){return"set-filter"}setModel(e){var t;return e==null&&((t=this.valueModel)===null||t===void 0?void 0:t.getModel())==null?(this.setMiniFilter(null),Xe.resolve()):super.setModel(e)}setModelAndRefresh(e){return this.valueModel?this.valueModel.setModel(e).then(()=>this.refresh()):Xe.resolve()}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(e){this.setMiniFilter(null);const t=e==null?null:e.values;return this.setModelAndRefresh(t)}getModelFromUi(){if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null}getFilterType(){return"set"}getValueModel(){return this.valueModel}areModelsEqual(e,t){return e==null&&t==null?!0:e!=null&&t!=null&&A.areEqual(e.values,t.values)}setParams(e){var t;this.applyExcelModeOptions(e),super.setParams(e),this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;let i=(t=e.keyCreator)!==null&&t!==void 0?t:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,i,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);const s=e.column.getId().startsWith(ma);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!e.treeList&&s,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&s,this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList),this.valueModel=new Sm({filterParams:e,setIsLoading:n=>this.setIsLoading(n),valueFormatterService:this.valueFormatterService,translate:n=>this.translateForSetFilter(n),caseFormat:n=>this.caseFormat(n),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}setValueFormatter(e,t,i,s,n){let o=e;if(!o){if(t&&!i&&!s)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,n||(o=a=>A.toStringOrNull(a.value))}this.valueFormatter=o}generateCreateKey(e,t,i){if(i&&!e)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return e?(s,n=null)=>{const o=this.getKeyCreatorParams(s,n);return A.makeNull(e(o))}:t?s=>Array.isArray(s)?s:A.makeNull(A.toStringOrNull(s)):s=>A.makeNull(A.toStringOrNull(s))}getFormattedValue(e){var t;let i=this.valueModel.getValue(e);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=A.last(i));const s=this.valueFormatterService.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1);return(t=s??A.toStringOrNull(i))!==null&&t!==void 0?t:this.translateForSetFilter("blanks")}applyExcelModeOptions(e){e.excelMode==="windows"?(e.buttons||(e.buttons=["apply","cancel"]),e.closeOnApply==null&&(e.closeOnApply=!0)):e.excelMode==="mac"&&(e.buttons||(e.buttons=["reset"]),e.applyMiniFilterWhileTyping==null&&(e.applyMiniFilterWhileTyping=!0),e.debounceMs==null&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,A.doOnce(()=>console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'),"setFilterExcelModeDefaultToNothingSelect"))}addEventListenersForDataChanges(){this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,e=>{this.setFilterParams&&e.column===this.setFilterParams.column&&this.syncAfterDataChange()})}syncAfterDataChange(){if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(()=>{this.refresh(),this.onBtApply(!1,!0)})}setIsLoading(e){A.setDisplayed(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,s=this.virtualList=this.createBean(new Pa("filter",i?"tree":"listbox",t)),n=this.getRefElement("eSetFilterList");i&&n.classList.add("ag-set-filter-tree-list"),n&&n.appendChild(s.getGui());const{cellHeight:o}=this.setFilterParams;o!=null&&s.setRowHeight(o);const a=(d,h)=>this.createSetListItem(d,i,h);s.setComponentCreator(a);const l=(d,h)=>this.updateSetListItem(d,h);s.setComponentUpdater(l);let c;this.setFilterParams.suppressSelectAll?c=new Aj(this.valueModel):c=new Pj(this.valueModel,()=>this.isSelectAllSelected()),i&&(c=new Mj(c)),s.setModel(c)}getSelectAllLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(e)}createSetListItem(e,t,i){var s,n,o,a,l,c;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const d=this.valueModel.hasGroups();let h,u,p,f,g,m;this.isSetFilterModelTreeItem(e)?(u=e.depth,e.key===ll.SELECT_ALL?(h=()=>this.getSelectAllLabel(),p=d,f=!0,g=b=>this.onSelectAll(b.isSelected),m=b=>this.onExpandAll(b.item,b.isExpanded)):e.children?(h=(o=(n=(s=this.setFilterParams).treeListFormatter)===null||n===void 0?void 0:n.call(s,e.treeKey,e.depth,e.parentTreeKeys))!==null&&o!==void 0?o:e.treeKey,p=!0,g=b=>this.onGroupItemSelected(b.item,b.isSelected),m=b=>this.onExpandedChanged(b.item,b.isExpanded)):(h=(c=(l=(a=this.setFilterParams).treeListFormatter)===null||l===void 0?void 0:l.call(a,e.treeKey,e.depth,e.parentTreeKeys))!==null&&c!==void 0?c:e.treeKey,g=b=>this.onItemSelected(b.item.key,b.isSelected))):e===ll.SELECT_ALL?(h=()=>this.getSelectAllLabel(),g=b=>this.onSelectAll(b.isSelected)):(h=this.valueModel.getValue(e),g=b=>this.onItemSelected(b.item,b.isSelected));const{isSelected:v,isExpanded:C}=this.isSelectedExpanded(e),y={focusWrapper:i,value:h,params:this.setFilterParams,translate:b=>this.translateForSetFilter(b),valueFormatter:this.valueFormatter,item:e,isSelected:v,isTree:t,depth:u,groupsExist:d,isGroup:p,isExpanded:C,hasIndeterminateExpandState:f},R=this.createBean(new ni(y));return R.addEventListener(ni.EVENT_SELECTION_CHANGED,g),m&&R.addEventListener(ni.EVENT_EXPANDED_CHANGED,m),R}updateSetListItem(e,t){const{isSelected:i,isExpanded:s}=this.isSelectedExpanded(e);t.refresh(e,i,s)}isSelectedExpanded(e){let t,i;return this.isSetFilterModelTreeItem(e)?(i=e.expanded,e.key===ll.SELECT_ALL?t=this.isSelectAllSelected():e.children?t=this.areAllChildrenSelected(e):t=this.valueModel.isKeySelected(e.key)):e===ll.SELECT_ALL?t=this.isSelectAllSelected():t=this.valueModel.isKeySelected(e),{isSelected:t,isExpanded:i}}isSetFilterModelTreeItem(e){return(e==null?void 0:e.treeKey)!==void 0}initMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:e,localeService:t}=this,i=t.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange(()=>this.onMiniFilterInput()),e.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values")),this.addManagedListener(e.getInputElement(),"keydown",s=>this.onMiniFilterKeyDown(s))}afterGuiAttached(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:t}=this;t.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&t.getFocusableElement().focus()}afterGuiDetached(){var e,t;super.afterGuiDetached(),!((e=this.setFilterParams)===null||e===void 0)&&e.excelMode&&this.resetMiniFilter();const i=this.getModel();(!((t=this.setFilterParams)===null||t===void 0)&&t.excelMode||!this.areModelsEqual(i,this.getModelFromUi()))&&(this.resetUiToActiveModel(i),this.showOrHideResults())}applyModel(e="api"){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&e!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();const t=super.applyModel(e),i=this.getModel();return i?(this.appliedModelKeys=new Set,i.values.forEach(s=>{this.appliedModelKeys.add(this.caseFormat(s))})):this.appliedModelKeys=null,this.noAppliedModelKeys=(i==null?void 0:i.values.length)===0,t}isModelValid(e){return this.setFilterParams&&this.setFilterParams.excelMode?e==null||e.values.length>0:!0}doesFilterPass(e){if(!this.setFilterParams||!this.valueModel||!this.appliedModelKeys)return!0;if(this.noAppliedModelKeys)return!1;const{node:t,data:i}=e;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(t,i);if(this.groupingTreeList)return this.doesFilterPassForGrouping(t,i);let s=this.getValueFromNode(t,i);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(t,s):s!=null&&Array.isArray(s)?s.length===0?this.appliedModelKeys.has(null):s.some(n=>this.isInAppliedModel(this.createKey(n,t))):this.isInAppliedModel(this.createKey(s,t))}doesFilterPassForConvertValuesToString(e,t){const i=this.createKey(t,e);return i!=null&&Array.isArray(i)?i.length===0?this.appliedModelKeys.has(null):i.some(s=>this.isInAppliedModel(s)):this.isInAppliedModel(i)}doesFilterPassForTreeData(e,t){var i;return!((i=e.childrenAfterGroup)===null||i===void 0)&&i.length?!1:this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(t))))}doesFilterPassForGrouping(e,t){const i=this.columnModel.getRowGroupColumns().map(s=>this.valueService.getKeyForNode(s,e));return i.push(this.getValueFromNode(e,t)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(i)))}checkMakeNullDataPath(e){return e&&(e=e.map(t=>A.toStringOrNull(A.makeNull(t)))),e!=null&&e.some(t=>t==null)?null:e}isInAppliedModel(e){return this.appliedModelKeys.has(this.caseFormat(e))}getValueFromNode(e,t){const{valueGetter:i,api:s,colDef:n,column:o,columnApi:a,context:l}=this.setFilterParams;return i({api:s,colDef:n,column:o,columnApi:a,context:l,data:t,getValue:c=>t[c],node:e})}getKeyCreatorParams(e,t=null){return{value:e,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:t,data:t==null?void 0:t.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}}onNewRowsLoaded(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()}isValuesTakenFromGrid(){return this.valueModel?this.valueModel.getValuesType()===zs.TAKEN_FROM_GRID_VALUES:!1}setFilterValues(e){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(()=>{this.refresh(),this.onUiChanged()})}resetFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(zs.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()}refreshFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(()=>{this.refresh(),this.onUiChanged()})}onAnyFilterChanged(){setTimeout(()=>{if(this.isAlive()){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.refreshAfterAnyFilterChanged().then(e=>{e&&(this.refresh(),this.showOrHideResults())})}},0)}onMiniFilterInput(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:e,readOnly:t}=this.setFilterParams||{};!t&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{excelMode:e,readOnly:t}=this.setFilterParams||{};e==null||t?this.refresh():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;A.setDisplayed(this.eNoMatches,e),A.setDisplayed(this.eSetFilterList,!e)}resetMiniFilter(){var e;this.eMiniFilter.setValue(null,!0),(e=this.valueModel)===null||e===void 0||e.setMiniFilter(null)}resetUiToActiveModel(e,t){this.setModelAndRefresh(e==null?null:e.values).then(()=>{this.onUiChanged(!1,"prevent"),t==null||t()})}handleCancelEnd(e){this.setMiniFilter(null),super.handleCancelEnd(e)}onMiniFilterKeyDown(e){const{excelMode:t,readOnly:i}=this.setFilterParams||{};e.key===W.ENTER&&!t&&!i&&this.filterOnAllVisibleValues()}filterOnAllVisibleValues(e=!0){const{readOnly:t}=this.setFilterParams||{};if(!this.valueModel)throw new Error("Value model has not been created.");if(t)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(e){e!=null&&window.setTimeout(()=>{if(!this.virtualList)throw new Error("Virtual list has not been created.");this.isAlive()&&this.virtualList.focusRow(e)},0)}onSelectAll(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){const i=s=>{s.children?s.children.forEach(n=>i(n)):this.selectItem(s.key,t)};i(e),this.refreshAfterSelection()}onItemSelected(e,t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(e,t),this.refreshAfterSelection()}selectItem(e,t){t?this.valueModel.selectKey(e):this.valueModel.deselectKey(e)}onExpandAll(e,t){const i=s=>{s.filterPasses&&s.available&&s.children&&(s.children.forEach(n=>i(n)),s.expanded=t)};i(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){const e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.refresh(),this.focusRowIfAlive(e)}refreshAfterSelection(){const e=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel?this.valueModel.getMiniFilter():null}refresh(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel?this.valueModel.getKeys():[]}getFilterValues(){return this.valueModel?this.valueModel.getValues():[]}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()}translateForSetFilter(e){return this.localeService.getLocaleTextFunc()(e,Oj[e])}isSelectAllSelected(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){const t=i=>{if(i.children){let s=!1,n=!1;return i.children.some(a=>{if(!a.filterPasses||!a.available)return!1;const l=t(a);return l===void 0?!0:(l?s=!0:n=!0,s&&n)})?void 0:s}else return this.valueModel.isKeySelected(i.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&t(e):t(e)}destroy(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),super.destroy()}caseFormat(e){return e==null||typeof e!="string"||this.caseSensitive?e:e.toUpperCase()}resetExpansion(){var e,t;if(!(!((e=this.setFilterParams)===null||e===void 0)&&e.treeList))return;const i=(t=this.valueModel)===null||t===void 0?void 0:t.getSelectAllItem();if(this.isSetFilterModelTreeItem(i)){const s=n=>{n.children&&(n.children.forEach(o=>s(o)),n.expanded=!1)};s(i),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e,this)}getPositionableElement(){return this.eSetFilterList}}eh([G("eMiniFilter")],Ka.prototype,"eMiniFilter",void 0);eh([G("eFilterLoading")],Ka.prototype,"eFilterLoading",void 0);eh([G("eSetFilterList")],Ka.prototype,"eSetFilterList",void 0);eh([G("eFilterNoMatches")],Ka.prototype,"eNoMatches",void 0);eh([S("valueFormatterService")],Ka.prototype,"valueFormatterService",void 0);eh([S("columnModel")],Ka.prototype,"columnModel",void 0);eh([S("valueService")],Ka.prototype,"valueService",void 0);class Aj{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}isRowSelected(e){return this.model.isKeySelected(this.getRow(e))}areRowsEqual(e,t){return e===t}}class Pj{constructor(e,t){this.model=e,this.isSelectAllSelected=t}getRowCount(){return this.model.getDisplayedValueCount()+1}getRow(e){return e===0?this.model.getSelectAllItem():this.model.getDisplayedItem(e-1)}isRowSelected(e){return e===0?this.isSelectAllSelected():this.model.isKeySelected(this.getRow(e))}areRowsEqual(e,t){return e===t}}class Mj{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return e==null&&t==null?!0:e!=null&&t!=null&&e.treeKey===t.treeKey&&e.depth===t.depth}}var w_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class kE extends Q{constructor(){super(`
            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`),this.availableValuesListenerAdded=!1,this.filterModelFormatter=new S_}destroy(){super.destroy()}init(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`).addGuiEventListener("click",()=>e.showParentFilter()),this.params=e}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance(t=>{if(!(t instanceof Ka))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");e(t)})}addAvailableValuesListener(){this.parentSetFilterInstance(e=>{const t=e.getValueModel();t&&this.addManagedListener(t,Sm.EVENT_AVAILABLE_VALUES_CHANGED,()=>this.updateFloatingFilterText())}),this.availableValuesListenerAdded=!0}updateFloatingFilterText(e){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(t=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(e,t))})}}w_([G("eFloatingFilterText")],kE.prototype,"eFloatingFilterText",void 0);w_([S("columnModel")],kE.prototype,"columnModel",void 0);const _j="30.0.2",Ij={version:_j,moduleName:te.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:Ka},{componentName:"agSetColumnFloatingFilter",componentClass:kE}],dependantModules:[Wi]};var Lj=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let zS=class extends j{constructor(){super(),this.allComponents={}}registerStatusPanel(e,t){this.allComponents[e]=t}getStatusPanel(e){return this.allComponents[e]}};zS=Lj([ee("statusBarService")],zS);var Ep=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Ur extends Q{constructor(){super(Ur.TEMPLATE)}postConstruct(){var e;const t=(e=this.gridOptionsService.get("statusBar"))===null||e===void 0?void 0:e.statusPanels;if(t){const i=t.filter(o=>o.align==="left");this.createAndRenderComponents(i,this.eStatusBarLeft);const s=t.filter(o=>o.align==="center");this.createAndRenderComponents(s,this.eStatusBarCenter);const n=t.filter(o=>!o.align||o.align==="right");this.createAndRenderComponents(n,this.eStatusBarRight)}else this.setDisplayed(!1)}createAndRenderComponents(e,t){const i=[];e.forEach(s=>{const n={},a=this.userComponentFactory.getStatusPanelCompDetails(s,n).newAgStackInstance();a&&i.push({key:s.key||s.statusPanel,promise:a})}),Xe.all(i.map(s=>s.promise)).then(()=>{i.forEach(s=>{s.promise.then(n=>{const o=()=>{this.getContext().destroyBean(n)};this.isAlive()?(this.statusBarService.registerStatusPanel(s.key,n),t.appendChild(n.getGui()),this.addDestroyFunc(o)):o()})})})}}Ur.TEMPLATE=`<div class="ag-status-bar">
            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>
            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>
            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>
        </div>`;Ep([S("userComponentFactory")],Ur.prototype,"userComponentFactory",void 0);Ep([S("statusBarService")],Ur.prototype,"statusBarService",void 0);Ep([G("eStatusBarLeft")],Ur.prototype,"eStatusBarLeft",void 0);Ep([G("eStatusBarCenter")],Ur.prototype,"eStatusBarCenter",void 0);Ep([G("eStatusBarRight")],Ur.prototype,"eStatusBarRight",void 0);Ep([U],Ur.prototype,"postConstruct",null);var b_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class jr extends Q{constructor(){super(jr.TEMPLATE)}setLabel(e,t){this.setDisplayed(!1);const i=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=i(e,t)}setValue(e){this.eValue.innerHTML=e}}jr.TEMPLATE=`<div class="ag-status-name-value">
            <span ref="eLabel"></span>:&nbsp;
            <span ref="eValue" class="ag-status-name-value-value"></span>
        </div>`;b_([G("eLabel")],jr.prototype,"eLabel",void 0);b_([G("eValue")],jr.prototype,"eValue",void 0);var E_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class VE extends jr{postConstruct(){if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator","."),s=A.formatNumberCommas(this.getFilteredRowCountValue(),t,i),n=A.formatNumberCommas(this.getTotalRowCount(),t,i);if(s===n)this.setValue(s);else{const o=this.localeService.getLocaleTextFunc();this.setValue(`${s} ${o("of","of")} ${n}`)}}getFilteredRowCountValue(){let e=0;return this.gridApi.forEachNodeAfterFilter(t=>{t.group||e++}),e}getTotalRowCount(){let e=0;return this.gridApi.forEachNode(t=>{t.group||e++}),e}init(){}destroy(){super.destroy()}}E_([S("gridApi")],VE.prototype,"gridApi",void 0);E_([U],VE.prototype,"postConstruct",null);var x_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class HE extends jr{postConstruct(){if(this.setLabel("filteredRows","Filtered"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,e),e()}onDataChanged(){const e=this.getTotalRowCountValue(),t=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");this.setValue(A.formatNumberCommas(t,s,n)),this.setDisplayed(e!==t)}getTotalRowCountValue(){let e=0;return this.gridApi.forEachNode(t=>e+=1),e}getFilteredRowCountValue(){let e=0;return this.gridApi.forEachNodeAfterFilter(t=>{t.group||(e+=1)}),e}init(){}destroy(){super.destroy()}}x_([S("gridApi")],HE.prototype,"gridApi",void 0);x_([U],HE.prototype,"postConstruct",null);var R_=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class BE extends jr{postConstruct(){if(this.setLabel("totalRows","Total Rows"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator",".");this.setValue(A.formatNumberCommas(this.getRowCountValue(),t,i))}getRowCountValue(){let e=0;return this.gridApi.forEachLeafNode(t=>e+=1),e}init(){}destroy(){super.destroy()}}R_([S("gridApi")],BE.prototype,"gridApi",void 0);R_([U],BE.prototype,"postConstruct",null);var WE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Z0 extends jr{postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();const e=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,e),this.addManagedListener(this.eventService,E.EVENT_SELECTION_CHANGED,e)}isValidRowModel(){const e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"}onRowSelectionChanged(){const e=this.selectionService.getSelectionCount();if(e<0){this.setValue("?"),this.setDisplayed(!0);return}const t=this.localeService.getLocaleTextFunc(),i=t("thousandSeparator",","),s=t("decimalSeparator",".");this.setValue(A.formatNumberCommas(e,i,s)),this.setDisplayed(e>0)}init(){}destroy(){super.destroy()}}WE([S("gridApi")],Z0.prototype,"gridApi",void 0);WE([S("selectionService")],Z0.prototype,"selectionService",void 0);WE([U],Z0.prototype,"postConstruct",null);var wn=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class Xi extends Q{constructor(){super(Xi.TEMPLATE)}destroy(){super.destroy()}postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,E.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))}isValidRowModel(){const e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"}init(){}setAggregationComponentValue(e,t,i){const s=this.getAggregationValueComponent(e);if(A.exists(s)&&s){const n=this.localeService.getLocaleTextFunc(),o=n("thousandSeparator",","),a=n("decimalSeparator",".");s.setValue(A.formatNumberTwoDecimalPlacesAndCommas(t,o,a)),s.setDisplayed(i)}}getAggregationValueComponent(e){const t=`${e}AggregationComp`;let i=null;const s=this.gridOptionsService.get("statusBar"),n=A.exists(s)&&s?s.statusPanels.find(o=>o.statusPanel==="agAggregationComponent"):null;return A.exists(n)&&n?(!A.exists(n.statusPanelParams)||A.exists(n.statusPanelParams)&&A.exists(n.statusPanelParams.aggFuncs)&&A.exists(n.statusPanelParams.aggFuncs.find(o=>o===e)))&&(i=this[t]):i=this[t],i}onRangeSelectionChanged(){const e=this.rangeService?this.rangeService.getCellRanges():void 0;let t=0,i=0,s=0,n=null,o=null;const a={};e&&!A.missingOrEmpty(e)&&e.forEach(d=>{let h=this.rangeService.getRangeStartRow(d);const u=this.rangeService.getRangeEndRow(d);for(;!(A.missing(h)||!h||this.rowPositionUtils.before(u,h)||!h||!d.columns);)d.columns.forEach(f=>{if(h===null)return;const g=this.cellPositionUtils.createId({rowPinned:h.rowPinned,column:f,rowIndex:h.rowIndex});if(a[g])return;a[g]=!0;const m=this.rowRenderer.getRowNode(h);if(A.missing(m))return;let v=this.valueService.getValue(f,m);A.missing(v)||v===""||(i++,!(typeof v=="object"&&"value"in v&&(v=v.value,v===""))&&(typeof v=="string"&&(v=Number(v)),typeof v=="number"&&!isNaN(v)&&(t+=v,(o===null||v>o)&&(o=v),(n===null||v<n)&&(n=v),s++)))}),h=this.cellNavigationService.getRowBelow(h)});const l=i>1,c=s>1;this.setAggregationComponentValue("count",i,l),this.setAggregationComponentValue("sum",t,c),this.setAggregationComponentValue("min",n,c),this.setAggregationComponentValue("max",o,c),this.setAggregationComponentValue("avg",t/s,c)}}Xi.TEMPLATE=`<div class="ag-status-panel ag-status-panel-aggregations">
            <ag-name-value ref="avgAggregationComp"></ag-name-value>
            <ag-name-value ref="countAggregationComp"></ag-name-value>
            <ag-name-value ref="minAggregationComp"></ag-name-value>
            <ag-name-value ref="maxAggregationComp"></ag-name-value>
            <ag-name-value ref="sumAggregationComp"></ag-name-value>
        </div>`;wn([Ne("rangeService")],Xi.prototype,"rangeService",void 0);wn([S("valueService")],Xi.prototype,"valueService",void 0);wn([S("cellNavigationService")],Xi.prototype,"cellNavigationService",void 0);wn([S("rowRenderer")],Xi.prototype,"rowRenderer",void 0);wn([S("gridApi")],Xi.prototype,"gridApi",void 0);wn([S("cellPositionUtils")],Xi.prototype,"cellPositionUtils",void 0);wn([S("rowPositionUtils")],Xi.prototype,"rowPositionUtils",void 0);wn([G("sumAggregationComp")],Xi.prototype,"sumAggregationComp",void 0);wn([G("countAggregationComp")],Xi.prototype,"countAggregationComp",void 0);wn([G("minAggregationComp")],Xi.prototype,"minAggregationComp",void 0);wn([G("maxAggregationComp")],Xi.prototype,"maxAggregationComp",void 0);wn([G("avgAggregationComp")],Xi.prototype,"avgAggregationComp",void 0);wn([U],Xi.prototype,"postConstruct",null);const Fj="30.0.2",Nj={version:Fj,moduleName:te.StatusBarModule,beans:[zS],agStackComponents:[{componentName:"AgStatusBar",componentClass:Ur},{componentName:"AgNameValue",componentClass:jr}],userComponents:[{componentName:"agAggregationComponent",componentClass:Xi},{componentName:"agSelectedRowCountComponent",componentClass:Z0},{componentName:"agTotalRowCountComponent",componentClass:BE},{componentName:"agFilteredRowCountComponent",componentClass:HE},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:VE}],dependantModules:[Wi]},Gj="30.0.2";var xp=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};const kj=5,Vj=5;let Nl=class extends j{constructor(){super(...arguments),this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={}}ensureRowHeightsValid(e,t,i,s){return!1}init(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,E.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))}start(){this.gridOptionsService.get("viewportDatasource")&&this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))}isLastRowIndexKnown(){return!0}destroyDatasource(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}getViewportRowModelPageSize(){return A.oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),kj)}getViewportRowModelBufferSize(){return A.zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),Vj)}calculateFirstRow(e){const t=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),s=e-t;return s<0?0:Math.floor(s/i)*i}calculateLastRow(e){if(e===-1)return e;const t=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),s=e+t,n=Math.ceil(s/i)*i,o=this.rowCount-1;return Math.min(n,o)}onViewportChanged(e){const t=this.calculateFirstRow(e.firstRow),i=this.calculateLastRow(e.lastRow);(this.firstRow!==t||this.lastRow!==i)&&(this.firstRow=t,this.lastRow=i,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))}purgeRowsNotInViewport(){Object.keys(this.rowNodesByIndex).forEach(e=>{const t=parseInt(e,10);if(t<this.firstRow||t>this.lastRow){if(this.isRowFocused(t))return;delete this.rowNodesByIndex[t]}})}isRowFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();return!t||t.rowPinned!=null?!1:t.rowIndex===e}setViewportDatasource(e){this.destroyDatasource(),this.viewportDatasource=e,this.rowCount=-1,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")}getType(){return"viewport"}getRow(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}getRowCount(){return this.rowCount===-1?0:this.rowCount}getRowIndexAtPixel(e){return this.rowHeight!==0?Math.floor(e/this.rowHeight):0}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}isEmpty(){return this.rowCount>0}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(e,t){const i=A.missing(e)?0:e.rowIndex,s=t.rowIndex,n=i<this.firstRow||i>this.lastRow,o=s<this.firstRow||s>this.lastRow;if(n||o)return[];const a=[],l=i<=s?i:s,c=i<=s?s:i;for(let d=l;d<=c;d++)a.push(this.rowNodesByIndex[d]);return a}forEachNode(e){let t=0;Object.keys(this.rowNodesByIndex).forEach(i=>{const s=parseInt(i,10),n=this.rowNodesByIndex[s];e(n,t),t++})}setRowData(e){A.iterateObject(e,(t,i)=>{const s=parseInt(t,10);if(s>=this.firstRow&&s<=this.lastRow){let n=this.rowNodesByIndex[s];A.missing(n)&&(n=this.createBlankRowNode(s),this.rowNodesByIndex[s]=n),n.setDataAndId(i,s.toString())}})}createBlankRowNode(e){const t=new oe(this.beans);return t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*e),t.setRowIndex(e),t}setRowCount(e,t=!1){if(e===this.rowCount)return;this.rowCount=e;const i={type:E.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:t,animate:!1};this.eventService.dispatchEvent(i)}isRowPresent(e){return!!this.getRowNode(e.id)}};xp([S("rowRenderer")],Nl.prototype,"rowRenderer",void 0);xp([S("focusService")],Nl.prototype,"focusService",void 0);xp([S("beans")],Nl.prototype,"beans",void 0);xp([U],Nl.prototype,"init",null);xp([ft],Nl.prototype,"destroyDatasource",null);Nl=xp([ee("rowModel")],Nl);const Hj={version:Gj,moduleName:te.ViewportRowModelModule,rowModel:"viewport",beans:[Nl],dependantModules:[Wi]},Bj=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,{extent:Wj,isNumber:Gp,isString:Uj,isStringObject:jj,isDate:WR,createId:zj,Padding:$j}=Wd,{LinearScale:Iy,BandScale:Kj,TimeScale:UR}=sm;var ys;(function(r){r[r.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",r[r.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",r[r.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",r[r.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",r[r.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",r[r.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"})(ys||(ys={}));class Yj{constructor(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}}class pd{constructor(){this.id=zj(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new $j(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Iy,this.axis=new Yj,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);const e=new ve;this.rootGroup=e;const t=document.createElement("div");t.setAttribute("class","ag-sparkline-wrapper");const i=new v0({document});if(this.scene=i,this.canvasElement=i.canvas.element,i.root=e,i.container=t,i.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,pd.tooltipDocuments.indexOf(document)===-1){const s=document.createElement("style");s.innerHTML=Bj,document.head.insertBefore(s,document.head.querySelector("style")),pd.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}set context(e){this._context!==e&&(this._context=e)}get context(){return this._context}set container(e){if(this._container!==e){const{parentNode:t}=this.canvasElement;t!=null&&t.removeChild(this.canvasElement),e&&e.appendChild(this.canvasElement),this._container=e}}get container(){return this._container}set data(e){this._data!==e&&(this._data=e,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))}get data(){return this._data}set width(e){this._width!==e&&(this._width=e,this.scene.resize(e,this.height),this.scheduleLayout())}get width(){return this._width}set height(e){this._height!==e&&(this._height=e,this.scene.resize(this.width,e),this.scheduleLayout())}get height(){return this._height}update(){}updateYScale(){this.updateYScaleRange(),this.updateYScaleDomain()}updateYScaleDomain(){}updateYScaleRange(){const{yScale:e,seriesRect:t}=this;e.range=[t.height,0]}updateXScale(){const{type:e}=this.axis;this.xScale=this.getXScale(e),this.updateXScaleRange(),this.updateXScaleDomain()}updateXScaleRange(){this.xScale.range=[0,this.seriesRect.width]}updateXScaleDomain(){const{xData:e,xScale:t}=this;let i;(t instanceof Iy||t instanceof UR)&&(i=Wj(e)),this.xScale.domain=i?i.slice():e}getXScale(e="category"){switch(e){case"number":return new Iy;case"time":return new UR;case"category":default:return new Kj}}updateAxisLine(){}updateAxes(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()}updateCrosshairs(){this.updateXCrosshairLine(),this.updateYCrosshairLine()}generateNodeData(){return[]}getNodeData(){return[]}updateNodes(){}updateXCrosshairLine(){}updateYCrosshairLine(){}highlightDatum(e){this.updateNodes()}dehighlightDatum(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()}onMouseMove(e){this.mouseMoveEvent=e,this.updateHitPoint(e)}updateHitPoint(e){var t,i,s;const n=this.pickClosestSeriesNodeDatum(e.offsetX,e.offsetY);if(!n)return;const o=this.highlightedDatum;this.highlightedDatum=n,(this.highlightedDatum&&!o||this.highlightedDatum&&o&&this.highlightedDatum!==o)&&(this.highlightDatum(n),this.updateCrosshairs(),this.scene.render().catch(l=>console.error("AG Grid - chart rendering failed",l))),((s=(i=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.enabled)!==null&&s!==void 0?s:!0)&&this.handleTooltip(e,n)}onMouseOut(e){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t))}processData(){const{data:e,yData:t,xData:i}=this;if(!e||this.invalidData(this.data))return;t.length=0,i.length=0;const s=e.length,n=this.getDataType(e);this.dataType=n;const{type:o}=this.axis,a=o!=="number"&&o!=="time"?"category":o,l=a==="number"||a==="time",c=(h,u)=>{this.smallestInterval==null&&(this.smallestInterval={x:1/0,y:1/0});const{x:p}=this.smallestInterval,f=Math.abs(h-u);f>0&&f<p&&(this.smallestInterval.x=f)};let d;if(n==="number")for(let h=0;h<s;h++){const u=h,p=e[h],f=this.getDatum(u,a),g=this.getDatum(p,"number");l&&c(f,d),i.push(f),t.push(g),d=f}else if(n==="array")for(let h=0;h<s;h++){const u=e[h];if(Array.isArray(u)){const p=u[0],f=u[1],g=this.getDatum(p,a),m=this.getDatum(f,"number");if(g==null)continue;l&&c(g,d),i.push(g),t.push(m),d=g}}else if(n==="object"){const{yKey:h,xKey:u}=this;for(let p=0;p<s;p++){const f=e[p];if(typeof f=="object"&&!Array.isArray(f)){const g=f[u],m=f[h],v=this.getDatum(g,a),C=this.getDatum(m,"number");if(v==null)continue;l&&c(v,d),i.push(v),t.push(C),d=v}}}this.updateAxes(),this.immediateLayout()}getDataType(e){for(const t of e)if(t!=null){if(Gp(t))return"number";if(Array.isArray(t))return"array";if(typeof t=="object")return"object"}}getDatum(e,t){if(t==="number"&&Gp(e)||t==="time"&&(Gp(e)||WR(e)))return e;if(t==="category"){if(Uj(e)||WR(e)||Gp(e))return{toString:()=>String(e)};if(jj(e))return e}}get layoutScheduled(){return!!this.layoutId}scheduleLayout(){this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(()=>{this.immediateLayout(),this.layoutId=0})}immediateLayout(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(e=>console.error("AG Grid - chart rendering failed",e)))}setSparklineDimensions(){const{width:e,height:t,padding:i,seriesRect:s,rootGroup:n}=this,o=e-i.left-i.right,a=t-i.top-i.bottom;s.width=o,s.height=a,s.x=i.left,s.y=i.top,n.translationX=s.x,n.translationY=s.y}pickClosestSeriesNodeDatum(e,t){let i=1/0,s;const n=this.rootGroup.transformPoint(e,t),o=this.getNodeData();for(let a=0;a<o.length;a++){const l=o[a];if(!l.point)return;const c=this.getDistance(n,l.point);c<=i&&(i=c,s=l)}return s}getDistance(e,t){return Math.abs(e.x-t.x)}handleTooltip(e,t){var i,s;const{seriesDatum:n}=t,{canvasElement:o}=this,{clientX:a,clientY:l}=e,c=(i=this.processedOptions)===null||i===void 0?void 0:i.tooltip,d={pageX:a,pageY:l,position:{xOffset:c==null?void 0:c.xOffset,yOffset:c==null?void 0:c.yOffset},container:c==null?void 0:c.container};d.container==null&&(d.container=o);const h=n.y,u=n.x;let p=(s=c==null?void 0:c.enabled)!==null&&s!==void 0?s:!0;const f=c==null?void 0:c.renderer;if(f){const m=f({context:this.context,datum:n,yValue:h,xValue:u});p=typeof m!="string"&&m.enabled!==void 0?m.enabled:p}const g=p&&n.y!==void 0&&this.getTooltipHtml(t);g&&this.tooltip.show(d,g)}formatNumericDatum(e){return String(Math.round(e*10)/10)}formatDatum(e){const t=this.axis.type||"category";return t==="number"&&typeof e=="number"?this.formatNumericDatum(e):t==="time"&&(e instanceof Date||Gp(e))?this.defaultDateFormatter.format(e):String(e)}setupDomEventListeners(e){e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseout",this._onMouseOut)}cleanupDomEventListeners(e){e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseout",this._onMouseOut)}invalidData(e){return!e||!Array.isArray(e)||e.length===0}destroy(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)}}pd.tooltipDocuments=[];function Eu(r,e){var t,i,s;if(typeof r=="string")return r;e=e??{};const{content:n=(t=e.content)!==null&&t!==void 0?t:"",title:o=(i=e.title)!==null&&i!==void 0?i:void 0,color:a=e.color,backgroundColor:l=e.backgroundColor,opacity:c=(s=e.opacity)!==null&&s!==void 0?s:1}=r;let d,h;a?(d=o?`<span class="${In.class}-title"; style="color: ${a}">${o}</span>`:"",h=`<span class="${In.class}-content" style="color: ${a}">${n}</span>`):(d=o?`<span class="${In.class}-title">${o}</span>`:"",h=`<span class="${In.class}-content">${n}</span>`);let u=`opacity: ${c}`;return l&&(u+=`; background-color: ${l.toLowerCase()}`),`<div class="${In.class}" style="${u}">
                ${d}
                ${h}
            </div>`}class In{constructor(){this.element=document.createElement("div"),document.body.appendChild(this.element)}isVisible(){const{element:e}=this;if(e.classList)return!e.classList.contains(`${In.class}-wrapper-hidden`);const t=e.getAttribute("class");return t?t.split(" ").indexOf(`${In.class}-wrapper-hidden`)<0:!1}updateClass(e){const t=[`${In.class}-wrapper`];e!==!0&&t.push(`${In.class}-wrapper-hidden`),this.element.setAttribute("class",t.join(" "))}show(e,t){var i,s,n,o;this.toggle(!1);const{element:a}=this;if(t!==void 0)a.innerHTML=t;else if(!a.innerHTML)return;const l=(s=(i=e.position)===null||i===void 0?void 0:i.xOffset)!==null&&s!==void 0?s:10,c=(o=(n=e.position)===null||n===void 0?void 0:n.yOffset)!==null&&o!==void 0?o:0;let d=e.pageX+l,h=e.pageY+c;const u=a.getBoundingClientRect();let p=window.innerWidth-u.width;if(e.container){const f=e.container.getBoundingClientRect();p=f.left+(f.width-u.width)}d>p&&(d=e.pageX-a.clientWidth-l),typeof scrollX<"u"&&(d+=scrollX),typeof scrollY<"u"&&(h+=scrollY),a.style.left=`${Math.round(d)}px`,a.style.top=`${Math.round(h)}px`,this.toggle(!0)}toggle(e){this.updateClass(e)}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element)}}In.class="ag-sparkline-tooltip";function T_(r){switch(r){case"circle":return yu;case"square":return zh;case"diamond":return sp;default:return yu}}function Zv(r,e="solid"){const t={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},i={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return r==="round"||r==="square"?i[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),i.solid):i[e]:t[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),t.solid):t[e]}const{extent:Xj}=Wd,{BandScale:qj}=sm;class Zj{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}class Jj{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}class Qj{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}class D_ extends pd{constructor(){super(),this.fill="rgba(124, 181, 236, 0.25)",this.strokePath=new Ei,this.fillPath=new Ei,this.xCrosshairLine=new xt,this.yCrosshairLine=new xt,this.areaSparklineGroup=new ve,this.xAxisLine=new xt,this.markers=new ve,this.markerSelection=ut.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new Zj,this.line=new Jj,this.crosshairs=new Qj,this.rootGroup.append(this.areaSparklineGroup),this.xAxisLine.zIndex=ys.AXIS_LINE_ZINDEX,this.fillPath.zIndex=ys.SERIES_FILL_ZINDEX,this.strokePath.zIndex=ys.SERIES_STROKE_ZINDEX,this.xCrosshairLine.zIndex=ys.CROSSHAIR_ZINDEX,this.yCrosshairLine.zIndex=ys.CROSSHAIR_ZINDEX,this.markers.zIndex=ys.SERIES_MARKERS_ZINDEX,this.areaSparklineGroup.append([this.fillPath,this.xAxisLine,this.strokePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}markerFactory(){const{shape:e}=this.marker,t=T_(e);return new t}getNodeData(){return this.markerSelectionData}update(){const e=this.generateNodeData();if(!e)return;const{nodeData:t,fillData:i,strokeData:s}=e;this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateStroke(s),this.updateFill(i)}updateYScaleDomain(){const{yData:e,yScale:t}=this,i=Xj(e);let s=0,n=1;i!==void 0&&(s=this.min=i[0],n=this.max=i[1]),s=s<0?s:0,n=n<0?0:n,t.domain=[s,n]}generateNodeData(){const{data:e,yData:t,xData:i,xScale:s,yScale:n}=this;if(!e)return;const o=!(s instanceof qj),a=o?0:s.bandwidth/2,l=t.length,c=[],d=[],h=[];let u,p,f,g;const m=n.convert(0);for(let v=0;v<l;v++){const C=t[v],y=i[v],R=s.convert(o?s.toDomain(y):y)+a,b=C===void 0?NaN:n.convert(C);v+1<l&&(g=s.convert(o?s.toDomain(i[v+1]):i[v+1])+a),h.push({seriesDatum:{x:y,y:C},point:{x:R,y:b}}),C===void 0&&f!==void 0?(d.push({seriesDatum:void 0,point:{x:f,y:m}}),g!==void 0&&d.push({seriesDatum:void 0,point:{x:g,y:m}})):C!==void 0&&(d.push({seriesDatum:{x:y,y:C},point:{x:R,y:b}}),c.push({seriesDatum:{x:y,y:C},point:{x:R,y:b}}),u=u!==void 0?u:R,p=R),f=R}return d.push({seriesDatum:void 0,point:{x:p,y:m}},{seriesDatum:void 0,point:{x:u,y:m}}),{nodeData:c,fillData:d,strokeData:h}}updateAxisLine(){const{xScale:e,yScale:t,axis:i,xAxisLine:s}=this;s.x1=e.range[0],s.x2=e.range[1],s.y1=s.y2=0,s.stroke=i.stroke,s.strokeWidth=i.strokeWidth;const n=t.convert(0);s.translationY=n}updateSelection(e){this.markerSelection.update(e)}updateNodes(){const{highlightedDatum:e,highlightStyle:t,marker:i}=this,{size:s,fill:n,stroke:o,strokeWidth:a}=t,l=i.formatter;this.markerSelection.each((c,d,h)=>{const{point:u,seriesDatum:p}=d;if(!u)return;const f=d===e,g=f&&n!==void 0?n:i.fill,m=f&&o!==void 0?o:i.stroke,v=f&&a!==void 0?a:i.strokeWidth,C=f&&s!==void 0?s:i.size;let y;if(l){const R=h===0,b=h===this.markerSelectionData.length-1,w=p.y===this.min,x=p.y===this.max;y=l({datum:d,xValue:p.x,yValue:p.y,min:w,max:x,first:R,last:b,fill:g,stroke:m,strokeWidth:v,size:C,highlighted:f})}c.size=y&&y.size!=null?y.size:C,c.fill=y&&y.fill!=null?y.fill:g,c.stroke=y&&y.stroke!=null?y.stroke:m,c.strokeWidth=y&&y.strokeWidth!=null?y.strokeWidth:v,c.translationX=u.x,c.translationY=u.y,c.visible=y&&y.enabled!=null?y.enabled:i.enabled&&c.size>0})}updateStroke(e){const{strokePath:t,yData:i,line:s}=this;if(i.length<2)return;const n=t.path,o=e.length;let a=!0;n.clear();for(let l=0;l<o;l++){const{point:c,seriesDatum:d}=e[l],h=c.x,u=c.y;d.y==null?a=!0:a?(n.moveTo(h,u),a=!1):n.lineTo(h,u)}t.lineJoin=t.lineCap="round",t.fill=void 0,t.stroke=s.stroke,t.strokeWidth=s.strokeWidth}updateFill(e){const{fillPath:t,yData:i,fill:s}=this,n=t.path,o=e.length;if(n.clear(),!(i.length<2)){for(let a=0;a<o;a++){const{point:l}=e[a],c=l.x,d=l.y;a>0?n.lineTo(c,d):n.moveTo(c,d)}n.closePath(),t.lineJoin="round",t.stroke=void 0,t.fill=s}}updateXCrosshairLine(){var e;const{yScale:t,xCrosshairLine:i,highlightedDatum:s,crosshairs:{xLine:n}}=this;if(!n.enabled||s==null){i.strokeWidth=0;return}i.y1=t.range[0],i.y2=t.range[1],i.x1=i.x2=0,i.stroke=n.stroke,i.strokeWidth=(e=n.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=n.lineCap==="round"||n.lineCap==="square"?n.lineCap:void 0;const{lineDash:o}=n;i.lineDash=Array.isArray(o)?o:Zv(i.lineCap,n.lineDash),i.translationX=s.point.x}updateYCrosshairLine(){var e;const{xScale:t,yCrosshairLine:i,highlightedDatum:s,crosshairs:{yLine:n}}=this;if(!n.enabled||s==null){i.strokeWidth=0;return}i.x1=t.range[0],i.x2=t.range[1],i.y1=i.y2=0,i.stroke=n.stroke,i.strokeWidth=(e=n.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=n.lineCap==="round"||n.lineCap==="square"?n.lineCap:void 0;const{lineDash:o}=n;i.lineDash=Array.isArray(o)?o:Zv(i.lineCap,n.lineDash),i.translationY=s.point.y}getTooltipHtml(e){var t,i;const{dataType:s}=this,{seriesDatum:n}=e,o=n.y,a=n.x,l=this.formatNumericDatum(o),c=s==="array"||s==="object"?this.formatDatum(a):void 0,d={content:l,title:c},h=(i=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.renderer;return h?Eu(h({context:this.context,datum:n,yValue:o,xValue:a}),d):Eu(d)}}D_.className="AreaSparkline";const{extent:ez}=Wd,{BandScale:jR}=sm;class tz{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}class iz{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}class sz{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}class O_ extends pd{constructor(){super(),this.linePath=new Ei,this.xCrosshairLine=new xt,this.yCrosshairLine=new xt,this.lineSparklineGroup=new ve,this.markers=new ve,this.markerSelection=ut.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new tz,this.line=new iz,this.crosshairs=new sz,this.rootGroup.append(this.lineSparklineGroup),this.linePath.zIndex=ys.SERIES_STROKE_ZINDEX,this.xCrosshairLine.zIndex=ys.CROSSHAIR_ZINDEX,this.yCrosshairLine.zIndex=ys.CROSSHAIR_ZINDEX,this.markers.zIndex=ys.SERIES_MARKERS_ZINDEX,this.lineSparklineGroup.append([this.linePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}getNodeData(){return this.markerSelectionData}markerFactory(){const{shape:e}=this.marker,t=T_(e);return new t}onMarkerShapeChange(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()}update(){const e=this.generateNodeData();e&&(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())}updateYScaleDomain(){const{yData:e,yScale:t}=this,i=ez(e);let s=0,n=1;if(i!==void 0&&(s=this.min=i[0],n=this.max=i[1]),s===n){const o=Math.abs(s*.01);s-=o,n+=o}t.domain=[s,n]}generateNodeData(){const{data:e,yData:t,xData:i,xScale:s,yScale:n}=this;if(!e)return;const o=!(s instanceof jR),a=o?0:s.bandwidth/2,l=[];for(let c=0;c<t.length;c++){const d=t[c],h=i[c];if(d==null)continue;const u=s.convert(o?s.toDomain(h):h)+a,p=d===void 0?NaN:n.convert(d);l.push({seriesDatum:{x:h,y:d},point:{x:u,y:p}})}return l}updateSelection(e){this.markerSelection.update(e)}updateNodes(){const{highlightedDatum:e,highlightStyle:t,marker:i}=this,{size:s,fill:n,stroke:o,strokeWidth:a}=t,l=i.formatter;this.markerSelection.each((c,d,h)=>{const u=d===e,p=u&&n!==void 0?n:i.fill,f=u&&o!==void 0?o:i.stroke,g=u&&a!==void 0?a:i.strokeWidth,m=u&&s!==void 0?s:i.size;let v;const{seriesDatum:C,point:y}=d;if(l){const R=h===0,b=h===this.markerSelectionData.length-1,w=C.y===this.min,x=C.y===this.max;v=l({datum:d,xValue:C.x,yValue:C.y,min:w,max:x,first:R,last:b,fill:p,stroke:f,strokeWidth:g,size:m,highlighted:u})}c.size=v&&v.size!=null?v.size:m,c.fill=v&&v.fill!=null?v.fill:p,c.stroke=v&&v.stroke!=null?v.stroke:f,c.strokeWidth=v&&v.strokeWidth!=null?v.strokeWidth:g,c.translationX=y.x,c.translationY=y.y,c.visible=v&&v.enabled!=null?v.enabled:i.enabled&&c.size>0})}updateLine(){const{linePath:e,yData:t,xData:i,xScale:s,yScale:n,line:o}=this;if(t.length<2)return;const a=!(s instanceof jR),l=e.path,c=t.length,d=a?0:s.bandwidth/2;let h=!0;l.clear();for(let u=0;u<c;u++){const p=i[u],f=t[u],g=s.convert(a?s.toDomain(p):p)+d,m=f===void 0?NaN:n.convert(f);f==null?h=!0:h?(l.moveTo(g,m),h=!1):l.lineTo(g,m)}e.fill=void 0,e.stroke=o.stroke,e.strokeWidth=o.strokeWidth}updateXCrosshairLine(){var e;const{yScale:t,xCrosshairLine:i,highlightedDatum:s,crosshairs:{xLine:n}}=this;if(!n.enabled||s==null){i.strokeWidth=0;return}i.y1=t.range[0],i.y2=t.range[1],i.x1=i.x2=0,i.stroke=n.stroke,i.strokeWidth=(e=n.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=n.lineCap==="round"||n.lineCap==="square"?n.lineCap:void 0;const{lineDash:o}=n;i.lineDash=Array.isArray(o)?o:Zv(i.lineCap,n.lineDash),i.translationX=s.point.x}updateYCrosshairLine(){var e;const{xScale:t,yCrosshairLine:i,highlightedDatum:s,crosshairs:{yLine:n}}=this;if(!n.enabled||s==null){i.strokeWidth=0;return}i.x1=t.range[0],i.x2=t.range[1],i.y1=i.y2=0,i.stroke=n.stroke,i.strokeWidth=(e=n.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=n.lineCap==="round"||n.lineCap==="square"?n.lineCap:void 0;const{lineDash:o}=n;i.lineDash=Array.isArray(o)?o:Zv(i.lineCap,n.lineDash),i.translationY=s.point.y}getTooltipHtml(e){var t,i;const{dataType:s}=this,{seriesDatum:n}=e,o=n.y,a=n.x,l=this.formatNumericDatum(o),c=s==="array"||s==="object"?this.formatDatum(a):void 0,d={content:l,title:c},h=(i=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.renderer;return h?Eu(h({context:this.context,datum:n,yValue:o,xValue:a}),d):Eu(d)}}O_.className="LineSparkline";class nz{constructor(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}}const{extent:oz}=Wd;var $S;(function(r){r[r.Rect=0]="Rect",r[r.Label=1]="Label"})($S||($S={}));var pa;(function(r){r.InsideBase="insideBase",r.InsideEnd="insideEnd",r.Center="center",r.OutsideEnd="outsideEnd"})(pa||(pa={}));class rz extends nz{constructor(){super(...arguments),this.formatter=void 0,this.placement=pa.InsideEnd}}class A_ extends pd{constructor(){super(),this.fill="rgb(124, 181, 236)",this.stroke="silver",this.strokeWidth=0,this.paddingInner=.1,this.paddingOuter=.2,this.valueAxisDomain=void 0,this.formatter=void 0,this.axisLine=new xt,this.bandWidth=0,this.sparklineGroup=new ve,this.rectGroup=new ve,this.labelGroup=new ve,this.rectSelection=ut.select(this.rectGroup,wi),this.labelSelection=ut.select(this.labelGroup,be),this.nodeSelectionData=[],this.label=new rz,this.rootGroup.append(this.sparklineGroup),this.rectGroup.zIndex=ys.SERIES_FILL_ZINDEX,this.axisLine.zIndex=ys.AXIS_LINE_ZINDEX,this.labelGroup.zIndex=ys.SERIES_LABEL_ZINDEX,this.sparklineGroup.append([this.rectGroup,this.axisLine,this.labelGroup]),this.axisLine.lineCap="round",this.label.enabled=!1}getNodeData(){return this.nodeSelectionData}update(){this.updateSelections(),this.updateNodes()}updateSelections(){const e=this.generateNodeData();e&&(this.nodeSelectionData=e,this.updateRectSelection(e),this.updateLabelSelection(e))}updateNodes(){this.updateRectNodes(),this.updateLabelNodes()}calculateStep(e){var t;const{xScale:i,paddingInner:s,paddingOuter:n,smallestInterval:o}=this;let l=(i.domain[1]-i.domain[0])/((t=o==null?void 0:o.x)!==null&&t!==void 0?t:1)+1;const d=Math.min(l,50),h=d-1;return e/Math.max(1,2*n+h*s+d)}updateYScaleDomain(){const{yScale:e,yData:t,valueAxisDomain:i}=this,s=oz(t);let n=0,o=1;s!==void 0&&(n=this.min=s[0],o=this.max=s[1]),n=n<0?n:0,o=o<0?0:o,i&&(i[1]<o&&(i[1]=o),i[0]>n&&(i[0]=n)),e.domain=i||[n,o]}updateRectSelection(e){this.rectSelection.update(e)}updateRectNodes(){const{highlightedDatum:e,formatter:t,fill:i,stroke:s,strokeWidth:n}=this,{fill:o,stroke:a,strokeWidth:l}=this.highlightStyle;this.rectSelection.each((c,d,h)=>{const u=d===e,p=u&&o!==void 0?o:i,f=u&&a!==void 0?a:s,g=u&&l!==void 0?l:n;let m;const{x:v,y:C,width:y,height:R,seriesDatum:b}=d;if(t){const w=h===0,x=h===this.nodeSelectionData.length-1,O=b.y===this.min,M=b.y===this.max;m=t({datum:d,xValue:b.x,yValue:b.y,width:y,height:R,min:O,max:M,first:w,last:x,fill:p,stroke:f,strokeWidth:g,highlighted:u})}c.fill=m&&m.fill||p,c.stroke=m&&m.stroke||f,c.strokeWidth=m&&m.strokeWidth||g,c.x=c.y=0,c.width=y,c.height=R,c.visible=c.height>0,c.translationX=v,c.translationY=C})}updateLabelSelection(e){this.labelSelection.update(e,t=>{t.tag=$S.Label,t.pointerEvents=rs.None})}updateLabelNodes(){const{label:{enabled:e,fontStyle:t,fontWeight:i,fontSize:s,fontFamily:n,color:o}}=this;this.labelSelection.each((a,l)=>{const c=l.label;c&&e?(a.fontStyle=t,a.fontWeight=i,a.fontSize=s,a.fontFamily=n,a.textAlign=c.textAlign,a.textBaseline=c.textBaseline,a.text=c.text,a.x=c.x,a.y=c.y,a.fill=o,a.visible=!0):a.visible=!1})}getTooltipHtml(e){var t,i;const{dataType:s}=this,{seriesDatum:n}=e,o=n.y,a=n.x,l=this.formatNumericDatum(o),c=s==="array"||s==="object"?this.formatDatum(a):void 0,d={content:l,title:c},h=(i=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.renderer;return h?Eu(h({context:this.context,datum:n,yValue:o,xValue:a}),d):Eu(d)}formatLabelValue(e){return e%1!==0?e.toFixed(1):e.toFixed(0)}}const{isNumber:az}=Wd,{BandScale:zR}=sm;class P_ extends A_{updateYScaleRange(){const{seriesRect:e,yScale:t}=this;t.range=[0,e.width]}updateXScaleRange(){const{xScale:e,seriesRect:t,paddingOuter:i,paddingInner:s}=this;if(e instanceof zR)e.range=[0,t.height],e.paddingInner=s,e.paddingOuter=i;else{const n=this.calculateStep(t.height),o=n*i;this.bandWidth=n*(1-s),e.range=[o,t.height-o-this.bandWidth]}}updateAxisLine(){const{yScale:e,axis:t,axisLine:i,seriesRect:s}=this,{strokeWidth:n}=t;i.x1=0,i.x2=0,i.y1=0,i.y2=s.height,i.stroke=t.stroke,i.strokeWidth=n+(n%2===1?1:0);const o=e.convert(0);i.translationX=o}generateNodeData(){const{data:e,yData:t,xData:i,xScale:s,yScale:n,fill:o,stroke:a,strokeWidth:l,label:c}=this;if(!e)return;const{fontStyle:d,fontWeight:h,fontSize:u,fontFamily:p,color:f,formatter:g,placement:m}=c,v=[],C=n.convert(0),y=!(s instanceof zR);for(let R=0,b=t.length;R<b;R++){let w=t[R];const x=i[R],O=w===void 0;O&&(w=0);const M=s.convert(y?s.toDomain(x):x),N=Math.min(w===void 0?NaN:n.convert(w),C),V=Math.max(w===void 0?NaN:n.convert(w),C),I=y?this.bandWidth:s.bandwidth,H=V-N,B={x:C,y:M};let X;g?X=g({value:w}):X=w!==void 0&&az(w)?this.formatLabelValue(w):"";const J=M+I/2;let Y;const ae="middle";let re;const K=w!==void 0&&w>=0,D=4;if(m===pa.Center)Y=N+H/2,re="center";else if(m===pa.OutsideEnd)Y=N+(K?H+D:-D),re=K?"start":"end";else if(m===pa.InsideEnd){Y=N+(K?H-D:D),re=K?"end":"start";const P=Rt.getTextSize(X,p).width||20,F=C+P,L=C-P;(K&&Y<F||!K&&Y>L)&&(Y=C+D*(K?1:-1),re=K?"start":"end")}else Y=C+D*(K?1:-1),re=K?"start":"end";v.push({x:N,y:M,width:H,height:I,fill:o,stroke:a,strokeWidth:l,seriesDatum:{x,y:O?void 0:w},point:B,label:{x:Y,y:J,text:X,fontStyle:d,fontWeight:h,fontSize:u,fontFamily:p,textAlign:re,textBaseline:ae,fill:f}})}return v}getDistance(e,t){return Math.abs(e.y-t.y)}}P_.className="BarSparkline";const{isNumber:lz}=Wd,{BandScale:$R}=sm;class M_ extends A_{updateYScaleRange(){const{seriesRect:e,yScale:t}=this;t.range=[e.height,0]}updateXScaleRange(){const{xScale:e,seriesRect:t,paddingOuter:i,paddingInner:s}=this;if(e instanceof $R)e.range=[0,t.width],e.paddingInner=s,e.paddingOuter=i;else{const n=this.calculateStep(t.width),o=n*i;this.bandWidth=n*(1-s),e.range=[o,t.width-o-this.bandWidth]}}updateAxisLine(){const{yScale:e,axis:t,axisLine:i,seriesRect:s}=this,{strokeWidth:n}=t;i.x1=0,i.x2=s.width,i.y1=0,i.y2=0,i.stroke=t.stroke,i.strokeWidth=n+(n%2===1?1:0);const o=e.convert(0);i.translationY=o}generateNodeData(){const{data:e,yData:t,xData:i,xScale:s,yScale:n,fill:o,stroke:a,strokeWidth:l,label:c}=this;if(!e)return;const{fontStyle:d,fontWeight:h,fontSize:u,fontFamily:p,color:f,formatter:g,placement:m}=c,v=[],C=n.convert(0),y=!(s instanceof $R);for(let R=0,b=t.length;R<b;R++){let w=t[R];const x=i[R],O=w===void 0;O&&(w=0);const M=Math.min(w===void 0?NaN:n.convert(w),C),N=s.convert(y?s.toDomain(x):x),V=Math.max(w===void 0?NaN:n.convert(w),C),I=y?this.bandWidth:s.bandwidth,H=V-M,B={x:N+I/2,y:C};let X;g?X=g({value:w}):X=w!==void 0&&lz(w)?this.formatLabelValue(w):"";const J=N+I/2;let Y;const ae="center";let re;const K=w!==void 0&&w>=0,D=2;if(m===pa.Center)Y=M+H/2,re="middle";else if(m===pa.OutsideEnd)Y=M+(K?-D:H+D),re=K?"bottom":"top";else if(m===pa.InsideEnd){Y=M+(K?D:H-D),re=K?"top":"bottom";const P=Rt.getTextSize(X,p).height||10,F=C-P,L=C+P;(K&&Y>F||!K&&Y<L)&&(Y=C+D*(K?-1:1),re=K?"bottom":"top")}else Y=C+D*(K?-1:1),re=K?"bottom":"top";v.push({x:N,y:M,width:I,height:H,fill:o,stroke:a,strokeWidth:l,seriesDatum:{x,y:O?void 0:w},point:B,label:{x:J,y:Y,text:X,fontStyle:d,fontWeight:h,fontSize:u,fontFamily:p,textAlign:ae,textBaseline:re,fill:f}})}return v}}M_.className="ColumnSparkline";const{isNumber:cz}=Wd;class dz{static create(e,t){e=Gt([e]);const i=hz(e.type);return t&&(i.tooltip=t),pz(i,e),uz(i,e),e.data&&(i.data=e.data),i.processedOptions=e,i}}function hz(r="line"){switch(r){case"column":return new M_;case"bar":return new P_;case"area":return new D_;case"line":default:return new O_}}function uz(r,e){switch(e.type){case"bar":KR(r,e);break;case"column":KR(r,e);break;case"area":gz(r,e);break;case"line":default:fz(r,e);break}}function pz(r,e){Ae(r,"context",e.context,e),Ae(r,"width",e.width,e),Ae(r,"height",e.height,e),Ae(r,"container",e.container,e),Ae(r,"xKey",e.xKey,e),Ae(r,"yKey",e.yKey,e),e.padding&&mz(r.padding,e.padding),e.axis&&Cz(r.axis,e.axis),e.highlightStyle&&yz(r.highlightStyle,e.highlightStyle)}function fz(r,e){e.marker&&__(r.marker,e.marker),e.line&&I_(r.line,e.line),e.crosshairs&&L_(r.crosshairs,e.crosshairs)}function gz(r,e){Ae(r,"fill",e.fill,e),e.marker&&__(r.marker,e.marker),e.line&&I_(r.line,e.line),e.crosshairs&&L_(r.crosshairs,e.crosshairs)}function KR(r,e){Ae(r,"valueAxisDomain",e.valueAxisDomain,e),Ae(r,"fill",e.fill,e),Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e),Ae(r,"paddingInner",e.paddingInner,e),Ae(r,"paddingOuter",e.paddingOuter,e),Ae(r,"formatter",e.formatter,e),e.label&&vz(r.label,e.label)}function mz(r,e){Ae(r,"top",e.top,e),Ae(r,"right",e.right,e),Ae(r,"bottom",e.bottom,e),Ae(r,"left",e.left,e)}function __(r,e){Ae(r,"enabled",e.enabled,e),Ae(r,"size",e.size,e),Ae(r,"shape",e.shape,e),Ae(r,"fill",e.fill,e),Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e),Ae(r,"formatter",e.formatter,e)}function vz(r,e){Ae(r,"enabled",e.enabled,e),Ae(r,"fontStyle",e.fontStyle,e),Ae(r,"fontWeight",e.fontWeight,e),Ae(r,"fontSize",e.fontSize,e),Ae(r,"fontFamily",e.fontFamily,e),Ae(r,"textAlign",e.textAlign,e),Ae(r,"textBaseline",e.textBaseline,e),Ae(r,"color",e.color,e),Ae(r,"formatter",e.formatter,e),Ae(r,"placement",e.placement,e)}function I_(r,e){Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e)}function Cz(r,e){Ae(r,"type",e.type,e),Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e)}function yz(r,e){Ae(r,"fill",e.fill,e),Ae(r,"size",e.size,e),Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e)}function L_(r,e){r.xLine&&e.xLine&&YR(r.xLine,e.xLine),r.yLine&&e.yLine&&YR(r.yLine,e.yLine)}function YR(r,e){Ae(r,"enabled",e.enabled,e),Ae(r,"stroke",e.stroke,e),Ae(r,"strokeWidth",e.strokeWidth,e),Ae(r,"lineDash",e.lineDash,e),Ae(r,"lineCap",e.lineCap,e)}const XR={};function Sz(r,e){XR[e]||(r(),XR[e]=!0)}const qR=(r,e,t)=>{if(cz(e))return!0;const i=`AG Charts: ${r} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`;return Sz(()=>console.warn(i),`${r} not a number`),!1},wz={xOffset:qR,yOffset:qR};function Ae(r,e,t,i){if(e in i)if(e in r){const s=wz[e];(s?s(e,t,r[e]):!0)&&r[e]!==t&&(r[e]=t)}else console.warn(`Property ${e} does not exist on the target object.`)}var UE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};class th extends Q{constructor(){super(th.TEMPLATE)}init(e){let t=!0;const i=()=>{const{clientWidth:n,clientHeight:o}=this.getGui();if(!(n===0||o===0))if(t){const a=Object.assign({data:e.value,width:n,height:o,context:{data:e.data}},e.sparklineOptions);this.sparkline=dz.create(a,this.sparklineTooltipSingleton.getSparklineTooltip()),this.eSparkline.appendChild(this.sparkline.canvasElement),t=!1}else this.sparkline.width=n,this.sparkline.height=o},s=this.resizeObserverService.observeResize(this.getGui(),i);this.addDestroyFunc(()=>s())}refresh(e){return this.sparkline?(this.sparkline.data=e.value,!0):!1}destroy(){this.sparkline&&this.sparkline.destroy(),super.destroy()}}th.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`;UE([G("eSparkline")],th.prototype,"eSparkline",void 0);UE([S("resizeObserverService")],th.prototype,"resizeObserverService",void 0);UE([S("sparklineTooltipSingleton")],th.prototype,"sparklineTooltipSingleton",void 0);var jE=function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};let $f=class extends j{postConstruct(){this.tooltip=new In}getSparklineTooltip(){return this.tooltip}destroyTooltip(){this.tooltip&&this.tooltip.destroy()}};jE([U],$f.prototype,"postConstruct",null);jE([ft],$f.prototype,"destroyTooltip",null);$f=jE([ee("sparklineTooltipSingleton")],$f);const bz="30.0.2",Ez={version:bz,moduleName:te.SparklinesModule,beans:[$f],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:th}],dependantModules:[Wi]},F_=[KG,ak,cH,hH,aj,dj,gj,vj,c_,Sj,NA,Rj,Ij,Ub,Nj,Hj,Ez];PA.concat(F_);ie.registerModules(F_);const N_={animateRows:!0,headerHeight:180,defaultColDef:{sortable:!0,resizable:!0},enableRangeSelection:!0,enableCellChangeFlash:!0,enableCharts:!0,getRowId:function(r){return r.github}};class xz{constructor(){Me(this,"title","");Me(this,"subtitle","");Me(this,"columnDefs",[{headerName:"User",field:"user",width:180,suppressSizeToFit:!0,pinned:"left"},{headerName:"Github",field:"github",width:80,suppressSizeToFit:!0,cellRenderer:this.renderGithub},{headerName:"Total",field:"summary",width:60,suppressSizeToFit:!0},{headerName:"Date Last Accessed",field:"date",width:90,suppressSizeToFit:!0}]);Me(this,"sortModel",[{colId:"summary",sort:"dsc"}]);Me(this,"rowData",[])}renderGithub(e){if(e.value){const t=document.createElement("span"),i=document.createElement("a"),s=document.createTextNode(e.value);return i.appendChild(s),i.title=e.value,i.href="http://github.com/"+i.title,i.setAttribute("target","_blank"),t.appendChild(i),t}}formatName(e,t){let i=e;const s=i;if(i===t)i="~~ "+t;else{const n=s.split(" ").slice(0,-1).join(" ");i=s.split(" ").slice(-1).join(" ")+", "+n}return i}creatRow(e){return{user:e.name,summary:0,date:e.last,github:e.nickname}}render(e){if(e){const t=e.gridOptions.api;t.setColumnDefs(this.columnDefs);const i=this.rowData.sort((s,n)=>s.summary<n.summary?1:s.summary>n.summary?-1:0);t.setRowData(i)}}chart(e,t){if(e){const i=e.gridOptions.api,s=[];this.columnDefs.forEach(n=>{n.field!="summary"&&s.push(n.field)}),i.createRangeChart({chartType:t,cellRange:{rowStartIndex:0,rowEndIndex:this.rowData.length,columns:s},chartContainer:document.querySelector("#chart")})}}clear(e){e&&(e.gridOptions.api.setRowData([]),this.rowData=[],this.columnDefs.length=4)}zeroEntries(e,t){e.forEach(i=>{t[`${i.title}`]=0})}zeroEntriesComplete(e,t){e.forEach(i=>{i.los.forEach(s=>{t[`${i.title+s.shortTitle}`]=0})})}}const G_={"d-green-35":"x >= 350","d-green-34":"x >= 340 && x < 350","d-green-33":"x >= 330 && x < 340","d-green-32":"x >= 320 && x < 330","d-green-31":"x >= 310 && x < 320","d-green-30":"x >= 300 && x < 310","d-green-29":"x >= 290 && x < 300","d-green-28":"x >= 280 && x < 290","d-green-27":"x >= 270 && x < 280","d-green-26":"x >= 260 && x < 270","d-green-25":"x >= 250 && x < 260","d-green-24":"x >= 240 && x < 250","d-green-23":"x >= 230 && x < 240","d-green-22":"x >= 220 && x < 230","d-green-21":"x >= 210 && x < 220","d-green-20":"x >= 200 && x < 210","d-green-19":"x >= 190 && x < 200","d-green-18":"x >= 180 && x < 190","d-green-17":"x >= 170 && x < 180","d-green-16":"x >= 160 && x < 170","d-green-15":"x >= 150 && x < 160","d-green-14":"x >= 140 && x < 150","d-green-13":"x >= 130 && x < 140","d-green-12":"x >= 120 && x < 130","d-green-11":"x >= 110 && x < 120","d-green-10":"x >= 100 && x < 110","d-green-9":"x >= 90  && x < 100","d-green-8":"x >= 80  && x < 90","d-green-7":"x >= 70  && x < 80","d-green-6":"x >= 60  && x < 70","d-green-5":"x >= 50  && x < 60","d-green-4":"x >= 40  && x < 50","d-green-3":"x >= 30  && x < 40","d-green-2":"x >= 20  && x < 30","d-green-1":"x >= 10  && x < 20",yellow:"x >  0  && x < 10",red:"x == 0"};class k_ extends xz{constructor(){super(...arguments);Me(this,"title","Tutors Time");Me(this,"subtitle","Number of minutes a lab is active")}populateCols(t){t.forEach(i=>{this.columnDefs.push({headerName:i.title,width:48,field:i.title,suppressSizeToFit:!0,cellClassRules:G_,menuTabs:[]})})}populateRow(t,i){const s=this.creatRow(t);this.zeroEntries(i,s);let n=0;t.labActivity.forEach(o=>{let a=0;o&&(o.metrics.forEach(l=>{l.count&&(a=a+l.count)}),a=Math.round(a/2),s[`${o.title}`]=a),n=n+a}),s.summary=n,this.rowData.push(s)}}function Rz(r){let e;return{c(){e=tt("div"),this.h()},l(t){e=it(t,"DIV",{class:!0}),at(e).forEach(de),this.h()},h(){Ce(e,"class","ag-theme-balham h-5/6")},m(t,i){ze(t,e,i),r[5](e)},p:cr,d(t){t&&de(e),r[5](null)}}}function Tz(r){let e,t,i;return{c(){e=tt("div"),t=gi(),i=tt("div"),this.h()},l(s){e=it(s,"DIV",{id:!0,class:!0}),at(e).forEach(de),t=mi(s),i=it(s,"DIV",{class:!0}),at(i).forEach(de),this.h()},h(){Ce(e,"id","chart"),Ce(e,"class","ag-theme-balham h-5/6"),Ce(i,"class","ag-theme-balham")},m(s,n){ze(s,e,n),ze(s,t,n),ze(s,i,n),r[4](i)},p:cr,d(s){s&&de(e),s&&de(t),s&&de(i),r[4](null)}}}function Dz(r){let e;function t(n,o){return n[0]?Tz:Rz}let i=t(r),s=i(r);return{c(){e=tt("div"),s.c(),this.h()},l(n){e=it(n,"DIV",{class:!0});var o=at(e);s.l(o),o.forEach(de),this.h()},h(){Ce(e,"class","h-screen")},m(n,o){ze(n,e,o),s.m(e,null)},p(n,[o]){i===(i=t(n))&&s?s.p(n,o):(s.d(1),s=i(n),s&&(s.c(),s.m(e,null)))},i:cr,o:cr,d(n){n&&de(e),s.d()}}}function Oz(r,e,t){let{chart:i=!1}=e,{user:s}=e,{allLabs:n=[]}=e,o,a,l=new k_;qf(async()=>{a=new kg(o,{...N_}),l.populateCols(n),l.populateRow(s,n),l.render(a),i&&l.chart(a,"groupedBar")});function c(h){Ps[h?"unshift":"push"](()=>{o=h,t(1,o)})}function d(h){Ps[h?"unshift":"push"](()=>{o=h,t(1,o)})}return r.$$set=h=>{"chart"in h&&t(0,i=h.chart),"user"in h&&t(2,s=h.user),"allLabs"in h&&t(3,n=h.allLabs)},[i,o,s,n,c,d]}class V_ extends fd{constructor(e){super(),gd(this,e,Oz,Dz,md,{chart:0,user:2,allLabs:3})}}function Az(r){let e;return{c(){e=tt("div"),this.h()},l(t){e=it(t,"DIV",{class:!0}),at(e).forEach(de),this.h()},h(){Ce(e,"class","ag-theme-balham h-5/6")},m(t,i){ze(t,e,i),r[6](e)},p:cr,d(t){t&&de(e),r[6](null)}}}function Pz(r){let e,t,i;return{c(){e=tt("div"),t=gi(),i=tt("div"),this.h()},l(s){e=it(s,"DIV",{id:!0,class:!0}),at(e).forEach(de),t=mi(s),i=it(s,"DIV",{class:!0}),at(i).forEach(de),this.h()},h(){Ce(e,"id","chart"),Ce(e,"class","ag-theme-balham h-5/6"),Ce(i,"class","ag-theme-balham")},m(s,n){ze(s,e,n),ze(s,t,n),ze(s,i,n),r[5](i)},p:cr,d(s){s&&de(e),s&&de(t),s&&de(i),r[5](null)}}}function Mz(r){let e,t,i,s,n,o,a,l,c,d,h,u,p;l=new YT({props:{type:"timeExport"}});function f(v,C){return v[0]?Pz:Az}let g=f(r),m=g(r);return{c(){e=tt("div"),t=tt("div"),i=tt("div"),s=Ra("Time spent on each lab"),n=gi(),o=tt("div"),a=tt("button"),vi(l.$$.fragment),c=gi(),d=tt("div"),m.c(),this.h()},l(v){e=it(v,"DIV",{class:!0});var C=at(e);t=it(C,"DIV",{class:!0});var y=at(t);i=it(y,"DIV",{class:!0});var R=at(i);s=Ta(R,"Time spent on each lab"),R.forEach(de),y.forEach(de),n=mi(C),o=it(C,"DIV",{class:!0});var b=at(o);a=it(b,"BUTTON",{});var w=at(a);Ci(l.$$.fragment,w),w.forEach(de),b.forEach(de),C.forEach(de),c=mi(v),d=it(v,"DIV",{class:!0});var x=at(d);m.l(x),x.forEach(de),this.h()},h(){Ce(i,"class","text-base font-light text-gray-900"),Ce(t,"class","w-1/2"),Ce(o,"class","w-1/4"),Ce(e,"class","flex justify-around p-1"),Ce(d,"class","h-screen")},m(v,C){ze(v,e,C),bt(e,t),bt(t,i),bt(i,s),bt(e,n),bt(e,o),bt(o,a),yi(l,a,null),ze(v,c,C),ze(v,d,C),m.m(d,null),h=!0,u||(p=$s(a,"click",r[2]),u=!0)},p(v,[C]){g===(g=f(v))&&m?m.p(v,C):(m.d(1),m=g(v),m&&(m.c(),m.m(d,null)))},i(v){h||(Ye(l.$$.fragment,v),h=!0)},o(v){lt(l.$$.fragment,v),h=!1},d(v){v&&de(e),Si(l),v&&de(c),v&&de(d),m.d(),u=!1,p()}}}function _z(r,e,t){let{chart:i=!1}=e,{userMap:s}=e,{allLabs:n=[]}=e,o,a,l=new k_;qf(async()=>{a=new kg(o,{...N_}),l.populateCols(n);for(const u of s.values())l.populateRow(u,n);l.render(a),i&&l.chart(a,"stackedArea")});let c=function(){a.gridOptions.api.exportDataAsExcel()};function d(u){Ps[u?"unshift":"push"](()=>{o=u,t(1,o)})}function h(u){Ps[u?"unshift":"push"](()=>{o=u,t(1,o)})}return r.$$set=u=>{"chart"in u&&t(0,i=u.chart),"userMap"in u&&t(3,s=u.userMap),"allLabs"in u&&t(4,n=u.allLabs)},[i,o,c,s,n,d,h]}class zE extends fd{constructor(e){super(),gd(this,e,_z,Mz,md,{chart:0,userMap:3,allLabs:4})}}const H_={animateRows:!0,headerHeight:120,defaultColDef:{sortable:!0,resizable:!0},enableRangeSelection:!0,enableCellChangeFlash:!0,getRowId:function(r){return r.github},getRowHeight:function(r){return r.data.user?60:25},getRowStyle:function(r){if(r.data.user)return{background:"#B2E3F1"}}};class B_{constructor(){Me(this,"title","Tutors Time");Me(this,"subtitle","Activity in the Semester");Me(this,"columnDefs",[{headerName:"User",field:"user",width:180,suppressSizeToFit:!0,pinned:"left"},{headerName:"Github",field:"github",width:80,suppressSizeToFit:!0,cellRenderer:this.renderGithub},{headerName:"Day",field:"date",width:90,suppressSizeToFit:!0}]);Me(this,"sortModel",[{colId:"summary",sort:"dsc"}]);Me(this,"rowData",[])}renderGithub(e){if(e.value){const t=document.createElement("span"),i=document.createElement("a"),s=document.createElement("img");return s.src=`http://github.com/${e.value}.png`,s.width=120,i.append(s),i.title=e.value,i.href=`http://github.com/${e.value}`,i.setAttribute("target","_blank"),t.appendChild(i),t}}createUserIdRow(e){return{user:e.name,github:e.nickname}}creatRow(e,t){return{user:"",date:["Mon","Tue","Wed","Thur","Fri","Sat","Sun"][t],github:""}}render(e){if(e){const t=e.gridOptions.api;t.setColumnDefs(this.columnDefs),t.setRowData(this.rowData)}}populateCols(e){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e&&e.weeks.forEach(i=>{const s=Date.parse(i.date),n=ox(s);this.columnDefs.push({headerName:`${i.title}: ${t[i.dateObj.getMonth()]}`,width:48,field:n,suppressSizeToFit:!0,cellClassRules:G_,menuTabs:[]})})}populateRow(e,t){this.rowData.push(this.createUserIdRow(e));for(let s=0;s<7;s++){const n=this.creatRow(e,s);e.calendarActivity.forEach(o=>{for(let a=0;a<t.weeks.length-1;a++)if(o.dateObj>=Date.parse(t.weeks[a].date)&&o.dateObj<Date.parse(t.weeks[a+1].date)){const l=ox(t.weeks[a].date),c=o.dateObj,d=Date.parse(t.weeks[a].date);(c-d)/(1e3*3600*24)==s&&(n[l]=Math.round(o.metric/2))}}),this.rowData.push(n)}const i=this.creatRow(e,8);this.rowData.push(i)}}function Iz(r){let e,t,i,s,n,o,a,l,c,d,h,u,p,f;return l=new YT({props:{type:"timeExport"}}),{c(){e=tt("div"),t=tt("div"),i=tt("div"),s=Ra("Time online this semester"),n=gi(),o=tt("div"),a=tt("button"),vi(l.$$.fragment),c=gi(),d=tt("div"),h=tt("div"),this.h()},l(g){e=it(g,"DIV",{class:!0});var m=at(e);t=it(m,"DIV",{class:!0});var v=at(t);i=it(v,"DIV",{class:!0});var C=at(i);s=Ta(C,"Time online this semester"),C.forEach(de),v.forEach(de),n=mi(m),o=it(m,"DIV",{class:!0});var y=at(o);a=it(y,"BUTTON",{});var R=at(a);Ci(l.$$.fragment,R),R.forEach(de),y.forEach(de),m.forEach(de),c=mi(g),d=it(g,"DIV",{class:!0});var b=at(d);h=it(b,"DIV",{style:!0,class:!0}),at(h).forEach(de),b.forEach(de),this.h()},h(){Ce(i,"class","text-base font-light text-gray-900"),Ce(t,"class","w-1/2"),Ce(o,"class","w-1/4"),Ce(e,"class","flex justify-around p-1"),lv(h,"height","100%"),lv(h,"width","100%"),Ce(h,"class","ag-theme-balham"),Ce(d,"class","h-screen")},m(g,m){ze(g,e,m),bt(e,t),bt(t,i),bt(i,s),bt(e,n),bt(e,o),bt(o,a),yi(l,a,null),ze(g,c,m),ze(g,d,m),bt(d,h),r[4](h),u=!0,p||(f=$s(a,"click",r[1]),p=!0)},p:cr,i(g){u||(Ye(l.$$.fragment,g),u=!0)},o(g){lt(l.$$.fragment,g),u=!1},d(g){g&&de(e),Si(l),g&&de(c),g&&de(d),r[4](null),p=!1,f()}}}function Lz(r,e,t){let{calendarData:i}=e,{userMap:s}=e,n,o,a=new B_;qf(async()=>{o=new kg(n,{...H_}),a.populateCols(i);for(const d of s.values())a.populateRow(d,i);a.render(o)});let l=function(){o.gridOptions.api.exportDataAsExcel()};function c(d){Ps[d?"unshift":"push"](()=>{n=d,t(0,n)})}return r.$$set=d=>{"calendarData"in d&&t(2,i=d.calendarData),"userMap"in d&&t(3,s=d.userMap)},[n,l,i,s,c]}class Fz extends fd{constructor(e){super(),gd(this,e,Lz,Iz,md,{calendarData:2,userMap:3})}}function Nz(r){let e,t;return{c(){e=tt("div"),t=tt("div"),this.h()},l(i){e=it(i,"DIV",{class:!0});var s=at(e);t=it(s,"DIV",{style:!0,class:!0}),at(t).forEach(de),s.forEach(de),this.h()},h(){lv(t,"height","100%"),lv(t,"width","100%"),Ce(t,"class","ag-theme-balham"),Ce(e,"class","h-screen")},m(i,s){ze(i,e,s),bt(e,t),r[3](t)},p:cr,i:cr,o:cr,d(i){i&&de(e),r[3](null)}}}function Gz(r,e,t){let{user:i}=e,{calendarData:s}=e,n,o,a=new B_;qf(async()=>{o=new kg(n,{...H_}),a.populateCols(s),a.populateRow(i,s),a.render(o)});function l(c){Ps[c?"unshift":"push"](()=>{n=c,t(0,n)})}return r.$$set=c=>{"user"in c&&t(1,i=c.user),"calendarData"in c&&t(2,s=c.calendarData)},[n,i,s,l]}class kz extends fd{constructor(e){super(),gd(this,e,Gz,Nz,md,{user:1,calendarData:2})}}let Ts,Dn,Kp;ow.subscribe(r=>{Ts=r});iC.subscribe(r=>{Dn=r});$m.subscribe(r=>{Kp=r});const Ly={loRoute:"",learningEvent(r){r.loid&&(this.loRoute=mc(r.loid)),this.reportPageLoad()},setOnlineStatus(r){const e=r?"online":"offline",t=`${Ts.id}/users/${mc(Dn.email)}/onlineStatus`;vc(t,e),Dn.onlineStatus=e},async getOnlineStatus(r,e){if(!r||!e)return"online";this.user=e,this.courseId=r.url.substring(0,r.url.indexOf("."));const t=`${this.courseId}/users/${mc(e.email)}/onlineStatus`;return await vI(t)||"online"},reportPageLoad(){if(Op(`${Ts.id}/usage/${this.loRoute}`,this.title),J0(this.courseId),(!Dn||Dn&&Dn.onlineStatus==="online")&&(Op(`all-course-access/${Ts.id}`,this.title),J0(`all-course-access/${Ts.id}`),rx(`all-course-access/${Ts.id}`,Ts,Kp)),Dn){const r=`${this.courseId}/users/${mc(Dn.email)}/${this.loRoute}`;Op(r,Kp.title),J0(r)}},updatePageCount(){if(Op(`${Ts.id}/usage/${this.loRoute}`,this.title),Q0(Ts.id),Dn){Q0(`all-course-access/${Ts.id}`),Dn.onlineStatus==="online"&&rx(`all-course-access/${Ts.id}`,Ts,Kp);const r=`${Ts.id}/users/${mc(Dn.email)}/${this.loRoute}`;Op(r,Kp.title),Q0(r),CI(`${Ts.id}/users/${mc(Dn.email)}`)}},updateLogin(r,e){const t=`${r}/users/${mc(e.email)}`;vc(`${t}/email`,e.email),vc(`${t}/name`,e.name),vc(`${t}/id`,e.userId),vc(`${t}/nickname`,e.nickname),vc(`${t}/picture`,e.picture),vc(`${t}/last`,new Date().toString()),yI(`${t}/count`)}};var Vz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ih(r,e){return r(e={exports:{}},e.exports),e.exports}var ui=ih(function(r){var e,t;e=Vz,t=function(){function i(s){var n=[];if(s.length===0)return"";if(typeof s[0]!="string")throw new TypeError("Url must be a string. Received "+s[0]);if(s[0].match(/^[^/:]+:\/*$/)&&s.length>1){var o=s.shift();s[0]=o+s[0]}s[0].match(/^file:\/\/\//)?s[0]=s[0].replace(/^([^/:]+):\/*/,"$1:///"):s[0]=s[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<s.length;a++){var l=s[a];if(typeof l!="string")throw new TypeError("Url must be a string. Received "+l);l!==""&&(a>0&&(l=l.replace(/^[\/]+/,"")),l=a<s.length-1?l.replace(/[\/]+$/,""):l.replace(/[\/]+$/,"/"),n.push(l))}var c=n.join("/"),d=(c=c.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return c=d.shift()+(d.length>0?"?":"")+d.join("&")}return function(){return i(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}},r.exports?r.exports=t():e.urljoin=t()}),ZR=typeof Symbol<"u"&&Symbol,Hz="Function.prototype.bind called on incompatible ",Fy=Array.prototype.slice,Bz=Object.prototype.toString,fa=Function.prototype.bind||function(r){var e=this;if(typeof e!="function"||Bz.call(e)!=="[object Function]")throw new TypeError(Hz+e);for(var t,i=Fy.call(arguments,1),s=function(){if(this instanceof t){var c=e.apply(this,i.concat(Fy.call(arguments)));return Object(c)===c?c:this}return e.apply(r,i.concat(Fy.call(arguments)))},n=Math.max(0,e.length-i.length),o=[],a=0;a<n;a++)o.push("$"+a);if(t=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var l=function(){};l.prototype=e.prototype,t.prototype=new l,l.prototype=null}return t},Jv=fa.call(Function.call,Object.prototype.hasOwnProperty),xu=SyntaxError,W_=Function,Kh=TypeError,Ny=function(r){try{return W_('"use strict"; return ('+r+").constructor;")()}catch{}},Uc=Object.getOwnPropertyDescriptor;if(Uc)try{Uc({},"")}catch{Uc=null}var Gy=function(){throw new Kh},Wz=Uc?function(){try{return Gy}catch{try{return Uc(arguments,"callee").get}catch{return Gy}}}():Gy,bh=typeof ZR=="function"&&typeof Symbol=="function"&&typeof ZR("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;for(e in r[e]=42,r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(r,e);if(s.value!==42||s.enumerable!==!0)return!1}return!0}(),tr=Object.getPrototypeOf||function(r){return r.__proto__},Ah={},Uz=typeof Uint8Array>"u"?void 0:tr(Uint8Array),jc={"%AggregateError%":typeof AggregateError>"u"?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":bh?tr([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":Ah,"%AsyncGenerator%":Ah,"%AsyncGeneratorFunction%":Ah,"%AsyncIteratorPrototype%":Ah,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%BigInt%":typeof BigInt>"u"?void 0:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?void 0:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry,"%Function%":W_,"%GeneratorFunction%":Ah,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bh?tr(tr([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&bh?tr(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&bh?tr(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bh?tr(""[Symbol.iterator]()):void 0,"%Symbol%":bh?Symbol:void 0,"%SyntaxError%":xu,"%ThrowTypeError%":Wz,"%TypedArray%":Uz,"%TypeError%":Kh,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakRef%":typeof WeakRef>"u"?void 0:WeakRef,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet};try{null.error}catch(r){var jz=tr(tr(r));jc["%Error.prototype%"]=jz}var JR={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},zz=fa.call(Function.call,Array.prototype.concat),$z=fa.call(Function.apply,Array.prototype.splice),QR=fa.call(Function.call,String.prototype.replace),Qv=fa.call(Function.call,String.prototype.slice),Kz=fa.call(Function.call,RegExp.prototype.exec),Yz=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xz=/\\(\\)?/g,qz=function(r){var e=Qv(r,0,1),t=Qv(r,-1);if(e==="%"&&t!=="%")throw new xu("invalid intrinsic syntax, expected closing `%`");if(t==="%"&&e!=="%")throw new xu("invalid intrinsic syntax, expected opening `%`");var i=[];return QR(r,Yz,function(s,n,o,a){i[i.length]=o?QR(a,Xz,"$1"):n||s}),i},Zz=function(r,e){var t,i=r;if(Jv(JR,i)&&(i="%"+(t=JR[i])[0]+"%"),Jv(jc,i)){var s=jc[i];if(s===Ah&&(s=function n(o){var a;if(o==="%AsyncFunction%")a=Ny("async function () {}");else if(o==="%GeneratorFunction%")a=Ny("function* () {}");else if(o==="%AsyncGeneratorFunction%")a=Ny("async function* () {}");else if(o==="%AsyncGenerator%"){var l=n("%AsyncGeneratorFunction%");l&&(a=l.prototype)}else if(o==="%AsyncIteratorPrototype%"){var c=n("%AsyncGenerator%");c&&(a=tr(c.prototype))}return jc[o]=a,a}(i)),s===void 0&&!e)throw new Kh("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:t,name:i,value:s}}throw new xu("intrinsic "+r+" does not exist!")},ho=function(r,e){if(typeof r!="string"||r.length===0)throw new Kh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Kh('"allowMissing" argument must be a boolean');if(Kz(/^%?[^%]*%?$/,r)===null)throw new xu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var t=qz(r),i=t.length>0?t[0]:"",s=Zz("%"+i+"%",e),n=s.name,o=s.value,a=!1,l=s.alias;l&&(i=l[0],$z(t,zz([0,1],l)));for(var c=1,d=!0;c<t.length;c+=1){var h=t[c],u=Qv(h,0,1),p=Qv(h,-1);if((u==='"'||u==="'"||u==="`"||p==='"'||p==="'"||p==="`")&&u!==p)throw new xu("property names with quotes must have matching quotes");if(h!=="constructor"&&d||(a=!0),Jv(jc,n="%"+(i+="."+h)+"%"))o=jc[n];else if(o!=null){if(!(h in o)){if(!e)throw new Kh("base intrinsic for "+r+" exists, but the property is not available.");return}if(Uc&&c+1>=t.length){var f=Uc(o,h);o=(d=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:o[h]}else d=Jv(o,h),o=o[h];d&&!a&&(jc[n]=o)}}return o},KS=ih(function(r){var e=ho("%Function.prototype.apply%"),t=ho("%Function.prototype.call%"),i=ho("%Reflect.apply%",!0)||fa.call(t,e),s=ho("%Object.getOwnPropertyDescriptor%",!0),n=ho("%Object.defineProperty%",!0),o=ho("%Math.max%");if(n)try{n({},"a",{value:1})}catch{n=null}r.exports=function(l){var c=i(fa,t,arguments);if(s&&n){var d=s(c,"length");d.configurable&&n(c,"length",{value:1+o(0,l.length-(arguments.length-1))})}return c};var a=function(){return i(fa,e,arguments)};n?n(r.exports,"apply",{value:a}):r.exports.apply=a}),Jz=(KS.apply,KS(ho("String.prototype.indexOf"))),Rp=function(r,e){var t=ho(r,!!e);return typeof t=="function"&&Jz(r,".prototype.")>-1?KS(t):t},Yh=function(r){return r&&r.default||r}(Object.freeze({__proto__:null,default:{}})),$E=typeof Map=="function"&&Map.prototype,ky=Object.getOwnPropertyDescriptor&&$E?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Nm=$E&&ky&&typeof ky.get=="function"?ky.get:null,eT=$E&&Map.prototype.forEach,KE=typeof Set=="function"&&Set.prototype,Vy=Object.getOwnPropertyDescriptor&&KE?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Gm=KE&&Vy&&typeof Vy.get=="function"?Vy.get:null,tT=KE&&Set.prototype.forEach,kp=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap.prototype.has:null,Vp=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet.prototype.has:null,iT=typeof WeakRef=="function"&&WeakRef.prototype?WeakRef.prototype.deref:null,Qz=Boolean.prototype.valueOf,e4=Object.prototype.toString,t4=Function.prototype.toString,i4=String.prototype.match,YS=String.prototype.slice,cl=String.prototype.replace,s4=String.prototype.toUpperCase,sT=String.prototype.toLowerCase,U_=RegExp.prototype.test,nT=Array.prototype.concat,qo=Array.prototype.join,n4=Array.prototype.slice,oT=Math.floor,Hy=typeof BigInt=="function"?BigInt.prototype.valueOf:null,By=Object.getOwnPropertySymbols,XS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="object",is=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ru||"symbol")?Symbol.toStringTag:null,j_=Object.prototype.propertyIsEnumerable,rT=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function aT(r,e){if(r===1/0||r===-1/0||r!=r||r&&r>-1e3&&r<1e3||U_.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-oT(-r):oT(r);if(i!==r){var s=String(i),n=YS.call(e,s.length+1);return cl.call(s,t,"$&_")+"."+cl.call(cl.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return cl.call(e,t,"$&_")}var lT=Yh.custom,cT=z_(lT)?lT:null,o4=function r(e,t,i,s){var n=t||{};if(Qa(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Qa(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=!Qa(n,"customInspect")||n.customInspect;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Qa(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Qa(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return function I(H,B){if(H.length>B.maxStringLength){var X=H.length-B.maxStringLength,J="... "+X+" more character"+(X>1?"s":"");return I(YS.call(H,0,B.maxStringLength),B)+J}return dT(cl.call(cl.call(H,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,l4),"single",B)}(e,n);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?aT(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?aT(e,c):c}var d=n.depth===void 0?5:n.depth;if(i===void 0&&(i=0),i>=d&&d>0&&typeof e=="object")return qS(e)?"[Array]":"[Object]";var h=function(I,H){var B;if(I.indent==="	")B="	";else{if(!(typeof I.indent=="number"&&I.indent>0))return null;B=qo.call(Array(I.indent+1)," ")}return{base:B,prev:qo.call(Array(H+1),B)}}(n,i);if(s===void 0)s=[];else if(uT(s,e)>=0)return"[Circular]";function u(I,H,B){if(H&&(s=n4.call(s)).push(H),B){var X={depth:n.depth};return Qa(n,"quoteStyle")&&(X.quoteStyle=n.quoteStyle),r(I,X,i+1,s)}return r(I,n,i+1,s)}if(typeof e=="function"&&!hT(e)){var p=function(I){if(I.name)return I.name;var H=i4.call(t4.call(I),/^function\s*([\w$]+)/);return H?H[1]:null}(e),f=km(e,u);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(f.length>0?" { "+qo.call(f,", ")+" }":"")}if(z_(e)){var g=Ru?cl.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):XS.call(e);return typeof e!="object"||Ru?g:Hp(g)}if(function(I){return!I||typeof I!="object"?!1:typeof HTMLElement<"u"&&I instanceof HTMLElement?!0:typeof I.nodeName=="string"&&typeof I.getAttribute=="function"}(e)){for(var m="<"+sT.call(String(e.nodeName)),v=e.attributes||[],C=0;C<v.length;C++)m+=" "+v[C].name+"="+dT(r4(v[C].value),"double",n);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+sT.call(String(e.nodeName))+">"}if(qS(e)){if(e.length===0)return"[]";var y=km(e,u);return h&&!function(I){for(var H=0;H<I.length;H++)if(uT(I[H],`
`)>=0)return!1;return!0}(y)?"["+ZS(y,h)+"]":"[ "+qo.call(y,", ")+" ]"}if(function(I){return!(el(I)!=="[object Error]"||is&&typeof I=="object"&&is in I)}(e)){var R=km(e,u);return"cause"in Error.prototype||!("cause"in e)||j_.call(e,"cause")?R.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+qo.call(R,", ")+" }":"{ ["+String(e)+"] "+qo.call(nT.call("[cause]: "+u(e.cause),R),", ")+" }"}if(typeof e=="object"&&o){if(cT&&typeof e[cT]=="function"&&Yh)return Yh(e,{depth:d-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(function(I){if(!Nm||!I||typeof I!="object")return!1;try{Nm.call(I);try{Gm.call(I)}catch{return!0}return I instanceof Map}catch{}return!1}(e)){var b=[];return eT&&eT.call(e,function(I,H){b.push(u(H,e,!0)+" => "+u(I,e))}),pT("Map",Nm.call(e),b,h)}if(function(I){if(!Gm||!I||typeof I!="object")return!1;try{Gm.call(I);try{Nm.call(I)}catch{return!0}return I instanceof Set}catch{}return!1}(e)){var w=[];return tT&&tT.call(e,function(I){w.push(u(I,e))}),pT("Set",Gm.call(e),w,h)}if(function(I){if(!kp||!I||typeof I!="object")return!1;try{kp.call(I,kp);try{Vp.call(I,Vp)}catch{return!0}return I instanceof WeakMap}catch{}return!1}(e))return Wy("WeakMap");if(function(I){if(!Vp||!I||typeof I!="object")return!1;try{Vp.call(I,Vp);try{kp.call(I,kp)}catch{return!0}return I instanceof WeakSet}catch{}return!1}(e))return Wy("WeakSet");if(function(I){if(!iT||!I||typeof I!="object")return!1;try{return iT.call(I),!0}catch{}return!1}(e))return Wy("WeakRef");if(function(I){return!(el(I)!=="[object Number]"||is&&typeof I=="object"&&is in I)}(e))return Hp(u(Number(e)));if(function(I){if(!I||typeof I!="object"||!Hy)return!1;try{return Hy.call(I),!0}catch{}return!1}(e))return Hp(u(Hy.call(e)));if(function(I){return!(el(I)!=="[object Boolean]"||is&&typeof I=="object"&&is in I)}(e))return Hp(Qz.call(e));if(function(I){return!(el(I)!=="[object String]"||is&&typeof I=="object"&&is in I)}(e))return Hp(u(String(e)));if(!function(I){return!(el(I)!=="[object Date]"||is&&typeof I=="object"&&is in I)}(e)&&!hT(e)){var x=km(e,u),O=rT?rT(e)===Object.prototype:e instanceof Object||e.constructor===Object,M=e instanceof Object?"":"null prototype",N=!O&&is&&Object(e)===e&&is in e?YS.call(el(e),8,-1):M?"Object":"",V=(O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"")+(N||M?"["+qo.call(nT.call([],N||[],M||[]),": ")+"] ":"");return x.length===0?V+"{}":h?V+"{"+ZS(x,h)+"}":V+"{ "+qo.call(x,", ")+" }"}return String(e)};function dT(r,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+r+i}function r4(r){return cl.call(String(r),/"/g,"&quot;")}function qS(r){return!(el(r)!=="[object Array]"||is&&typeof r=="object"&&is in r)}function hT(r){return!(el(r)!=="[object RegExp]"||is&&typeof r=="object"&&is in r)}function z_(r){if(Ru)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!XS)return!1;try{return XS.call(r),!0}catch{}return!1}var a4=Object.prototype.hasOwnProperty||function(r){return r in this};function Qa(r,e){return a4.call(r,e)}function el(r){return e4.call(r)}function uT(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function l4(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+s4.call(e.toString(16))}function Hp(r){return"Object("+r+")"}function Wy(r){return r+" { ? }"}function pT(r,e,t,i){return r+" ("+e+") {"+(i?ZS(t,i):qo.call(t,", "))+"}"}function ZS(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+qo.call(r,","+t)+`
`+e.prev}function km(r,e){var t=qS(r),i=[];if(t){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=Qa(r,s)?e(r[s],r):""}var n,o=typeof By=="function"?By(r):[];if(Ru){n={};for(var a=0;a<o.length;a++)n["$"+o[a]]=o[a]}for(var l in r)Qa(r,l)&&(t&&String(Number(l))===l&&l<r.length||Ru&&n["$"+l]instanceof Symbol||(U_.call(/[^\w$]/,l)?i.push(e(l,r)+": "+e(r[l],r)):i.push(l+": "+e(r[l],r))));if(typeof By=="function")for(var c=0;c<o.length;c++)j_.call(r,o[c])&&i.push("["+e(o[c])+"]: "+e(r[o[c]],r));return i}var c4=ho("%TypeError%"),Vm=ho("%WeakMap%",!0),Hm=ho("%Map%",!0),d4=Rp("WeakMap.prototype.get",!0),h4=Rp("WeakMap.prototype.set",!0),u4=Rp("WeakMap.prototype.has",!0),p4=Rp("Map.prototype.get",!0),f4=Rp("Map.prototype.set",!0),g4=Rp("Map.prototype.has",!0),Uy=function(r,e){for(var t,i=r;(t=i.next)!==null;i=t)if(t.key===e)return i.next=t.next,t.next=r.next,r.next=t,t},$_=function(){var r,e,t,i={assert:function(s){if(!i.has(s))throw new c4("Side channel does not contain "+o4(s))},get:function(s){if(Vm&&s&&(typeof s=="object"||typeof s=="function")){if(r)return d4(r,s)}else if(Hm){if(e)return p4(e,s)}else if(t)return function(n,o){var a=Uy(n,o);return a&&a.value}(t,s)},has:function(s){if(Vm&&s&&(typeof s=="object"||typeof s=="function")){if(r)return u4(r,s)}else if(Hm){if(e)return g4(e,s)}else if(t)return function(n,o){return!!Uy(n,o)}(t,s);return!1},set:function(s,n){Vm&&s&&(typeof s=="object"||typeof s=="function")?(r||(r=new Vm),h4(r,s,n)):Hm?(e||(e=new Hm),f4(e,s,n)):(t||(t={key:{},next:null}),function(o,a,l){var c=Uy(o,a);c?c.value=l:o.next={key:a,next:o.next,value:l}}(t,s,n))}};return i},m4=String.prototype.replace,v4=/%20/g,fT="RFC3986",Mc={default:fT,formatters:{RFC1738:function(r){return m4.call(r,v4,"+")},RFC3986:function(r){return String(r)}},RFC1738:"RFC1738",RFC3986:fT},jy=Object.prototype.hasOwnProperty,wc=Array.isArray,Ko=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),gT=function(r,e){for(var t=e&&e.plainObjects?Object.create(null):{},i=0;i<r.length;++i)r[i]!==void 0&&(t[i]=r[i]);return t},na={arrayToObject:gT,assign:function(r,e){return Object.keys(e).reduce(function(t,i){return t[i]=e[i],t},r)},combine:function(r,e){return[].concat(r,e)},compact:function(r){for(var e=[{obj:{o:r},prop:"o"}],t=[],i=0;i<e.length;++i)for(var s=e[i],n=s.obj[s.prop],o=Object.keys(n),a=0;a<o.length;++a){var l=o[a],c=n[l];typeof c=="object"&&c!==null&&t.indexOf(c)===-1&&(e.push({obj:n,prop:l}),t.push(c))}return function(d){for(;d.length>1;){var h=d.pop(),u=h.obj[h.prop];if(wc(u)){for(var p=[],f=0;f<u.length;++f)u[f]!==void 0&&p.push(u[f]);h.obj[h.prop]=p}}}(e),r},decode:function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},encode:function(r,e,t,i,s){if(r.length===0)return r;var n=r;if(typeof r=="symbol"?n=Symbol.prototype.toString.call(r):typeof r!="string"&&(n=String(r)),t==="iso-8859-1")return escape(n).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var o="",a=0;a<n.length;++a){var l=n.charCodeAt(a);l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===Mc.RFC1738&&(l===40||l===41)?o+=n.charAt(a):l<128?o+=Ko[l]:l<2048?o+=Ko[192|l>>6]+Ko[128|63&l]:l<55296||l>=57344?o+=Ko[224|l>>12]+Ko[128|l>>6&63]+Ko[128|63&l]:(a+=1,l=65536+((1023&l)<<10|1023&n.charCodeAt(a)),o+=Ko[240|l>>18]+Ko[128|l>>12&63]+Ko[128|l>>6&63]+Ko[128|63&l])}return o},isBuffer:function(r){return!(!r||typeof r!="object")&&!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},isRegExp:function(r){return Object.prototype.toString.call(r)==="[object RegExp]"},maybeMap:function(r,e){if(wc(r)){for(var t=[],i=0;i<r.length;i+=1)t.push(e(r[i]));return t}return e(r)},merge:function r(e,t,i){if(!t)return e;if(typeof t!="object"){if(wc(e))e.push(t);else{if(!e||typeof e!="object")return[e,t];(i&&(i.plainObjects||i.allowPrototypes)||!jy.call(Object.prototype,t))&&(e[t]=!0)}return e}if(!e||typeof e!="object")return[e].concat(t);var s=e;return wc(e)&&!wc(t)&&(s=gT(e,i)),wc(e)&&wc(t)?(t.forEach(function(n,o){if(jy.call(e,o)){var a=e[o];a&&typeof a=="object"&&n&&typeof n=="object"?e[o]=r(a,n,i):e.push(n)}else e[o]=n}),e):Object.keys(t).reduce(function(n,o){var a=t[o];return jy.call(n,o)?n[o]=r(n[o],a,i):n[o]=a,n},s)}},C4=Object.prototype.hasOwnProperty,mT={brackets:function(r){return r+"[]"},comma:"comma",indices:function(r,e){return r+"["+e+"]"},repeat:function(r){return r}},ea=Array.isArray,y4=String.prototype.split,S4=Array.prototype.push,K_=function(r,e){S4.apply(r,ea(e)?e:[e])},w4=Date.prototype.toISOString,vT=Mc.default,Ai={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:na.encode,encodeValuesOnly:!1,format:vT,formatter:Mc.formatters[vT],indices:!1,serializeDate:function(r){return w4.call(r)},skipNulls:!1,strictNullHandling:!1},zy={},b4=function r(e,t,i,s,n,o,a,l,c,d,h,u,p,f,g,m){for(var v=e,C=m,y=0,R=!1;(C=C.get(zy))!==void 0&&!R;){var b=C.get(e);if(y+=1,b!==void 0){if(b===y)throw new RangeError("Cyclic object value");R=!0}C.get(zy)===void 0&&(y=0)}if(typeof l=="function"?v=l(t,v):v instanceof Date?v=h(v):i==="comma"&&ea(v)&&(v=na.maybeMap(v,function(re){return re instanceof Date?h(re):re})),v===null){if(n)return a&&!f?a(t,Ai.encoder,g,"key",u):t;v=""}if(function(re){return typeof re=="string"||typeof re=="number"||typeof re=="boolean"||typeof re=="symbol"||typeof re=="bigint"}(v)||na.isBuffer(v)){if(a){var w=f?t:a(t,Ai.encoder,g,"key",u);if(i==="comma"&&f){for(var x=y4.call(String(v),","),O="",M=0;M<x.length;++M)O+=(M===0?"":",")+p(a(x[M],Ai.encoder,g,"value",u));return[p(w)+(s&&ea(v)&&x.length===1?"[]":"")+"="+O]}return[p(w)+"="+p(a(v,Ai.encoder,g,"value",u))]}return[p(t)+"="+p(String(v))]}var N,V=[];if(v===void 0)return V;if(i==="comma"&&ea(v))N=[{value:v.length>0?v.join(",")||null:void 0}];else if(ea(l))N=l;else{var I=Object.keys(v);N=c?I.sort(c):I}for(var H=s&&ea(v)&&v.length===1?t+"[]":t,B=0;B<N.length;++B){var X=N[B],J=typeof X=="object"&&X.value!==void 0?X.value:v[X];if(!o||J!==null){var Y=ea(v)?typeof i=="function"?i(H,X):H:H+(d?"."+X:"["+X+"]");m.set(e,y);var ae=$_();ae.set(zy,m),K_(V,r(J,Y,i,s,n,o,a,l,c,d,h,u,p,f,g,ae))}}return V},JS=Object.prototype.hasOwnProperty,E4=Array.isArray,hi={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:na.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},x4=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Y_=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},R4=function(r,e,t,i){if(r){var s=t.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,n=/(\[[^[\]]*])/g,o=t.depth>0&&/(\[[^[\]]*])/.exec(s),a=o?s.slice(0,o.index):s,l=[];if(a){if(!t.plainObjects&&JS.call(Object.prototype,a)&&!t.allowPrototypes)return;l.push(a)}for(var c=0;t.depth>0&&(o=n.exec(s))!==null&&c<t.depth;){if(c+=1,!t.plainObjects&&JS.call(Object.prototype,o[1].slice(1,-1))&&!t.allowPrototypes)return;l.push(o[1])}return o&&l.push("["+s.slice(o.index)+"]"),function(d,h,u,p){for(var f=p?h:Y_(h,u),g=d.length-1;g>=0;--g){var m,v=d[g];if(v==="[]"&&u.parseArrays)m=[].concat(f);else{m=u.plainObjects?Object.create(null):{};var C=v.charAt(0)==="["&&v.charAt(v.length-1)==="]"?v.slice(1,-1):v,y=parseInt(C,10);u.parseArrays||C!==""?!isNaN(y)&&v!==C&&String(y)===C&&y>=0&&u.parseArrays&&y<=u.arrayLimit?(m=[])[y]=f:C!=="__proto__"&&(m[C]=f):m={0:f}}f=m}return f}(l,e,t,i)}},dl={formats:Mc,parse:function(r,e){var t=function(c){if(!c)return hi;if(c.decoder!==null&&c.decoder!==void 0&&typeof c.decoder!="function")throw new TypeError("Decoder has to be a function.");if(c.charset!==void 0&&c.charset!=="utf-8"&&c.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=c.charset===void 0?hi.charset:c.charset;return{allowDots:c.allowDots===void 0?hi.allowDots:!!c.allowDots,allowPrototypes:typeof c.allowPrototypes=="boolean"?c.allowPrototypes:hi.allowPrototypes,allowSparse:typeof c.allowSparse=="boolean"?c.allowSparse:hi.allowSparse,arrayLimit:typeof c.arrayLimit=="number"?c.arrayLimit:hi.arrayLimit,charset:d,charsetSentinel:typeof c.charsetSentinel=="boolean"?c.charsetSentinel:hi.charsetSentinel,comma:typeof c.comma=="boolean"?c.comma:hi.comma,decoder:typeof c.decoder=="function"?c.decoder:hi.decoder,delimiter:typeof c.delimiter=="string"||na.isRegExp(c.delimiter)?c.delimiter:hi.delimiter,depth:typeof c.depth=="number"||c.depth===!1?+c.depth:hi.depth,ignoreQueryPrefix:c.ignoreQueryPrefix===!0,interpretNumericEntities:typeof c.interpretNumericEntities=="boolean"?c.interpretNumericEntities:hi.interpretNumericEntities,parameterLimit:typeof c.parameterLimit=="number"?c.parameterLimit:hi.parameterLimit,parseArrays:c.parseArrays!==!1,plainObjects:typeof c.plainObjects=="boolean"?c.plainObjects:hi.plainObjects,strictNullHandling:typeof c.strictNullHandling=="boolean"?c.strictNullHandling:hi.strictNullHandling}}(e);if(r===""||r==null)return t.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?function(c,d){var h,u={},p=d.ignoreQueryPrefix?c.replace(/^\?/,""):c,f=d.parameterLimit===1/0?void 0:d.parameterLimit,g=p.split(d.delimiter,f),m=-1,v=d.charset;if(d.charsetSentinel)for(h=0;h<g.length;++h)g[h].indexOf("utf8=")===0&&(g[h]==="utf8=%E2%9C%93"?v="utf-8":g[h]==="utf8=%26%2310003%3B"&&(v="iso-8859-1"),m=h,h=g.length);for(h=0;h<g.length;++h)if(h!==m){var C,y,R=g[h],b=R.indexOf("]="),w=b===-1?R.indexOf("="):b+1;w===-1?(C=d.decoder(R,hi.decoder,v,"key"),y=d.strictNullHandling?null:""):(C=d.decoder(R.slice(0,w),hi.decoder,v,"key"),y=na.maybeMap(Y_(R.slice(w+1),d),function(x){return d.decoder(x,hi.decoder,v,"value")})),y&&d.interpretNumericEntities&&v==="iso-8859-1"&&(y=x4(y)),R.indexOf("[]=")>-1&&(y=E4(y)?[y]:y),JS.call(u,C)?u[C]=na.combine(u[C],y):u[C]=y}return u}(r,t):r,s=t.plainObjects?Object.create(null):{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=R4(a,i[a],t,typeof r=="string");s=na.merge(s,l,t)}return t.allowSparse===!0?s:na.compact(s)},stringify:function(r,e){var t,i=r,s=function(f){if(!f)return Ai;if(f.encoder!==null&&f.encoder!==void 0&&typeof f.encoder!="function")throw new TypeError("Encoder has to be a function.");var g=f.charset||Ai.charset;if(f.charset!==void 0&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=Mc.default;if(f.format!==void 0){if(!C4.call(Mc.formatters,f.format))throw new TypeError("Unknown format option provided.");m=f.format}var v=Mc.formatters[m],C=Ai.filter;return(typeof f.filter=="function"||ea(f.filter))&&(C=f.filter),{addQueryPrefix:typeof f.addQueryPrefix=="boolean"?f.addQueryPrefix:Ai.addQueryPrefix,allowDots:f.allowDots===void 0?Ai.allowDots:!!f.allowDots,charset:g,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:Ai.charsetSentinel,delimiter:f.delimiter===void 0?Ai.delimiter:f.delimiter,encode:typeof f.encode=="boolean"?f.encode:Ai.encode,encoder:typeof f.encoder=="function"?f.encoder:Ai.encoder,encodeValuesOnly:typeof f.encodeValuesOnly=="boolean"?f.encodeValuesOnly:Ai.encodeValuesOnly,filter:C,format:m,formatter:v,serializeDate:typeof f.serializeDate=="function"?f.serializeDate:Ai.serializeDate,skipNulls:typeof f.skipNulls=="boolean"?f.skipNulls:Ai.skipNulls,sort:typeof f.sort=="function"?f.sort:null,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:Ai.strictNullHandling}}(e);typeof s.filter=="function"?i=(0,s.filter)("",i):ea(s.filter)&&(t=s.filter);var n,o=[];if(typeof i!="object"||i===null)return"";n=e&&e.arrayFormat in mT?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var a=mT[n];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=a==="comma"&&e&&e.commaRoundTrip;t||(t=Object.keys(i)),s.sort&&t.sort(s.sort);for(var c=$_(),d=0;d<t.length;++d){var h=t[d];s.skipNulls&&i[h]===null||K_(o,b4(i[h],h,a,l,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}var u=o.join(s.delimiter),p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),u.length>0?p+u:""}},T4=ih(function(r){function e(t){if(t)return function(i){for(var s in e.prototype)i[s]=e.prototype[s];return i}(t)}r.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(i),this},e.prototype.once=function(t,i){function s(){this.off(t,s),i.apply(this,arguments)}return s.fn=i,this.on(t,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s,n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((s=n[o])===i||s.fn===i){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(s){n=0;for(var o=(s=s.slice(0)).length;n<o;++n)s[n].apply(this,i)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),D4=Yp;Yp.default=Yp,Yp.stable=CT,Yp.stableStringify=CT;var zc=[],_c=[];function X_(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Yp(r,e,t,i){var s;i===void 0&&(i=X_()),function o(a,l,c,d,h,u,p){var f;if(u+=1,typeof a=="object"&&a!==null){for(f=0;f<d.length;f++)if(d[f]===a)return void Xh("[Circular]",a,l,h);if(p.depthLimit!==void 0&&u>p.depthLimit||p.edgesLimit!==void 0&&c+1>p.edgesLimit)return void Xh("[...]",a,l,h);if(d.push(a),Array.isArray(a))for(f=0;f<a.length;f++)o(a[f],f,f,d,a,u,p);else{var g=Object.keys(a);for(f=0;f<g.length;f++){var m=g[f];o(a[m],m,f,d,a,u,p)}}d.pop()}}(r,"",0,[],void 0,0,i);try{s=_c.length===0?JSON.stringify(r,e,t):JSON.stringify(r,q_(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;zc.length!==0;){var n=zc.pop();n.length===4?Object.defineProperty(n[0],n[1],n[3]):n[0][n[1]]=n[2]}}return s}function Xh(r,e,t,i){var s=Object.getOwnPropertyDescriptor(i,t);s.get!==void 0?s.configurable?(Object.defineProperty(i,t,{value:r}),zc.push([i,t,e,s])):_c.push([e,t,r]):(i[t]=r,zc.push([i,t,e]))}function O4(r,e){return r<e?-1:r>e?1:0}function CT(r,e,t,i){i===void 0&&(i=X_());var s,n=function a(l,c,d,h,u,p,f){var g;if(p+=1,typeof l=="object"&&l!==null){for(g=0;g<h.length;g++)if(h[g]===l)return void Xh("[Circular]",l,c,u);try{if(typeof l.toJSON=="function")return}catch{return}if(f.depthLimit!==void 0&&p>f.depthLimit||f.edgesLimit!==void 0&&d+1>f.edgesLimit)return void Xh("[...]",l,c,u);if(h.push(l),Array.isArray(l))for(g=0;g<l.length;g++)a(l[g],g,g,h,l,p,f);else{var m={},v=Object.keys(l).sort(O4);for(g=0;g<v.length;g++){var C=v[g];a(l[C],C,g,h,l,p,f),m[C]=l[C]}if(u===void 0)return m;zc.push([u,c,l]),u[c]=m}h.pop()}}(r,"",0,[],void 0,0,i)||r;try{s=_c.length===0?JSON.stringify(n,e,t):JSON.stringify(n,q_(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;zc.length!==0;){var o=zc.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return s}function q_(r){return r=r!==void 0?r:function(e,t){return t},function(e,t){if(_c.length>0)for(var i=0;i<_c.length;i++){var s=_c[i];if(s[1]===e&&s[0]===t){t=s[2],_c.splice(i,1);break}}return r.call(this,e,t)}}var Cs=ih(function(r,e){function t(n){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}function i(n,o){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=function(p,f){if(p){if(typeof p=="string")return s(p,f);var g=Object.prototype.toString.call(p).slice(8,-1);if(g==="Object"&&p.constructor&&(g=p.constructor.name),g==="Map"||g==="Set")return Array.from(p);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return s(p,f)}}(n))||o&&n&&typeof n.length=="number"){a&&(n=a);var l=0,c=function(){};return{s:c,n:function(){return l>=n.length?{done:!0}:{done:!1,value:n[l++]}},e:function(p){throw p},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,h=!0,u=!1;return{s:function(){a=a.call(n)},n:function(){var p=a.next();return h=p.done,p},e:function(p){u=!0,d=p},f:function(){try{h||a.return==null||a.return()}finally{if(u)throw d}}}}function s(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,l=new Array(o);a<o;a++)l[a]=n[a];return l}e.type=function(n){return n.split(/ *; */).shift()},e.params=function(n){var o,a={},l=i(n.split(/ *; */));try{for(l.s();!(o=l.n()).done;){var c=o.value.split(/ *= */),d=c.shift(),h=c.shift();d&&h&&(a[d]=h)}}catch(u){l.e(u)}finally{l.f()}return a},e.parseLinks=function(n){var o,a={},l=i(n.split(/ *, */));try{for(l.s();!(o=l.n()).done;){var c=o.value.split(/ *; */),d=c[0].slice(1,-1);a[c[1].split(/ *= */)[1].slice(1,-1)]=d}}catch(h){l.e(h)}finally{l.f()}return a},e.cleanHeader=function(n,o){return delete n["content-type"],delete n["content-length"],delete n["transfer-encoding"],delete n.host,o&&(delete n.authorization,delete n.cookie),n},e.isObject=function(n){return n!==null&&t(n)==="object"},e.hasOwn=Object.hasOwn||function(n,o){if(n==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(n),o)},e.mixin=function(n,o){for(var a in o)e.hasOwn(o,a)&&(n[a]=o[a])}});Cs.type,Cs.params,Cs.parseLinks,Cs.cleanHeader,Cs.isObject,Cs.hasOwn,Cs.mixin;function Z_(r){return(Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var Bm=Cs.isObject,Xp=Cs.hasOwn,A4=nt;function nt(){}nt.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},nt.prototype.parse=function(r){return this._parser=r,this},nt.prototype.responseType=function(r){return this._responseType=r,this},nt.prototype.serialize=function(r){return this._serializer=r,this},nt.prototype.timeout=function(r){if(!r||Z_(r)!=="object")return this._timeout=r,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in r)if(Xp(r,e))switch(e){case"deadline":this._timeout=r.deadline;break;case"response":this._responseTimeout=r.response;break;case"upload":this._uploadTimeout=r.upload;break;default:console.warn("Unknown timeout option",e)}return this},nt.prototype.retry=function(r,e){return arguments.length!==0&&r!==!0||(r=1),r<=0&&(r=0),this._maxRetries=r,this._retries=0,this._retryCallback=e,this};var P4=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),M4=new Set([408,413,429,500,502,503,504,521,522,524]);nt.prototype._shouldRetry=function(r,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var t=this._retryCallback(r,e);if(t===!0)return!0;if(t===!1)return!1}catch(i){console.error(i)}return!!(e&&e.status&&M4.has(e.status)||r&&(r.code&&P4.has(r.code)||r.timeout&&r.code==="ECONNABORTED"||r.crossDomain))},nt.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},nt.prototype.then=function(r,e){var t=this;if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(s,n){i.on("abort",function(){if(!(t._maxRetries&&t._maxRetries>t._retries))if(t.timedout&&t.timedoutError)n(t.timedoutError);else{var o=new Error("Aborted");o.code="ABORTED",o.status=t.status,o.method=t.method,o.url=t.url,n(o)}}),i.end(function(o,a){o?n(o):s(a)})})}return this._fullfilledPromise.then(r,e)},nt.prototype.catch=function(r){return this.then(void 0,r)},nt.prototype.use=function(r){return r(this),this},nt.prototype.ok=function(r){if(typeof r!="function")throw new Error("Callback required");return this._okCallback=r,this},nt.prototype._isResponseOK=function(r){return!!r&&(this._okCallback?this._okCallback(r):r.status>=200&&r.status<300)},nt.prototype.get=function(r){return this._header[r.toLowerCase()]},nt.prototype.getHeader=nt.prototype.get,nt.prototype.set=function(r,e){if(Bm(r)){for(var t in r)Xp(r,t)&&this.set(t,r[t]);return this}return this._header[r.toLowerCase()]=e,this.header[r]=e,this},nt.prototype.unset=function(r){return delete this._header[r.toLowerCase()],delete this.header[r],this},nt.prototype.field=function(r,e,t){if(r==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(Bm(r)){for(var i in r)Xp(r,i)&&this.field(i,r[i]);return this}if(Array.isArray(e)){for(var s in e)Xp(e,s)&&this.field(r,e[s]);return this}if(e==null)throw new Error(".field(name, val) val can not be empty");return typeof e=="boolean"&&(e=String(e)),t?this._getFormData().append(r,e,t):this._getFormData().append(r,e),this},nt.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(Yh.gte(process.version,"v13.0.0")&&Yh.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");Yh.gte(process.version,"v14.0.0")&&(this.req.destroyed=!0),this.req.abort()}return this.clearTimeout(),this.emit("abort"),this},nt.prototype._auth=function(r,e,t,i){switch(t.type){case"basic":this.set("Authorization","Basic ".concat(i("".concat(r,":").concat(e))));break;case"auto":this.username=r,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(r))}return this},nt.prototype.withCredentials=function(r){return r===void 0&&(r=!0),this._withCredentials=r,this},nt.prototype.redirects=function(r){return this._maxRedirects=r,this},nt.prototype.maxResponseSize=function(r){if(typeof r!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=r,this},nt.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},nt.prototype.send=function(r){var e=Bm(r),t=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(r)?this._data=[]:this._isHost(r)||(this._data={});else if(r&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&Bm(this._data))for(var i in r)Xp(r,i)&&(this._data[i]=r[i]);else typeof r=="string"?(t||this.type("form"),(t=this._header["content-type"])&&(t=t.toLowerCase().trim()),this._data=t==="application/x-www-form-urlencoded"?this._data?"".concat(this._data,"&").concat(r):r:(this._data||"")+r):this._data=r;return!e||this._isHost(r)||t||this.type("json"),this},nt.prototype.sortQuery=function(r){return this._sort=r===void 0||r,this},nt.prototype._finalizeQueryString=function(){var r=this._query.join("&");if(r&&(this.url+=(this.url.includes("?")?"&":"?")+r),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var t=this.url.slice(e+1).split("&");typeof this._sort=="function"?t.sort(this._sort):t.sort(),this.url=this.url.slice(0,e)+"?"+t.join("&")}}},nt.prototype._appendQueryString=function(){console.warn("Unsupported")},nt.prototype._timeoutError=function(r,e,t){if(!this._aborted){var i=new Error("".concat(r+e,"ms exceeded"));i.timeout=e,i.code="ECONNABORTED",i.errno=t,this.timedout=!0,this.timedoutError=i,this.abort(),this.callback(i)}},nt.prototype._setTimeouts=function(){var r=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){r._timeoutError("Timeout of ",r._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){r._timeoutError("Response timeout of ",r._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var _4=nv;function nv(){}function I4(r){return function(e){if(Array.isArray(e))return QS(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||J_(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function J_(r,e){if(r){if(typeof r=="string")return QS(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?QS(r,e):void 0}}function QS(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function YE(){this._defaults=[]}nv.prototype.get=function(r){return this.header[r.toLowerCase()]},nv.prototype._setHeaderProperties=function(r){var e=r["content-type"]||"";this.type=Cs.type(e);var t=Cs.params(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(this[i]=t[i]);this.links={};try{r.link&&(this.links=Cs.parseLinks(r.link))}catch{}},nv.prototype._setStatusProperties=function(r){var e=Math.trunc(r/100);this.statusCode=r,this.status=this.statusCode,this.statusType=e,this.info=e===1,this.ok=e===2,this.redirect=e===3,this.clientError=e===4,this.serverError=e===5,this.error=(e===4||e===5)&&this.toError(),this.created=r===201,this.accepted=r===202,this.noContent=r===204,this.badRequest=r===400,this.unauthorized=r===401,this.notAcceptable=r===406,this.forbidden=r===403,this.notFound=r===404,this.unprocessableEntity=r===422};for(var L4=function(){var r=yT[$y];YE.prototype[r]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._defaults.push({fn:r,args:t}),this}},$y=0,yT=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];$y<yT.length;$y++)L4();YE.prototype._setDefaults=function(r){var e,t=function(s,n){var o=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!o){if(Array.isArray(s)||(o=J_(s))||n&&s&&typeof s.length=="number"){o&&(s=o);var a=0,l=function(){};return{s:l,n:function(){return a>=s.length?{done:!0}:{done:!1,value:s[a++]}},e:function(u){throw u},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){o=o.call(s)},n:function(){var u=o.next();return d=u.done,u},e:function(u){h=!0,c=u},f:function(){try{d||o.return==null||o.return()}finally{if(h)throw c}}}}(this._defaults);try{for(t.s();!(e=t.n()).done;){var i=e.value;r[i.fn].apply(r,I4(i.args))}}catch(s){t.e(s)}finally{t.f()}};for(var Wm=YE,ov=ih(function(r,e){function t(w){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function i(w,x){var O=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!O){if(Array.isArray(w)||(O=function(B,X){if(B){if(typeof B=="string")return s(B,X);var J=Object.prototype.toString.call(B).slice(8,-1);if(J==="Object"&&B.constructor&&(J=B.constructor.name),J==="Map"||J==="Set")return Array.from(B);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return s(B,X)}}(w))||x&&w&&typeof w.length=="number"){O&&(w=O);var M=0,N=function(){};return{s:N,n:function(){return M>=w.length?{done:!0}:{done:!1,value:w[M++]}},e:function(B){throw B},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V,I=!0,H=!1;return{s:function(){O=O.call(w)},n:function(){var B=O.next();return I=B.done,B},e:function(B){H=!0,V=B},f:function(){try{I||O.return==null||O.return()}finally{if(H)throw V}}}}function s(w,x){(x==null||x>w.length)&&(x=w.length);for(var O=0,M=new Array(x);O<x;O++)M[O]=w[O];return M}var n;typeof window<"u"?n=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),n=void 0):n=self;var o=Cs.isObject,a=Cs.mixin,l=Cs.hasOwn;function c(){}r.exports=function(w,x){return typeof x=="function"?new e.Request("GET",w).end(x):arguments.length===1?new e.Request("GET",w):new e.Request(w,x)};var d=e=r.exports;e.Request=v,d.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||n.location.protocol!=="file:"||!n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(w){return w.trim()}:function(w){return w.replace(/(^\s*|\s*$)/g,"")};function u(w){if(!o(w))return w;var x=[];for(var O in w)l(w,O)&&p(x,O,w[O]);return x.join("&")}function p(w,x,O){if(O!==void 0)if(O!==null)if(Array.isArray(O)){var M,N=i(O);try{for(N.s();!(M=N.n()).done;)p(w,x,M.value)}catch(I){N.e(I)}finally{N.f()}}else if(o(O))for(var V in O)l(O,V)&&p(w,"".concat(x,"[").concat(V,"]"),O[V]);else w.push(encodeURI(x)+"="+encodeURIComponent(O));else w.push(encodeURI(x))}function f(w){for(var x,O,M={},N=w.split("&"),V=0,I=N.length;V<I;++V)(O=(x=N[V]).indexOf("="))===-1?M[decodeURIComponent(x)]="":M[decodeURIComponent(x.slice(0,O))]=decodeURIComponent(x.slice(O+1));return M}function g(w){return/[/+]json($|[^-\w])/i.test(w)}function m(w){this.req=w,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||this.xhr.responseType===void 0?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var x=this.xhr.status;x===1223&&(x=204),this._setStatusProperties(x),this.headers=function(O){for(var M,N,V,I,H=O.split(/\r?\n/),B={},X=0,J=H.length;X<J;++X)(M=(N=H[X]).indexOf(":"))!==-1&&(V=N.slice(0,M).toLowerCase(),I=h(N.slice(M+1)),B[V]=I);return B}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&w._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}function v(w,x){var O=this;this._query=this._query||[],this.method=w,this.url=x,this.header={},this._header={},this.on("end",function(){var M,N=null,V=null;try{V=new m(O)}catch(I){return(N=new Error("Parser is unable to parse the response")).parse=!0,N.original=I,O.xhr?(N.rawResponse=O.xhr.responseType===void 0?O.xhr.responseText:O.xhr.response,N.status=O.xhr.status?O.xhr.status:null,N.statusCode=N.status):(N.rawResponse=null,N.status=null),O.callback(N)}O.emit("response",V);try{O._isResponseOK(V)||(M=new Error(V.statusText||V.text||"Unsuccessful HTTP response"))}catch(I){M=I}M?(M.original=N,M.response=V,M.status=V.status,O.callback(M,V)):O.callback(null,V)})}d.serializeObject=u,d.parseString=f,d.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":dl.stringify,"application/json":D4},d.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},a(m.prototype,_4.prototype),m.prototype._parseBody=function(w){var x=d.parse[this.type];return this.req._parser?this.req._parser(this,w):(!x&&g(this.type)&&(x=d.parse["application/json"]),x&&w&&(w.length>0||w instanceof Object)?x(w):null)},m.prototype.toError=function(){var w=this.req,x=w.method,O=w.url,M="cannot ".concat(x," ").concat(O," (").concat(this.status,")"),N=new Error(M);return N.status=this.status,N.method=x,N.url=O,N},d.Response=m,T4(v.prototype),a(v.prototype,A4.prototype),v.prototype.type=function(w){return this.set("Content-Type",d.types[w]||w),this},v.prototype.accept=function(w){return this.set("Accept",d.types[w]||w),this},v.prototype.auth=function(w,x,O){arguments.length===1&&(x=""),t(x)==="object"&&x!==null&&(O=x,x=""),O||(O={type:typeof btoa=="function"?"basic":"auto"});var M=O.encoder?O.encoder:function(N){if(typeof btoa=="function")return btoa(N);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(w,x,O,M)},v.prototype.query=function(w){return typeof w!="string"&&(w=u(w)),w&&this._query.push(w),this},v.prototype.attach=function(w,x,O){if(x){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(w,x,O||x.name)}return this},v.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},v.prototype.callback=function(w,x){if(this._shouldRetry(w,x))return this._retry();var O=this._callback;this.clearTimeout(),w&&(this._maxRetries&&(w.retries=this._retries-1),this.emit("error",w)),O(w,x)},v.prototype.crossDomainError=function(){var w=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);w.crossDomain=!0,w.status=this.status,w.method=this.method,w.url=this.url,this.callback(w)},v.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},v.prototype.ca=v.prototype.agent,v.prototype.buffer=v.prototype.ca,v.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},v.prototype.pipe=v.prototype.write,v.prototype._isHost=function(w){return w&&t(w)==="object"&&!Array.isArray(w)&&Object.prototype.toString.call(w)!=="[object Object]"},v.prototype.end=function(w){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=w||c,this._finalizeQueryString(),this._end()},v.prototype._setUploadTimeout=function(){var w=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){w._timeoutError("Upload timeout of ",w._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},v.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var w=this;this.xhr=d.getXHR();var x=this.xhr,O=this._formData||this._data;this._setTimeouts(),x.addEventListener("readystatechange",function(){var H=x.readyState;if(H>=2&&w._responseTimeoutTimer&&clearTimeout(w._responseTimeoutTimer),H===4){var B;try{B=x.status}catch{B=0}if(!B)return w.timedout||w._aborted?void 0:w.crossDomainError();w.emit("end")}});var M=function(H,B){B.total>0&&(B.percent=B.loaded/B.total*100,B.percent===100&&clearTimeout(w._uploadTimeoutTimer)),B.direction=H,w.emit("progress",B)};if(this.hasListeners("progress"))try{x.addEventListener("progress",M.bind(null,"download")),x.upload&&x.upload.addEventListener("progress",M.bind(null,"upload"))}catch{}x.upload&&this._setUploadTimeout();try{this.username&&this.password?x.open(this.method,this.url,!0,this.username,this.password):x.open(this.method,this.url,!0)}catch(H){return this.callback(H)}if(this._withCredentials&&(x.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof O!="string"&&!this._isHost(O)){var N=this._header["content-type"],V=this._serializer||d.serialize[N?N.split(";")[0]:""];!V&&g(N)&&(V=d.serialize["application/json"]),V&&(O=V(O))}for(var I in this.header)this.header[I]!==null&&l(this.header,I)&&x.setRequestHeader(I,this.header[I]);this._responseType&&(x.responseType=this._responseType),this.emit("request",this),x.send(O===void 0?null:O)},d.agent=function(){return new Wm};for(var C=function(){var w=R[y];Wm.prototype[w.toLowerCase()]=function(x,O){var M=new d.Request(w,x);return this._setDefaults(M),O&&M.end(O),M}},y=0,R=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];y<R.length;y++)C();function b(w,x,O){var M=d("DELETE",w);return typeof x=="function"&&(O=x,x=null),x&&M.send(x),O&&M.end(O),M}Wm.prototype.del=Wm.prototype.delete,d.get=function(w,x,O){var M=d("GET",w);return typeof x=="function"&&(O=x,x=null),x&&M.query(x),O&&M.end(O),M},d.head=function(w,x,O){var M=d("HEAD",w);return typeof x=="function"&&(O=x,x=null),x&&M.query(x),O&&M.end(O),M},d.options=function(w,x,O){var M=d("OPTIONS",w);return typeof x=="function"&&(O=x,x=null),x&&M.send(x),O&&M.end(O),M},d.del=b,d.delete=b,d.patch=function(w,x,O){var M=d("PATCH",w);return typeof x=="function"&&(O=x,x=null),x&&M.send(x),O&&M.end(O),M},d.post=function(w,x,O){var M=d("POST",w);return typeof x=="function"&&(O=x,x=null),x&&M.send(x),O&&M.end(O),M},d.put=function(w,x,O){var M=d("PUT",w);return typeof x=="function"&&(O=x,x=null),x&&M.send(x),O&&M.end(O),M}}),F4=(ov.Request,function(r){var e=ST(r),t=e[0],i=e[1];return 3*(t+i)/4-i}),N4=function(r){var e,t,i=ST(r),s=i[0],n=i[1],o=new k4(function(c,d,h){return 3*(d+h)/4-h}(0,s,n)),a=0,l=n>0?s-4:s;for(t=0;t<l;t+=4)e=An[r.charCodeAt(t)]<<18|An[r.charCodeAt(t+1)]<<12|An[r.charCodeAt(t+2)]<<6|An[r.charCodeAt(t+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return n===2&&(e=An[r.charCodeAt(t)]<<2|An[r.charCodeAt(t+1)]>>4,o[a++]=255&e),n===1&&(e=An[r.charCodeAt(t)]<<10|An[r.charCodeAt(t+1)]<<4|An[r.charCodeAt(t+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},G4=function(r){for(var e,t=r.length,i=t%3,s=[],n=0,o=t-i;n<o;n+=16383)s.push(H4(r,n,n+16383>o?o:n+16383));return i===1?(e=r[t-1],s.push(ir[e>>2]+ir[e<<4&63]+"==")):i===2&&(e=(r[t-2]<<8)+r[t-1],s.push(ir[e>>10]+ir[e>>4&63]+ir[e<<2&63]+"=")),s.join("")},ir=[],An=[],k4=typeof Uint8Array<"u"?Uint8Array:Array,Ky="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eh=0,V4=Ky.length;Eh<V4;++Eh)ir[Eh]=Ky[Eh],An[Ky.charCodeAt(Eh)]=Eh;function ST(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function H4(r,e,t){for(var i,s,n=[],o=e;o<t;o+=3)i=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(255&r[o+2]),n.push(ir[(s=i)>>18&63]+ir[s>>12&63]+ir[s>>6&63]+ir[63&s]);return n.join("")}An["-".charCodeAt(0)]=62,An["_".charCodeAt(0)]=63;var wT={byteLength:F4,toByteArray:N4,fromByteArray:G4},B4={encode:function(r){return wT.fromByteArray(function(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(r)).replace(/\+/g,"-").replace(/\//g,"_")},decode:function(r){return r=function(e){var t=e.length%4;return t===0?e:e+new Array(1+(4-t)).join("=")}(r).replace(/-/g,"+").replace(/_/g,"/"),function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}(wT.toByteArray(r))}},eC={raw:"9.21.0"},W4=Object.prototype.toString;function bT(r,e,t,i){if(t=t==="array"?"object":t,r&&typeof r[e]!==t)throw new Error(i)}function ET(r,e,t){if(typeof r!==e)throw new Error(t)}function xT(r,e,t){if(e.indexOf(r)===-1)throw new Error(t)}var Fe={check:function(r,e,t){if(e.optional&&!r||ET(r,e.type,e.message),e.type==="object"&&t)for(var i=Object.keys(t),s=0;s<i.length;s++){var n=i[s];t[n].optional&&!r[n]||t[n].condition&&!t[n].condition(r)||(bT(r,n,t[n].type,t[n].message),t[n].values&&xT(r[n],t[n].values,t[n].value_message))}},attribute:bT,variable:ET,value:xT,isArray:function(r){return this.supportsIsArray()?Array.isArray(r):W4.call(r)==="[object Array]"},supportsIsArray:function(){return Array.isArray!=null}};function RT(r){if(r==null)throw new TypeError("Cannot convert first argument to object");for(var e=Object(r),t=1;t<arguments.length;t++){var i=arguments[t];if(i!=null)for(var s=Object.keys(Object(i)),n=0,o=s.length;n<o;n++){var a=s[n],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(e[a]=i[a])}}return e}var U4={get:function(){return Object.assign?Object.assign:RT},objectAssignPolyfill:RT};function Yy(r,e){return e.reduce(function(t,i){return r[i]&&(t[i]=r[i]),t},{})}function j4(r){var e=[];for(var t in r)e.push(r[t]);return e}function ew(){var r=j4(arguments);return r.unshift({}),U4.get().apply(void 0,r)}function TT(r){var e=r.match(/^(https?:|file:|chrome-extension:)\/\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e&&{href:r,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}}function z4(r,e){var t=ew(r);return r[e]&&(t[e]=r[e].trim()),t}var pe={toSnakeCase:function r(e,t){return typeof e!="object"||Fe.isArray(e)||e===null?e:(t=t||[],Object.keys(e).reduce(function(i,s){return i[t.indexOf(s)===-1?function(n){for(var o,a="",l=0,c=!0,d=!0;l<n.length;)o=n.charCodeAt(l),(!d&&o>=65&&o<=90||!c&&o>=48&&o<=57)&&(a+="_"),a+=n[l].toLowerCase(),c=o>=48&&o<=57,d=o>=65&&o<=90,l++;return a}(s):s]=r(e[s]),i},{}))},toCamelCase:function r(e,t,i){return typeof e!="object"||Fe.isArray(e)||e===null?e:(t=t||[],i=i||{},Object.keys(e).reduce(function(s,n){var o,a=t.indexOf(n)===-1?(o=n.split("_")).reduce(function(l,c){return l+c.charAt(0).toUpperCase()+c.slice(1)},o.shift()):n;return s[a]=r(e[a]||e[n],[],i),i.keepOriginal&&(s[n]=r(e[n],[],i)),s},{}))},blacklist:function(r,e){return Object.keys(r).reduce(function(t,i){return e.indexOf(i)===-1&&(t[i]=r[i]),t},{})},merge:function(r,e){return{base:e?Yy(r,e):r,with:function(t,i){return t=i?Yy(t,i):t,ew(this.base,t)}}},pick:Yy,getKeysNotIn:function(r,e){var t=[];for(var i in r)e.indexOf(i)===-1&&t.push(i);return t},extend:ew,getOriginFromUrl:function(r){if(r){var e=TT(r);if(!e)return null;var t=e.protocol+"//"+e.hostname;return e.port&&(t+=":"+e.port),t}},getLocationFromUrl:TT,trimUserDetails:function(r){return function(e,t){return t.reduce(z4,e)}(r,["username","email","phoneNumber"])},updatePropertyOn:function r(e,t,i){typeof t=="string"&&(t=t.split("."));var s=t[0];e.hasOwnProperty(s)&&(t.length===1?e[s]=i:r(e[s],t.slice(1),i))}};function xh(r){this.request=r,this.method=r.method,this.url=r.url,this.body=r._data,this.headers=r._header}function bc(r){this.request=r}function oa(r){this._sendTelemetry=r._sendTelemetry!==!1||r._sendTelemetry,this._telemetryInfo=r._telemetryInfo||null,this._timesToRetryFailedRequests=r._timesToRetryFailedRequests,this.headers=r.headers||{},this._universalLoginPage=r.universalLoginPage}function Um(){return window}xh.prototype.abort=function(){this.request.abort()},xh.prototype.getMethod=function(){return this.method},xh.prototype.getBody=function(){return this.body},xh.prototype.getUrl=function(){return this.url},xh.prototype.getHeaders=function(){return this.headers},bc.prototype.set=function(r,e){return this.request=this.request.set(r,e),this},bc.prototype.send=function(r){return this.request=this.request.send(pe.trimUserDetails(r)),this},bc.prototype.withCredentials=function(){return this.request=this.request.withCredentials(),this},bc.prototype.end=function(r){return this.request.end(r),new xh(this.request)},oa.prototype.setCommonConfiguration=function(r,e){if(e=e||{},this._timesToRetryFailedRequests>0&&(r=r.retry(this._timesToRetryFailedRequests)),e.noHeaders)return r;var t=this.headers;r=r.set("Content-Type","application/json"),e.xRequestLanguage&&(r=r.set("X-Request-Language",e.xRequestLanguage));for(var i=Object.keys(this.headers),s=0;s<i.length;s++)r=r.set(i[s],t[i[s]]);return this._sendTelemetry&&(r=r.set("Auth0-Client",this.getTelemetryData())),r},oa.prototype.getTelemetryData=function(){var r=this._universalLoginPage?"auth0.js-ulp":"auth0.js",e={name:r,version:eC.raw};this._telemetryInfo&&((e=pe.extend({},this._telemetryInfo)).env=pe.extend({},this._telemetryInfo.env),e.env[r]=eC.raw);var t=JSON.stringify(e);return B4.encode(t)},oa.prototype.get=function(r,e){return new bc(this.setCommonConfiguration(ov.get(r),e))},oa.prototype.post=function(r,e){return new bc(this.setCommonConfiguration(ov.post(r),e))},oa.prototype.patch=function(r,e){return new bc(this.setCommonConfiguration(ov.patch(r),e))};var pt={redirect:function(r){Um().location=r},getDocument:function(){return Um().document},getWindow:Um,getOrigin:function(){var r=Um().location,e=r.origin;return e||(e=pe.getOriginFromUrl(r.href)),e}};function nf(){}nf.prototype.getItem=function(){return null},nf.prototype.removeItem=function(){},nf.prototype.setItem=function(){};var Rh=ih(function(r,e){var t;t=function(){function i(){for(var n=0,o={};n<arguments.length;n++){var a=arguments[n];for(var l in a)o[l]=a[l]}return o}function s(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function a(){}function l(d,h,u){if(typeof document<"u"){typeof(u=i({path:"/"},a.defaults,u)).expires=="number"&&(u.expires=new Date(1*new Date+864e5*u.expires)),u.expires=u.expires?u.expires.toUTCString():"";try{var p=JSON.stringify(h);/^[\{\[]/.test(p)&&(h=p)}catch{}h=o.write?o.write(h,d):encodeURIComponent(String(h)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var f="";for(var g in u)u[g]&&(f+="; "+g,u[g]!==!0&&(f+="="+u[g].split(";")[0]));return document.cookie=d+"="+h+f}}function c(d,h){if(typeof document<"u"){for(var u={},p=document.cookie?document.cookie.split("; "):[],f=0;f<p.length;f++){var g=p[f].split("="),m=g.slice(1).join("=");h||m.charAt(0)!=='"'||(m=m.slice(1,-1));try{var v=s(g[0]);if(m=(o.read||o)(m,v)||s(m),h)try{m=JSON.parse(m)}catch{}if(u[v]=m,d===v)break}catch{}}return d?u[d]:u}}return a.set=l,a.get=function(d){return c(d,!1)},a.getJSON=function(d){return c(d,!0)},a.remove=function(d,h){l(d,"",i(h,{expires:-1}))},a.defaults={},a.withConverter=n,a}(function(){})},r.exports=t()});function Xy(r){return"_"+r+"_compat"}function Ph(r){this._options=r||{}}function sh(r){this.disableWarnings=r.disableWarnings}function qp(r){if(this.warn=new sh({}),this.storage=new Ph(r),r.__tryLocalStorageFirst===!0)try{var e=pt.getWindow().localStorage;e&&(this.storage=e)}catch(t){this.warn.warning(t),this.warn.warning("Can't use localStorage. Using CookieStorage instead.")}}function qh(r){this.handler=new qp(r)}function tC(r){this.storage=new qh(r)}function DT(r,e){return{error:r,errorDescription:e}}Ph.prototype.getItem=function(r){return Rh.get(r)||Rh.get(Xy(r))},Ph.prototype.removeItem=function(r){var e={};this._options.cookieDomain&&(e.domain=this._options.cookieDomain),Rh.remove(r,e),Rh.remove(Xy(r),e)},Ph.prototype.setItem=function(r,e,t){var i=pe.extend({expires:1},t);if(pt.getWindow().location.protocol==="https:"&&(i.secure=!0,i.sameSite="none",this._options.legacySameSiteCookie)){var s=pe.blacklist(i,["sameSite"]);Rh.set(Xy(r),e,s)}this._options.cookieDomain&&(i.domain=this._options.cookieDomain),Rh.set(r,e,i)},sh.prototype.warning=function(r){this.disableWarnings||console.warn(r)},qp.prototype.failover=function(){this.storage instanceof nf?this.warn.warning("DummyStorage: ignore failover"):this.storage instanceof Ph?(this.warn.warning("CookieStorage: failing over DummyStorage"),this.storage=new nf):(this.warn.warning("LocalStorage: failing over CookieStorage"),this.storage=new Ph)},qp.prototype.getItem=function(r){try{return this.storage.getItem(r)}catch(e){return this.warn.warning(e),this.failover(),this.getItem(r)}},qp.prototype.removeItem=function(r){try{return this.storage.removeItem(r)}catch(e){return this.warn.warning(e),this.failover(),this.removeItem(r)}},qp.prototype.setItem=function(r,e,t){try{return this.storage.setItem(r,e,t)}catch(i){return this.warn.warning(i),this.failover(),this.setItem(r,e,t)}},qh.prototype.getItem=function(r){var e=this.handler.getItem(r);try{return JSON.parse(e)}catch{return e}},qh.prototype.removeItem=function(r){return this.handler.removeItem(r)},qh.prototype.setItem=function(r,e,t){var i=JSON.stringify(e);return this.handler.setItem(r,i,t)},tC.prototype.set=function(r,e){var t={lastUsedConnection:r,lastUsedSub:e};this.storage.setItem("auth0.ssodata",JSON.stringify(t))},tC.prototype.get=function(){var r=this.storage.getItem("auth0.ssodata");if(r)return JSON.parse(r)};var qa={buildResponse:DT,invalidToken:function(r){return DT("invalid_token",r)}};function Pi(r,e){return(e=e||{}).ignoreCasing=!!e.ignoreCasing&&e.ignoreCasing,function(t,i){var s;return t||i?(!t&&i.err&&(t=i.err,i=null),!t&&i.error&&(t=i,i=null),t?(s={original:t},pe.updatePropertyOn(s,"original.response.req._data.password","*****"),t.response&&t.response.statusCode&&(s.statusCode=t.response.statusCode),t.response&&t.response.statusText&&(s.statusText=t.response.statusText),t.response&&t.response.body&&(t=t.response.body),t.err&&(t=t.err),s.code=t.code||t.error||t.error_code||t.status||null,s.description=t.errorDescription||t.error_description||t.description||t.error||t.details||t.err||null,e.forceLegacyError&&(s.error=s.code,s.error_description=s.description),t.error_codes&&t.error_details&&(s.errorDetails={codes:t.error_codes,details:t.error_details}),t.name&&(s.name=t.name),t.policy&&(s.policy=t.policy),r(s)):!i.type||i.type!=="text/html"&&i.type!=="text/plain"?e.ignoreCasing?r(null,i.body||i):r(null,pe.toCamelCase(i.body||i,[],{keepOriginal:e.keepOriginalCasing})):r(null,i.text)):r(qa.buildResponse("generic_error","Something went wrong"))}}var $4=["realm","audience","otp","client_id","client_secret","redirect_uri","scope","code","grant_type","username","password","refresh_token","assertion","client_assertion","client_assertion_type","code_verifier"],K4=["connection","connection_scope","auth0Client","owp","device","realm","organization","invitation","protocol","_csrf","_intstate","login_ticket","client_id","response_type","response_mode","redirect_uri","audience","scope","state","nonce","display","prompt","screen_hint","max_age","ui_locales","claims_locales","id_token_hint","login_hint","acr_values","claims","registration","request","request_uri","code_challenge","code_challenge_method","access_type","display"],OT={oauthTokenParams:function(r,e){return pe.pick(e,$4)},oauthAuthorizeParams:function(r,e){var t=pe.getKeysNotIn(e,K4);return t.length>0&&r.warning("Following parameters are not allowed on the `/authorize` endpoint: ["+t.join(",")+"]"),e}},$c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nh(r){var e={exports:{}};return r(e,e.exports),e.exports}var Y4=nh(function(r,e){r.exports=function(){function t(T){return typeof T=="function"}var i=Array.isArray?Array.isArray:function(T){return Object.prototype.toString.call(T)==="[object Array]"},s=0,n=void 0,o=void 0,a=function(T,P){f[s]=T,f[s+1]=P,(s+=2)===2&&(o?o(g):R())},l=typeof window<"u"?window:void 0,c=l||{},d=c.MutationObserver||c.WebKitMutationObserver,h=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",u=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function p(){var T=setTimeout;return function(){return T(g,1)}}var f=new Array(1e3);function g(){for(var T=0;T<s;T+=2)(0,f[T])(f[T+1]),f[T]=void 0,f[T+1]=void 0;s=0}var m,v,C,y,R=void 0;function b(T,P){var F=this,L=new this.constructor(O);L[x]===void 0&&re(L);var k=F._state;if(k){var z=arguments[k-1];a(function(){return Y(k,L,z,F._result)})}else X(F,L,T,P);return L}function w(T){if(T&&typeof T=="object"&&T.constructor===this)return T;var P=new this(O);return V(P,T),P}R=h?function(){return process.nextTick(g)}:d?(v=0,C=new d(g),y=document.createTextNode(""),C.observe(y,{characterData:!0}),function(){y.data=v=++v%2}):u?((m=new MessageChannel).port1.onmessage=g,function(){return m.port2.postMessage(0)}):l===void 0?function(){try{var T=Function("return this")().require("vertx");return(n=T.runOnLoop||T.runOnContext)!==void 0?function(){n(g)}:p()}catch{return p()}}():p();var x=Math.random().toString(36).substring(2);function O(){}var M=void 0;function N(T,P,F){P.constructor===T.constructor&&F===b&&P.constructor.resolve===w?function(L,k){k._state===1?H(L,k._result):k._state===2?B(L,k._result):X(k,void 0,function(z){return V(L,z)},function(z){return B(L,z)})}(T,P):F===void 0?H(T,P):t(F)?function(L,k,z){a(function(Z){var he=!1,xe=function(we,Qt,ei,ti){try{we.call(Qt,function(di){he||(he=!0,k!==di?V(Z,di):H(Z,di))},function(di){he||(he=!0,B(Z,di))})}catch(di){return di}}(z,k);!he&&xe&&(he=!0,B(Z,xe))},L)}(T,P,F):H(T,P)}function V(T,P){if(T===P)B(T,new TypeError("You cannot resolve a promise with itself"));else if(k=typeof(L=P),L===null||k!=="object"&&k!=="function")H(T,P);else{var F=void 0;try{F=P.then}catch(z){return void B(T,z)}N(T,P,F)}var L,k}function I(T){T._onerror&&T._onerror(T._result),J(T)}function H(T,P){T._state===M&&(T._result=P,T._state=1,T._subscribers.length!==0&&a(J,T))}function B(T,P){T._state===M&&(T._state=2,T._result=P,a(I,T))}function X(T,P,F,L){var k=T._subscribers,z=k.length;T._onerror=null,k[z]=P,k[z+1]=F,k[z+2]=L,z===0&&T._state&&a(J,T)}function J(T){var P=T._subscribers,F=T._state;if(P.length!==0){for(var L=void 0,k=void 0,z=T._result,Z=0;Z<P.length;Z+=3)k=P[Z+F],(L=P[Z])?Y(F,L,k,z):k(z);T._subscribers.length=0}}function Y(T,P,F,L){var k=t(F),z=void 0,Z=void 0,he=!0;if(k){try{z=F(L)}catch(xe){he=!1,Z=xe}if(P===z)return void B(P,new TypeError("A promises callback cannot return that same promise."))}else z=L;P._state!==M||(k&&he?V(P,z):he===!1?B(P,Z):T===1?H(P,z):T===2&&B(P,z))}var ae=0;function re(T){T[x]=ae++,T._state=void 0,T._result=void 0,T._subscribers=[]}var K=function(){function T(P,F){this._instanceConstructor=P,this.promise=new P(O),this.promise[x]||re(this.promise),i(F)?(this.length=F.length,this._remaining=F.length,this._result=new Array(this.length),this.length===0?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(F),this._remaining===0&&H(this.promise,this._result))):B(this.promise,new Error("Array Methods must be provided an Array"))}return T.prototype._enumerate=function(P){for(var F=0;this._state===M&&F<P.length;F++)this._eachEntry(P[F],F)},T.prototype._eachEntry=function(P,F){var L=this._instanceConstructor,k=L.resolve;if(k===w){var z=void 0,Z=void 0,he=!1;try{z=P.then}catch(we){he=!0,Z=we}if(z===b&&P._state!==M)this._settledAt(P._state,F,P._result);else if(typeof z!="function")this._remaining--,this._result[F]=P;else if(L===D){var xe=new L(O);he?B(xe,Z):N(xe,P,z),this._willSettleAt(xe,F)}else this._willSettleAt(new L(function(we){return we(P)}),F)}else this._willSettleAt(k(P),F)},T.prototype._settledAt=function(P,F,L){var k=this.promise;k._state===M&&(this._remaining--,P===2?B(k,L):this._result[F]=L),this._remaining===0&&H(k,this._result)},T.prototype._willSettleAt=function(P,F){var L=this;X(P,void 0,function(k){return L._settledAt(1,F,k)},function(k){return L._settledAt(2,F,k)})},T}(),D=function(){function T(P){this[x]=ae++,this._result=this._state=void 0,this._subscribers=[],O!==P&&(typeof P!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof T?function(F,L){try{L(function(k){V(F,k)},function(k){B(F,k)})}catch(k){B(F,k)}}(this,P):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return T.prototype.catch=function(P){return this.then(null,P)},T.prototype.finally=function(P){var F=this,L=F.constructor;return t(P)?F.then(function(k){return L.resolve(P()).then(function(){return k})},function(k){return L.resolve(P()).then(function(){throw k})}):F.then(P,P)},T}();return D.prototype.then=b,D.all=function(T){return new K(this,T).promise},D.race=function(T){var P=this;return i(T)?new P(function(F,L){for(var k=T.length,z=0;z<k;z++)P.resolve(T[z]).then(F,L)}):new P(function(F,L){return L(new TypeError("You must pass an array to race."))})},D.resolve=w,D.reject=function(T){var P=new this(O);return B(P,T),P},D._setScheduler=function(T){o=T},D._setAsap=function(T){a=T},D._asap=a,D.polyfill=function(){var T=void 0;if($c!==void 0)T=$c;else if(typeof self<"u")T=self;else try{T=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var P=T.Promise;if(P){var F=null;try{F=Object.prototype.toString.call(P.resolve())}catch{}if(F==="[object Promise]"&&!P.cast)return}T.Promise=D},D.Promise=D,D}()}),X4={__proto__:null,default:{}},XE=nh(function(r,e){var t;r.exports=t=t||function(i,s){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&$c!==void 0&&$c.crypto&&(n=$c.crypto),!n)try{n=X4}catch{}var o=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function C(){}return function(y){var R;return C.prototype=y,R=new C,C.prototype=null,R}}(),l={},c=l.lib={},d=c.Base={extend:function(C){var y=a(this);return C&&y.mixIn(C),y.hasOwnProperty("init")&&this.init!==y.init||(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var C=this.extend();return C.init.apply(C,arguments),C},init:function(){},mixIn:function(C){for(var y in C)C.hasOwnProperty(y)&&(this[y]=C[y]);C.hasOwnProperty("toString")&&(this.toString=C.toString)},clone:function(){return this.init.prototype.extend(this)}},h=c.WordArray=d.extend({init:function(C,y){C=this.words=C||[],this.sigBytes=y??4*C.length},toString:function(C){return(C||p).stringify(this)},concat:function(C){var y=this.words,R=C.words,b=this.sigBytes,w=C.sigBytes;if(this.clamp(),b%4)for(var x=0;x<w;x++)y[b+x>>>2]|=(R[x>>>2]>>>24-x%4*8&255)<<24-(b+x)%4*8;else for(var O=0;O<w;O+=4)y[b+O>>>2]=R[O>>>2];return this.sigBytes+=w,this},clamp:function(){var C=this.words,y=this.sigBytes;C[y>>>2]&=4294967295<<32-y%4*8,C.length=i.ceil(y/4)},clone:function(){var C=d.clone.call(this);return C.words=this.words.slice(0),C},random:function(C){for(var y=[],R=0;R<C;R+=4)y.push(o());return new h.init(y,C)}}),u=l.enc={},p=u.Hex={stringify:function(C){for(var y=C.words,R=C.sigBytes,b=[],w=0;w<R;w++){var x=y[w>>>2]>>>24-w%4*8&255;b.push((x>>>4).toString(16)),b.push((15&x).toString(16))}return b.join("")},parse:function(C){for(var y=C.length,R=[],b=0;b<y;b+=2)R[b>>>3]|=parseInt(C.substr(b,2),16)<<24-b%8*4;return new h.init(R,y/2)}},f=u.Latin1={stringify:function(C){for(var y=C.words,R=C.sigBytes,b=[],w=0;w<R;w++)b.push(String.fromCharCode(y[w>>>2]>>>24-w%4*8&255));return b.join("")},parse:function(C){for(var y=C.length,R=[],b=0;b<y;b++)R[b>>>2]|=(255&C.charCodeAt(b))<<24-b%4*8;return new h.init(R,y)}},g=u.Utf8={stringify:function(C){try{return decodeURIComponent(escape(f.stringify(C)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(C){return f.parse(unescape(encodeURIComponent(C)))}},m=c.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(C){typeof C=="string"&&(C=g.parse(C)),this._data.concat(C),this._nDataBytes+=C.sigBytes},_process:function(C){var y,R=this._data,b=R.words,w=R.sigBytes,x=this.blockSize,O=w/(4*x),M=(O=C?i.ceil(O):i.max((0|O)-this._minBufferSize,0))*x,N=i.min(4*M,w);if(M){for(var V=0;V<M;V+=x)this._doProcessBlock(b,V);y=b.splice(0,M),R.sigBytes-=N}return new h.init(y,N)},clone:function(){var C=d.clone.call(this);return C._data=this._data.clone(),C},_minBufferSize:0});c.Hasher=m.extend({cfg:d.extend(),init:function(C){this.cfg=this.cfg.extend(C),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(C){return this._append(C),this._process(),this},finalize:function(C){return C&&this._append(C),this._doFinalize()},blockSize:16,_createHelper:function(C){return function(y,R){return new C.init(R).finalize(y)}},_createHmacHelper:function(C){return function(y,R){return new v.HMAC.init(C,R).finalize(y)}}});var v=l.algo={};return l}(Math)}),Q_=nh(function(r,e){var t;r.exports=(t=XE,function(i){var s=t,n=s.lib,o=n.WordArray,a=n.Hasher,l=s.algo,c=[],d=[];(function(){function p(v){for(var C=i.sqrt(v),y=2;y<=C;y++)if(!(v%y))return!1;return!0}function f(v){return 4294967296*(v-(0|v))|0}for(var g=2,m=0;m<64;)p(g)&&(m<8&&(c[m]=f(i.pow(g,.5))),d[m]=f(i.pow(g,1/3)),m++),g++})();var h=[],u=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(p,f){for(var g=this._hash.words,m=g[0],v=g[1],C=g[2],y=g[3],R=g[4],b=g[5],w=g[6],x=g[7],O=0;O<64;O++){if(O<16)h[O]=0|p[f+O];else{var M=h[O-15],N=h[O-2];h[O]=((M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3)+h[O-7]+((N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10)+h[O-16]}var V=m&v^m&C^v&C,I=x+((R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25))+(R&b^~R&w)+d[O]+h[O];x=w,w=b,b=R,R=y+I|0,y=C,C=v,v=m,m=I+(((m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22))+V)|0}g[0]=g[0]+m|0,g[1]=g[1]+v|0,g[2]=g[2]+C|0,g[3]=g[3]+y|0,g[4]=g[4]+R|0,g[5]=g[5]+b|0,g[6]=g[6]+w|0,g[7]=g[7]+x|0},_doFinalize:function(){var p=this._data,f=p.words,g=8*this._nDataBytes,m=8*p.sigBytes;return f[m>>>5]|=128<<24-m%32,f[14+(m+64>>>9<<4)]=i.floor(g/4294967296),f[15+(m+64>>>9<<4)]=g,p.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=a._createHelper(u),s.HmacSHA256=a._createHmacHelper(u)}(Math),t.SHA256)}),q4=nh(function(r,e){var t,i;r.exports=(i=(t=XE).lib.WordArray,t.enc.Base64={stringify:function(s){var n=s.words,o=s.sigBytes,a=this._map;s.clamp();for(var l=[],c=0;c<o;c+=3)for(var d=(n[c>>>2]>>>24-c%4*8&255)<<16|(n[c+1>>>2]>>>24-(c+1)%4*8&255)<<8|n[c+2>>>2]>>>24-(c+2)%4*8&255,h=0;h<4&&c+.75*h<o;h++)l.push(a.charAt(d>>>6*(3-h)&63));var u=a.charAt(64);if(u)for(;l.length%4;)l.push(u);return l.join("")},parse:function(s){var n=s.length,o=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var l=0;l<o.length;l++)a[o.charCodeAt(l)]=l}var c=o.charAt(64);if(c){var d=s.indexOf(c);d!==-1&&(n=d)}return function(h,u,p){for(var f=[],g=0,m=0;m<u;m++)if(m%4){var v=p[h.charCodeAt(m-1)]<<m%4*2,C=p[h.charCodeAt(m)]>>>6-m%4*2;f[g>>>2]|=(v|C)<<24-g%4*8,g++}return i.create(f,g)}(s,n,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64)}),AT=nh(function(r,e){r.exports=XE.enc.Hex}),eI=nh(function(r,e){(function(){var t;function i(D,T,P){D!=null&&(typeof D=="number"?this.fromNumber(D,T,P):this.fromString(D,T==null&&typeof D!="string"?256:T))}function s(){return new i(null)}var n=typeof navigator<"u";n&&navigator.appName=="Microsoft Internet Explorer"?(i.prototype.am=function(D,T,P,F,L,k){for(var z=32767&T,Z=T>>15;--k>=0;){var he=32767&this[D],xe=this[D++]>>15,we=Z*he+xe*z;L=((he=z*he+((32767&we)<<15)+P[F]+(1073741823&L))>>>30)+(we>>>15)+Z*xe+(L>>>30),P[F++]=1073741823&he}return L},t=30):n&&navigator.appName!="Netscape"?(i.prototype.am=function(D,T,P,F,L,k){for(;--k>=0;){var z=T*this[D++]+P[F]+L;L=Math.floor(z/67108864),P[F++]=67108863&z}return L},t=26):(i.prototype.am=function(D,T,P,F,L,k){for(var z=16383&T,Z=T>>14;--k>=0;){var he=16383&this[D],xe=this[D++]>>14,we=Z*he+xe*z;L=((he=z*he+((16383&we)<<14)+P[F]+L)>>28)+(we>>14)+Z*xe,P[F++]=268435455&he}return L},t=28),i.prototype.DB=t,i.prototype.DM=(1<<t)-1,i.prototype.DV=1<<t,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-t,i.prototype.F2=2*t-52;var o,a,l=new Array;for(o="0".charCodeAt(0),a=0;a<=9;++a)l[o++]=a;for(o="a".charCodeAt(0),a=10;a<36;++a)l[o++]=a;for(o="A".charCodeAt(0),a=10;a<36;++a)l[o++]=a;function c(D){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(D)}function d(D,T){var P=l[D.charCodeAt(T)];return P??-1}function h(D){var T=s();return T.fromInt(D),T}function u(D){var T,P=1;return(T=D>>>16)!=0&&(D=T,P+=16),(T=D>>8)!=0&&(D=T,P+=8),(T=D>>4)!=0&&(D=T,P+=4),(T=D>>2)!=0&&(D=T,P+=2),(T=D>>1)!=0&&(D=T,P+=1),P}function p(D){this.m=D}function f(D){this.m=D,this.mp=D.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<D.DB-15)-1,this.mt2=2*D.t}function g(D,T){return D&T}function m(D,T){return D|T}function v(D,T){return D^T}function C(D,T){return D&~T}function y(D){if(D==0)return-1;var T=0;return!(65535&D)&&(D>>=16,T+=16),!(255&D)&&(D>>=8,T+=8),!(15&D)&&(D>>=4,T+=4),!(3&D)&&(D>>=2,T+=2),!(1&D)&&++T,T}function R(D){for(var T=0;D!=0;)D&=D-1,++T;return T}function b(){}function w(D){return D}function x(D){this.r2=s(),this.q3=s(),i.ONE.dlShiftTo(2*D.t,this.r2),this.mu=this.r2.divide(D),this.m=D}p.prototype.convert=function(D){return D.s<0||D.compareTo(this.m)>=0?D.mod(this.m):D},p.prototype.revert=function(D){return D},p.prototype.reduce=function(D){D.divRemTo(this.m,null,D)},p.prototype.mulTo=function(D,T,P){D.multiplyTo(T,P),this.reduce(P)},p.prototype.sqrTo=function(D,T){D.squareTo(T),this.reduce(T)},f.prototype.convert=function(D){var T=s();return D.abs().dlShiftTo(this.m.t,T),T.divRemTo(this.m,null,T),D.s<0&&T.compareTo(i.ZERO)>0&&this.m.subTo(T,T),T},f.prototype.revert=function(D){var T=s();return D.copyTo(T),this.reduce(T),T},f.prototype.reduce=function(D){for(;D.t<=this.mt2;)D[D.t++]=0;for(var T=0;T<this.m.t;++T){var P=32767&D[T],F=P*this.mpl+((P*this.mph+(D[T]>>15)*this.mpl&this.um)<<15)&D.DM;for(D[P=T+this.m.t]+=this.m.am(0,F,D,T,0,this.m.t);D[P]>=D.DV;)D[P]-=D.DV,D[++P]++}D.clamp(),D.drShiftTo(this.m.t,D),D.compareTo(this.m)>=0&&D.subTo(this.m,D)},f.prototype.mulTo=function(D,T,P){D.multiplyTo(T,P),this.reduce(P)},f.prototype.sqrTo=function(D,T){D.squareTo(T),this.reduce(T)},i.prototype.copyTo=function(D){for(var T=this.t-1;T>=0;--T)D[T]=this[T];D.t=this.t,D.s=this.s},i.prototype.fromInt=function(D){this.t=1,this.s=D<0?-1:0,D>0?this[0]=D:D<-1?this[0]=D+this.DV:this.t=0},i.prototype.fromString=function(D,T){var P;if(T==16)P=4;else if(T==8)P=3;else if(T==256)P=8;else if(T==2)P=1;else if(T==32)P=5;else{if(T!=4)return void this.fromRadix(D,T);P=2}this.t=0,this.s=0;for(var F=D.length,L=!1,k=0;--F>=0;){var z=P==8?255&D[F]:d(D,F);z<0?D.charAt(F)=="-"&&(L=!0):(L=!1,k==0?this[this.t++]=z:k+P>this.DB?(this[this.t-1]|=(z&(1<<this.DB-k)-1)<<k,this[this.t++]=z>>this.DB-k):this[this.t-1]|=z<<k,(k+=P)>=this.DB&&(k-=this.DB))}P==8&&128&D[0]&&(this.s=-1,k>0&&(this[this.t-1]|=(1<<this.DB-k)-1<<k)),this.clamp(),L&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var D=this.s&this.DM;this.t>0&&this[this.t-1]==D;)--this.t},i.prototype.dlShiftTo=function(D,T){var P;for(P=this.t-1;P>=0;--P)T[P+D]=this[P];for(P=D-1;P>=0;--P)T[P]=0;T.t=this.t+D,T.s=this.s},i.prototype.drShiftTo=function(D,T){for(var P=D;P<this.t;++P)T[P-D]=this[P];T.t=Math.max(this.t-D,0),T.s=this.s},i.prototype.lShiftTo=function(D,T){var P,F=D%this.DB,L=this.DB-F,k=(1<<L)-1,z=Math.floor(D/this.DB),Z=this.s<<F&this.DM;for(P=this.t-1;P>=0;--P)T[P+z+1]=this[P]>>L|Z,Z=(this[P]&k)<<F;for(P=z-1;P>=0;--P)T[P]=0;T[z]=Z,T.t=this.t+z+1,T.s=this.s,T.clamp()},i.prototype.rShiftTo=function(D,T){T.s=this.s;var P=Math.floor(D/this.DB);if(P>=this.t)T.t=0;else{var F=D%this.DB,L=this.DB-F,k=(1<<F)-1;T[0]=this[P]>>F;for(var z=P+1;z<this.t;++z)T[z-P-1]|=(this[z]&k)<<L,T[z-P]=this[z]>>F;F>0&&(T[this.t-P-1]|=(this.s&k)<<L),T.t=this.t-P,T.clamp()}},i.prototype.subTo=function(D,T){for(var P=0,F=0,L=Math.min(D.t,this.t);P<L;)F+=this[P]-D[P],T[P++]=F&this.DM,F>>=this.DB;if(D.t<this.t){for(F-=D.s;P<this.t;)F+=this[P],T[P++]=F&this.DM,F>>=this.DB;F+=this.s}else{for(F+=this.s;P<D.t;)F-=D[P],T[P++]=F&this.DM,F>>=this.DB;F-=D.s}T.s=F<0?-1:0,F<-1?T[P++]=this.DV+F:F>0&&(T[P++]=F),T.t=P,T.clamp()},i.prototype.multiplyTo=function(D,T){var P=this.abs(),F=D.abs(),L=P.t;for(T.t=L+F.t;--L>=0;)T[L]=0;for(L=0;L<F.t;++L)T[L+P.t]=P.am(0,F[L],T,L,0,P.t);T.s=0,T.clamp(),this.s!=D.s&&i.ZERO.subTo(T,T)},i.prototype.squareTo=function(D){for(var T=this.abs(),P=D.t=2*T.t;--P>=0;)D[P]=0;for(P=0;P<T.t-1;++P){var F=T.am(P,T[P],D,2*P,0,1);(D[P+T.t]+=T.am(P+1,2*T[P],D,2*P+1,F,T.t-P-1))>=T.DV&&(D[P+T.t]-=T.DV,D[P+T.t+1]=1)}D.t>0&&(D[D.t-1]+=T.am(P,T[P],D,2*P,0,1)),D.s=0,D.clamp()},i.prototype.divRemTo=function(D,T,P){var F=D.abs();if(!(F.t<=0)){var L=this.abs();if(L.t<F.t)return T!=null&&T.fromInt(0),void(P!=null&&this.copyTo(P));P==null&&(P=s());var k=s(),z=this.s,Z=D.s,he=this.DB-u(F[F.t-1]);he>0?(F.lShiftTo(he,k),L.lShiftTo(he,P)):(F.copyTo(k),L.copyTo(P));var xe=k.t,we=k[xe-1];if(we!=0){var Qt=we*(1<<this.F1)+(xe>1?k[xe-2]>>this.F2:0),ei=this.FV/Qt,ti=(1<<this.F1)/Qt,di=1<<this.F2,Mt=P.t,bn=Mt-xe,Ti=T??s();for(k.dlShiftTo(bn,Ti),P.compareTo(Ti)>=0&&(P[P.t++]=1,P.subTo(Ti,P)),i.ONE.dlShiftTo(xe,Ti),Ti.subTo(k,k);k.t<xe;)k[k.t++]=0;for(;--bn>=0;){var En=P[--Mt]==we?this.DM:Math.floor(P[Mt]*ei+(P[Mt-1]+di)*ti);if((P[Mt]+=k.am(0,En,P,bn,0,xe))<En)for(k.dlShiftTo(bn,Ti),P.subTo(Ti,P);P[Mt]<--En;)P.subTo(Ti,P)}T!=null&&(P.drShiftTo(xe,T),z!=Z&&i.ZERO.subTo(T,T)),P.t=xe,P.clamp(),he>0&&P.rShiftTo(he,P),z<0&&i.ZERO.subTo(P,P)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var D=this[0];if(!(1&D))return 0;var T=3&D;return(T=(T=(T=(T=T*(2-(15&D)*T)&15)*(2-(255&D)*T)&255)*(2-((65535&D)*T&65535))&65535)*(2-D*T%this.DV)%this.DV)>0?this.DV-T:-T},i.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},i.prototype.exp=function(D,T){if(D>4294967295||D<1)return i.ONE;var P=s(),F=s(),L=T.convert(this),k=u(D)-1;for(L.copyTo(P);--k>=0;)if(T.sqrTo(P,F),(D&1<<k)>0)T.mulTo(F,L,P);else{var z=P;P=F,F=z}return T.revert(P)},i.prototype.toString=function(D){if(this.s<0)return"-"+this.negate().toString(D);var T;if(D==16)T=4;else if(D==8)T=3;else if(D==2)T=1;else if(D==32)T=5;else{if(D!=4)return this.toRadix(D);T=2}var P,F=(1<<T)-1,L=!1,k="",z=this.t,Z=this.DB-z*this.DB%T;if(z-- >0)for(Z<this.DB&&(P=this[z]>>Z)>0&&(L=!0,k=c(P));z>=0;)Z<T?(P=(this[z]&(1<<Z)-1)<<T-Z,P|=this[--z]>>(Z+=this.DB-T)):(P=this[z]>>(Z-=T)&F,Z<=0&&(Z+=this.DB,--z)),P>0&&(L=!0),L&&(k+=c(P));return L?k:"0"},i.prototype.negate=function(){var D=s();return i.ZERO.subTo(this,D),D},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(D){var T=this.s-D.s;if(T!=0)return T;var P=this.t;if((T=P-D.t)!=0)return this.s<0?-T:T;for(;--P>=0;)if((T=this[P]-D[P])!=0)return T;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(D){var T=s();return this.abs().divRemTo(D,null,T),this.s<0&&T.compareTo(i.ZERO)>0&&D.subTo(T,T),T},i.prototype.modPowInt=function(D,T){var P;return P=D<256||T.isEven()?new p(T):new f(T),this.exp(D,P)},i.ZERO=h(0),i.ONE=h(1),b.prototype.convert=w,b.prototype.revert=w,b.prototype.mulTo=function(D,T,P){D.multiplyTo(T,P)},b.prototype.sqrTo=function(D,T){D.squareTo(T)},x.prototype.convert=function(D){if(D.s<0||D.t>2*this.m.t)return D.mod(this.m);if(D.compareTo(this.m)<0)return D;var T=s();return D.copyTo(T),this.reduce(T),T},x.prototype.revert=function(D){return D},x.prototype.reduce=function(D){for(D.drShiftTo(this.m.t-1,this.r2),D.t>this.m.t+1&&(D.t=this.m.t+1,D.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);D.compareTo(this.r2)<0;)D.dAddOffset(1,this.m.t+1);for(D.subTo(this.r2,D);D.compareTo(this.m)>=0;)D.subTo(this.m,D)},x.prototype.mulTo=function(D,T,P){D.multiplyTo(T,P),this.reduce(P)},x.prototype.sqrTo=function(D,T){D.squareTo(T),this.reduce(T)};var O,M,N,V=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],I=(1<<26)/V[V.length-1];function H(){var D;D=new Date().getTime(),M[N++]^=255&D,M[N++]^=D>>8&255,M[N++]^=D>>16&255,M[N++]^=D>>24&255,N>=K&&(N-=K)}if(i.prototype.chunkSize=function(D){return Math.floor(Math.LN2*this.DB/Math.log(D))},i.prototype.toRadix=function(D){if(D==null&&(D=10),this.signum()==0||D<2||D>36)return"0";var T=this.chunkSize(D),P=Math.pow(D,T),F=h(P),L=s(),k=s(),z="";for(this.divRemTo(F,L,k);L.signum()>0;)z=(P+k.intValue()).toString(D).substr(1)+z,L.divRemTo(F,L,k);return k.intValue().toString(D)+z},i.prototype.fromRadix=function(D,T){this.fromInt(0),T==null&&(T=10);for(var P=this.chunkSize(T),F=Math.pow(T,P),L=!1,k=0,z=0,Z=0;Z<D.length;++Z){var he=d(D,Z);he<0?D.charAt(Z)=="-"&&this.signum()==0&&(L=!0):(z=T*z+he,++k>=P&&(this.dMultiply(F),this.dAddOffset(z,0),k=0,z=0))}k>0&&(this.dMultiply(Math.pow(T,k)),this.dAddOffset(z,0)),L&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(D,T,P){if(typeof T=="number")if(D<2)this.fromInt(1);else for(this.fromNumber(D,P),this.testBit(D-1)||this.bitwiseTo(i.ONE.shiftLeft(D-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(T);)this.dAddOffset(2,0),this.bitLength()>D&&this.subTo(i.ONE.shiftLeft(D-1),this);else{var F=new Array,L=7&D;F.length=1+(D>>3),T.nextBytes(F),L>0?F[0]&=(1<<L)-1:F[0]=0,this.fromString(F,256)}},i.prototype.bitwiseTo=function(D,T,P){var F,L,k=Math.min(D.t,this.t);for(F=0;F<k;++F)P[F]=T(this[F],D[F]);if(D.t<this.t){for(L=D.s&this.DM,F=k;F<this.t;++F)P[F]=T(this[F],L);P.t=this.t}else{for(L=this.s&this.DM,F=k;F<D.t;++F)P[F]=T(L,D[F]);P.t=D.t}P.s=T(this.s,D.s),P.clamp()},i.prototype.changeBit=function(D,T){var P=i.ONE.shiftLeft(D);return this.bitwiseTo(P,T,P),P},i.prototype.addTo=function(D,T){for(var P=0,F=0,L=Math.min(D.t,this.t);P<L;)F+=this[P]+D[P],T[P++]=F&this.DM,F>>=this.DB;if(D.t<this.t){for(F+=D.s;P<this.t;)F+=this[P],T[P++]=F&this.DM,F>>=this.DB;F+=this.s}else{for(F+=this.s;P<D.t;)F+=D[P],T[P++]=F&this.DM,F>>=this.DB;F+=D.s}T.s=F<0?-1:0,F>0?T[P++]=F:F<-1&&(T[P++]=this.DV+F),T.t=P,T.clamp()},i.prototype.dMultiply=function(D){this[this.t]=this.am(0,D-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(D,T){if(D!=0){for(;this.t<=T;)this[this.t++]=0;for(this[T]+=D;this[T]>=this.DV;)this[T]-=this.DV,++T>=this.t&&(this[this.t++]=0),++this[T]}},i.prototype.multiplyLowerTo=function(D,T,P){var F,L=Math.min(this.t+D.t,T);for(P.s=0,P.t=L;L>0;)P[--L]=0;for(F=P.t-this.t;L<F;++L)P[L+this.t]=this.am(0,D[L],P,L,0,this.t);for(F=Math.min(D.t,T);L<F;++L)this.am(0,D[L],P,L,0,T-L);P.clamp()},i.prototype.multiplyUpperTo=function(D,T,P){--T;var F=P.t=this.t+D.t-T;for(P.s=0;--F>=0;)P[F]=0;for(F=Math.max(T-this.t,0);F<D.t;++F)P[this.t+F-T]=this.am(T-F,D[F],P,0,0,this.t+F-T);P.clamp(),P.drShiftTo(1,P)},i.prototype.modInt=function(D){if(D<=0)return 0;var T=this.DV%D,P=this.s<0?D-1:0;if(this.t>0)if(T==0)P=this[0]%D;else for(var F=this.t-1;F>=0;--F)P=(T*P+this[F])%D;return P},i.prototype.millerRabin=function(D){var T=this.subtract(i.ONE),P=T.getLowestSetBit();if(P<=0)return!1;var F=T.shiftRight(P);(D=D+1>>1)>V.length&&(D=V.length);for(var L=s(),k=0;k<D;++k){L.fromInt(V[Math.floor(Math.random()*V.length)]);var z=L.modPow(F,this);if(z.compareTo(i.ONE)!=0&&z.compareTo(T)!=0){for(var Z=1;Z++<P&&z.compareTo(T)!=0;)if((z=z.modPowInt(2,this)).compareTo(i.ONE)==0)return!1;if(z.compareTo(T)!=0)return!1}}return!0},i.prototype.clone=function(){var D=s();return this.copyTo(D),D},i.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var D=this.t,T=new Array;T[0]=this.s;var P,F=this.DB-D*this.DB%8,L=0;if(D-- >0)for(F<this.DB&&(P=this[D]>>F)!=(this.s&this.DM)>>F&&(T[L++]=P|this.s<<this.DB-F);D>=0;)F<8?(P=(this[D]&(1<<F)-1)<<8-F,P|=this[--D]>>(F+=this.DB-8)):(P=this[D]>>(F-=8)&255,F<=0&&(F+=this.DB,--D)),128&P&&(P|=-256),L==0&&(128&this.s)!=(128&P)&&++L,(L>0||P!=this.s)&&(T[L++]=P);return T},i.prototype.equals=function(D){return this.compareTo(D)==0},i.prototype.min=function(D){return this.compareTo(D)<0?this:D},i.prototype.max=function(D){return this.compareTo(D)>0?this:D},i.prototype.and=function(D){var T=s();return this.bitwiseTo(D,g,T),T},i.prototype.or=function(D){var T=s();return this.bitwiseTo(D,m,T),T},i.prototype.xor=function(D){var T=s();return this.bitwiseTo(D,v,T),T},i.prototype.andNot=function(D){var T=s();return this.bitwiseTo(D,C,T),T},i.prototype.not=function(){for(var D=s(),T=0;T<this.t;++T)D[T]=this.DM&~this[T];return D.t=this.t,D.s=~this.s,D},i.prototype.shiftLeft=function(D){var T=s();return D<0?this.rShiftTo(-D,T):this.lShiftTo(D,T),T},i.prototype.shiftRight=function(D){var T=s();return D<0?this.lShiftTo(-D,T):this.rShiftTo(D,T),T},i.prototype.getLowestSetBit=function(){for(var D=0;D<this.t;++D)if(this[D]!=0)return D*this.DB+y(this[D]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var D=0,T=this.s&this.DM,P=0;P<this.t;++P)D+=R(this[P]^T);return D},i.prototype.testBit=function(D){var T=Math.floor(D/this.DB);return T>=this.t?this.s!=0:(this[T]&1<<D%this.DB)!=0},i.prototype.setBit=function(D){return this.changeBit(D,m)},i.prototype.clearBit=function(D){return this.changeBit(D,C)},i.prototype.flipBit=function(D){return this.changeBit(D,v)},i.prototype.add=function(D){var T=s();return this.addTo(D,T),T},i.prototype.subtract=function(D){var T=s();return this.subTo(D,T),T},i.prototype.multiply=function(D){var T=s();return this.multiplyTo(D,T),T},i.prototype.divide=function(D){var T=s();return this.divRemTo(D,T,null),T},i.prototype.remainder=function(D){var T=s();return this.divRemTo(D,null,T),T},i.prototype.divideAndRemainder=function(D){var T=s(),P=s();return this.divRemTo(D,T,P),new Array(T,P)},i.prototype.modPow=function(D,T){var P,F,L=D.bitLength(),k=h(1);if(L<=0)return k;P=L<18?1:L<48?3:L<144?4:L<768?5:6,F=L<8?new p(T):T.isEven()?new x(T):new f(T);var z=new Array,Z=3,he=P-1,xe=(1<<P)-1;if(z[1]=F.convert(this),P>1){var we=s();for(F.sqrTo(z[1],we);Z<=xe;)z[Z]=s(),F.mulTo(we,z[Z-2],z[Z]),Z+=2}var Qt,ei,ti=D.t-1,di=!0,Mt=s();for(L=u(D[ti])-1;ti>=0;){for(L>=he?Qt=D[ti]>>L-he&xe:(Qt=(D[ti]&(1<<L+1)-1)<<he-L,ti>0&&(Qt|=D[ti-1]>>this.DB+L-he)),Z=P;!(1&Qt);)Qt>>=1,--Z;if((L-=Z)<0&&(L+=this.DB,--ti),di)z[Qt].copyTo(k),di=!1;else{for(;Z>1;)F.sqrTo(k,Mt),F.sqrTo(Mt,k),Z-=2;Z>0?F.sqrTo(k,Mt):(ei=k,k=Mt,Mt=ei),F.mulTo(Mt,z[Qt],k)}for(;ti>=0&&!(D[ti]&1<<L);)F.sqrTo(k,Mt),ei=k,k=Mt,Mt=ei,--L<0&&(L=this.DB-1,--ti)}return F.revert(k)},i.prototype.modInverse=function(D){var T=D.isEven();if(this.isEven()&&T||D.signum()==0)return i.ZERO;for(var P=D.clone(),F=this.clone(),L=h(1),k=h(0),z=h(0),Z=h(1);P.signum()!=0;){for(;P.isEven();)P.rShiftTo(1,P),T?(L.isEven()&&k.isEven()||(L.addTo(this,L),k.subTo(D,k)),L.rShiftTo(1,L)):k.isEven()||k.subTo(D,k),k.rShiftTo(1,k);for(;F.isEven();)F.rShiftTo(1,F),T?(z.isEven()&&Z.isEven()||(z.addTo(this,z),Z.subTo(D,Z)),z.rShiftTo(1,z)):Z.isEven()||Z.subTo(D,Z),Z.rShiftTo(1,Z);P.compareTo(F)>=0?(P.subTo(F,P),T&&L.subTo(z,L),k.subTo(Z,k)):(F.subTo(P,F),T&&z.subTo(L,z),Z.subTo(k,Z))}return F.compareTo(i.ONE)!=0?i.ZERO:Z.compareTo(D)>=0?Z.subtract(D):Z.signum()<0?(Z.addTo(D,Z),Z.signum()<0?Z.add(D):Z):Z},i.prototype.pow=function(D){return this.exp(D,new b)},i.prototype.gcd=function(D){var T=this.s<0?this.negate():this.clone(),P=D.s<0?D.negate():D.clone();if(T.compareTo(P)<0){var F=T;T=P,P=F}var L=T.getLowestSetBit(),k=P.getLowestSetBit();if(k<0)return T;for(L<k&&(k=L),k>0&&(T.rShiftTo(k,T),P.rShiftTo(k,P));T.signum()>0;)(L=T.getLowestSetBit())>0&&T.rShiftTo(L,T),(L=P.getLowestSetBit())>0&&P.rShiftTo(L,P),T.compareTo(P)>=0?(T.subTo(P,T),T.rShiftTo(1,T)):(P.subTo(T,P),P.rShiftTo(1,P));return k>0&&P.lShiftTo(k,P),P},i.prototype.isProbablePrime=function(D){var T,P=this.abs();if(P.t==1&&P[0]<=V[V.length-1]){for(T=0;T<V.length;++T)if(P[0]==V[T])return!0;return!1}if(P.isEven())return!1;for(T=1;T<V.length;){for(var F=V[T],L=T+1;L<V.length&&F<I;)F*=V[L++];for(F=P.modInt(F);T<L;)if(F%V[T++]==0)return!1}return P.millerRabin(D)},i.prototype.square=function(){var D=s();return this.squareTo(D),D},i.prototype.Barrett=x,M==null){var B;if(M=new Array,N=0,typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var X=new Uint8Array(32);for(window.crypto.getRandomValues(X),B=0;B<32;++B)M[N++]=X[B]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var J=window.crypto.random(32);for(B=0;B<J.length;++B)M[N++]=255&J.charCodeAt(B)}}for(;N<K;)B=Math.floor(65536*Math.random()),M[N++]=B>>>8,M[N++]=255&B;N=0,H()}function Y(){if(O==null){for(H(),(O=new re).init(M),N=0;N<M.length;++N)M[N]=0;N=0}return O.next()}function ae(){}function re(){this.i=0,this.j=0,this.S=new Array}ae.prototype.nextBytes=function(D){var T;for(T=0;T<D.length;++T)D[T]=Y()},re.prototype.init=function(D){var T,P,F;for(T=0;T<256;++T)this.S[T]=T;for(P=0,T=0;T<256;++T)F=this.S[T],this.S[T]=this.S[P=P+this.S[T]+D[T%D.length]&255],this.S[P]=F;this.i=0,this.j=0},re.prototype.next=function(){var D;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,D=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=D,this.S[D+this.S[this.i]&255]};var K=256;r.exports={default:i,BigInteger:i,SecureRandom:ae}}).call($c)}),PT={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},MT={sha256:Q_};function tI(r,e){if(this.n=null,this.e=0,!(r!=null&&e!=null&&r.length>0&&e.length>0))throw new Error("Invalid key data");this.n=new eI.BigInteger(r,16),this.e=parseInt(e,16)}tI.prototype.verify=function(r,e){e=e.replace(/[^0-9a-f]|[\s\n]]/gi,"");var t=new eI.BigInteger(e,16);if(t.bitLength()>this.n.bitLength())throw new Error("Signature does not match with the key modulus.");var i=function(n){for(var o in PT){var a=PT[o],l=a.length;if(n.substring(0,l)===a)return{alg:o,hash:n.substring(l)}}return[]}(t.modPowInt(this.e,this.n).toString(16).replace(/^1f+00/,""));if(i.length===0)return!1;if(!MT.hasOwnProperty(i.alg))throw new Error("Hashing algorithm is not supported.");var s=MT[i.alg](r).toString();return i.hash===s};for(var Z4=[],Mn=[],J4=typeof Uint8Array<"u"?Uint8Array:Array,qy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Th=0,Q4=qy.length;Th<Q4;++Th)Z4[Th]=qy[Th],Mn[qy.charCodeAt(Th)]=Th;Mn["-".charCodeAt(0)]=62,Mn["_".charCodeAt(0)]=63;var iI=function(r){var e,t,i=function(c){var d=c.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=c.indexOf("=");return h===-1&&(h=d),[h,h===d?0:4-h%4]}(r),s=i[0],n=i[1],o=new J4(function(c,d,h){return 3*(d+h)/4-h}(0,s,n)),a=0,l=n>0?s-4:s;for(t=0;t<l;t+=4)e=Mn[r.charCodeAt(t)]<<18|Mn[r.charCodeAt(t+1)]<<12|Mn[r.charCodeAt(t+2)]<<6|Mn[r.charCodeAt(t+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return n===2&&(e=Mn[r.charCodeAt(t)]<<2|Mn[r.charCodeAt(t+1)]>>4,o[a++]=255&e),n===1&&(e=Mn[r.charCodeAt(t)]<<10|Mn[r.charCodeAt(t+1)]<<4|Mn[r.charCodeAt(t+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o};function sI(r){var e=r.length%4;return e===0?r:r+new Array(4-e+1).join("=")}function _T(r){return r=sI(r).replace(/\-/g,"+").replace(/_/g,"/"),decodeURIComponent(function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}(iI(r)).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Zy(r){return function(e){for(var t="",i=0;i<e.length;i++){var s=e[i].toString(16);t+=s.length===2?s:"0"+s}return t}(iI(sI(r)))}var e8=nh(function(r){var e,t;e=$c,t=function(){function i(s){var n=[];if(s.length===0)return"";if(typeof s[0]!="string")throw new TypeError("Url must be a string. Received "+s[0]);if(s[0].match(/^[^/:]+:\/*$/)&&s.length>1){var o=s.shift();s[0]=o+s[0]}s[0]=s[0].match(/^file:\/\/\//)?s[0].replace(/^([^/:]+):\/*/,"$1:///"):s[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<s.length;a++){var l=s[a];if(typeof l!="string")throw new TypeError("Url must be a string. Received "+l);l!==""&&(a>0&&(l=l.replace(/^[\/]+/,"")),l=l.replace(/[\/]+$/,a<s.length-1?"":"/"),n.push(l))}var c=n.join("/"),d=(c=c.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return d.shift()+(d.length>0?"?":"")+d.join("&")}return function(){return i(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}},r.exports?r.exports=t():e.urljoin=t()});function t8(r,e){return e=e||{},new Promise(function(t,i){var s=new XMLHttpRequest,n=[],o=[],a={},l=function(){return{ok:(s.status/100|0)==2,statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:l,headers:{keys:function(){return n},entries:function(){return o},get:function(d){return a[d.toLowerCase()]},has:function(d){return d.toLowerCase()in a}}}};for(var c in s.open(e.method||"get",r,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(d,h,u){n.push(h=h.toLowerCase()),o.push([h,u]),a[h]=a[h]?a[h]+","+u:u}),t(l())},s.onerror=i,s.withCredentials=e.credentials=="include",e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)})}function i8(r){if(r.ok)return r.json();var e=new Error(r.statusText);return e.response=r,Promise.reject(e)}function tw(r){this.name="ConfigurationError",this.message=r||""}function wt(r){this.name="TokenValidationError",this.message=r||""}tw.prototype=Error.prototype,wt.prototype=Error.prototype;var s8=function(){function r(){}var e=r.prototype;return e.get=function(){return null},e.has=function(){return null},e.set=function(){return null},r}();Y4.polyfill();var iw="RS256",jm=function(r){return typeof r=="number"},n8=function(){return new Date};function Ic(r){var e=r||{};if(this.jwksCache=e.jwksCache||new s8,this.expectedAlg=e.expectedAlg||"RS256",this.issuer=e.issuer,this.audience=e.audience,this.leeway=e.leeway===0?0:e.leeway||60,this.jwksURI=e.jwksURI,this.maxAge=e.maxAge,this.__clock=typeof e.__clock=="function"?e.__clock:n8,this.leeway<0||this.leeway>300)throw new tw("The leeway should be positive and lower than five minutes.");if(iw!==this.expectedAlg)throw new tw('Signature algorithm of "'+this.expectedAlg+'" is not supported. Expected the ID token to be signed with "'+iw+'".')}function nI(r,e){this.plugins=e;for(var t=0;t<this.plugins.length;t++){if(this.plugins[t].version!==eC.raw){var i="";throw this.plugins[t].constructor&&this.plugins[t].constructor.name&&(i=this.plugins[t].constructor.name),new Error("Plugin "+i+" version ("+this.plugins[t].version+") is not compatible with the SDK version ("+eC.raw+")")}this.plugins[t].setWebAuth(r)}}Ic.prototype.verify=function(r,e,t){if(!t&&e&&typeof e=="function"&&(t=e,e=void 0),!r)return t(new wt("ID token is required but missing"),null);var i=this.decode(r);if(i instanceof Error)return t(new wt("ID token could not be decoded"),null);var s=i.encoded.header+"."+i.encoded.payload,n=Zy(i.encoded.signature),o=i.header.alg,a=i.header.kid,l=i.payload.aud,c=i.payload.sub,d=i.payload.iss,h=i.payload.exp,u=i.payload.nbf,p=i.payload.iat,f=i.payload.azp,g=i.payload.auth_time,m=i.payload.nonce,v=this.__clock(),C=this;if(C.expectedAlg!==o)return t(new wt('Signature algorithm of "'+o+'" is not supported. Expected the ID token to be signed with "'+iw+'".'),null);this.getRsaVerifier(d,a,function(y,R){if(y)return t(y,null);if(!R.verify(s,n))return t(new wt("Invalid ID token signature."),null);if(!d||typeof d!="string")return t(new wt("Issuer (iss) claim must be a string present in the ID token"),null);if(C.issuer!==d)return t(new wt('Issuer (iss) claim mismatch in the ID token, expected "'+C.issuer+'", found "'+d+'"'),null);if(!c||typeof c!="string")return t(new wt("Subject (sub) claim must be a string present in the ID token"),null);if(!l||typeof l!="string"&&!Array.isArray(l))return t(new wt("Audience (aud) claim must be a string or array of strings present in the ID token"),null);if(Array.isArray(l)&&!l.includes(C.audience))return t(new wt('Audience (aud) claim mismatch in the ID token; expected "'+C.audience+'" but was not one of "'+l.join(", ")+'"'),null);if(typeof l=="string"&&C.audience!==l)return t(new wt('Audience (aud) claim mismatch in the ID token; expected "'+C.audience+'" but found "'+l+'"'),null);if(e){if(!m||typeof m!="string")return t(new wt("Nonce (nonce) claim must be a string present in the ID token"),null);if(m!==e)return t(new wt('Nonce (nonce) claim value mismatch in the ID token; expected "'+e+'", found "'+m+'"'),null)}if(Array.isArray(l)&&l.length>1){if(!f||typeof f!="string")return t(new wt("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values"),null);if(f!==C.audience)return t(new wt('Authorized Party (azp) claim mismatch in the ID token; expected "'+C.audience+'", found "'+f+'"'),null)}if(!h||!jm(h))return t(new wt("Expiration Time (exp) claim must be a number present in the ID token"),null);if(!p||!jm(p))return t(new wt("Issued At (iat) claim must be a number present in the ID token"),null);var b=h+C.leeway,w=new Date(0);if(w.setUTCSeconds(b),v>w)return t(new wt('Expiration Time (exp) claim error in the ID token; current time "'+v+'" is after expiration time "'+w+'"'),null);if(u&&jm(u)){var x=u-C.leeway,O=new Date(0);if(O.setUTCSeconds(x),v<O)return t(new wt('Not Before Time (nbf) claim error in the ID token; current time "'+v+'" is before the not before time "'+O+'"'),null)}if(C.maxAge){if(!g||!jm(g))return t(new wt("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified"),null);var M=g+C.maxAge+C.leeway,N=new Date(0);if(N.setUTCSeconds(M),v>N)return t(new wt('Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time "'+v+'" is after last auth time at "'+N+'"'),null)}return t(null,i.payload)})},Ic.prototype.getRsaVerifier=function(r,e,t){var i=this,s=r+e;Promise.resolve(this.jwksCache.has(s)).then(function(n){return n?i.jwksCache.get(s):(o={jwksURI:i.jwksURI,iss:r,kid:e},(typeof fetch>"u"?t8:fetch)(o.jwksURI||e8(o.iss,".well-known","jwks.json")).then(i8).then(function(a){var l,c,d,h=null;for(l=0;l<a.keys.length&&h===null;l++)(c=a.keys[l]).kid===o.kid&&(h=c);if(!h)throw new Error('Could not find a public key for Key ID (kid) "'+o.kid+'"');return{modulus:Zy((d=h).n),exp:Zy(d.e)}}).catch(function(a){throw a}));var o}).then(function(n){if(!n||!n.modulus||!n.exp)throw new Error("Empty keyInfo in response");return Promise.resolve(i.jwksCache.set(s,n)).then(function(){t&&t(null,new tI(n.modulus,n.exp))})}).catch(function(n){t&&t(n)})},Ic.prototype.decode=function(r){var e,t,i=r.split(".");if(i.length!==3)return new wt("Cannot decode a malformed JWT");try{e=JSON.parse(_T(i[0])),t=JSON.parse(_T(i[1]))}catch{return new wt("Token header or payload is not valid JSON")}return{header:e,payload:t,encoded:{header:i[0],payload:i[1],signature:i[2]}}},Ic.prototype.validateAccessToken=function(r,e,t,i){if(this.expectedAlg!==e)return i(new wt('Signature algorithm of "'+e+'" is not supported. Expected "'+this.expectedAlg+'"'));var s,n=Q_(r),o=AT.stringify(n),a=o.substring(0,o.length/2),l=AT.parse(a),c=q4.stringify(l);return i((s={"+":"-","/":"_","=":""},c.replace(/[+/=]/g,function(d){return s[d]})!==t?new wt("Invalid access_token"):null))},nI.prototype.get=function(r){for(var e=0;e<this.plugins.length;e++)if(this.plugins[e].supports(r))return this.plugins[e].init();return null};var IT={randomString:function(r){var e=new Uint8Array(r),t=[],i="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",s=pt.getWindow().crypto||pt.getWindow().msCrypto;if(!s)return null;for(var n=s.getRandomValues(e),o=0;o<n.length;o++)t.push(i[n[o]%i.length]);return t.join("")}};function Lc(r){var e=r.transaction||{};this.namespace=e.namespace||"com.auth0.auth.",this.keyLength=e.keyLength||32,this.stateExpiration=r.stateExpiration?r.stateExpiration/60/24:1/48,this.storage=new qh(r),this.options=r}function Mh(r){if(this.url=r.url,this.callback=r.callback,this.timeout=r.timeout||6e4,this.timeoutCallback=r.timeoutCallback||null,this.eventListenerType=r.eventListenerType||"message",this.iframe=null,this.timeoutHandle=null,this._destroyTimeout=null,this.transientMessageEventListener=null,this.proxyEventListener=null,this.eventValidator=r.eventValidator||{isValid:function(){return!0}},typeof this.callback!="function")throw new Error("options.callback must be a function")}function qE(r){this.webAuth=r,this.warn=new sh(r.baseOptions)}function Kf(r,e){this.webAuth=r,this.baseOptions=e,this.request=new oa(e),this.webMessageHandler=new qE(r),this.storage=new qh(e)}function LT(r,e){return["co/verifier",encodeURIComponent(r),encodeURIComponent(e)].join("/")}function sw(r,e){this.webAuth=r,this.baseOptions=e,this.crossOriginAuthentication=new Kf(r,this.baseOptions),this.warn=new sh({disableWarnings:!!e._disableDeprecationWarnings})}Lc.prototype.process=function(r){if(!r.responseType)throw new Error("responseType is required");var e=r.realm||r.connection,t=r.responseType.indexOf("id_token")!==-1,i=this.generateTransaction(r.appState,r.state,r.nonce,e,t,r.organization);return r.state||(r.state=i.state),t&&!r.nonce&&(r.nonce=i.nonce),r},Lc.prototype.generateTransaction=function(r,e,t,i,s,n){if(e=e||IT.randomString(this.keyLength),t=t||(s?IT.randomString(this.keyLength):null),pt.getWindow().location.host!==this.options.domain){var o={nonce:t,appState:r,state:e,lastUsedConnection:i};n&&(o.organization=n),this.storage.setItem(this.namespace+e,o,{expires:this.stateExpiration})}return{state:e,nonce:t}},Lc.prototype.getStoredTransaction=function(r){var e;return e=this.storage.getItem(this.namespace+r),this.clearTransaction(r),e},Lc.prototype.clearTransaction=function(r){this.storage.removeItem(this.namespace+r)},Mh.prototype.init=function(){var r=this,e=pt.getWindow();switch(this.iframe=e.document.createElement("iframe"),this.iframe.style.display="none",this.proxyEventListener=function(t){r.eventListener(t)},this.eventListenerType){case"message":this.eventSourceObject=e;break;case"load":this.eventSourceObject=this.iframe;break;default:throw new Error("Unsupported event listener type: "+this.eventListenerType)}this.eventSourceObject.addEventListener(this.eventListenerType,this.proxyEventListener,!1),e.document.body.appendChild(this.iframe),this.iframe.src=this.url,this.timeoutHandle=setTimeout(function(){r.timeoutHandler()},this.timeout)},Mh.prototype.eventListener=function(r){var e={event:r,sourceObject:this.eventSourceObject};this.eventValidator.isValid(e)&&(this.destroy(),this.callback(e))},Mh.prototype.timeoutHandler=function(){this.destroy(),this.timeoutCallback&&this.timeoutCallback()},Mh.prototype.destroy=function(){var r=this;clearTimeout(this.timeoutHandle),this._destroyTimeout=setTimeout(function(){r.eventSourceObject.removeEventListener(r.eventListenerType,r.proxyEventListener,!1),r.iframe.parentNode&&r.iframe.parentNode.removeChild(r.iframe)},0)},qE.prototype.run=function(r,e){var t=this;r.responseMode="web_message",r.prompt="none";var i=pt.getOrigin(),s=pe.getOriginFromUrl(r.redirectUri);if(s&&i!==s)return e({error:"origin_mismatch",error_description:"The redirectUri's origin ("+s+") should match the window's origin ("+i+")."});(function(n,o,a){new Mh({url:n,eventListenerType:"message",callback:function(l){a(null,l)},timeout:o.timeout,eventValidator:{isValid:function(l){return!(!l.event.data||l.event.data.type!=="authorization_response"||o.state!==l.event.data.response.state)}},timeoutCallback:function(){a({error:"timeout",error_description:"Timeout during executing web_message communication",state:o.state})}}).init()})(this.webAuth.client.buildAuthorizeUrl(r),r,function(n,o){var a=n;if(!n&&o.event.data.response.error&&(a=o.event.data.response),!a){var l=o.event.data.response;return t.webAuth.validateAuthenticationResponse(r,l,e)}return a.error==="consent_required"&&pt.getWindow().location.hostname==="localhost"&&t.warn.warning("Consent Required. Consent can't be skipped on localhost. Read more here: https://auth0.com/docs/api-auth/user-consent#skipping-consent-for-first-party-clients"),t.webAuth.transactionManager.clearTransaction(a.state),e(pe.pick(a,["error","error_description"]))})},Kf.prototype.login=function(r,e){var t=this,i=ui(this.baseOptions.rootUrl,"/co/authenticate");r.username=r.username||r.email,delete r.email;var s={client_id:r.clientID||this.baseOptions.clientID,username:r.username};r.password&&(s.password=r.password),r.otp&&(s.otp=r.otp);var n=r.realm||this.baseOptions.realm;if(n){var o=r.credentialType||this.baseOptions.credentialType||"http://auth0.com/oauth/grant-type/password-realm";s.realm=n,s.credential_type=o}else s.credential_type="password";this.request.post(i).withCredentials().send(s).end(function(a,l){if(a){var c=a.response&&a.response.body||{error:"request_error",error_description:JSON.stringify(a)};return Pi(e,{forceLegacyError:!0})(c)}function d(){var h=r.popup===!0;r=pe.blacklist(r,["password","credentialType","otp","popup","onRedirecting"]);var u=pe.merge(r).with({loginTicket:l.body.login_ticket}),p=LT(t.baseOptions.rootUrl,l.body.co_id);t.storage.setItem(p,l.body.co_verifier,{expires:1/96}),h?t.webMessageHandler.run(u,Pi(e,{forceLegacyError:!0})):t.webAuth.authorize(u)}typeof r.onRedirecting=="function"?r.onRedirecting(d):d()})},Kf.prototype.callback=function(){var r=decodeURIComponent(function(i){var s=("&"+pt.getWindow().location.hash.substring(1)).split("&"+i+"=");if(s.length===2)return s.pop().split("&").shift()}("origin")),e=pt.getWindow(),t=this;e.addEventListener("message",function(i){if(i.data.type==="co_verifier_request"){var s=LT(i.origin,i.data.request.id),n=function(o,a){try{var l=o.getItem(a);return o.removeItem(a),l||""}catch{return""}}(t.storage,s);i.source.postMessage({type:"co_verifier_response",response:{verifier:n}},i.origin)}}),e.parent.postMessage({type:"ready"},r)},sw.prototype.loginWithCredentials=function(r,e){r.realm=r.realm||r.connection,delete r.connection,this.crossOriginAuthentication.login(r,e)},sw.prototype.signupAndLogin=function(r,e){var t=this;return this.webAuth.client.dbConnection.signup(r,function(i){return i?e(i):(r.realm=r.realm||r.connection,delete r.connection,t.webAuth.login(r,e))})};var FT=ih(function(r){var e=function(){function t(o,a,l){o.attachEvent?o.attachEvent("on"+a,l):o.addEventListener&&o.addEventListener(a,l,!1)}function i(o,a,l){o.detachEvent?o.detachEvent("on"+a,l):o.removeEventListener&&o.removeEventListener(a,l,!1)}function s(o){/^https?:\/\//.test(o)||(o=window.location.href);var a=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(o);return a?a[1]:o}var n=function(){if(typeof navigator>"u")return!1;var o=-1,a=navigator.userAgent;return navigator.appName==="Microsoft Internet Explorer"?new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(a)!=null&&(o=parseFloat(RegExp.$1)):a.indexOf("Trident")>-1&&new RegExp("rv:([0-9]{2,2}[.0-9]{0,})").exec(a)!==null&&(o=parseFloat(RegExp.$1)),o>=8}();return typeof window<"u"&&window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage?{open:function(o,a){if(!a)throw"missing required callback argument";var l,c;o.url||(l="missing required 'url' parameter"),o.relay_url||(l="missing required 'relay_url' parameter"),l&&setTimeout(function(){a(l)},0),o.window_name||(o.window_name=null),o.window_features&&!function(){try{var v=navigator.userAgent;return v.indexOf("Fennec/")!=-1||v.indexOf("Firefox/")!=-1&&v.indexOf("Android")!=-1}catch{}return!1}()||(o.window_features=void 0);var d,h=o.origin||s(o.url);if(h!==s(o.relay_url))return setTimeout(function(){a("invalid arguments: origin of url and relay_url must match")},0);n&&((c=document.createElement("iframe")).setAttribute("src",o.relay_url),c.style.display="none",c.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(c),d=c.contentWindow);var u=o.popup||window.open(o.url,o.window_name,o.window_features);o.popup&&(u.location.href=o.url),d||(d=u);var p=setInterval(function(){u&&u.closed&&(g(),a&&(a("User closed the popup window"),a=null))},500),f=JSON.stringify({a:"request",d:o.params});function g(){if(c&&document.body.removeChild(c),c=void 0,p&&(p=clearInterval(p)),i(window,"message",m),i(window,"unload",g),u)try{u.close()}catch{d.postMessage("die",h)}u=d=void 0}function m(v){if(v.origin===h){try{var C=JSON.parse(v.data)}catch(y){if(a)return a(y);throw y}C.a==="ready"?d.postMessage(f,h):C.a==="error"?(g(),a&&(a(C.d),a=null)):C.a==="response"&&(g(),a&&(a(null,C.d),a=null))}}return t(window,"unload",g),t(window,"message",m),{originalPopup:u,close:g,focus:function(){if(u)try{u.focus()}catch{}}}},onOpen:function(o){var a="*",l=n?function(){for(var u=window.opener.frames,p=u.length-1;p>=0;p--)try{if(u[p].location.protocol===window.location.protocol&&u[p].location.host===window.location.host&&u[p].name==="__winchan_relay_frame")return u[p]}catch{}}():window.opener;if(!l)throw"can't find relay frame";function c(u){u=JSON.stringify(u),n?l.doPost(u,a):l.postMessage(u,a)}function d(u){if(u.data==="die")try{window.close()}catch{}}t(n?l:window,"message",function u(p){var f;try{f=JSON.parse(p.data)}catch{}f&&f.a==="request"&&(i(window,"message",u),a=p.origin,o&&setTimeout(function(){o(a,f.d,function(g){o=void 0,c({a:"response",d:g})})},0))}),t(n?l:window,"message",d);try{c({a:"ready"})}catch{t(l,"load",function(p){c({a:"ready"})})}var h=function(){try{i(n?l:window,"message",d)}catch{}o&&c({a:"error",d:"client closed window"}),o=void 0;try{window.close()}catch{}};return t(window,"unload",h),{detach:function(){i(window,"unload",h)}}}}:{open:function(o,a,l,c){setTimeout(function(){c("unsupported browser")},0)},onOpen:function(o){setTimeout(function(){o("unsupported browser")},0)}}}();r.exports&&(r.exports=e)}),o8={extractOrigin:function(r){/^https?:\/\//.test(r)||(r=window.location.href);var e=/^(https?:\/\/[-_a-zA-Z.0-9:]+)/.exec(r);return e?e[1]:r}};function zm(){this._current_popup=null}function Qr(r,e){this.baseOptions=e,this.baseOptions.popupOrigin=e.popupOrigin,this.client=r.client,this.webAuth=r,this.transactionManager=new Lc(this.baseOptions),this.crossOriginAuthentication=new Kf(r,this.baseOptions),this.warn=new sh({disableWarnings:!!e._disableDeprecationWarnings})}function _h(r){this.authenticationUrl=r.authenticationUrl,this.timeout=r.timeout||6e4,this.handler=null,this.postMessageDataType=r.postMessageDataType||!1,this.postMessageOrigin=r.postMessageOrigin||pt.getWindow().location.origin||pt.getWindow().location.protocol+"//"+pt.getWindow().location.hostname+(pt.getWindow().location.port?":"+pt.getWindow().location.port:"")}function Jy(r){this.baseOptions=r,this.request=new oa(r),this.transactionManager=new Lc(this.baseOptions)}function rv(r,e){this.baseOptions=e,this.client=r,this.baseOptions.universalLoginPage=!0,this.request=new oa(this.baseOptions),this.warn=new sh({disableWarnings:!!e._disableDeprecationWarnings})}zm.prototype.calculatePosition=function(r){var e=r.width||500,t=r.height||600,i=pt.getWindow(),s=i.screenX!==void 0?i.screenX:i.screenLeft,n=i.screenY!==void 0?i.screenY:i.screenTop,o=i.outerWidth!==void 0?i.outerWidth:i.document.body.clientWidth,a=i.outerHeight!==void 0?i.outerHeight:i.document.body.clientHeight;return{width:e,height:t,left:r.left||s+(o-e)/2,top:r.top||n+(a-t)/2}},zm.prototype.preload=function(r){var e=this,t=pt.getWindow(),i=this.calculatePosition(r.popupOptions||{}),s=pe.merge(i).with(r.popupOptions),n=r.url||"about:blank",o=dl.stringify(s,{encode:!1,delimiter:","});return this._current_popup&&!this._current_popup.closed||(this._current_popup=t.open(n,"auth0_signup_popup",o),this._current_popup.kill=function(){this.close(),e._current_popup=null}),this._current_popup},zm.prototype.load=function(r,e,t,i){var s=this,n=this.calculatePosition(t.popupOptions||{}),o=pe.merge(n).with(t.popupOptions),a=pe.merge({url:r,relay_url:e,window_features:dl.stringify(o,{delimiter:",",encode:!1}),popup:this._current_popup}).with(t),l=FT.open(a,function(c,d){if(!c||c.name!=="SyntaxError")return s._current_popup=null,i(c,d)});return l.focus(),l},Qr.prototype.buildPopupHandler=function(){var r=this.baseOptions.plugins.get("popup.getPopupHandler");return r?r.getPopupHandler():new zm},Qr.prototype.preload=function(r){r=r||{};var e=this.buildPopupHandler();return e.preload(r),e},Qr.prototype.getPopupHandler=function(r,e){return r.popupHandler?r.popupHandler:e?this.preload(r):this.buildPopupHandler()},Qr.prototype.callback=function(r){var e=this,t=pt.getWindow(),i=(r=r||{}).popupOrigin||this.baseOptions.popupOrigin||pt.getOrigin();t.opener?FT.onOpen(function(s,n,o){if(s!==i)return o({error:"origin_mismatch",error_description:"The popup's origin ("+s+") should match the `popupOrigin` parameter ("+i+")."});e.webAuth.parseHash(r||{},function(a,l){return o(a||l)})}):t.doPost=function(s){t.parent&&t.parent.postMessage(s,i)}},Qr.prototype.authorize=function(r,e){var t,i,s={},n=this.baseOptions.plugins.get("popup.authorize"),o=pe.merge(this.baseOptions,["clientID","scope","domain","audience","tenant","responseType","redirectUri","_csrf","state","_intstate","nonce","organization","invitation"]).with(pe.blacklist(r,["popupHandler"]));return Fe.check(o,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),i=ui(this.baseOptions.rootUrl,"relay.html"),r.owp?o.owp=!0:(s.origin=o8.extractOrigin(o.redirectUri),i=o.redirectUri),r.popupOptions&&(s.popupOptions=pe.pick(r.popupOptions,["width","height","top","left"])),n&&(o=n.processParams(o)),(o=this.transactionManager.process(o)).scope=o.scope||"openid profile email",delete o.domain,t=this.client.buildAuthorizeUrl(o),this.getPopupHandler(r).load(t,i,s,Pi(e,{keepOriginalCasing:!0}))},Qr.prototype.loginWithCredentials=function(r,e){r.realm=r.realm||r.connection,r.popup=!0,r=pe.merge(this.baseOptions,["redirectUri","responseType","state","nonce","timeout"]).with(pe.blacklist(r,["popupHandler","connection"])),r=this.transactionManager.process(r),this.crossOriginAuthentication.login(r,e)},Qr.prototype.passwordlessVerify=function(r,e){var t=this;return this.client.passwordless.verify(pe.blacklist(r,["popupHandler"]),function(i){if(i)return e(i);r.username=r.phoneNumber||r.email,r.password=r.verificationCode,delete r.email,delete r.phoneNumber,delete r.verificationCode,delete r.type,t.client.loginWithResourceOwner(r,e)})},Qr.prototype.signupAndLogin=function(r,e){var t=this;return this.client.dbConnection.signup(r,function(i){if(i)return e(i);t.loginWithCredentials(r,e)})},_h.create=function(r){return new _h(r)},_h.prototype.login=function(r,e){this.handler=new Mh({auth0:this.auth0,url:this.authenticationUrl,eventListenerType:r?"message":"load",callback:this.getCallbackHandler(e,r),timeout:this.timeout,eventValidator:this.getEventValidator(),timeoutCallback:function(){e(null,"#error=timeout&error_description=Timeout+during+authentication+renew.")},usePostMessage:r||!1}),this.handler.init()},_h.prototype.getEventValidator=function(){var r=this;return{isValid:function(e){switch(e.event.type){case"message":return e.event.origin===r.postMessageOrigin&&e.event.source===r.handler.iframe.contentWindow&&(r.postMessageDataType===!1||e.event.data.type&&e.event.data.type===r.postMessageDataType);case"load":if(e.sourceObject.contentWindow.location.protocol==="about:")return!1;default:return!0}}}},_h.prototype.getCallbackHandler=function(r,e){return function(t){var i;i=e?typeof t.event.data=="object"&&t.event.data.hash?t.event.data.hash:t.event.data:t.sourceObject.contentWindow.location.hash,r(null,i)}},Jy.prototype.login=function(r,e){var t,i;return t=ui(this.baseOptions.rootUrl,"usernamepassword","login"),r.username=r.username||r.email,r=pe.blacklist(r,["email","onRedirecting"]),i=pe.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience"]).with(r),i=this.transactionManager.process(i),i=pe.toSnakeCase(i,["auth0Client"]),this.request.post(t).send(i).end(Pi(e))},Jy.prototype.callback=function(r){var e,t=pt.getDocument();(e=t.createElement("div")).innerHTML=r,t.body.appendChild(e).children[0].submit()},rv.prototype.login=function(r,e){if(pt.getWindow().location.host!==this.baseOptions.domain)throw new Error("This method is meant to be used only inside the Universal Login Page.");var t,i=pe.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience","_csrf","state","_intstate","nonce"]).with(r);return Fe.check(i,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(t=new Jy(this.baseOptions)).login(i,function(s,n){if(s)return e(s);function o(){t.callback(n)}if(typeof r.onRedirecting=="function")return r.onRedirecting(function(){o()});o()})},rv.prototype.signupAndLogin=function(r,e){var t=this;return t.client.client.dbConnection.signup(r,function(i){return i?e(i):t.login(r,e)})},rv.prototype.getSSOData=function(r,e){var t,i="";return typeof r=="function"&&(e=r,r=!1),Fe.check(r,{type:"boolean",message:"withActiveDirectories parameter is not valid"}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),r&&(i="?"+dl.stringify({ldaps:1,client_id:this.baseOptions.clientID})),t=ui(this.baseOptions.rootUrl,"user","ssodata",i),this.request.get(t,{noHeaders:!0}).withCredentials().end(Pi(e))};var NT=function(){},GT={lang:"en",templates:{auth0:function(r){var e=r.type==="code"?"Enter the code shown above":"Solve the formula shown above";return`<div class="captcha-challenge">
  <img src="`+r.image+`" />
  <button type="button" class="captcha-reload">âº</button>
</div>
<input type="text" name="captcha"
  class="form-control captcha-control"
  placeholder="`+e+'" />'},recaptcha_v2:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},recaptcha_enterprise:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},error:function(){return'<div class="error" style="color: red;">Error getting the bot detection challenge. Please contact the system administrator.</div>'}}};function kT(r,e,t,i){r.innerHTML=e.templates[t.provider](t),r.querySelector(".captcha-reload").addEventListener("click",function(s){s.preventDefault(),i()})}function VT(r){switch(r){case"recaptcha_v2":return window.grecaptcha;case"recaptcha_enterprise":return window.grecaptcha.enterprise;default:throw new Error("Unknown captcha provider")}}function r8(r,e,t){var i="recaptchaCallback_"+Math.floor(1000001*Math.random());window[i]=function(){delete window[i],t()};var s=window.document.createElement("script");s.src=function(n,o,a){switch(n){case"recaptcha_v2":return"https://www.recaptcha.net/recaptcha/api.js?hl="+o+"&onload="+a;case"recaptcha_enterprise":return"https://www.recaptcha.net/recaptcha/enterprise.js?render=explicit&hl="+o+"&onload="+a;default:throw new Error("Unknown captcha provider")}}(e.provider,e.lang,i),s.async=!0,window.document.body.appendChild(s)}function HT(r,e,t){var i=r.hasAttribute("data-wid")&&r.getAttribute("data-wid");function s(o){r.querySelector('input[name="captcha"]').value=o||""}if(i)return s(),void VT(t.provider).reset(i);r.innerHTML=e.templates[t.provider](t);var n=r.querySelector(".recaptcha");r8(0,{lang:e.lang,provider:t.provider},function(){var o=VT(t.provider);i=o.render(n,{callback:s,"expired-callback":function(){s()},"error-callback":function(){s()},sitekey:t.siteKey}),r.setAttribute("data-wid",i)})}var BT={render:function(r,e,t,i){function s(n){n=n||NT,r.getChallenge(function(o,a){return o?(e.innerHTML=t.templates.error(o),n(o)):a.required?(e.style.display="",a.provider==="auth0"?kT(e,t,a,s):a.provider!=="recaptcha_v2"&&a.provider!=="recaptcha_enterprise"||HT(e,t,a),void n()):(e.style.display="none",void(e.innerHTML=""))})}return t=pe.merge(GT).with(t||{}),s(i),{reload:s,getValue:function(){var n=e.querySelector('input[name="captcha"]');if(n)return n.value}}},renderPasswordless:function(r,e,t,i){function s(n){n=n||NT,r.passwordless.getChallenge(function(o,a){return o?(e.innerHTML=t.templates.error(o),n(o)):a.required?(e.style.display="",a.provider==="auth0"?kT(e,t,a,s):a.provider!=="recaptcha_v2"&&a.provider!=="recaptcha_enterprise"||HT(e,t,a),void n()):(e.style.display="none",void(e.innerHTML=""))})}return t=pe.merge(GT).with(t||{}),s(i),{reload:s,getValue:function(){var n=e.querySelector('input[name="captcha"]');if(n)return n.value}}}};function a8(){return new Date}function jt(r){Fe.check(r,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},popupOrigin:{optional:!0,type:"string",message:"popupOrigin is not valid"},leeway:{optional:!0,type:"number",message:"leeway is not valid"},plugins:{optional:!0,type:"array",message:"plugins is not valid"},maxAge:{optional:!0,type:"number",message:"maxAge is not valid"},stateExpiration:{optional:!0,type:"number",message:"stateExpiration is not valid"},legacySameSiteCookie:{optional:!0,type:"boolean",message:"legacySameSiteCookie option is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"},_timesToRetryFailedRequests:{optional:!0,type:"number",message:"_timesToRetryFailedRequests option is not valid"}}),r.overrides&&Fe.check(r.overrides,{type:"object",message:"overrides option is not valid"},{__tenant:{optional:!0,type:"string",message:"__tenant option is required"},__token_issuer:{optional:!0,type:"string",message:"__token_issuer option is required"},__jwks_uri:{optional:!0,type:"string",message:"__jwks_uri is required"}}),this.baseOptions=r,this.baseOptions.plugins=new nI(this,this.baseOptions.plugins||[]),this.baseOptions._sendTelemetry=this.baseOptions._sendTelemetry!==!1||this.baseOptions._sendTelemetry,this.baseOptions._timesToRetryFailedRequests=r._timesToRetryFailedRequests?parseInt(r._timesToRetryFailedRequests):0,this.baseOptions.tenant=this.baseOptions.overrides&&this.baseOptions.overrides.__tenant||this.baseOptions.domain.split(".")[0],this.baseOptions.token_issuer=this.baseOptions.overrides&&this.baseOptions.overrides.__token_issuer||"https://"+this.baseOptions.domain+"/",this.baseOptions.jwksURI=this.baseOptions.overrides&&this.baseOptions.overrides.__jwks_uri,r.legacySameSiteCookie!==!1&&(this.baseOptions.legacySameSiteCookie=!0),this.transactionManager=new Lc(this.baseOptions),this.client=new On(this.baseOptions),this.redirect=new sw(this,this.baseOptions),this.popup=new Qr(this,this.baseOptions),this.crossOriginAuthentication=new Kf(this,this.baseOptions),this.webMessageHandler=new qE(this),this._universalLogin=new rv(this,this.baseOptions),this.ssodataStorage=new tC(this.baseOptions)}function Zp(r,e){this.baseOptions=e,this.request=r}function nw(r,e){this.baseOptions=e,this.request=r}function On(r,e){arguments.length===2?this.auth0=r:e=r,Fe.check(e,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"}}),this.baseOptions=e,this.baseOptions._sendTelemetry=this.baseOptions._sendTelemetry!==!1||this.baseOptions._sendTelemetry,this.baseOptions.rootUrl=this.baseOptions.domain&&this.baseOptions.domain.toLowerCase().indexOf("http")===0?this.baseOptions.domain:"https://"+this.baseOptions.domain,this.request=new oa(this.baseOptions),this.passwordless=new Zp(this.request,this.baseOptions),this.dbConnection=new nw(this.request,this.baseOptions),this.warn=new sh({disableWarnings:!!e._disableDeprecationWarnings}),this.ssodataStorage=new tC(this.baseOptions)}jt.prototype.parseHash=function(r,e){var t,i;e||typeof r!="function"?r=r||{}:(e=r,r={});var s=r.hash===void 0?pt.getWindow().location.hash:r.hash;if(s=s.replace(/^#?\/?/,""),(t=dl.parse(s)).hasOwnProperty("error"))return i=qa.buildResponse(t.error,t.error_description),t.state&&(i.state=t.state),e(i);if(!t.hasOwnProperty("access_token")&&!t.hasOwnProperty("id_token")&&!t.hasOwnProperty("refresh_token"))return e(null,null);var n=(this.baseOptions.responseType||r.responseType||"").split(" ");return n.length>0&&n.indexOf("token")!==-1&&!t.hasOwnProperty("access_token")?e(qa.buildResponse("invalid_hash","response_type contains `token`, but the parsed hash does not contain an `access_token` property")):n.length>0&&n.indexOf("id_token")!==-1&&!t.hasOwnProperty("id_token")?e(qa.buildResponse("invalid_hash","response_type contains `id_token`, but the parsed hash does not contain an `id_token` property")):this.validateAuthenticationResponse(r,t,e)},jt.prototype.validateAuthenticationResponse=function(r,e,t){var i=this;r.__enableIdPInitiatedLogin=r.__enableIdPInitiatedLogin||r.__enableImpersonation;var s=e.state,n=this.transactionManager.getStoredTransaction(s),o=r.state||n&&n.state||null,a=o===s;if(!(!s&&!o&&r.__enableIdPInitiatedLogin)&&!a)return t({error:"invalid_token",errorDescription:"`state` does not match."});var l=r.nonce||n&&n.nonce||null,c=n&&n.organization,d=r.state||n&&n.appState||null,h=function(u,p){if(u)return t(u);var f;return n&&n.lastUsedConnection&&(p&&(f=p.sub),i.ssodataStorage.set(n.lastUsedConnection,f)),t(null,function(g,m,v){return{accessToken:g.access_token||null,idToken:g.id_token||null,idTokenPayload:v||null,appState:m||null,refreshToken:g.refresh_token||null,state:g.state||null,expiresIn:g.expires_in?parseInt(g.expires_in,10):null,tokenType:g.token_type||null,scope:g.scope||null}}(e,d,p))};return e.id_token?this.validateToken(e.id_token,l,function(u,p){if(!u){if(c){if(!p.org_id)return h(qa.invalidToken("Organization Id (org_id) claim must be a string present in the ID token"));if(p.org_id!==c)return h(qa.invalidToken('Organization Id (org_id) claim value mismatch in the ID token; expected "'+c+'", found "'+p.org_id+'"'))}return e.access_token&&p.at_hash?new Ic().validateAccessToken(e.access_token,"RS256",p.at_hash,function(g){return g?h(qa.invalidToken(g.message)):h(null,p)}):h(null,p)}if(u.error!=="invalid_token"||u.errorDescription&&u.errorDescription.indexOf("Nonce (nonce) claim value mismatch in the ID token")>-1)return h(u);var f=new Ic().decode(e.id_token);return f.header.alg!=="HS256"?h(u):(f.payload.nonce||null)!==l?h({error:"invalid_token",errorDescription:'Nonce (nonce) claim value mismatch in the ID token; expected "'+l+'", found "'+f.payload.nonce+'"'}):e.access_token?i.client.userInfo(e.access_token,function(g,m){return g?h(g):h(null,m)}):h({error:"invalid_token",description:"The id_token cannot be validated because it was signed with the HS256 algorithm and public clients (like a browser) canât store secrets. Please read the associated doc for possible ways to fix this. Read more: https://auth0.com/docs/errors/libraries/auth0-js/invalid-token#parsing-an-hs256-signed-id-token-without-an-access-token"})}):h(null,null)},jt.prototype.validateToken=function(r,e,t){new Ic({issuer:this.baseOptions.token_issuer,jwksURI:this.baseOptions.jwksURI,audience:this.baseOptions.clientID,leeway:this.baseOptions.leeway||60,maxAge:this.baseOptions.maxAge,__clock:this.baseOptions.__clock||a8}).verify(r,e,function(i,s){if(i)return t(qa.invalidToken(i.message));t(null,s)})},jt.prototype.renewAuth=function(r,e){var t=!!r.usePostMessage,i=r.postMessageDataType||!1,s=r.postMessageOrigin||pt.getWindow().origin,n=r.timeout,o=this,a=pe.merge(this.baseOptions,["clientID","redirectUri","responseType","scope","audience","_csrf","state","_intstate","nonce"]).with(r);a.responseType=a.responseType||"token",a.responseMode=a.responseMode||"fragment",a=this.transactionManager.process(a),Fe.check(a,{type:"object",message:"options parameter is not valid"}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),a.prompt="none",a=pe.blacklist(a,["usePostMessage","tenant","postMessageDataType","postMessageOrigin"]),_h.create({authenticationUrl:this.client.buildAuthorizeUrl(a),postMessageDataType:i,postMessageOrigin:s,timeout:n}).login(t,function(l,c){if(typeof c=="object")return e(l,c);o.parseHash({hash:c},e)})},jt.prototype.checkSession=function(r,e){var t=pe.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(r);return t.responseType==="code"?e({error:"error",error_description:"responseType can't be `code`"}):(r.nonce||(t=this.transactionManager.process(t)),t.redirectUri?(Fe.check(t,{type:"object",message:"options parameter is not valid"}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=pe.blacklist(t,["usePostMessage","tenant","postMessageDataType"]),void this.webMessageHandler.run(t,Pi(e,{forceLegacyError:!0,ignoreCasing:!0}))):e({error:"error",error_description:"redirectUri can't be empty"}))},jt.prototype.changePassword=function(r,e){return this.client.dbConnection.changePassword(r,e)},jt.prototype.passwordlessStart=function(r,e){var t=pe.merge(this.baseOptions,["responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(r.authParams);return r.authParams=this.transactionManager.process(t),this.client.passwordless.start(r,e)},jt.prototype.signup=function(r,e){return this.client.dbConnection.signup(r,e)},jt.prototype.authorize=function(r){var e=pe.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","organization","invitation"]).with(r);Fe.check(e,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(e=this.transactionManager.process(e)).scope=e.scope||"openid profile email",pt.redirect(this.client.buildAuthorizeUrl(e))},jt.prototype.signupAndAuthorize=function(r,e){var t=this;return this.client.dbConnection.signup(pe.blacklist(r,["popupHandler"]),function(i){if(i)return e(i);r.realm=r.connection,r.username||(r.username=r.email),t.client.login(r,e)})},jt.prototype.login=function(r,e){var t=pe.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting","organization","invitation"]).with(r);t=this.transactionManager.process(t),pt.getWindow().location.host===this.baseOptions.domain?(t.connection=t.realm,delete t.realm,this._universalLogin.login(t,e)):this.crossOriginAuthentication.login(t,e)},jt.prototype.passwordlessLogin=function(r,e){var t=pe.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(r);if(t=this.transactionManager.process(t),pt.getWindow().location.host===this.baseOptions.domain)this.passwordlessVerify(t,e);else{var i=pe.extend({credentialType:"http://auth0.com/oauth/grant-type/passwordless/otp",realm:t.connection,username:t.email||t.phoneNumber,otp:t.verificationCode},pe.blacklist(t,["connection","email","phoneNumber","verificationCode"]));this.crossOriginAuthentication.login(i,e)}},jt.prototype.crossOriginAuthenticationCallback=function(){this.crossOriginVerification()},jt.prototype.crossOriginVerification=function(){this.crossOriginAuthentication.callback()},jt.prototype.logout=function(r){pt.redirect(this.client.buildLogoutUrl(r))},jt.prototype.passwordlessVerify=function(r,e){var t=this,i=pe.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(r);return Fe.check(i,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),i=this.transactionManager.process(i),this.client.passwordless.verify(i,function(s){if(s)return e(s);function n(){pt.redirect(t.client.passwordless.buildVerifyUrl(i))}if(typeof r.onRedirecting=="function")return r.onRedirecting(function(){n()});n()})},jt.prototype.renderCaptcha=function(r,e,t){return BT.render(this.client,r,e,t)},jt.prototype.renderPasswordlessCaptcha=function(r,e,t){return BT.renderPasswordless(this.client,r,e,t)},Zp.prototype.buildVerifyUrl=function(r){var e,t;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(i){return!i.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(i){return!i.phoneNumber}}}),e=pe.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","protocol","nonce"]).with(r),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e=pe.toSnakeCase(e,["auth0Client"]),t=dl.stringify(e),ui(this.baseOptions.rootUrl,"passwordless","verify_redirect","?"+t)},Zp.prototype.start=function(r,e){var t,i;Fe.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},send:{type:"string",message:"send option is required",values:["link","code"],value_message:"send is not valid ([link, code])"},phoneNumber:{optional:!0,type:"string",message:"phoneNumber option is required",condition:function(o){return o.send==="code"||!o.email}},email:{optional:!0,type:"string",message:"email option is required",condition:function(o){return o.send==="link"||!o.phoneNumber}},authParams:{optional:!0,type:"object",message:"authParams option is required"}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"passwordless","start");var s=r.xRequestLanguage;delete r.xRequestLanguage,(i=pe.merge(this.baseOptions,["clientID","responseType","redirectUri","scope"]).with(r)).scope&&(i.authParams=i.authParams||{},i.authParams.scope=i.authParams.scope||i.scope),i.redirectUri&&(i.authParams=i.authParams||{},i.authParams.redirect_uri=i.authParams.redirectUri||i.redirectUri),i.responseType&&(i.authParams=i.authParams||{},i.authParams.response_type=i.authParams.responseType||i.responseType),delete i.redirectUri,delete i.responseType,delete i.scope,i=pe.toSnakeCase(i,["auth0Client","authParams"]);var n=s?{xRequestLanguage:s}:void 0;return this.request.post(t,n).send(i).end(Pi(e))},Zp.prototype.verify=function(r,e){var t,i;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(s){return!s.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(s){return!s.phoneNumber}}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),i=pe.pick(r,["connection","verificationCode","phoneNumber","email","auth0Client","clientID"]),i=pe.toSnakeCase(i,["auth0Client"]),t=ui(this.baseOptions.rootUrl,"passwordless","verify"),this.request.post(t).send(i).end(Pi(e))},Zp.prototype.getChallenge=function(r){if(Fe.check(r,{type:"function",message:"cb parameter is not valid"}),!this.baseOptions.state)return r();var e=ui(this.baseOptions.rootUrl,"passwordless","challenge");return this.request.post(e).send({state:this.baseOptions.state}).end(Pi(r,{ignoreCasing:!0}))},nw.prototype.signup=function(r,e){var t,i,s;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"},password:{type:"string",message:"password option is required"}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"dbconnections","signup"),s=(i=pe.merge(this.baseOptions,["clientID","state"]).with(r)).user_metadata||i.userMetadata,i=pe.blacklist(i,["scope","userMetadata","user_metadata"]),i=pe.toSnakeCase(i,["auth0Client"]),s&&(i.user_metadata=s),this.request.post(t).send(i).end(Pi(e))},nw.prototype.changePassword=function(r,e){var t,i;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"dbconnections","change_password"),i=pe.merge(this.baseOptions,["clientID"]).with(r,["email","connection"]),i=pe.toSnakeCase(i,["auth0Client"]),this.request.post(t).send(i).end(Pi(e))},On.prototype.buildAuthorizeUrl=function(r){var e,t;return Fe.check(r,{type:"object",message:"options parameter is not valid"}),e=pe.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience"]).with(r),Fe.check(e,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},redirectUri:{optional:!0,type:"string",message:"redirectUri option is required"},responseType:{type:"string",message:"responseType option is required"},nonce:{type:"string",message:"nonce option is required",condition:function(i){return i.responseType.indexOf("code")===-1&&i.responseType.indexOf("id_token")!==-1}},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e.connection_scope&&Fe.isArray(e.connection_scope)&&(e.connection_scope=e.connection_scope.join(",")),e=pe.blacklist(e,["username","popupOptions","domain","tenant","timeout","appState"]),e=pe.toSnakeCase(e,["auth0Client"]),e=OT.oauthAuthorizeParams(this.warn,e),t=dl.stringify(e),ui(this.baseOptions.rootUrl,"authorize","?"+t)},On.prototype.buildLogoutUrl=function(r){var e,t;return Fe.check(r,{optional:!0,type:"object",message:"options parameter is not valid"}),e=pe.merge(this.baseOptions,["clientID"]).with(r||{}),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e=pe.toSnakeCase(e,["auth0Client","returnTo"]),t=dl.stringify(pe.blacklist(e,["federated"])),r&&r.federated!==void 0&&r.federated!==!1&&r.federated!=="false"&&(t+="&federated"),ui(this.baseOptions.rootUrl,"v2","logout","?"+t)},On.prototype.loginWithDefaultDirectory=function(r,e){return Fe.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),r.grantType="password",this.oauthToken(r,e)},On.prototype.login=function(r,e){return Fe.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},realm:{type:"string",message:"realm option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),r.grantType="http://auth0.com/oauth/grant-type/password-realm",this.oauthToken(r,e)},On.prototype.oauthToken=function(r,e){var t,i;return Fe.check(r,{type:"object",message:"options parameter is not valid"}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"oauth","token"),i=pe.merge(this.baseOptions,["clientID","scope","audience"]).with(r),Fe.check(i,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},grantType:{type:"string",message:"grantType option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),i=pe.toSnakeCase(i,["auth0Client"]),i=OT.oauthTokenParams(this.warn,i),this.request.post(t).send(i).end(Pi(e))},On.prototype.loginWithResourceOwner=function(r,e){var t,i;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},connection:{type:"string",message:"connection option is required"},scope:{optional:!0,type:"string",message:"scope option is required"}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"oauth","ro"),i=pe.merge(this.baseOptions,["clientID","scope"]).with(r,["username","password","scope","connection","device"]),(i=pe.toSnakeCase(i,["auth0Client"])).grant_type=i.grant_type||"password",this.request.post(t).send(i).end(Pi(e))},On.prototype.getSSOData=function(r,e){if(this.auth0||(this.auth0=new jt(this.baseOptions)),pt.getWindow().location.host===this.baseOptions.domain)return this.auth0._universalLogin.getSSOData(r,e);typeof r=="function"&&(e=r),Fe.check(e,{type:"function",message:"cb parameter is not valid"});var t=this.baseOptions.clientID,i=this.ssodataStorage.get()||{};this.auth0.checkSession({responseType:"token id_token",scope:"openid profile email",connection:i.lastUsedConnection,timeout:5e3},function(s,n){return s?s.error==="login_required"?e(null,{sso:!1}):(s.error==="consent_required"&&(s.error_description="Consent required. When using `getSSOData`, the user has to be authenticated with the following scope: `openid profile email`."),e(s,{sso:!1})):i.lastUsedSub&&i.lastUsedSub!==n.idTokenPayload.sub?e(s,{sso:!1}):e(null,{lastUsedConnection:{name:i.lastUsedConnection},lastUsedUserID:n.idTokenPayload.sub,lastUsedUsername:n.idTokenPayload.email||n.idTokenPayload.name,lastUsedClientID:t,sessionClients:[t],sso:!0})})},On.prototype.userInfo=function(r,e){var t;return Fe.check(r,{type:"string",message:"accessToken parameter is not valid"}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"userinfo"),this.request.get(t).set("Authorization","Bearer "+r).end(Pi(e,{ignoreCasing:!0}))},On.prototype.getChallenge=function(r){if(Fe.check(r,{type:"function",message:"cb parameter is not valid"}),!this.baseOptions.state)return r();var e=ui(this.baseOptions.rootUrl,"usernamepassword","challenge");return this.request.post(e).send({state:this.baseOptions.state}).end(Pi(r,{ignoreCasing:!0}))},On.prototype.delegation=function(r,e){var t,i;return Fe.check(r,{type:"object",message:"options parameter is not valid"},{grant_type:{type:"string",message:"grant_type option is required"}}),Fe.check(e,{type:"function",message:"cb parameter is not valid"}),t=ui(this.baseOptions.rootUrl,"delegation"),i=pe.merge(this.baseOptions,["clientID"]).with(r),i=pe.toSnakeCase(i,["auth0Client"]),this.request.post(t).send(i).end(Pi(e))},On.prototype.getUserCountry=function(r){var e;return Fe.check(r,{type:"function",message:"cb parameter is not valid"}),e=ui(this.baseOptions.rootUrl,"user","geoloc","country"),this.request.get(e).end(Pi(r))};const l8={auth0:{},setCredentials(r){this.auth0=new jt({domain:r.customdomain,clientID:r.clientId,redirectUri:r.redirectUri,audience:`https://${r.domain}/userinfo`,responseType:"token id_token",scope:"openid"})},async loadUser(r){const e=jL();e.onlineStatus=await Ly.getOnlineStatus(r,e),iC.set(e),Ly.updateLogin(r.id,e)},async checkAuth(r){if(r.authLevel>0)if(BL())this.loadUser(r);else return localStorage.setItem("course_url",r.url),this.login(this.auth0),!1;return!0},async handleAuthentication(r,e){const t=new URLSearchParams(r),i=t.get("access_token"),s=t.get("id_token");if(i&&s)try{const n=await this.getUserInfo(i);UL(n);const o=localStorage.getItem("course_url"),a=o.replace(".netlify.app","");Ly.updateLogin(a,n),n.userId=Bp(n.email),zL(t),e(o)}catch(n){console.log("Error loading the Profile",n)}},async getUserInfo(r){return new Promise((e,t)=>{this.auth0.client.userInfo(r,(i,s)=>{i?t(i):e(s)})})},login(r){r.authorize({prompt:"login",scope:"openid profile email"})}};function c8(r){let e;return{c(){e=Ra("Labs")},l(t){e=Ta(t,"Labs")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function d8(r){let e;return{c(){e=Ra("LabsChart")},l(t){e=Ta(t,"LabsChart")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function h8(r){let e;return{c(){e=Ra("Calendar")},l(t){e=Ta(t,"Calendar")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function WT(r){let e,t,i,s=r[0].course.hasEnrollment(),n,o,a,l,c,d,h;function u(y){r[8](y)}let p={name:"LabsAllStudent",value:3,$$slots:{default:[u8]},$$scope:{ctx:r}};r[2]!==void 0&&(p.group=r[2]),e=new Gc({props:p}),Ps.push(()=>Fc(e,"group",u));let f=s&&UT(r);function g(y){r[10](y)}let m={name:"allLabsChart",value:5,$$slots:{default:[f8]},$$scope:{ctx:r}};r[2]!==void 0&&(m.group=r[2]),o=new Gc({props:m}),Ps.push(()=>Fc(o,"group",g));function v(y){r[11](y)}let C={name:"allLabsChart",value:6,$$slots:{default:[g8]},$$scope:{ctx:r}};return r[2]!==void 0&&(C.group=r[2]),c=new Gc({props:C}),Ps.push(()=>Fc(c,"group",v)),{c(){vi(e.$$.fragment),i=gi(),f&&f.c(),n=gi(),vi(o.$$.fragment),l=gi(),vi(c.$$.fragment)},l(y){Ci(e.$$.fragment,y),i=mi(y),f&&f.l(y),n=mi(y),Ci(o.$$.fragment,y),l=mi(y),Ci(c.$$.fragment,y)},m(y,R){yi(e,y,R),ze(y,i,R),f&&f.m(y,R),ze(y,n,R),yi(o,y,R),ze(y,l,R),yi(c,y,R),h=!0},p(y,R){const b={};R&32768&&(b.$$scope={dirty:R,ctx:y}),!t&&R&4&&(t=!0,b.group=y[2],Nc(()=>t=!1)),e.$set(b),R&1&&(s=y[0].course.hasEnrollment()),s?f?(f.p(y,R),R&1&&Ye(f,1)):(f=UT(y),f.c(),Ye(f,1),f.m(n.parentNode,n)):f&&(Yf(),lt(f,1,1,()=>{f=null}),Xf());const w={};R&32768&&(w.$$scope={dirty:R,ctx:y}),!a&&R&4&&(a=!0,w.group=y[2],Nc(()=>a=!1)),o.$set(w);const x={};R&32768&&(x.$$scope={dirty:R,ctx:y}),!d&&R&4&&(d=!0,x.group=y[2],Nc(()=>d=!1)),c.$set(x)},i(y){h||(Ye(e.$$.fragment,y),Ye(f),Ye(o.$$.fragment,y),Ye(c.$$.fragment,y),h=!0)},o(y){lt(e.$$.fragment,y),lt(f),lt(o.$$.fragment,y),lt(c.$$.fragment,y),h=!1},d(y){Si(e,y),y&&de(i),f&&f.d(y),y&&de(n),Si(o,y),y&&de(l),Si(c,y)}}}function u8(r){let e;return{c(){e=Ra("Labs All Student")},l(t){e=Ta(t,"Labs All Student")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function UT(r){let e,t,i;function s(o){r[9](o)}let n={name:"LabsAllStudent",value:4,$$slots:{default:[p8]},$$scope:{ctx:r}};return r[2]!==void 0&&(n.group=r[2]),e=new Gc({props:n}),Ps.push(()=>Fc(e,"group",s)),{c(){vi(e.$$.fragment)},l(o){Ci(e.$$.fragment,o)},m(o,a){yi(e,o,a),i=!0},p(o,a){const l={};a&32768&&(l.$$scope={dirty:a,ctx:o}),!t&&a&4&&(t=!0,l.group=o[2],Nc(()=>t=!1)),e.$set(l)},i(o){i||(Ye(e.$$.fragment,o),i=!0)},o(o){lt(e.$$.fragment,o),i=!1},d(o){Si(e,o)}}}function p8(r){let e;return{c(){e=Ra("Labs All Enrolled Student")},l(t){e=Ta(t,"Labs All Enrolled Student")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function f8(r){let e;return{c(){e=Ra("Labs All Students - Chart")},l(t){e=Ta(t,"Labs All Students - Chart")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function g8(r){let e;return{c(){e=Ra("Calendar All Students")},l(t){e=Ta(t,"Calendar All Students")},m(t,i){ze(t,e,i)},d(t){t&&de(e)}}}function m8(r){let e,t,i,s,n,o,a,l,c,d,h;function u(y){r[5](y)}let p={name:"Labs",value:0,$$slots:{default:[c8]},$$scope:{ctx:r}};r[2]!==void 0&&(p.group=r[2]),e=new Gc({props:p}),Ps.push(()=>Fc(e,"group",u));function f(y){r[6](y)}let g={name:"LabsChart",value:1,$$slots:{default:[d8]},$$scope:{ctx:r}};r[2]!==void 0&&(g.group=r[2]),s=new Gc({props:g}),Ps.push(()=>Fc(s,"group",f));function m(y){r[7](y)}let v={name:"Calendar",value:2,$$slots:{default:[h8]},$$scope:{ctx:r}};r[2]!==void 0&&(v.group=r[2]),a=new Gc({props:v}),Ps.push(()=>Fc(a,"group",m));let C=r[1]&&WT(r);return{c(){vi(e.$$.fragment),i=gi(),vi(s.$$.fragment),o=gi(),vi(a.$$.fragment),c=gi(),C&&C.c(),d=dx()},l(y){Ci(e.$$.fragment,y),i=mi(y),Ci(s.$$.fragment,y),o=mi(y),Ci(a.$$.fragment,y),c=mi(y),C&&C.l(y),d=dx()},m(y,R){yi(e,y,R),ze(y,i,R),yi(s,y,R),ze(y,o,R),yi(a,y,R),ze(y,c,R),C&&C.m(y,R),ze(y,d,R),h=!0},p(y,R){const b={};R&32768&&(b.$$scope={dirty:R,ctx:y}),!t&&R&4&&(t=!0,b.group=y[2],Nc(()=>t=!1)),e.$set(b);const w={};R&32768&&(w.$$scope={dirty:R,ctx:y}),!n&&R&4&&(n=!0,w.group=y[2],Nc(()=>n=!1)),s.$set(w);const x={};R&32768&&(x.$$scope={dirty:R,ctx:y}),!l&&R&4&&(l=!0,x.group=y[2],Nc(()=>l=!1)),a.$set(x),y[1]?C?(C.p(y,R),R&2&&Ye(C,1)):(C=WT(y),C.c(),Ye(C,1),C.m(d.parentNode,d)):C&&(Yf(),lt(C,1,1,()=>{C=null}),Xf())},i(y){h||(Ye(e.$$.fragment,y),Ye(s.$$.fragment,y),Ye(a.$$.fragment,y),Ye(C),h=!0)},o(y){lt(e.$$.fragment,y),lt(s.$$.fragment,y),lt(a.$$.fragment,y),lt(C),h=!1},d(y){Si(e,y),y&&de(i),Si(s,y),y&&de(o),Si(a,y),y&&de(c),C&&C.d(y),y&&de(d)}}}function v8(r){let e,t;return e=new Fz({props:{userMap:r[0].users,calendarData:r[0].calendar}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.userMap=i[0].users),s&1&&(n.calendarData=i[0].calendar),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function C8(r){let e,t;return e=new zE({props:{userMap:r[0].users,allLabs:r[0].allLabs,chart:!0}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.userMap=i[0].users),s&1&&(n.allLabs=i[0].allLabs),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function y8(r){let e,t;return e=new zE({props:{userMap:r[0].enrolledUsers,allLabs:r[0].allLabs,chart:!1}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.userMap=i[0].enrolledUsers),s&1&&(n.allLabs=i[0].allLabs),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function S8(r){let e,t;return e=new zE({props:{userMap:r[0].users,allLabs:r[0].allLabs,chart:!1}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.userMap=i[0].users),s&1&&(n.allLabs=i[0].allLabs),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function w8(r){let e,t;return e=new kz({props:{user:r[0].user,calendarData:r[0].calendar}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.user=i[0].user),s&1&&(n.calendarData=i[0].calendar),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function b8(r){let e,t;return e=new V_({props:{user:r[0].user,allLabs:r[0].allLabs,chart:!0}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.user=i[0].user),s&1&&(n.allLabs=i[0].allLabs),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function E8(r){let e,t;return e=new V_({props:{user:r[0].user,allLabs:r[0].allLabs,chart:!1}}),{c(){vi(e.$$.fragment)},l(i){Ci(e.$$.fragment,i)},m(i,s){yi(e,i,s),t=!0},p(i,s){const n={};s&1&&(n.user=i[0].user),s&1&&(n.allLabs=i[0].allLabs),e.$set(n)},i(i){t||(Ye(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){Si(e,i)}}}function x8(r){var g;let e,t,i,s,n,o,a,l,c,d,h;i=new SI({props:{title:r[0].course.lo.title,subTitle:(g=r[3])==null?void 0:g.name}}),o=new FI({props:{selected:r[4],$$slots:{default:[m8]},$$scope:{ctx:r}}});const u=[E8,b8,w8,S8,y8,C8,v8],p=[];function f(m,v){return m[2]===0?0:m[2]===1?1:m[2]===2?2:m[2]===3?3:m[2]===4?4:m[2]===5?5:m[2]===6?6:-1}return~(l=f(r))&&(c=p[l]=u[l](r)),{c(){e=tt("link"),t=gi(),vi(i.$$.fragment),s=gi(),n=tt("div"),vi(o.$$.fragment),a=gi(),c&&c.c(),this.h()},l(m){const v=xI("svelte-gqnbut",document.head);e=it(v,"LINK",{rel:!0,href:!0}),v.forEach(de),t=mi(m),Ci(i.$$.fragment,m),s=mi(m),n=it(m,"DIV",{class:!0});var C=at(n);Ci(o.$$.fragment,C),a=mi(C),c&&c.l(C),C.forEach(de),this.h()},h(){Ce(e,"rel","stylesheet"),Ce(e,"href","https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-grid.css"),Ce(n,"class","bg-base-200 mt-3 ")},m(m,v){bt(document.head,e),ze(m,t,v),yi(i,m,v),ze(m,s,v),ze(m,n,v),yi(o,n,null),bt(n,a),~l&&p[l].m(n,null),h=!0},p(m,[v]){var b;const C={};v&1&&(C.title=m[0].course.lo.title),v&8&&(C.subTitle=(b=m[3])==null?void 0:b.name),i.$set(C);const y={};v&32775&&(y.$$scope={dirty:v,ctx:m}),o.$set(y);let R=l;l=f(m),l===R?~l&&p[l].p(m,v):(c&&(Yf(),lt(p[R],1,1,()=>{p[R]=null}),Xf()),~l?(c=p[l],c?c.p(m,v):(c=p[l]=u[l](m),c.c()),Ye(c,1),c.m(n,null)):c=null)},i(m){h||(Ye(i.$$.fragment,m),Ye(o.$$.fragment,m),Ye(c),d||RI(()=>{d=TI(n,OI,{duration:500}),d.start()}),h=!0)},o(m){lt(i.$$.fragment,m),lt(o.$$.fragment,m),lt(c),h=!1},d(m){de(e),m&&de(t),Si(i,m),m&&de(s),m&&de(n),Si(o),~l&&p[l].d()}}}function R8(r,e,t){let i,s;cx(r,ow,C=>t(13,i=C)),cx(r,iC,C=>t(3,s=C));let{data:n}=e;const o=DI("Labs");let a="",l=!1,c=0;qf(async()=>{window.addEventListener("keydown",d),l8.checkAuth(i)});function d(C){a=a.concat(C.key),a===n.ignorePin&&t(1,l=!0)}function h(C){c=C,t(2,c)}function u(C){c=C,t(2,c)}function p(C){c=C,t(2,c)}function f(C){c=C,t(2,c)}function g(C){c=C,t(2,c)}function m(C){c=C,t(2,c)}function v(C){c=C,t(2,c)}return r.$$set=C=>{"data"in C&&t(0,n=C.data)},[n,l,c,s,o,h,u,p,f,g,m,v]}class G5 extends fd{constructor(e){super(),gd(this,e,R8,x8,md,{data:0})}}export{G5 as component,_8 as universal};
